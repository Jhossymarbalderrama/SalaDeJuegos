"use strict";var c8=Object.defineProperty,d8=Object.defineProperties,h8=Object.getOwnPropertyDescriptors,UB=Object.getOwnPropertySymbols,f8=Object.prototype.hasOwnProperty,p8=Object.prototype.propertyIsEnumerable,BB=(rt,ve,L)=>ve in rt?c8(rt,ve,{enumerable:!0,configurable:!0,writable:!0,value:L}):rt[ve]=L,jB=(rt,ve)=>{for(var L in ve||(ve={}))f8.call(ve,L)&&BB(rt,L,ve[L]);if(UB)for(var L of UB(ve))p8.call(ve,L)&&BB(rt,L,ve[L]);return rt},HB=(rt,ve)=>d8(rt,h8(ve));(self.webpackChunkSalaDeJuegos=self.webpackChunkSalaDeJuegos||[]).push([[179],{4738:(rt,ve,L)=>{L.d(ve,{M:()=>me});var T=L(5e3),_=L(2284),fe=L(5592);let me=(()=>{class k{constructor(K,Ce){this.router=K,this.AuthService=Ce,this.usuarioLogin=this.AuthService.usuarioLogueado}ngOnInit(){}}return k.\u0275fac=function(K){return new(K||k)(T.Y36(_.F0),T.Y36(fe.e))},k.\u0275cmp=T.Xpm({type:k,selectors:[["app-menu"]],decls:31,vars:1,consts:[[1,"menu"],[1,"d-flex","flex-wrap","align-items-center","justify-content-center","justify-content-lg-start"],[2,"text-align","start"],["routerLink","/home",1,"d-flex","align-items-center","mb-2","mb-lg-0","text-white","text-decoration-none",2,"margin-right","2em","cursor","pointer"],["src","../../../favicon.ico","height","65px"],[1,"nav","col-12","col-lg-auto","me-lg-auto","mb-2","justify-content-center","mb-md-0"],["routerLink","/home",1,"nav-link","px-2","text-secondary","item-menu"],[1,"dropdown"],[1,"nav-link","px-2","text-white"],[1,"dropdown-content"],["routerLink","/juegos/ahorcado"],["routerLink","/juegos/mayor-menor"],["routerLink","/juegos/preguntados"],["routerLink","/juegos/black-jack"],["routerLink","/chat",1,"nav-link","px-2","text-white","item-menu"],["routerLink","/quienSoy",1,"nav-link","px-2","text-white","item-menu"],[2,"color","white","opacity","50%","padding-right","15px"],["type","button","routerLink","/login",1,"btn","button"]],template:function(K,Ce){1&K&&(T.TgZ(0,"div",0)(1,"nav",1)(2,"div",2)(3,"a",3),T._UZ(4,"img",4),T.qZA()(),T.TgZ(5,"ul",5)(6,"li")(7,"a",6),T._uU(8," Home"),T.qZA()(),T.TgZ(9,"li",7)(10,"a",8),T._uU(11,"Juegos"),T.qZA(),T.TgZ(12,"div",9)(13,"a",10),T._uU(14,"Ahorcado"),T.qZA(),T.TgZ(15,"a",11),T._uU(16,"Mayor o Menor"),T.qZA(),T.TgZ(17,"a",12),T._uU(18,"Preguntados"),T.qZA(),T.TgZ(19,"a",13),T._uU(20,"Black Jack"),T.qZA()()(),T.TgZ(21,"li")(22,"a",14),T._uU(23,"Chats"),T.qZA()(),T.TgZ(24,"li")(25,"a",15),T._uU(26,"Quien Soy"),T.qZA()()(),T.TgZ(27,"a",16),T._uU(28),T.qZA(),T.TgZ(29,"button",17),T._uU(30,"Cerrar Sesion"),T.qZA()()()),2&K&&(T.xp6(28),T.hij("\xa1Bienvenido ",Ce.usuarioLogin.correo,"!"))},directives:[_.yS,_.rH],styles:[".menu[_ngcontent-%COMP%]{width:100%;padding:2em 5em;position:absolute;font-weight:700;font-size:18px}.item-menu[_ngcontent-%COMP%]{cursor:pointer}.button[_ngcontent-%COMP%]{border-radius:1em;border:1px solid #07275c;background-color:#07275c;color:#fff;font-size:18px;letter-spacing:1px;text-transform:uppercase;transition:transform 80ms ease-in;font-size:16px;font-weight:700;padding:.5em 2em;cursor:pointer}button[_ngcontent-%COMP%]:active{transform:scale(.95)}button[_ngcontent-%COMP%]:focus{outline:none}.dropdown[_ngcontent-%COMP%]{position:relative;display:inline-block;cursor:pointer}.dropdown-content[_ngcontent-%COMP%]{display:none;position:absolute;background-color:#bcc4cdab;min-width:200px;box-shadow:0 8px 16px #0003;z-index:999;cursor:pointer}.dropdown-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;padding:12px 16px;text-decoration:none;display:block}.dropdown-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#212529d0;color:#fff}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-content[_ngcontent-%COMP%]{display:block}"]}),k})()},5592:(rt,ve,L)=>{L.d(ve,{e:()=>fe});var T=L(5e3),_=L(2284);let fe=(()=>{class me{constructor(ue){this.Router=ue,null==this.usuarioLogueado&&this.Router.navigateByUrl("/login")}}return me.\u0275fac=function(ue){return new(ue||me)(T.LFG(_.F0))},me.\u0275prov=T.Yz7({token:me,factory:me.\u0275fac,providedIn:"root"}),me})()},1840:(rt,ve,L)=>{var T=L(2313),_=L(5e3),fe=L(2284);function me(n,e,t,r,i,a,u){try{var d=n[a](u),p=d.value}catch(g){return void t(g)}d.done?e(p):Promise.resolve(p).then(r,i)}function k(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var a=n.apply(e,t);function u(p){me(a,r,i,u,d,"next",p)}function d(p){me(a,r,i,u,d,"throw",p)}u(void 0)})}}const K=function(n,e){if(!n)throw Ce(e)},Ce=function(n){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+n)},Fe=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):55296==(64512&i)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],u=i+1<n.length,d=u?n[i+1]:0,p=i+2<n.length,g=p?n[i+2]:0;let R=(15&d)<<2|g>>6,U=63&g;p||(U=64,u||(R=64)),r.push(t[a>>2],t[(3&a)<<4|d>>4],t[R],t[U])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Fe(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){const p=((7&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(1023&p))}else{const a=n[t++],u=n[t++];e[r++]=String.fromCharCode((15&i)<<12|(63&a)<<6|63&u)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],d=i<n.length?t[n.charAt(i)]:0;++i;const g=i<n.length?t[n.charAt(i)]:64;++i;const A=i<n.length?t[n.charAt(i)]:64;if(++i,null==a||null==d||null==g||null==A)throw Error();r.push(a<<2|d>>4),64!==g&&(r.push(d<<4&240|g>>2),64!==A&&r.push(g<<6&192|A))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Ie=function(n){const e=Fe(n);return ae.encodeByteArray(e,!0)},ht=function(n){return Ie(n).replace(/\./g,"")},Ve=function(n){try{return ae.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function $e(n){return nt(void 0,n)}function nt(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===n&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!De(t)||(n[t]=nt(n[t],e[t]));return n}function De(n){return"__proto__"!==n}class st{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function ft(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Pe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ft())}function We(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}function gt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _e(){return"object"==typeof indexedDB}function oe(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e((null===(a=i.error)||void 0===a?void 0:a.message)||"")}}catch(t){e(t)}})}function Ue(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Wt extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,Wt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ge.prototype.create)}}class Ge{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],u=a?function zn(n,e){return n.replace(yr,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(a,r):"Error";return new Wt(i,`${this.serviceName}: ${u} (${i}).`,r)}}const yr=/\{\$([^}]+)}/g;function Se(n){return JSON.parse(n)}function se(n){return JSON.stringify(n)}const Z=function(n){let e={},t={},r={},i="";try{const a=n.split(".");e=Se(Ve(a[0])||""),t=Se(Ve(a[1])||""),i=a[2],r=t.d||{},delete t.d}catch(a){}return{header:e,claims:t,data:r,signature:i}};function An(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function En(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function On(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Jn(n,e,t){const r={};for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function Bn(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],u=e[i];if(es(a)&&es(u)){if(!Bn(a,u))return!1}else if(a!==u)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function es(n){return null!==n&&"object"==typeof n}function ui(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class go{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if("string"==typeof e)for(let A=0;A<16;A++)r[A]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let A=0;A<16;A++)r[A]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let A=16;A<80;A++){const R=r[A-3]^r[A-8]^r[A-14]^r[A-16];r[A]=4294967295&(R<<1|R>>>31)}let g,C,i=this.chain_[0],a=this.chain_[1],u=this.chain_[2],d=this.chain_[3],p=this.chain_[4];for(let A=0;A<80;A++){A<40?A<20?(g=d^a&(u^d),C=1518500249):(g=a^u^d,C=1859775393):A<60?(g=a&u|d&(a|u),C=2400959708):(g=a^u^d,C=3395469782);const R=(i<<5|i>>>27)+g+p+C+r[A]&4294967295;p=d,d=u,u=4294967295&(a<<30|a>>>2),a=i,i=R}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+d&4294967295,this.chain_[4]=this.chain_[4]+p&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const r=t-this.blockSize;let i=0;const a=this.buf_;let u=this.inbuf_;for(;i<t;){if(0===u)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<t;)if(a[u]=e.charCodeAt(i),++u,++i,u===this.blockSize){this.compress_(a),u=0;break}}else for(;i<t;)if(a[u]=e[i],++u,++i,u===this.blockSize){this.compress_(a),u=0;break}}this.inbuf_=u,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&t,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}class be{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");i=function Y(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},void 0===i.next&&(i.next=ke),void 0===i.error&&(i.error=ke),void 0===i.complete&&(i.complete=ke);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(u){}}),this.observers.push(i),a}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ke(){}function Re(n,e){return`${n} failed: ${e} argument `}const dr=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};function Ti(n,e=1e3,t=2){const r=e*Math.pow(t,n),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function Cn(n){return n&&n._delegate?n._delegate:n}class Yt{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const jn="[DEFAULT]";class jo{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new st;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch(i){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function ts(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:jn})}catch(t){}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch(a){}}}}clearInstance(e=jn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return k(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=jn){return this.instances.has(e)}getOptions(e=jn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,u]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(a)&&u.resolve(i);return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),a=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const u=this.instances.get(i);return u&&e(u,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch(a){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===jn?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(i){}var n;return r||null}normalizeInstanceIdentifier(e=jn){return this.component?this.component.multipleInstances?e:jn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class mo{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new jo(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Vi=[];var zt=(()=>{return(n=zt||(zt={}))[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",zt;var n})();const ee={debug:zt.DEBUG,verbose:zt.VERBOSE,info:zt.INFO,warn:zt.WARN,error:zt.ERROR,silent:zt.SILENT},q=zt.INFO,j={[zt.DEBUG]:"log",[zt.VERBOSE]:"log",[zt.INFO]:"info",[zt.WARN]:"warn",[zt.ERROR]:"error"},Q=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),i=j[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${n.name}:`,...t)};class we{constructor(e){this.name=e,this._logLevel=q,this._logHandler=Q,this._userLogHandler=null,Vi.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in zt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?ee[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,zt.DEBUG,...e),this._logHandler(this,zt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,zt.VERBOSE,...e),this._logHandler(this,zt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,zt.INFO,...e),this._logHandler(this,zt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,zt.WARN,...e),this._logHandler(this,zt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,zt.ERROR,...e),this._logHandler(this,zt.ERROR,...e)}}let Fn,Ui;const or=new WeakMap,ns=new WeakMap,ar=new WeakMap,Ye=new WeakMap,Pt=new WeakMap;let Kr={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return ns.get(n);if("objectStoreNames"===e)return n.objectStoreNames||ar.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Sr(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function Mn(n){return"function"==typeof n?function Ii(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Bi(){return Ui||(Ui=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(rs(this),e),Sr(or.get(this))}:function(...e){return Sr(n.apply(rs(this),e))}:function(e,...t){const r=n.call(rs(this),e,...t);return ar.set(r,e.sort?e.sort():[e]),Sr(r)}}(n):(n instanceof IDBTransaction&&function Er(n){if(ns.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),i()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});ns.set(n,e)}(n),((n,e)=>e.some(t=>n instanceof t))(n,function Cs(){return Fn||(Fn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,Kr):n)}function Sr(n){if(n instanceof IDBRequest)return function bn(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(Sr(n.result)),i()},u=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&or.set(t,n)}).catch(()=>{}),Pt.set(e,n),e}(n);if(Ye.has(n))return Ye.get(n);const e=Mn(n);return e!==n&&(Ye.set(n,e),Pt.set(e,n)),e}const rs=n=>Pt.get(n);function At(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const u=indexedDB.open(n,e),d=Sr(u);return r&&u.addEventListener("upgradeneeded",p=>{r(Sr(u.result),p.oldVersion,p.newVersion,Sr(u.transaction))}),t&&u.addEventListener("blocked",()=>t()),d.then(p=>{a&&p.addEventListener("close",()=>a()),i&&p.addEventListener("versionchange",()=>i())}).catch(()=>{}),d}function Ys(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",()=>e()),Sr(t).then(()=>{})}const Qs=["get","getKey","getAll","getAllKeys","count"],Ba=["put","add","delete","clear"],is=new Map;function hr(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(is.get(e))return is.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=Ba.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Qs.includes(t))return;const a=function(){var u=k(function*(d,...p){const g=this.transaction(d,i?"readwrite":"readonly");let C=g.store;return r&&(C=C.index(p.shift())),(yield Promise.all([C[t](...p),i&&g.done]))[0]});return function(p){return u.apply(this,arguments)}}();return is.set(e,a),a}!function Kn(n){Kr=n(Kr)}(n=>HB(jB({},n),{get:(e,t,r)=>hr(e,t)||n.get(e,t,r),has:(e,t)=>!!hr(e,t)||n.has(e,t)}));class bs{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function Ts(n){const e=n.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const fr="@firebase/app",kr=new we("@firebase/app"),zo="[DEFAULT]",$a={[fr]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Is=new Map,Ds=new Map;function lf(n,e){try{n.container.addComponent(e)}catch(t){kr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function pr(n){const e=n.name;if(Ds.has(e))return kr.debug(`There were multiple attempts to register component ${e}.`),!1;Ds.set(e,n);for(const t of Is.values())lf(t,n);return!0}function Yr(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const ji=new Ge("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class yo{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Yt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ji.create("app-deleted",{appName:this._name})}}const Mr="9.10.0";function Ga(n,e={}){"object"!=typeof e&&(e={name:e});const t=Object.assign({name:zo,automaticDataCollectionEnabled:!1},e),r=t.name;if("string"!=typeof r||!r)throw ji.create("bad-app-name",{appName:String(r)});const i=Is.get(r);if(i){if(Bn(n,i.options)&&Bn(t,i.config))return i;throw ji.create("duplicate-app",{appName:r})}const a=new mo(r);for(const d of Ds.values())a.addComponent(d);const u=new yo(n,t,a);return Is.set(r,u),u}function Di(n=zo){const e=Is.get(n);if(!e)throw ji.create("no-app",{appName:n});return e}function Qr(){return Array.from(Is.values())}function Tn(n,e,t){var r;let i=null!==(r=$a[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const d=[`Unable to register library "${i}" with version "${e}":`];return a&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void kr.warn(d.join(" "))}pr(new Yt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Hi="firebase-heartbeat-store";let Fc=null;function Sn(){return Fc||(Fc=At("firebase-heartbeat-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Hi)}}).catch(n=>{throw ji.create("idb-open",{originalErrorMessage:n.message})})),Fc}function P(){return(P=k(function*(n){var e;try{return(yield Sn()).transaction(Hi).objectStore(Hi).get(G(n))}catch(t){if(t instanceof Wt)kr.warn(t.message);else{const r=ji.create("idb-get",{originalErrorMessage:null===(e=t)||void 0===e?void 0:e.message});kr.warn(r.message)}}})).apply(this,arguments)}function D(n,e){return F.apply(this,arguments)}function F(){return(F=k(function*(n,e){var t;try{const i=(yield Sn()).transaction(Hi,"readwrite");return yield i.objectStore(Hi).put(e,G(n)),i.done}catch(r){if(r instanceof Wt)kr.warn(r.message);else{const i=ji.create("idb-set",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message});kr.warn(i.message)}}})).apply(this,arguments)}function G(n){return`${n.name}!${n.options.appId}`}class ot{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Qt(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return k(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=ln();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(a=>a.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(a=>{const u=new Date(a.date).valueOf();return Date.now()-u<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return k(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=ln(),{heartbeatsToSend:r,unsentEntries:i}=function hn(n,e=1024){const t=[];let r=n.slice();for(const i of n){const a=t.find(u=>u.agent===i.agent);if(a){if(a.dates.push(i.date),tn(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),tn(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),a=ht(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),a})()}}function ln(){return(new Date).toISOString().substring(0,10)}class Qt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return k(function*(){return!!_e()&&oe().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return k(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function S(n){return P.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return k(function*(){var r;if(yield t._canUseIndexedDBPromise){const a=yield t.read();return D(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return k(function*(){var r;if(yield t._canUseIndexedDBPromise){const a=yield t.read();return D(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}})()}}function tn(n){return ht(JSON.stringify({version:2,heartbeats:n})).length}!function er(n){pr(new Yt("platform-logger",e=>new bs(e),"PRIVATE")),pr(new Yt("heartbeat",e=>new ot(e),"PRIVATE")),Tn(fr,"0.7.33",n),Tn(fr,"0.7.33","esm2017"),Tn("fire-js","")}("");const yn="@firebase/database";let $i="";class Ct{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),se(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Se(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class di{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return An(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const qa=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Ct(e)}}catch(e){}return new di},Gi=qa("localStorage"),Yo=qa("sessionStorage"),Qo=new we("@firebase/database"),Lc=function(){let n=1;return function(){return n++}}(),df=function(n){const e=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){const a=i-55296;r++,K(r<n.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(n.charCodeAt(r)-56320)}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e}(n),t=new go;t.update(e);const r=t.digest();return ae.encodeByteArray(r)},vo=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=vo.apply(null,r):e+="object"==typeof r?se(r):r,e+=" "}return e};let Ne=null,nn=!0;const rn=function(...n){if(!0===nn&&(nn=!1,null===Ne&&!0===Yo.get("logging_enabled")&&function(n,e){K(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Qo.logLevel=zt.VERBOSE,Ne=Qo.log.bind(Qo),e&&Yo.set("logging_enabled",!0)):"function"==typeof n?Ne=n:(Ne=null,Yo.remove("logging_enabled"))}(!0)),Ne){const e=vo.apply(null,n);Ne(e)}},Jo=function(n){return function(...e){rn(n,...e)}},as=function(...n){const e="FIREBASE INTERNAL ERROR: "+vo(...n);Qo.error(e)},lr=function(...n){const e=`FIREBASE FATAL ERROR: ${vo(...n)}`;throw Qo.error(e),new Error(e)},Hn=function(...n){const e="FIREBASE WARNING: "+vo(...n);Qo.warn(e)},Uc=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Js="[MIN_NAME]",hi="[MAX_NAME]",Yn=function(n,e){if(n===e)return 0;if(n===Js||e===hi)return-1;if(e===Js||n===hi)return 1;{const t=Qa(n),r=Qa(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},As=function(n,e){return n===e?0:n<e?-1:1},Xo=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+se(e))},Xs=function(n){if("object"!=typeof n||null===n)return se(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=se(e[r]),t+=":",t+=Xs(n[e[r]]);return t+="}",t},ls=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function gr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Bc=function(n){K(!Uc(n),"Invalid JSON number");const r=1023;let i,a,u,d,p;0===n?(a=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=d+r,u=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(a=0,u=Math.round(n/Math.pow(2,-1074))));const g=[];for(p=52;p;p-=1)g.push(u%2?1:0),u=Math.floor(u/2);for(p=11;p;p-=1)g.push(a%2?1:0),a=Math.floor(a/2);g.push(i?1:0),g.reverse();const C=g.join("");let A="";for(p=0;p<64;p+=8){let R=parseInt(C.substr(p,8),2).toString(16);1===R.length&&(R="0"+R),A+=R}return A.toLowerCase()},Hc=new RegExp("^-?(0*)\\d{1,10}$"),Qa=function(n){if(Hc.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},ea=function(n){try{n()}catch(e){setTimeout(()=>{throw Hn("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Eo=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Gc{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Hn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Wc{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(rn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Hn(e)}}let ta=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Nn=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Xl="websocket",qc="long_polling";class Kc{constructor(e,t,r,i,a=!1,u="",d=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=u,this.includeNamespaceInQueryParams=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Gi.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Gi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Ja(n,e,t){let r;if(K("string"==typeof e,"typeof type must == string"),K("object"==typeof t,"typeof params must == object"),e===Xl)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==qc)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function eu(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return gr(t,(a,u)=>{i.push(a+"="+u)}),r+i.join("&")}class tu{constructor(){this.counters_={}}incrementCounter(e,t=1){An(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return $e(this.counters_)}}const na={},nu={};function Yc(n){const e=n.toString();return na[e]||(na[e]=new tu),na[e]}class Xa{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ea(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class us{constructor(e,t,r,i,a,u,d){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=u,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Jo(e),this.stats_=Yc(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),Ja(t,qc,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Xa(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if("complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new sa((...a)=>{const[u,d,p,g,C]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=d,this.password=p;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[u,d]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(u,d)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Nn.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){us.forceAllow_=!0}static forceDisallow(){us.forceDisallow_=!0}static isAvailable(){return!(!us.forceAllow_&&(us.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=se(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=Ie(t),i=ls(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=se(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class sa{constructor(e,t,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Lc(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=sa.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(d){rn("frame writing exception"),d.stack&&rn(d.stack),rn(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||rn("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{rn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let nl=null;"undefined"!=typeof MozWebSocket?nl=MozWebSocket:"undefined"!=typeof WebSocket&&(nl=WebSocket);let oa=(()=>{class n{constructor(t,r,i,a,u,d,p){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Jo(this.connId),this.stats_=Yc(r),this.connURL=n.connectionURL_(r,d,p,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,u){const d={v:"5"};return"undefined"!=typeof location&&location.hostname&&Nn.test(location.hostname)&&(d.r="f"),r&&(d.s=r),i&&(d.ls=i),a&&(d.ac=a),u&&(d.p=u),Ja(t,Xl,d)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Gi.set("previous_websocket_failure",!0);try{let i;0,this.mySock=new nl(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==nl&&!n.forceDisallow_}static previouslyFailed(){return Gi.isInMemoryStorage||!0===Gi.get("previous_websocket_failure")}markConnectionHealthy(){Gi.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=Se(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(K(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=se(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=ls(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Ef=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[us,oa]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=oa&&oa.isAvailable();let i=r&&!oa.previouslyFailed();if(t.webSocketOnly&&(r||Hn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[oa];else{const a=this.transports_=[];for(const u of n.ALL_TRANSPORTS)u&&u.isAvailable()&&a.push(u);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class ce{constructor(e,t,r,i,a,u,d,p,g,C){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=u,this.onReady_=d,this.onDisconnect_=p,this.onKill_=g,this.lastSessionId=C,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Jo("c:"+this.id+":"),this.transportManager_=new Ef(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Eo(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Xo("t",e),r=Xo("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Xo("t",e),r=Xo("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Xo("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?as("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):as("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Hn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Eo(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Eo(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Gi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Xe{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class Rt{constructor(e){this.allowedEvents_=e,this.listeners_={},K(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){K(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class tt extends Rt{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!Pe()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new tt}getInitialEvent(e){return K("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class jt{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Lt(){return new jt("")}function xt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Jr(n){return n.pieces_.length-n.pieceNum_}function un(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new jt(n.pieces_,e)}function il(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function wf(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function kE(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new jt(e,0)}function Vt(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof jt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new jt(t,0)}function Xt(n){return n.pieceNum_>=n.pieces_.length}function Ai(n,e){const t=xt(n),r=xt(e);if(null===t)return e;if(t===r)return Ai(un(n),un(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function FE(n,e){if(Jr(n)!==Jr(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Ms(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Jr(n)>Jr(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class WR{constructor(e,t){this.errorPrefix_=t,this.parts_=wf(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=dr(this.parts_[r]);SI(this)}}function SI(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Vn(n))}function Vn(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class rd extends Rt{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new rd}getInitialEvent(e){return K("visible"===e,"Unknown event type: "+e),[this.visible_]}}const bo=1e3;let bf,Ns=(()=>{class n extends Xe{constructor(t,r,i,a,u,d,p,g){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=u,this.authTokenProvider_=d,this.appCheckTokenProvider_=p,this.authOverride_=g,this.id=n.nextPersistentConnectionId_++,this.log_=Jo("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=bo,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,g)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");rd.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&tt.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,u={r:a,a:t,b:r};this.log_(se(u)),K(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new st,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:d=>{const p=d.d;"ok"===d.s?r.resolve(p):r.reject(p)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const u=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+u),this.listens.has(d)||this.listens.set(d,new Map),K(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),K(!this.listens.get(d).has(u),"listen() called twice for same path/queryId.");const p={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(d).set(u,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,p=>{const g=p.d,C=p.s;n.warnOnListenWarnings_(g,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",p),"ok"!==C&&this.removeListen_(i,a),t.onComplete&&t.onComplete(C,g))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&An(t,"w")){const i=En(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();Hn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||function(n){const e=Z(n).claims;return"object"==typeof e&&!0===e.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=function(n){const t=Z(n).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const u=a.s,d=a.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),K(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const u={p:t};a&&(u.q=i,u.t=a),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,d=>{a&&setTimeout(()=>{a(d.s,d.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,u){this.initConnection_();const d={p:r,d:i};void 0!==u&&(d.h=u),this.outstandingPuts_.push({action:t,request:d,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+se(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):as("Unrecognized action received from server: "+se(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){K(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=bo,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=bo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=bo),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return k(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,d=t.lastSessionId;let p=!1,g=null;const C=function(){g?g.close():(p=!0,a())};t.realtime_={close:C,sendRequest:function(U){K(g,"sendRequest call when we're not connected not allowed."),g.sendRequest(U)}};const R=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[U,H]=yield Promise.all([t.authTokenProvider_.getToken(R),t.appCheckTokenProvider_.getToken(R)]);p?rn("getToken() completed but was canceled"):(rn("getToken() completed. Creating connection."),t.authToken_=U&&U.accessToken,t.appCheckToken_=H&&H.token,g=new ce(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,te=>{Hn(te+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},d))}catch(U){t.log_("Failed to get token: "+U),p||(t.repoInfo_.nodeAdmin&&Hn(U),C())}}})()}interrupt(t){rn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){rn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],On(this.interruptReasons_)&&(this.reconnectDelay_=bo,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>Xs(u)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new jt(t).toString();let a;if(this.listens.has(i)){const u=this.listens.get(i);a=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){rn("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){rn("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";t["sdk."+r+"."+$i.replace(/\./g,"-")]=1,Pe()?t["framework.cordova"]=1:gt()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=tt.getInstance().currentlyOnline();return On(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class en{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new en(e,t)}}class Cf{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new en(Js,e),i=new en(Js,t);return 0!==this.compare(r,i)}minPost(){return en.MIN}}class xI extends Cf{static get __EMPTY_NODE(){return bf}static set __EMPTY_NODE(e){bf=e}compare(e,t){return Yn(e.name,t.name)}isDefinedOn(e){throw Ce("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return en.MIN}maxPost(){return new en(hi,bf)}makePost(e,t){return K("string"==typeof e,"KeyIndex indexValue must always be a string."),new en(e,bf)}toString(){return".key"}}const To=new xI;class sd{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let vm,Zn=(()=>{class n{constructor(t,r,i,a,u){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:Cr.EMPTY_NODE,this.right=null!=u?u:Cr.EMPTY_NODE}copy(t,r,i,a,u){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=u?u:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const u=i(t,a.key);return a=u<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===u?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Cr.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Cr.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Cr{constructor(e,t=Cr.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Cr(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Zn.BLACK,null,null))}remove(e){return new Cr(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Zn.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new sd(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new sd(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new sd(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new sd(this.root_,null,this.comparator_,!0,e)}}function KR(n,e){return Yn(n.name,e.name)}function Tf(n,e){return Yn(n,e)}Cr.EMPTY_NODE=new class ym{copy(e,t,r,i,a){return this}insert(e,t,r){return new Zn(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const UE=function(n){return"number"==typeof n?"number:"+Bc(n):"string:"+n},BE=function(n){if(n.isLeafNode()){const e=n.val();K("string"==typeof e||"number"==typeof e||"object"==typeof e&&An(e,".sv"),"Priority must be a string or number.")}else K(n===vm||n.isEmpty(),"priority of unexpected type.");K(n===vm||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let jE,If,od,sl=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,K(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),BE(this.priorityNode_)}static set __childrenNodeConstructor(t){jE=t}static get __childrenNodeConstructor(){return jE}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Xt(t)?this:".priority"===xt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=xt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:(K(".priority"!==i||1===Jr(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(un(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+UE(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?Bc(this.value_):this.value_,this.lazyHash_=df(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(K(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return K(a>=0,"Unknown leaf type: "+r),K(u>=0,"Unknown leaf type: "+i),a===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Dn=new class Em extends Cf{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Yn(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return en.MIN}maxPost(){return new en(hi,new sl("[PRIORITY-POST]",od))}makePost(e,t){const r=If(e);return new en(t,new sl("[PRIORITY-POST]",r))}toString(){return".priority"}},NI=Math.log(2);class PI{constructor(e){this.count=parseInt(Math.log(e+1)/NI,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Df=function(n,e,t,r){n.sort(e);const i=function(p,g){const C=g-p;let A,R;if(0===C)return null;if(1===C)return A=n[p],R=t?t(A):A,new Zn(R,A.node,Zn.BLACK,null,null);{const U=parseInt(C/2,10)+p,H=i(p,U),te=i(U+1,g);return A=n[U],R=t?t(A):A,new Zn(R,A.node,Zn.BLACK,H,te)}},d=function(p){let g=null,C=null,A=n.length;const R=function(H,te){const Ae=A-H,lt=A;A-=H;const _t=i(Ae+1,lt),vt=n[Ae],Nt=t?t(vt):vt;U(new Zn(Nt,vt.node,te,null,_t))},U=function(H){g?(g.left=H,g=H):(C=H,g=H)};for(let H=0;H<p.count;++H){const te=p.nextBitIsOne(),Ae=Math.pow(2,p.count-(H+1));te?R(Ae,Zn.BLACK):(R(Ae,Zn.BLACK),R(Ae,Zn.RED))}return C}(new PI(n.length));return new Cr(r||e,d)};let Af;const ou={};class Wi{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return K(ou&&Dn,"ChildrenNode.ts has not been loaded"),Af=Af||new Wi({".priority":ou},{".priority":Dn}),Af}get(e){const t=En(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Cr?t:null}hasIndex(e){return An(this.indexSet_,e.toString())}addIndex(e,t){K(e!==To,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(en.Wrap);let d,u=a.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=a.getNext();d=i?Df(r,e.getCompare()):ou;const p=e.toString(),g=Object.assign({},this.indexSet_);g[p]=e;const C=Object.assign({},this.indexes_);return C[p]=d,new Wi(C,g)}addToIndexes(e,t){const r=Jn(this.indexes_,(i,a)=>{const u=En(this.indexSet_,a);if(K(u,"Missing index implementation for "+a),i===ou){if(u.isDefinedOn(e.node)){const d=[],p=t.getIterator(en.Wrap);let g=p.getNext();for(;g;)g.name!==e.name&&d.push(g),g=p.getNext();return d.push(e),Df(d,u.getCompare())}return ou}{const d=t.get(e.name);let p=i;return d&&(p=p.remove(new en(e.name,d))),p.insert(e,e.node)}});return new Wi(r,this.indexSet_)}removeFromIndexes(e,t){const r=Jn(this.indexes_,i=>{if(i===ou)return i;{const a=t.get(e.name);return a?i.remove(new en(e.name,a)):i}});return new Wi(r,this.indexSet_)}}let au,Ht=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&BE(this.priorityNode_),this.children_.isEmpty()&&K(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return au||(au=new n(new Cr(Tf),null,Wi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||au}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?au:r}}getChild(t){const r=xt(t);return null===r?this:this.getImmediateChild(r).getChild(un(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if(K(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new en(t,r);let a,u;r.isEmpty()?(a=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const d=a.isEmpty()?au:this.priorityNode_;return new n(a,d,u)}}updateChild(t,r){const i=xt(t);if(null===i)return r;{K(".priority"!==xt(t)||1===Jr(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(un(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,u=!0;if(this.forEachChild(Dn,(d,p)=>{r[d]=p.val(t),i++,u&&n.INTEGER_REGEXP_.test(d)?a=Math.max(a,Number(d)):u=!1}),!t&&u&&a<2*i){const d=[];for(const p in r)d[p]=r[p];return d}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+UE(this.getPriority().val())+":"),this.forEachChild(Dn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":df(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const u=a.getPredecessorKey(new en(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new en(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new en(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,en.Wrap);let u=a.peek();for(;null!=u&&r.compare(u,t)<0;)a.getNext(),u=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,en.Wrap);let u=a.peek();for(;null!=u&&r.compare(u,t)>0;)a.getNext(),u=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===lu?-1:0}withIndex(t){if(t===To||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===To||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Dn),a=r.getIterator(Dn);let u=i.getNext(),d=a.getNext();for(;u&&d;){if(u.name!==d.name||!u.node.equals(d.node))return!1;u=i.getNext(),d=a.getNext()}return null===u&&null===d}return!1}return!1}}resolveIndex_(t){return t===To?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const lu=new class Vr extends Ht{constructor(){super(new Cr(Tf),Ht.EMPTY_NODE,Wi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ht.EMPTY_NODE}isEmpty(){return!1}};function Un(n,e=null){if(null===n)return Ht.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),K(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new sl(n,Un(e));if(n instanceof Array){let t=Ht.EMPTY_NODE;return gr(n,(r,i)=>{if(An(n,r)&&"."!==r.substring(0,1)){const a=Un(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Un(e))}{const t=[];let r=!1;if(gr(n,(u,d)=>{if("."!==u.substring(0,1)){const p=Un(d);p.isEmpty()||(r=r||!p.getPriority().isEmpty(),t.push(new en(u,p)))}}),0===t.length)return Ht.EMPTY_NODE;const a=Df(t,KR,u=>u.name,Tf);if(r){const u=Df(t,Dn.getCompare());return new Ht(a,Un(e),new Wi({".priority":u},{".priority":Dn}))}return new Ht(a,Un(e),Wi.Default)}}Object.defineProperties(en,{MIN:{value:new en(Js,Ht.EMPTY_NODE)},MAX:{value:new en(hi,lu)}}),xI.__EMPTY_NODE=Ht.EMPTY_NODE,sl.__childrenNodeConstructor=Ht,function MI(n){vm=n}(lu),function ad(n){od=n}(lu),function YR(n){If=n}(Un);class ol extends Cf{constructor(e){super(),this.indexPath_=e,K(!Xt(e)&&".priority"!==xt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Yn(e.name,t.name):a}makePost(e,t){const r=Un(e),i=Ht.EMPTY_NODE.updateChild(this.indexPath_,r);return new en(t,i)}maxPost(){const e=Ht.EMPTY_NODE.updateChild(this.indexPath_,lu);return new en(hi,e)}toString(){return wf(this.indexPath_,0).join("/")}}const wm=new class RI extends Cf{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Yn(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return en.MIN}maxPost(){return en.MAX}makePost(e,t){const r=Un(e);return new en(t,r)}toString(){return".value"}},uu="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ld=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=uu.charAt(t%64),t=Math.floor(t/64);K(0===t,"Cannot push at time == 0");let u=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)u+=uu.charAt(e[i]);return K(20===u.length,"nextPushId: Length should be 20."),u}}();function Sf(n){return{type:"value",snapshotNode:n}}function Io(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function hu(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function ud(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class la{constructor(e){this.index_=e}updateChild(e,t,r,i,a,u){K(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(i).equals(r.getChild(i))&&d.isEmpty()===r.isEmpty()||(null!=u&&(r.isEmpty()?e.hasChild(t)?u.trackChildChange(hu(t,d)):K(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?u.trackChildChange(Io(t,r)):u.trackChildChange(ud(t,r,d))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Dn,(i,a)=>{t.hasChild(i)||r.trackChildChange(hu(i,a))}),t.isLeafNode()||t.forEachChild(Dn,(i,a)=>{if(e.hasChild(i)){const u=e.getImmediateChild(i);u.equals(a)||r.trackChildChange(ud(i,a,u))}else r.trackChildChange(Io(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ht.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Do{constructor(e){this.indexedFilter_=new la(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Do.getStartPost_(e),this.endPost_=Do.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,u){return this.matches(new en(t,r))||(r=Ht.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,u)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Ht.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Ht.EMPTY_NODE);const a=this;return t.forEachChild(Dn,(u,d)=>{a.matches(new en(u,d))||(i=i.updateImmediateChild(u,Ht.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class FI{constructor(e){this.rangedFilter_=new Do(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,u){return this.rangedFilter_.matches(new en(t,r))||(r=Ht.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,u):this.fullLimitUpdateChild_(e,t,r,a,u)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Ht.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Ht.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;a.hasNext()&&u<this.limit_;){const d=a.getNext();let p;if(p=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0,!p)break;i=i.updateImmediateChild(d.name,d.node),u++}}else{let a,u,d,p;if(i=t.withIndex(this.index_),i=i.updatePriority(Ht.EMPTY_NODE),this.reverse_){p=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();const A=this.index_.getCompare();d=(R,U)=>A(U,R)}else p=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();let g=0,C=!1;for(;p.hasNext();){const A=p.getNext();!C&&d(a,A)<=0&&(C=!0),C&&g<this.limit_&&d(A,u)<=0?g++:i=i.updateImmediateChild(A.name,Ht.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let u;if(this.reverse_){const A=this.index_.getCompare();u=(R,U)=>A(U,R)}else u=this.index_.getCompare();const d=e;K(d.numChildren()===this.limit_,"");const p=new en(t,r),g=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),C=this.rangedFilter_.matches(p);if(d.hasChild(t)){const A=d.getImmediateChild(t);let R=i.getChildAfterChild(this.index_,g,this.reverse_);for(;null!=R&&(R.name===t||d.hasChild(R.name));)R=i.getChildAfterChild(this.index_,R,this.reverse_);const U=null==R?1:u(R,p);if(C&&!r.isEmpty()&&U>=0)return null!=a&&a.trackChildChange(ud(t,r,A)),d.updateImmediateChild(t,r);{null!=a&&a.trackChildChange(hu(t,A));const te=d.updateImmediateChild(t,Ht.EMPTY_NODE);return null!=R&&this.rangedFilter_.matches(R)?(null!=a&&a.trackChildChange(Io(R.name,R.node)),te.updateImmediateChild(R.name,R.node)):te}}return r.isEmpty()?e:C&&u(g,p)>=0?(null!=a&&(a.trackChildChange(hu(g.name,g.node)),a.trackChildChange(Io(t,r))),d.updateImmediateChild(t,r).updateImmediateChild(g.name,Ht.EMPTY_NODE)):e}}class $E{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Dn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return K(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return K(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Js}hasEnd(){return this.endSet_}getIndexEndValue(){return K(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return K(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:hi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return K(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Dn}copy(){const e=new $E;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function al(n){const e={};if(n.isDefault())return e;let t;return n.index_===Dn?t="$priority":n.index_===wm?t="$value":n.index_===To?t="$key":(K(n.index_ instanceof ol,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=se(t),n.startSet_&&(e.startAt=se(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+se(n.indexStartName_))),n.endSet_&&(e.endAt=se(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+se(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function WE(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Dn&&(e.i=n.index_.toString()),e}class Mf extends Xe{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Jo("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(K(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const u=Mf.getListenId_(e,r),d={};this.listens_[u]=d;const p=al(e._queryParams);this.restRequest_(a+".json",p,(g,C)=>{let A=C;if(404===g&&(A=null,g=null),null===g&&this.onDataUpdate_(a,A,!1,r),En(this.listens_,u)===d){let R;R=g?401===g?"permission_denied":"rest_error:"+g:"ok",i(R,null)}})}unlisten(e,t){const r=Mf.getListenId_(e,t);delete this.listens_[r]}get(e){const t=al(e._queryParams),r=e._path.toString(),i=new st;return this.restRequest_(r+".json",t,(a,u)=>{let d=u;404===a&&(d=null,a=null),null===a?(this.onDataUpdate_(r,d,!1,null),i.resolve(d)):i.reject(new Error(d))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ui(t);this.log_("Sending REST request for "+u);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(r&&4===d.readyState){this.log_("REST Response for "+u+" received. status:",d.status,"response:",d.responseText);let p=null;if(d.status>=200&&d.status<300){try{p=Se(d.responseText)}catch(g){Hn("Failed to parse JSON response for "+u+": "+d.responseText)}r(null,p)}else 401!==d.status&&404!==d.status&&Hn("Got unsuccessful REST response for "+u+" Status: "+d.status),r(d.status);r=null}},d.open("GET",u,!0),d.send()})}}class ZR{constructor(){this.rootNode_=Ht.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function ll(){return{value:null,children:new Map}}function ua(n,e,t){if(Xt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=xt(e);n.children.has(r)||n.children.set(r,ll()),ua(n.children.get(r),e=un(e),t)}}function Pf(n,e,t){null!==n.value?t(e,n.value):function zE(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Pf(i,new jt(e.toString()+"/"+r),t)})}class ul{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&gr(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class jI{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new ul(e);const r=1e4+2e4*Math.random();Eo(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;gr(e,(i,a)=>{a>0&&An(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),Eo(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ds=(()=>{return(n=ds||(ds={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",ds;var n})();function Of(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Rf{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=ds.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Xt(this.path)){if(null!=this.affectedTree.value)return K(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new jt(e));return new Rf(Lt(),t,this.revert)}}return K(xt(this.path)===e,"operationForChild called for unrelated child."),new Rf(un(this.path),this.affectedTree,this.revert)}}class cd{constructor(e,t){this.source=e,this.path=t,this.type=ds.LISTEN_COMPLETE}operationForChild(e){return Xt(this.path)?new cd(this.source,Lt()):new cd(this.source,un(this.path))}}class cl{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=ds.OVERWRITE}operationForChild(e){return Xt(this.path)?new cl(this.source,Lt(),this.snap.getImmediateChild(e)):new cl(this.source,un(this.path),this.snap)}}class pu{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=ds.MERGE}operationForChild(e){if(Xt(this.path)){const t=this.children.subtree(new jt(e));return t.isEmpty()?null:t.value?new cl(this.source,Lt(),t.value):new pu(this.source,Lt(),t)}return K(xt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new pu(this.source,un(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class da{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Xt(e))return this.isFullyInitialized()&&!this.filtered_;const t=xt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class KE{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function dd(n,e,t,r,i,a){const u=r.filter(d=>d.type===t);u.sort((d,p)=>function GI(n,e,t){if(null==e.childName||null==t.childName)throw Ce("Should only compare child_ events.");const r=new en(e.childName,e.snapshotNode),i=new en(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,d,p)),u.forEach(d=>{const p=function $I(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,d,a);i.forEach(g=>{g.respondsTo(d.type)&&e.push(g.createEvent(p,n.query_))})})}function Dm(n,e){return{eventCache:n,serverCache:e}}function hd(n,e,t,r){return Dm(new da(e,t,r),n.serverCache)}function gu(n,e,t,r){return Dm(n.eventCache,new da(e,t,r))}function fd(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Xr(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let dl;class Pn{constructor(e,t=(()=>(dl||(dl=new Cr(As)),dl))()){this.value=e,this.children=t}static fromObject(e){let t=new Pn(null);return gr(e,(r,i)=>{t=t.set(new jt(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Lt(),value:this.value};if(Xt(e))return null;{const r=xt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(un(e),t);return null!=a?{path:Vt(new jt(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Xt(e))return this;{const t=xt(e),r=this.children.get(t);return null!==r?r.subtree(un(e)):new Pn(null)}}set(e,t){if(Xt(e))return new Pn(t,this.children);{const r=xt(e),a=(this.children.get(r)||new Pn(null)).set(un(e),t),u=this.children.insert(r,a);return new Pn(this.value,u)}}remove(e){if(Xt(e))return this.children.isEmpty()?new Pn(null):new Pn(null,this.children);{const t=xt(e),r=this.children.get(t);if(r){const i=r.remove(un(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Pn(null):new Pn(this.value,a)}return this}}get(e){if(Xt(e))return this.value;{const t=xt(e),r=this.children.get(t);return r?r.get(un(e)):null}}setTree(e,t){if(Xt(e))return t;{const r=xt(e),a=(this.children.get(r)||new Pn(null)).setTree(un(e),t);let u;return u=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Pn(this.value,u)}}fold(e){return this.fold_(Lt(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Vt(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Lt(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Xt(e))return null;{const a=xt(e),u=this.children.get(a);return u?u.findOnPath_(un(e),Vt(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Lt(),t)}foreachOnPath_(e,t,r){if(Xt(e))return this;{this.value&&r(t,this.value);const i=xt(e),a=this.children.get(i);return a?a.foreachOnPath_(un(e),Vt(t,i),r):new Pn(null)}}foreach(e){this.foreach_(Lt(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Vt(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class hs{constructor(e){this.writeTree_=e}static empty(){return new hs(new Pn(null))}}function kf(n,e,t){if(Xt(e))return new hs(new Pn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const u=Ai(i,e);return a=a.updateChild(u,t),new hs(n.writeTree_.set(i,a))}{const i=new Pn(t),a=n.writeTree_.setTree(e,i);return new hs(a)}}}function QE(n,e,t){let r=n;return gr(t,(i,a)=>{r=kf(r,Vt(e,i),a)}),r}function WI(n,e){if(Xt(e))return hs.empty();{const t=n.writeTree_.setTree(e,new Pn(null));return new hs(t)}}function pd(n,e){return null!=Ao(n,e)}function Ao(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ai(t.path,e)):null}function Ff(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Dn,(r,i)=>{e.push(new en(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new en(r,i.value))}),e}function hl(n,e){if(Xt(e))return n;{const t=Ao(n,e);return new hs(null!=t?new Pn(t):n.writeTree_.subtree(e))}}function ZE(n){return n.writeTree_.isEmpty()}function fl(n,e){return JE(Lt(),n.writeTree_,e)}function JE(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?(K(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=JE(Vt(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Vt(n,".priority"),r)),t}}function Lf(n,e){return Pm(e,n)}function e0(n,e){if(n.snap)return Ms(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ms(Vt(n.path,t),e))return!0;return!1}function KI(n){return n.visible}function tr(n,e,t){let r=hs.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const u=a.path;let d;if(a.snap)Ms(t,u)?(d=Ai(t,u),r=kf(r,d,a.snap)):Ms(u,t)&&(d=Ai(u,t),r=kf(r,Lt(),a.snap.getChild(d)));else{if(!a.children)throw Ce("WriteRecord should have .snap or .children");if(Ms(t,u))d=Ai(t,u),r=QE(r,d,a.children);else if(Ms(u,t))if(d=Ai(u,t),Xt(d))r=QE(r,Lt(),a.children);else{const p=En(a.children,xt(d));if(p){const g=p.getChild(un(d));r=kf(r,Lt(),g)}}}}}return r}function Sm(n,e,t,r,i){if(r||i){const a=hl(n.visibleWrites,e);return!i&&ZE(a)?t:i||null!=t||pd(a,Lt())?fl(tr(n.allWrites,function(g){return(g.visible||i)&&(!r||!~r.indexOf(g.writeId))&&(Ms(g.path,e)||Ms(e,g.path))},e),t||Ht.EMPTY_NODE):null}{const a=Ao(n.visibleWrites,e);if(null!=a)return a;{const u=hl(n.visibleWrites,e);return ZE(u)?t:null!=t||pd(u,Lt())?fl(u,t||Ht.EMPTY_NODE):null}}}function Uf(n,e,t,r){return Sm(n.writeTree,n.treePath,e,t,r)}function Mm(n,e){return function YI(n,e,t){let r=Ht.EMPTY_NODE;const i=Ao(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Dn,(a,u)=>{r=r.updateImmediateChild(a,u)}),r;if(t){const a=hl(n.visibleWrites,e);return t.forEachChild(Dn,(u,d)=>{const p=fl(hl(a,new jt(u)),d);r=r.updateImmediateChild(u,p)}),Ff(a).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return Ff(hl(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function XI(n,e,t,r){return function xm(n,e,t,r,i){K(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Vt(e,t);if(pd(n.visibleWrites,a))return null;{const u=hl(n.visibleWrites,a);return ZE(u)?i.getChild(t):fl(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function Nm(n,e){return function QI(n,e){return Ao(n.visibleWrites,e)}(n.writeTree,Vt(n.treePath,e))}function Ur(n,e,t){return function t0(n,e,t,r){const i=Vt(e,t),a=Ao(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?fl(hl(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function Bf(n,e){return Pm(Vt(n.treePath,e),n.writeTree)}function Pm(n,e){return{treePath:n,writeTree:e}}class n0{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;K("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),K(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,ud(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,hu(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,Io(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw Ce("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,ud(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const mu=new class ei{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class md{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new da(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ur(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Xr(this.viewCache_),a=function gd(n,e,t,r,i,a){return function ZI(n,e,t,r,i,a,u){let d;const p=hl(n.visibleWrites,e),g=Ao(p,Lt());if(null!=g)d=g;else{if(null==t)return[];d=fl(p,t)}if(d=d.withIndex(u),d.isEmpty()||d.isLeafNode())return[];{const C=[],A=u.getCompare(),R=a?d.getReverseIteratorFrom(r,u):d.getIteratorFrom(r,u);let U=R.getNext();for(;U&&C.length<i;)0!==A(U,r)&&C.push(U),U=R.getNext();return C}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function Om(n,e,t,r,i,a){const u=e.eventCache;if(null!=Nm(r,t))return e;{let d,p;if(Xt(t))if(K(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const g=Xr(e),A=Mm(r,g instanceof Ht?g:Ht.EMPTY_NODE);d=n.filter.updateFullNode(e.eventCache.getNode(),A,a)}else{const g=Uf(r,Xr(e));d=n.filter.updateFullNode(e.eventCache.getNode(),g,a)}else{const g=xt(t);if(".priority"===g){K(1===Jr(t),"Can't have a priority with additional path components");const C=u.getNode();p=e.serverCache.getNode();const A=XI(r,t,C,p);d=null!=A?n.filter.updatePriority(C,A):u.getNode()}else{const C=un(t);let A;if(u.isCompleteForChild(g)){p=e.serverCache.getNode();const R=XI(r,t,u.getNode(),p);A=null!=R?u.getNode().getImmediateChild(g).updateChild(C,R):u.getNode().getImmediateChild(g)}else A=Ur(r,g,e.serverCache);d=null!=A?n.filter.updateChild(u.getNode(),g,A,C,i,a):u.getNode()}}return hd(e,d,u.isFullyInitialized()||Xt(t),n.filter.filtersNodes())}}function jf(n,e,t,r,i,a,u,d){const p=e.serverCache;let g;const C=u?n.filter:n.filter.getIndexedFilter();if(Xt(t))g=C.updateFullNode(p.getNode(),r,null);else if(C.filtersNodes()&&!p.isFiltered()){const U=p.getNode().updateChild(t,r);g=C.updateFullNode(p.getNode(),U,null)}else{const U=xt(t);if(!p.isCompleteForPath(t)&&Jr(t)>1)return e;const H=un(t),Ae=p.getNode().getImmediateChild(U).updateChild(H,r);g=".priority"===U?C.updatePriority(p.getNode(),Ae):C.updateChild(p.getNode(),U,Ae,H,mu,null)}const A=gu(e,g,p.isFullyInitialized()||Xt(t),C.filtersNodes());return Om(n,A,t,i,new md(i,A,a),d)}function Hf(n,e,t,r,i,a,u){const d=e.eventCache;let p,g;const C=new md(i,e,a);if(Xt(t))g=n.filter.updateFullNode(e.eventCache.getNode(),r,u),p=hd(e,g,!0,n.filter.filtersNodes());else{const A=xt(t);if(".priority"===A)g=n.filter.updatePriority(e.eventCache.getNode(),r),p=hd(e,g,d.isFullyInitialized(),d.isFiltered());else{const R=un(t),U=d.getNode().getImmediateChild(A);let H;if(Xt(R))H=r;else{const te=C.getCompleteChild(A);H=null!=te?".priority"===il(R)&&te.getChild(kE(R)).isEmpty()?te:te.updateChild(R,r):Ht.EMPTY_NODE}p=U.equals(H)?e:hd(e,n.filter.updateChild(d.getNode(),A,H,R,C,u),d.isFullyInitialized(),n.filter.filtersNodes())}}return p}function s0(n,e){return n.eventCache.isCompleteForChild(e)}function $f(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Rm(n,e,t,r,i,a,u,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let g,p=e;g=Xt(t)?r:new Pn(null).setTree(t,r);const C=e.serverCache.getNode();return g.children.inorderTraversal((A,R)=>{if(C.hasChild(A)){const H=$f(0,e.serverCache.getNode().getImmediateChild(A),R);p=jf(n,p,new jt(A),H,i,a,u,d)}}),g.children.inorderTraversal((A,R)=>{const U=!e.serverCache.isCompleteForChild(A)&&null===R.value;if(!C.hasChild(A)&&!U){const te=$f(0,e.serverCache.getNode().getImmediateChild(A),R);p=jf(n,p,new jt(A),te,i,a,u,d)}}),p}class oD{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new la(r.getIndex()),a=function GE(n){return n.loadsAllData()?new la(n.getIndex()):n.hasLimit()?new FI(n):new Do(n)}(r);this.processor_=function eD(n){return{filter:n}}(a);const u=t.serverCache,d=t.eventCache,p=i.updateFullNode(Ht.EMPTY_NODE,u.getNode(),null),g=a.updateFullNode(Ht.EMPTY_NODE,d.getNode(),null),C=new da(p,u.isFullyInitialized(),i.filtersNodes()),A=new da(g,d.isFullyInitialized(),a.filtersNodes());this.viewCache_=Dm(A,C),this.eventGenerator_=new KE(this.query_)}get query(){return this.query_}}function lD(n,e){const t=Xr(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Xt(e)&&!t.getImmediateChild(xt(e)).isEmpty())?t.getChild(e):null}function o0(n){return 0===n.eventRegistrations_.length}function a0(n,e,t){const r=[];if(t){K(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const u=a.createCancelEvent(t,i);u&&r.push(u)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const u=n.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(u)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function Fm(n,e,t,r){e.type===ds.MERGE&&null!==e.source.queryId&&(K(Xr(n.viewCache_),"We should always have a full cache before handling merges"),K(fd(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function r0(n,e,t,r,i){const a=new n0;let u,d;if(t.type===ds.OVERWRITE){const g=t;g.source.fromUser?u=Hf(n,e,g.path,g.snap,r,i,a):(K(g.source.fromServer,"Unknown source."),d=g.source.tagged||e.serverCache.isFiltered()&&!Xt(g.path),u=jf(n,e,g.path,g.snap,r,i,d,a))}else if(t.type===ds.MERGE){const g=t;g.source.fromUser?u=function rD(n,e,t,r,i,a,u){let d=e;return r.foreach((p,g)=>{const C=Vt(t,p);s0(e,xt(C))&&(d=Hf(n,d,C,g,i,a,u))}),r.foreach((p,g)=>{const C=Vt(t,p);s0(e,xt(C))||(d=Hf(n,d,C,g,i,a,u))}),d}(n,e,g.path,g.children,r,i,a):(K(g.source.fromServer,"Unknown source."),d=g.source.tagged||e.serverCache.isFiltered(),u=Rm(n,e,g.path,g.children,r,i,d,a))}else if(t.type===ds.ACK_USER_WRITE){const g=t;u=g.revert?function sD(n,e,t,r,i,a){let u;if(null!=Nm(r,t))return e;{const d=new md(r,e,i),p=e.eventCache.getNode();let g;if(Xt(t)||".priority"===xt(t)){let C;if(e.serverCache.isFullyInitialized())C=Uf(r,Xr(e));else{const A=e.serverCache.getNode();K(A instanceof Ht,"serverChildren would be complete if leaf node"),C=Mm(r,A)}g=n.filter.updateFullNode(p,C,a)}else{const C=xt(t);let A=Ur(r,C,e.serverCache);null==A&&e.serverCache.isCompleteForChild(C)&&(A=p.getImmediateChild(C)),g=null!=A?n.filter.updateChild(p,C,A,un(t),d,a):e.eventCache.getNode().hasChild(C)?n.filter.updateChild(p,C,Ht.EMPTY_NODE,un(t),d,a):p,g.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=Uf(r,Xr(e)),u.isLeafNode()&&(g=n.filter.updateFullNode(g,u,a)))}return u=e.serverCache.isFullyInitialized()||null!=Nm(r,Lt()),hd(e,g,u,n.filter.filtersNodes())}}(n,e,g.path,r,i,a):function iD(n,e,t,r,i,a,u){if(null!=Nm(i,t))return e;const d=e.serverCache.isFiltered(),p=e.serverCache;if(null!=r.value){if(Xt(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return jf(n,e,t,p.getNode().getChild(t),i,a,d,u);if(Xt(t)){let g=new Pn(null);return p.getNode().forEachChild(To,(C,A)=>{g=g.set(new jt(C),A)}),Rm(n,e,t,g,i,a,d,u)}return e}{let g=new Pn(null);return r.foreach((C,A)=>{const R=Vt(t,C);p.isCompleteForPath(R)&&(g=g.set(C,p.getNode().getChild(R)))}),Rm(n,e,t,g,i,a,d,u)}}(n,e,g.path,g.affectedTree,r,i,a)}else{if(t.type!==ds.LISTEN_COMPLETE)throw Ce("Unknown operation type: "+t.type);u=function km(n,e,t,r,i){const a=e.serverCache;return Om(n,gu(e,a.getNode(),a.isFullyInitialized()||Xt(t),a.isFiltered()),t,r,mu,i)}(n,e,t.path,r,a)}const p=a.getChanges();return function nD(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=fd(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(Sf(fd(e)))}}(e,u,p),{viewCache:u,changes:p}}(n.processor_,i,e,t,r);return function tD(n,e){K(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),K(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),K(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,l0(n,a.changes,a.viewCache.eventCache.getNode(),null)}function l0(n,e,t,r){return function HI(n,e,t,r){const i=[],a=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&a.push(function kI(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),dd(n,i,"child_removed",e,r,t),dd(n,i,"child_added",e,r,t),dd(n,i,"child_moved",a,r,t),dd(n,i,"child_changed",e,r,t),dd(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let Wf,zf;class u0{constructor(){this.views=new Map}}function Lm(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return K(null!=a,"SyncTree gave us an op for an invalid query."),Fm(a,e,t,r)}{let a=[];for(const u of n.views.values())a=a.concat(Fm(u,e,t,r));return a}}function ro(n,e,t,r,i,a){const u=function pl(n,e,t,r,i){const u=n.views.get(e._queryIdentifier);if(!u){let d=Uf(t,i?r:null),p=!1;d?p=!0:r instanceof Ht?(d=Mm(t,r),p=!1):(d=Ht.EMPTY_NODE,p=!1);const g=Dm(new da(d,p,!1),new da(r,i,!1));return new oD(e,g)}return u}(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function uD(n,e){n.eventRegistrations_.push(e)}(u,t),function cD(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Dn,(a,u)=>{r.push(Io(a,u))}),t.isFullyInitialized()&&r.push(Sf(t.getNode())),l0(n,r,t.getNode(),e)}(u,t)}function pD(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function So(n,e){let t=null;for(const r of n.views.values())t=t||lD(r,e);return t}function gD(n,e){return e._queryParams.loadsAllData()?_u(n):n.views.get(e._queryIdentifier)}function Os(n,e){return null!=gD(n,e)}function io(n){return null!=_u(n)}function _u(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let d0=1;class Vm{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Pn(null),this.pendingWriteTree_=function JI(){return{visibleWrites:hs.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function yd(n,e,t,r,i){return function zI(n,e,t,r,i){K(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=kf(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?vu(n,new cl({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function xo(n,e,t=!1){const r=function XE(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function Vf(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);K(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const d=n.allWrites[u];d.visible&&(u>=t&&e0(d,r.path)?i=!1:Ms(r.path,d.path)&&(a=!0)),u--}return!!i&&(a?(function Am(n){n.visibleWrites=tr(n.allWrites,KI,Lt()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=WI(n.visibleWrites,r.path):gr(r.children,p=>{n.visibleWrites=WI(n.visibleWrites,Vt(r.path,p))}),!0))}(n.pendingWriteTree_,e)){let a=new Pn(null);return null!=r.snap?a=a.set(Lt(),!0):gr(r.children,u=>{a=a.set(new jt(u),!0)}),vu(n,new Rf(r.path,a,t))}return[]}function qf(n,e,t){return vu(n,new cl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function Kf(n,e,t,r,i=!1){const a=e._path,u=n.syncPointTree_.get(a);let d=[];if(u&&("default"===e._queryIdentifier||Os(u,e))){const p=function JR(n,e,t,r){const i=e._queryIdentifier,a=[];let u=[];const d=io(n);if("default"===i)for(const[p,g]of n.views.entries())u=u.concat(a0(g,t,r)),o0(g)&&(n.views.delete(p),g.query._queryParams.loadsAllData()||a.push(g.query));else{const p=n.views.get(i);p&&(u=u.concat(a0(p,t,r)),o0(p)&&(n.views.delete(i),p.query._queryParams.loadsAllData()||a.push(p.query)))}return d&&!io(n)&&a.push(new(function hD(){return K(Wf,"Reference.ts has not been loaded"),Wf}())(e._repo,e._path)),{removed:a,events:u}}(u,e,t,r);(function fD(n){return 0===n.views.size})(u)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const g=p.removed;if(d=p.events,!i){const C=-1!==g.findIndex(R=>R._queryParams.loadsAllData()),A=n.syncPointTree_.findOnPath(a,(R,U)=>io(U));if(C&&!A){const R=n.syncPointTree_.subtree(a);if(!R.isEmpty()){const U=function p0(n){return n.fold((e,t,r)=>{if(t&&io(t))return[_u(t)];{let i=[];return t&&(i=pD(t)),gr(r,(a,u)=>{i=i.concat(u)}),i}})}(R);for(let H=0;H<U.length;++H){const te=U[H],Ae=te.query,lt=Zf(n,te);n.listenProvider_.startListening(Rs(Ae),Eu(n,Ae),lt.hashFn,lt.onComplete)}}}!A&&g.length>0&&!r&&(C?n.listenProvider_.stopListening(Rs(e),null):g.forEach(R=>{const U=n.queryToTagMap.get(wu(R));n.listenProvider_.stopListening(Rs(R),U)}))}!function g0(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=wu(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,g)}return d}function jm(n,e,t,r=!1){const i=e._path;let a=null,u=!1;n.syncPointTree_.foreachOnPath(i,(R,U)=>{const H=Ai(R,i);a=a||So(U,H),u=u||io(U)});let p,d=n.syncPointTree_.get(i);d?(u=u||io(d),a=a||So(d,Lt())):(d=new u0,n.syncPointTree_=n.syncPointTree_.set(i,d)),null!=a?p=!0:(p=!1,a=Ht.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((U,H)=>{const te=So(H,Lt());te&&(a=a.updateImmediateChild(U,te))}));const g=Os(d,e);if(!g&&!e._queryParams.loadsAllData()){const R=wu(e);K(!n.queryToTagMap.has(R),"View does not exist, but we have a tag");const U=function m0(){return d0++}();n.queryToTagMap.set(R,U),n.tagToQueryMap.set(U,R)}let A=ro(d,e,t,Lf(n.pendingWriteTree_,i),a,p);if(!g&&!u&&!r){const R=gD(d,e);A=A.concat(function yD(n,e,t){const r=e._path,i=Eu(n,e),a=Zf(n,t),u=n.listenProvider_.startListening(Rs(e),i,a.hashFn,a.onComplete),d=n.syncPointTree_.subtree(r);if(i)K(!io(d.value),"If we're adding a query, it shouldn't be shadowed");else{const p=d.fold((g,C,A)=>{if(!Xt(g)&&C&&io(C))return[_u(C).query];{let R=[];return C&&(R=R.concat(pD(C).map(U=>U.query))),gr(A,(U,H)=>{R=R.concat(H)}),R}});for(let g=0;g<p.length;++g){const C=p[g];n.listenProvider_.stopListening(Rs(C),Eu(n,C))}}return u}(n,e,R))}return A}function Qf(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(u,d)=>{const g=So(d,Ai(u,e));if(g)return g});return Sm(i,e,a,t,!0)}function vu(n,e){return f0(e,n.syncPointTree_,null,Lf(n.pendingWriteTree_,Lt()))}function f0(n,e,t,r){if(Xt(n.path))return Hm(n,e,t,r);{const i=e.get(Lt());null==t&&null!=i&&(t=So(i,Lt()));let a=[];const u=xt(n.path),d=n.operationForChild(u),p=e.children.get(u);if(p&&d){const g=t?t.getImmediateChild(u):null,C=Bf(r,u);a=a.concat(f0(d,p,g,C))}return i&&(a=a.concat(Lm(i,n,r,t))),a}}function Hm(n,e,t,r){const i=e.get(Lt());null==t&&null!=i&&(t=So(i,Lt()));let a=[];return e.children.inorderTraversal((u,d)=>{const p=t?t.getImmediateChild(u):null,g=Bf(r,u),C=n.operationForChild(u);C&&(a=a.concat(Hm(C,d,p,g)))}),i&&(a=a.concat(Lm(i,n,r,t))),a}function Zf(n,e){const t=e.query,r=Eu(n,t);return{hashFn:()=>(function Gf(n){return n.viewCache_.serverCache.getNode()}(e)||Ht.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function h0(n,e,t){const r=$m(n,t);if(r){const i=Gm(r),a=i.path,u=i.queryId,d=Ai(a,e);return Jf(n,a,new cd(Of(u),d))}return[]}(n,t._path,r):function Bm(n,e){return vu(n,new cd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function jc(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return Kf(n,t,null,a)}}}}function Eu(n,e){const t=wu(e);return n.queryToTagMap.get(t)}function wu(n){return n._path.toString()+"$"+n._queryIdentifier}function $m(n,e){return n.tagToQueryMap.get(e)}function Gm(n){const e=n.indexOf("$");return K(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new jt(n.substr(0,e))}}function Jf(n,e,t){const r=n.syncPointTree_.get(e);return K(r,"Missing sync point for query tag that we're tracking"),Lm(r,t,Lf(n.pendingWriteTree_,e),null)}function Rs(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function _d(){return K(zf,"Reference.ts has not been loaded"),zf}())(n._repo,n._path):n}class Cu{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Cu(t)}node(){return this.node_}}class Wm{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Vt(this.path_,e);return new Wm(this.syncTree_,t)}node(){return Qf(this.syncTree_,this.path_)}}const zm=function(n,e,t){return n&&"object"==typeof n?(K(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?y0(n[".sv"],e,t):"object"==typeof n[".sv"]?qm(n[".sv"],e):void K(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},y0=function(n,e,t){if("timestamp"===n)return t.timestamp;K(!1,"Unexpected server value: "+n)},qm=function(n,e,t){n.hasOwnProperty("increment")||K(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&K(!1,"Unexpected increment value: "+r);const i=e.node();if(K(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},bu=function(n,e,t){return Tu(n,new Cu(e),t)};function Tu(n,e,t){const r=n.getPriority().val(),i=zm(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const u=n,d=zm(u.getValue(),e,t);return d!==u.getValue()||i!==u.getPriority().val()?new sl(d,Un(i)):n}{const u=n;return a=u,i!==u.getPriority().val()&&(a=a.updatePriority(new sl(i))),u.forEachChild(Dn,(d,p)=>{const g=Tu(p,e.getImmediateChild(d),t);g!==p&&(a=a.updateImmediateChild(d,g))}),a}}class Xf{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Iu(n,e){let t=e instanceof jt?e:new jt(e),r=n,i=xt(t);for(;null!==i;){const a=En(r.node.children,i)||{children:{},childCount:0};r=new Xf(i,r,a),t=un(t),i=xt(t)}return r}function ha(n){return n.node.value}function vd(n,e){n.node.value=e,wd(n)}function Du(n){return n.node.childCount>0}function Ed(n,e){gr(n.node.children,(t,r)=>{e(new Xf(t,n,r))})}function v0(n,e,t,r){t&&!r&&e(n),Ed(n,i=>{v0(i,e,!0,r)}),t&&r&&e(n)}function Au(n){return new jt(null===n.parent?n.name:Au(n.parent)+"/"+n.name)}function wd(n){null!==n.parent&&function E0(n,e,t){const r=function vD(n){return void 0===ha(n)&&!Du(n)}(t),i=An(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,wd(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,wd(n))}(n.parent,n.name,n)}const XR=/[\[\].#$\/\u0000-\u001F\u007F]/,w0=/[\[\].#$\u0000-\u001F\u007F]/,Ym=10485760,Cd=function(n){return"string"==typeof n&&0!==n.length&&!XR.test(n)},C0=function(n){return"string"==typeof n&&0!==n.length&&!w0.test(n)},so=function(n,e,t,r){r&&void 0===e||Su(Re(n,"value"),e,t)},Su=function(n,e,t){const r=t instanceof jt?new WR(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Vn(r));if("function"==typeof e)throw new Error(n+"contains a function "+Vn(r)+" with contents = "+e.toString());if(Uc(e))throw new Error(n+"contains "+e.toString()+" "+Vn(r));if("string"==typeof e&&e.length>Ym/3&&dr(e)>Ym)throw new Error(n+"contains a string greater than "+Ym+" utf8 bytes "+Vn(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(gr(e,(u,d)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(a=!0,!Cd(u)))throw new Error(n+" contains an invalid key ("+u+") "+Vn(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function zR(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=dr(e),SI(n)})(r,u),Su(n,d,r),function nd(n){const e=n.parts_.pop();n.byteLength_-=dr(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Vn(r)+" in addition to actual children.")}},ep=function(n,e,t,r){if(!(r&&void 0===t||C0(t)))throw new Error(Re(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},oo=function(n,e){if(".info"===xt(e))throw new Error(n+" failed = Can't modify data under /.info/")};class Ut{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Td(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!FE(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function Zm(n,e,t){Td(n,t),Id(n,r=>FE(r,e))}function Si(n,e,t){Td(n,t),Id(n,r=>Ms(r,e)||Ms(e,r))}function Id(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(ks(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function ks(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Ne&&rn("event: "+t.toString()),ea(r)}}}class Xm{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ut,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ll(),this.transactionQueueTree_=new Xf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function tp(n){const t=n.infoData_.getNode(new jt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function xu(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:tp(n)})}function np(n,e,t,r,i){n.dataUpdateCount++;const a=new jt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const p=Jn(t,g=>Un(g));u=function mD(n,e,t,r){const i=$m(n,r);if(i){const a=Gm(i),u=a.path,d=a.queryId,p=Ai(u,e),g=Pn.fromObject(t);return Jf(n,u,new pu(Of(d),p,g))}return[]}(n.serverSyncTree_,a,p,i)}else{const p=Un(t);u=function Yf(n,e,t,r){const i=$m(n,r);if(null!=i){const a=Gm(i),u=a.path,d=a.queryId,p=Ai(u,e);return Jf(n,u,new cl(Of(d),p,t))}return[]}(n.serverSyncTree_,a,p,i)}else if(r){const p=Jn(t,g=>Un(g));u=function yu(n,e,t){const r=Pn.fromObject(t);return vu(n,new pu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,p)}else{const p=Un(t);u=qf(n.serverSyncTree_,a,p)}let d=a;u.length>0&&(d=Sd(n,a)),Si(n.eventQueue_,d,u)}function ID(n,e){D0(n,"connected",e),!1===e&&function t_(n){Ad(n,"onDisconnectEvents");const e=xu(n),t=ll();Pf(n.onDisconnect_,Lt(),(i,a)=>{const u=function(n,e,t,r){return Tu(e,new Wm(t,n),r)}(i,a,n.serverSyncTree_,e);ua(t,i,u)});let r=[];Pf(t,Lt(),(i,a)=>{r=r.concat(qf(n.serverSyncTree_,i,a));const u=x0(n,i);Sd(n,u)}),n.onDisconnect_=ll(),Si(n.eventQueue_,Lt(),r)}(n)}function D0(n,e,t){const r=new jt("/.info/"+e),i=Un(t);n.infoData_.updateSnapshot(r,i);const a=qf(n.infoSyncTree_,r,i);Si(n.eventQueue_,r,a)}function gl(n){return n.nextWriteId_++}function Dd(n,e,t,r,i){Ad(n,"set",{path:e.toString(),value:t,priority:r});const a=xu(n),u=Un(t,r),d=Qf(n.serverSyncTree_,e),p=bu(u,d,a),g=gl(n),C=yd(n.serverSyncTree_,e,p,g,!0);Td(n.eventQueue_,C),n.server_.put(e.toString(),u.val(!0),(R,U)=>{const H="ok"===R;H||Hn("set at "+e+" failed: "+R);const te=xo(n.serverSyncTree_,g,!H);Si(n.eventQueue_,e,te),function No(n,e,t,r){e&&ea(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const u=new Error(a);u.code=i,e(u)}})}(0,i,R,U)});const A=x0(n,e);Sd(n,A),Si(n.eventQueue_,A,[])}function ip(n,e,t){let r;r=".info"===xt(e._path)?Kf(n.infoSyncTree_,e,t):Kf(n.serverSyncTree_,e,t),Zm(n.eventQueue_,e._path,r)}function Ad(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),rn(t,...e)}function n_(n,e,t){return Qf(n.serverSyncTree_,e,t)||Ht.EMPTY_NODE}function Mu(n,e=n.transactionQueueTree_){if(e||r_(n,e),ha(e)){const t=PD(n,e);K(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function t1(n,e,t){const r=t.map(g=>g.currentWriteId),i=n_(n,e,r);let a=i;const u=i.hash();for(let g=0;g<t.length;g++){const C=t[g];K(0===C.status,"tryToSendTransactionQueue_: items in queue should all be run."),C.status=1,C.retryCount++;const A=Ai(e,C.path);a=a.updateChild(A,C.currentOutputSnapshotRaw)}const d=a.val(!0),p=e;n.server_.put(p.toString(),d,g=>{Ad(n,"transaction put response",{path:p.toString(),status:g});let C=[];if("ok"===g){const A=[];for(let R=0;R<t.length;R++)t[R].status=2,C=C.concat(xo(n.serverSyncTree_,t[R].currentWriteId)),t[R].onComplete&&A.push(()=>t[R].onComplete(null,!0,t[R].currentOutputSnapshotResolved)),t[R].unwatcher();r_(n,Iu(n.transactionQueueTree_,e)),Mu(n,n.transactionQueueTree_),Si(n.eventQueue_,e,C);for(let R=0;R<A.length;R++)ea(A[R])}else{if("datastale"===g)for(let A=0;A<t.length;A++)t[A].status=3===t[A].status?4:0;else{Hn("transaction at "+p.toString()+" failed: "+g);for(let A=0;A<t.length;A++)t[A].status=4,t[A].abortReason=g}Sd(n,e)}},u)}(n,Au(e),t)}else Du(e)&&Ed(e,t=>{Mu(n,t)})}function Sd(n,e){const t=ND(n,e),r=Au(t);return function n1(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const p=e[d],g=Ai(t,p.path);let A,C=!1;if(K(null!==g,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)C=!0,A=p.abortReason,i=i.concat(xo(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)C=!0,A="maxretry",i=i.concat(xo(n.serverSyncTree_,p.currentWriteId,!0));else{const R=n_(n,p.path,u);p.currentInputSnapshot=R;const U=e[d].update(R.val());if(void 0!==U){Su("transaction failed: Data returned ",U,p.path);let H=Un(U);"object"==typeof U&&null!=U&&An(U,".priority")||(H=H.updatePriority(R.getPriority()));const Ae=p.currentWriteId,lt=xu(n),_t=bu(H,R,lt);p.currentOutputSnapshotRaw=H,p.currentOutputSnapshotResolved=_t,p.currentWriteId=gl(n),u.splice(u.indexOf(Ae),1),i=i.concat(yd(n.serverSyncTree_,p.path,_t,p.currentWriteId,p.applyLocally)),i=i.concat(xo(n.serverSyncTree_,Ae,!0))}else C=!0,A="nodata",i=i.concat(xo(n.serverSyncTree_,p.currentWriteId,!0))}Si(n.eventQueue_,t,i),i=[],C&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&r.push("nodata"===A?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(A),!1,null)))}r_(n,n.transactionQueueTree_);for(let d=0;d<r.length;d++)ea(r[d]);Mu(n,n.transactionQueueTree_)}(n,PD(n,t),r),r}function ND(n,e){let t,r=n.transactionQueueTree_;for(t=xt(e);null!==t&&void 0===ha(r);)r=Iu(r,t),t=xt(e=un(e));return r}function PD(n,e){const t=[];return OD(n,e,t),t.sort((r,i)=>r.order-i.order),t}function OD(n,e,t){const r=ha(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Ed(e,i=>{OD(n,i,t)})}function r_(n,e){const t=ha(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,vd(e,t.length>0?t:void 0)}Ed(e,r=>{r_(n,r)})}function x0(n,e){const t=Au(ND(n,e)),r=Iu(n.transactionQueueTree_,e);return function ED(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{M0(n,i)}),M0(n,r),v0(r,i=>{M0(n,i)}),t}function M0(n,e){const t=ha(e);if(t){const r=[];let i=[],a=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?(K(a===u-1,"All SENT items should be at beginning of queue."),a=u,t[u].status=3,t[u].abortReason="set"):(K(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(xo(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===a?vd(e,void 0):t.length=a+1,Si(n.eventQueue_,Au(e),i);for(let u=0;u<r.length;u++)ea(r[u])}}const xd=function(n,e){const t=RD(n),r=t.namespace;return"firebase.com"===t.domain&&lr(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&lr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Hn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Kc(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new jt(t.pathString)}},RD=function(n){let e="",t="",r="",i="",a="",u=!0,d="https",p=443;if("string"==typeof n){let g=n.indexOf("//");g>=0&&(d=n.substring(0,g-1),n=n.substring(g+2));let C=n.indexOf("/");-1===C&&(C=n.length);let A=n.indexOf("?");-1===A&&(A=n.length),e=n.substring(0,Math.min(C,A)),C<A&&(i=function r1(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(C,A)));const R=function fa(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Hn(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,A)));g=e.indexOf(":"),g>=0?(u="https"===d||"wss"===d,p=parseInt(e.substring(g+1),10)):g=e.length;const U=e.slice(0,g);if("localhost"===U.toLowerCase())t="localhost";else if(U.split(".").length<=2)t=U;else{const H=e.indexOf(".");r=e.substring(0,H).toLowerCase(),t=e.substring(H+1),a=r}"ns"in R&&(a=R.ns)}return{host:e,port:p,domain:t,subdomain:r,secure:u,scheme:d,pathString:i,namespace:a}};class i_{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+se(this.snapshot.exportVal())}}class sp{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class op{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return K(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class zi{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Xt(this._path)?null:il(this._path)}get ref(){return new qi(this._repo,this._path)}get _queryIdentifier(){const e=WE(this._queryParams),t=Xs(e);return"{}"===t?"default":t}get _queryObject(){return WE(this._queryParams)}isEqual(e){if(!((e=Cn(e))instanceof zi))return!1;const t=this._repo===e._repo,r=FE(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function su(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class qi extends zi{constructor(e,t){super(e,t,new $E,!1)}get parent(){const e=kE(this._path);return null===e?null:new qi(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class ml{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new jt(e),r=Nu(this.ref,e);return new ml(this._node.getChild(t),r,Dn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new ml(i,Nu(this.ref,r),Dn)))}hasChild(e){const t=new jt(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function lp(n,e){return(n=Cn(n))._checkNotDeleted("ref"),void 0!==e?Nu(n._root,e):n._root}function Nu(n,e){return null===xt((n=Cn(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),ep("child","path",t,!1)):ep("child","path",e,!1),new qi(n._repo,Vt(n._path,e));var t}function pa(n,e){n=Cn(n),oo("set",n._path),so("set",e,n._path,!1);const t=new st;return Dd(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}class Ou{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new i_("value",this,new ml(e.snapshotNode,new qi(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new sp(this,e,t):null}matches(e){return e instanceof Ou&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Ru{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new sp(this,e,t):null}createEvent(e,t){K(null!=e.childName,"Child events should have a childName.");const r=Nu(new qi(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new i_(e.type,this,new ml(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Ru&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function o_(n,e,t,r){return function _l(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const p=t,g=(C,A)=>{ip(n._repo,n,d),p(C,A)};g.userCallback=t.userCallback,g.context=t.context,t=g}const u=new op(t,a||void 0),d="value"===e?new Ou(u):new Ru(e,u);return function SD(n,e,t){let r;r=".info"===xt(e._path)?jm(n.infoSyncTree_,e,t):jm(n.serverSyncTree_,e,t),Zm(n.eventQueue_,e._path,r)}(n._repo,n,d),()=>ip(n._repo,n,d)}(n,"value",e,t,r)}(function dD(n){K(!Wf,"__referenceConstructor has already been defined"),Wf=n})(qi),function c0(n){K(!zf,"__referenceConstructor has already been defined"),zf=n}(qi);const u_={};function ZD(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||lr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),rn("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,g,u=xd(a,i),d=u.repoInfo;"undefined"!=typeof process&&process.env&&(g=process.env.FIREBASE_DATABASE_EMULATOR_HOST),g?(p=!0,a=`http://${g}?ns=${d.namespace}`,u=xd(a,i),d=u.repoInfo):p=!u.repoInfo.secure;const C=i&&p?new ta(ta.OWNER):new Wc(n.name,n.options,e);(function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Cd(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),C0(n)}(t))throw new Error(Re(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",u),Xt(u.path)||lr("Database URL must point to the root of a Firebase Database (not including a child path).");const A=function p1(n,e,t,r){let i=u_[e.name];i||(i={},u_[e.name]=i);let a=i[n.toURLString()];return a&&lr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new Xm(n,false,t,r),i[n.toURLString()]=a,a}(d,n,C,new Gc(n.name,t));return new XD(A,n)}class XD{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Mo(n,e,t){if(n.stats_=Yc(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Mf(n.repoInfo_,(r,i,a,u)=>{np(n,r,i,a,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>ID(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{se(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Ns(n.repoInfo_,e,(r,i,a,u)=>{np(n,r,i,a,u)},r=>{ID(n,r)},r=>{!function I0(n,e){gr(e,(t,r)=>{D0(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function Qn(n,e){const t=n.toString();return nu[t]||(nu[t]=e()),nu[t]}(n.repoInfo_,()=>new jI(n.stats_,n.server_)),n.infoData_=new ZR,n.infoSyncTree_=new Vm({startListening:(r,i,a,u)=>{let d=[];const p=n.infoData_.getNode(r._path);return p.isEmpty()||(d=qf(n.infoSyncTree_,r._path,p),setTimeout(()=>{u("ok")},0)),d},stopListening:()=>{}}),D0(n,"connected",!1),n.serverSyncTree_=new Vm({startListening:(r,i,a,u)=>(n.server_.listen(r,a,i,(d,p)=>{const g=u(d,p);Si(n.eventQueue_,r._path,g)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new qi(this._repo,Lt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function JD(n,e){const t=u_[e];(!t||t[n.key]!==n)&&lr(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function xD(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&lr("Cannot call "+e+" on a deleted database.")}}function L0(n=Di(),e){return Yr(n,"database").getImmediate({identifier:e})}Ns.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Ns.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function h_(n){(function Zr(n){$i=n})(Mr),pr(new Yt("database",(e,{instanceIdentifier:t})=>ZD(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),Tn(yn,"0.13.6",n),Tn(yn,"0.13.6","esm2017")}();var Nd=L(5592);let B0=(()=>{class n{constructor(t){this.auth=t,this.database=L0(),this.readData()}writeUserData(t){let i=function Pu(n,e){n=Cn(n),oo("push",n._path),so("push",e,n._path,!0);const t=tp(n._repo),r=ld(t),i=Nu(n,r),a=Nu(n,r);let u;return u=null!=e?pa(a,e).then(()=>a):Promise.resolve(a),i.then=u.then.bind(u),i.catch=u.then.bind(u,void 0),i}(lp(this.database,"chat"));pa(i,t)}readData(){o_(lp(this.database,"chat"),r=>{this.items=Object.values(r.val())})}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Nd.e))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var dp=L(4738),fs=L(9808),j0=L(8996),Mi=L(8306),hp=L(4742),p_=L(8421),tA=L(7669),H0=L(5403),fp=L(3268),$0=L(1810),ga=L(4004);let G0=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(_.Qsj),_.Y36(_.SBq))},n.\u0275dir=_.lG2({type:n}),n})(),Oo=(()=>{class n extends G0{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=_.n5z(n)))(r||n)}}(),n.\u0275dir=_.lG2({type:n,features:[_.qOj]}),n})();const Vs=new _.OlP("NgValueAccessor"),nA={provide:Vs,useExisting:(0,_.Gpc)(()=>ku),multi:!0},rA=new _.OlP("CompositionEventMode");let ku=(()=>{class n extends G0{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function __(){const n=(0,fs.q)()?(0,fs.q)().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(_.Qsj),_.Y36(_.SBq),_.Y36(rA,8))},n.\u0275dir=_.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&_.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[_._Bn([nA]),_.qOj]}),n})();function Ro(n){return null==n||0===n.length}function yl(n){return null!=n&&"number"==typeof n.length}const Br=new _.OlP("NgValidators"),ma=new _.OlP("NgAsyncValidators"),iA=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ki{static min(e){return function z0(n){return e=>{if(Ro(e.value)||Ro(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function q0(n){return e=>{if(Ro(e.value)||Ro(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return K0(e)}static requiredTrue(e){return function Y0(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Us(n){return Ro(n.value)||iA.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function pp(n){return e=>Ro(e.value)||!yl(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function y_(n){return e=>yl(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function v_(n){if(!n)return Pd;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Ro(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return oA(e)}static composeAsync(e){return X0(e)}}function K0(n){return Ro(n.value)?{required:!0}:null}function Pd(n){return null}function E_(n){return null!=n}function Q0(n){const e=(0,_.QGY)(n)?(0,j0.D)(n):n;return(0,_.CqO)(e),e}function Z0(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function J0(n,e){return e.map(t=>t(n))}function w_(n){return n.map(e=>function sA(n){return!n.validate}(e)?e:t=>e.validate(t))}function oA(n){if(!n)return null;const e=n.filter(E_);return 0==e.length?null:function(t){return Z0(J0(t,e))}}function gp(n){return null!=n?oA(w_(n)):null}function X0(n){if(!n)return null;const e=n.filter(E_);return 0==e.length?null:function(t){return function g_(...n){const e=(0,tA.jO)(n),{args:t,keys:r}=(0,hp.D)(n),i=new Mi.y(a=>{const{length:u}=t;if(!u)return void a.complete();const d=new Array(u);let p=u,g=u;for(let C=0;C<u;C++){let A=!1;(0,p_.Xf)(t[C]).subscribe((0,H0.x)(a,R=>{A||(A=!0,g--),d[C]=R},()=>p--,void 0,()=>{(!p||!A)&&(g||a.next(r?(0,$0.n)(r,d):d),a.complete())}))}});return e?i.pipe((0,fp.Z)(e)):i}(J0(t,e).map(Q0)).pipe((0,ga.U)(Z0))}}function C_(n){return null!=n?X0(w_(n)):null}function aA(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function lA(n){return n._rawValidators}function mp(n){return n._rawAsyncValidators}function b_(n){return n?Array.isArray(n)?n:[n]:[]}function Od(n,e){return Array.isArray(n)?n.includes(e):n===e}function T_(n,e){const t=b_(e);return b_(n).forEach(i=>{Od(t,i)||t.push(i)}),t}function uA(n,e){return b_(e).filter(t=>!Od(n,t))}class ps{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=gp(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=C_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class _a extends ps{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class pi extends ps{get formDirective(){return null}get path(){return null}}class I_{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let _p=(()=>{class n extends I_{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(_a,2))},n.\u0275dir=_.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&_.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[_.qOj]}),n})(),ew=(()=>{class n extends I_{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(pi,10))},n.\u0275dir=_.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&_.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[_.qOj]}),n})();function Vu(n,e){return[...e.path,n]}function Ni(n,e){Uu(n,e),e.valueAccessor.writeValue(n.value),function A_(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&El(n,e)})}(n,e),function ju(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Bu(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&El(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function vl(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ya(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),gi(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function br(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Uu(n,e){const t=lA(n);null!==e.validator?n.setValidators(aA(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=mp(n);null!==e.asyncValidator?n.setAsyncValidators(aA(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();br(e._rawValidators,i),br(e._rawAsyncValidators,i)}function gi(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=lA(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(u=>u!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=mp(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(u=>u!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return br(e._rawValidators,r),br(e._rawAsyncValidators,r),t}function El(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function vp(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function Ep(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===ku?t=a:function nw(n){return Object.getPrototypeOf(n.constructor)===Oo}(a)?r=a:i=a}),i||r||t||null}function wp(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Gu="VALID",Vd="INVALID",Wu="PENDING",zu="DISABLED";function bp(n){return(Ud(n)?n.validators:n)||null}function x_(n){return Array.isArray(n)?gp(n):n||null}function M_(n,e){return(Ud(e)?e.asyncValidators:n)||null}function rw(n){return Array.isArray(n)?C_(n):n||null}function Ud(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const N_=n=>n instanceof Hd,Bd=n=>n instanceof Tp,iw=n=>n instanceof vA;function sw(n){return N_(n)?n.value:n.getRawValue()}function yA(n,e){const t=Bd(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new _.vHH(1e3,"");if(!r[e])throw new _.vHH(1001,"")}function ow(n,e){Bd(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new _.vHH(1002,"")})}class jd{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=x_(this._rawValidators),this._composedAsyncValidatorFn=rw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Gu}get invalid(){return this.status===Vd}get pending(){return this.status==Wu}get disabled(){return this.status===zu}get enabled(){return this.status!==zu}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=x_(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=rw(e)}addValidators(e){this.setValidators(T_(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(T_(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(uA(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(uA(e,this._rawAsyncValidators))}hasValidator(e){return Od(this._rawValidators,e)}hasAsyncValidator(e){return Od(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Wu,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=zu,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Gu,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Gu||this.status===Wu)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?zu:Gu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Wu,this._hasOwnPendingAsyncValidator=!0;const t=Q0(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function _A(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=Bd(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:iw(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new _.vpe,this.statusChanges=new _.vpe}_calculateStatus(){return this._allControlsDisabled()?zu:this.errors?Vd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Wu)?Wu:this._anyControlsHaveStatus(Vd)?Vd:Gu}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ud(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Hd extends jd{constructor(e=null,t,r){super(bp(t),M_(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ud(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){wp(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){wp(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Tp extends jd{constructor(e,t,r){super(bp(t),M_(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){ow(this,e),Object.keys(e).forEach(r=>{yA(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=sw(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class vA extends jd{constructor(e,t,r){super(bp(t),M_(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){ow(this,e),e.forEach((r,i)=>{yA(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>sw(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const uw={provide:_a,useExisting:(0,_.Gpc)(()=>R_)},Gd=(()=>Promise.resolve(null))();let R_=(()=>{class n extends _a{constructor(t,r,i,a,u){super(),this._changeDetectorRef=u,this.control=new Hd,this._registered=!1,this.update=new _.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Ep(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),vp(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ni(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Gd.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=""===r||r&&"false"!==r;Gd.then(()=>{var a;i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),null===(a=this._changeDetectorRef)||void 0===a||a.markForCheck()})}_getPath(t){return this._parent?Vu(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(pi,9),_.Y36(Br,10),_.Y36(ma,10),_.Y36(Vs,10),_.Y36(_.sBO,8))},n.\u0275dir=_.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[_._Bn([uw]),_.qOj,_.TTD]}),n})(),Dp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=_.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),dw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({}),n})();const Wd=new _.OlP("NgModelWithFormControlWarning"),CA={provide:pi,useExisting:(0,_.Gpc)(()=>Sp)};let Sp=(()=>{class n extends pi{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new _.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(gi(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Ni(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){ya(t.control||null,t,!1),wp(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function S_(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(ya(r||null,t),N_(i)&&(Ni(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function wl(n,e){Uu(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function Hu(n,e){return gi(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Uu(this.form,this),this._oldForm&&gi(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(Br,10),_.Y36(ma,10))},n.\u0275dir=_.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&_.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_._Bn([CA]),_.qOj,_.TTD]}),n})();const Mp={provide:_a,useExisting:(0,_.Gpc)(()=>bl)};let bl=(()=>{class n extends _a{constructor(t,r,i,a,u){super(),this._ngModelWarningConfig=u,this._added=!1,this.update=new _.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Ep(0,a)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),vp(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Vu(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(_.Y36(pi,13),_.Y36(Br,10),_.Y36(ma,10),_.Y36(Vs,10),_.Y36(Wd,8))},n.\u0275dir=_.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[_._Bn([Mp]),_.qOj,_.TTD]}),n})(),va=(()=>{class n{constructor(){this._validator=Pd}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Pd,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=_.lG2({type:n,features:[_.TTD]}),n})();const SA={provide:Br,useExisting:(0,_.Gpc)(()=>Tl),multi:!0};let Tl=(()=>{class n extends va{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function DA(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>K0}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=_.n5z(n)))(r||n)}}(),n.\u0275dir=_.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&_.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[_._Bn([SA]),_.qOj]}),n})(),Cw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({imports:[[dw]]}),n})(),Tr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({imports:[Cw]}),n})(),Q_=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Wd,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({imports:[Cw]}),n})(),bw=(()=>{class n{group(t,r=null){const i=this._reduceControls(t);let d,a=null,u=null;return null!=r&&(function NA(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(a=null!=r.validators?r.validators:null,u=null!=r.asyncValidators?r.asyncValidators:null,d=null!=r.updateOn?r.updateOn:void 0):(a=null!=r.validator?r.validator:null,u=null!=r.asyncValidator?r.asyncValidator:null)),new Tp(i,{asyncValidators:u,updateOn:d,validators:a})}control(t,r,i){return new Hd(t,r,i)}array(t,r,i){const a=t.map(u=>this._createControl(u));return new vA(a,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return N_(t)||Bd(t)||iw(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:Q_}),n})();var OA=L(5577),Tw=L(1144),Ea=L(576);const Ku=["addListener","removeListener"],RA=["addEventListener","removeEventListener"],kA=["on","off"];function Yu(n,e,t,r){if((0,Ea.m)(t)&&(r=t,t=void 0),r)return Yu(n,e,t).pipe((0,fp.Z)(r));const[i,a]=function Z_(n){return(0,Ea.m)(n.addEventListener)&&(0,Ea.m)(n.removeEventListener)}(n)?RA.map(u=>d=>n[u](e,d,t)):function Dw(n){return(0,Ea.m)(n.addListener)&&(0,Ea.m)(n.removeListener)}(n)?Ku.map(Iw(n,e)):function P1(n){return(0,Ea.m)(n.on)&&(0,Ea.m)(n.off)}(n)?kA.map(Iw(n,e)):[];if(!i&&(0,Tw.z)(n))return(0,OA.z)(u=>Yu(u,e,t))((0,p_.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new Mi.y(u=>{const d=(...p)=>u.next(1<p.length?p:p[0]);return i(d),()=>a(d)})}function Iw(n,e){return t=>r=>n[t](e,r)}var Kd=L(7579),Pi=L(515),J_=L(6451),X_=L(5032);const Bs=new Mi.y(X_.Z);var Yi=L(8505);const Op={now:()=>(Op.delegate||Date).now(),delegate:void 0};class Aw extends Kd.x{constructor(e=1/0,t=1/0,r=Op){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:u}=this;t||(r.push(e),!i&&r.push(a.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let u=0;u<a.length&&!e.closed;u+=r?1:2)e.next(a[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const u=t.now();let d=0;for(let p=1;p<r.length&&r[p]<=u;p+=2)d=p;d&&r.splice(0,d+1)}}}var FA=L(3099);function Sw(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,FA.B)({connector:()=>new Aw(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}var LA=L(4671),xw=L(4482);function Yd(n,e){return n===e}var Mw=L(3900),ty=L(8675);function Nw(n){return(0,ga.U)(()=>n)}function ny(n){return(0,xw.e)((e,t)=>{(0,p_.Xf)(n).subscribe((0,H0.x)(t,()=>t.complete(),X_.Z)),!t.closed&&e.subscribe(t)})}function Pw(n,e){if(1&n&&(_.TgZ(0,"label",2),_._uU(1),_.qZA()),2&n){const t=_.oxw();_.ekj("hide-control",t.hideError),_.xp6(1),_.Oqu(t.errorText)}}function Rp(n,e){}function VA(n,e){1&n&&_.YNc(0,Rp,0,0,"ng-template")}let ry=(()=>{class n{constructor(t,r){this.cdr=t,this.host=r,this.errorText=null,this.hideError=!0,this._addClasses=[]}createTemplate(t,r,i){this.errorTemplate=t,this.errorContext={$implicit:r,text:i},this.cdr.markForCheck()}set customClass(t){this.hideError||(this._addClasses=Array.isArray(t)?t:t.split(/\s/),this.host.nativeElement.classList.add(...this._addClasses))}set text(t){t!==this.errorText&&(this.errorText=t,this.hideError=!t,this.hideError&&this.host.nativeElement.classList.remove(...this._addClasses),this.cdr.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(_.sBO),_.Y36(_.SBq))},n.\u0275cmp=_.Xpm({type:n,selectors:[["control-error"]],decls:2,vars:3,consts:[["class","control-error",3,"hide-control",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"control-error"]],template:function(t,r){1&t&&(_.YNc(0,Pw,2,3,"label",0),_.YNc(1,VA,1,0,null,1)),2&t&&(_.Q6J("ngIf",!r.errorTemplate),_.xp6(1),_.Q6J("ngTemplateOutlet",r.errorTemplate)("ngTemplateOutletContext",r.errorContext))},directives:[fs.O5,fs.tP],styles:[".hide-control[_ngcontent-%COMP%]{display:none!important}[_nghost-%COMP%]{display:block}"],changeDetection:0}),n})();const iy=new _.OlP("FORM_ERRORS",{providedIn:"root",factory:()=>({})}),kp=new _.OlP("ErrorTailorConfigProvider");let Qd=(()=>{class n{constructor(t){this.vcr=t}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(_.s_b))},n.\u0275dir=_.lG2({type:n,selectors:[["","controlErrorAnchor",""]],exportAs:["controlErrorAnchor"]}),n})(),Qu=(()=>{class n{constructor(t){this.host=t,this.submit$=Yu(this.element,"submit").pipe((0,Yi.b)(()=>{!1===this.element.classList.contains("form-submitted")&&this.element.classList.add("form-submitted")}),Sw({refCount:!0,bufferSize:1})),this.reset$=Yu(this.element,"reset").pipe((0,Yi.b)(()=>{this.element.classList.remove("form-submitted")}),Sw({refCount:!0,bufferSize:1}))}get element(){return this.host.nativeElement}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(_.SBq))},n.\u0275dir=_.lG2({type:n,selectors:[["form","errorTailor",""]]}),n})(),Zd=(()=>{class n{constructor(t,r,i,a,u,d,p,g,C){this.vcr=t,this.resolver=r,this.host=i,this.config=a,this.globalErrors=u,this.controlErrorAnchorParent=d,this.form=p,this.ngControl=g,this.controlContainer=C,this.customErrors={},this.destroy=new Kd.x,this.showError$=new Kd.x,this.mergedConfig={},this.submit$=this.form?this.form.submit$:Pi.E,this.reset$=this.form?this.form.reset$:Pi.E}ngOnInit(){var t,r;this.mergedConfig=this.buildConfig(),this.anchor=this.resolveAnchor(),this.control=(this.controlContainer||this.ngControl).control;const i=!!this.control.asyncValidator,a=this.control.statusChanges.pipe(function ey(n,e=LA.y){return n=null!=n?n:Yd,(0,xw.e)((t,r)=>{let i,a=!0;t.subscribe((0,H0.x)(r,u=>{const d=e(u);(a||!n(i,d))&&(a=!1,i=d,r.next(u))}))})}()),u=this.control.valueChanges,d=(0,J_.T)(a,u);let p=Pi.E,g=Pi.E,C=Pi.E;(!this.controlErrorsClass||0===(null===(t=this.controlErrorsClass)||void 0===t?void 0:t.length))&&this.mergedConfig.controlErrorsClass&&this.mergedConfig.controlErrorsClass&&(this.controlErrorsClass=this.mergedConfig.controlErrorsClass),(!this.controlCustomClass||0===(null===(r=this.controlCustomClass)||void 0===r?void 0:r.length))&&this.mergedConfig.controlCustomClass&&this.mergedConfig.controlCustomClass&&(this.controlCustomClass=this.mergedConfig.controlCustomClass),this.mergedConfig.controlErrorsOn.async&&i&&(p=a),this.isInput&&this.mergedConfig.controlErrorsOn.change&&(C=u),this.isInput&&this.mergedConfig.controlErrorsOn.blur&&(g=Yu(this.host.nativeElement,"focusout").pipe((0,Mw.w)(()=>u.pipe((0,ty.O)(!0)))));const R=(0,J_.T)(this.submit$.pipe(Nw(!0)),this.reset$.pipe(Nw(!1))).pipe((0,Mw.w)(U=>U?d.pipe((0,ty.O)(!0)):Bs));this.reset$.pipe(ny(this.destroy)).subscribe(()=>this.clearRefs()),(0,J_.T)(p,g,C,R,this.showError$).pipe(ny(this.destroy)).subscribe(()=>this.valueChanges())}setError(t,r){if(!this.ref){const a=this.resolver.resolveComponentFactory(this.mergedConfig.controlErrorComponent);this.ref=this.anchor.createComponent(a)}const i=this.ref.instance;this.controlErrorsTpl?i.createTemplate(this.controlErrorsTpl,r,t):i.text=t,this.controlErrorsClass&&(i.customClass=this.controlErrorsClass),!this.controlErrorAnchor&&this.mergedConfig.controlErrorComponentAnchorFn&&(this.customAnchorDestroyFn=this.mergedConfig.controlErrorComponentAnchorFn(this.host.nativeElement,this.ref.hostView.rootNodes[0]))}showError(){this.showError$.next()}hideError(){this.setError(null)}ngOnDestroy(){this.destroy.next(),this.clearRefs()}get isInput(){return this.mergedConfig.blurPredicate(this.host.nativeElement)}clearRefs(){this.customAnchorDestroyFn&&(this.customAnchorDestroyFn(),this.customAnchorDestroyFn=null),this.ref&&this.ref.destroy(),this.ref=null}valueChanges(){var t,r;const i=this.control.errors,a=Array.isArray(this.controlCustomClass)?this.controlCustomClass:null!==(r=null===(t=this.controlCustomClass)||void 0===t?void 0:t.split(/\s/))&&void 0!==r?r:[];if(i){const[u]=Object.keys(i),d=this.customErrors[u]||this.globalErrors[u];if(!d)return;const p="function"==typeof d?d(i[u]):d;this.isInput&&(this.host.nativeElement.parentElement.classList.add("error-tailor-has-error"),this.controlCustomClass&&this.host.nativeElement.classList.add(...a)),this.setError(p,i)}else this.ref&&(this.isInput&&(this.host.nativeElement.parentElement.classList.remove("error-tailor-has-error"),this.controlCustomClass&&this.host.nativeElement.classList.remove(...a)),this.setError(null))}resolveAnchor(){return this.controlErrorAnchor?this.controlErrorAnchor.vcr:this.controlErrorAnchorParent?this.controlErrorAnchorParent.vcr:this.vcr}buildConfig(){var t,r,i,a,u,d,p,g,C;return Object.assign(Object.assign({blurPredicate:A=>"INPUT"===A.tagName||"SELECT"===A.tagName,controlErrorComponent:ry},this.config),{controlErrorsOn:{async:null===(i=null!==(t=this.controlErrorsOnAsync)&&void 0!==t?t:null===(r=this.config.controlErrorsOn)||void 0===r?void 0:r.async)||void 0===i||i,blur:null===(d=null!==(a=this.controlErrorsOnBlur)&&void 0!==a?a:null===(u=this.config.controlErrorsOn)||void 0===u?void 0:u.blur)||void 0===d||d,change:null!==(C=null!==(p=this.controlErrorsOnChange)&&void 0!==p?p:null===(g=this.config.controlErrorsOn)||void 0===g?void 0:g.change)&&void 0!==C&&C}})}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(_.s_b),_.Y36(_._Vd),_.Y36(_.SBq),_.Y36(kp),_.Y36(iy),_.Y36(Qd,8),_.Y36(Qu,8),_.Y36(_a,10),_.Y36(pi,10))},n.\u0275dir=_.lG2({type:n,selectors:[["","formControlName","",3,"controlErrorsIgnore",""],["","formControl","",3,"controlErrorsIgnore",""],["","formGroup","",3,"controlErrorsIgnore",""],["","formGroupName","",3,"controlErrorsIgnore",""],["","formArrayName","",3,"controlErrorsIgnore",""],["","ngModel","",3,"controlErrorsIgnore",""]],inputs:{customErrors:["controlErrors","customErrors"],controlErrorsClass:"controlErrorsClass",controlCustomClass:"controlCustomClass",controlErrorsTpl:"controlErrorsTpl",controlErrorsOnAsync:"controlErrorsOnAsync",controlErrorsOnBlur:"controlErrorsOnBlur",controlErrorsOnChange:"controlErrorsOnChange",controlErrorAnchor:"controlErrorAnchor"},exportAs:["errorTailor"]}),n})(),Ow=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[{provide:kp,useValue:t},Object.assign({provide:iy},t.errors)]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({imports:[[fs.ez]]}),n})();function Rw(n,e){if(1&n&&(_.TgZ(0,"div",13)(1,"div",14)(2,"div",15)(3,"h6"),_._uU(4,"Yo"),_.qZA(),_.TgZ(5,"p"),_._uU(6),_.qZA(),_.TgZ(7,"time"),_._uU(8),_.qZA()()()()),2&n){const t=_.oxw().$implicit;_.xp6(6),_.Oqu(t.message),_.xp6(2),_.Oqu(t.date)}}function kw(n,e){if(1&n&&(_.TgZ(0,"div")(1,"div",16)(2,"div",14)(3,"div",17)(4,"h6"),_._uU(5),_.qZA(),_.TgZ(6,"p"),_._uU(7),_.qZA(),_.TgZ(8,"time"),_._uU(9),_.qZA()()()()()),2&n){const t=_.oxw().$implicit;_.xp6(5),_.Oqu(t.user),_.xp6(2),_.Oqu(t.message),_.xp6(2),_.Oqu(t.date)}}function Fw(n,e){if(1&n&&(_.TgZ(0,"div"),_.YNc(1,Rw,9,2,"div",11),_.YNc(2,kw,10,3,"div",12),_.qZA()),2&n){const t=e.$implicit,r=_.oxw();_.xp6(1),_.Q6J("ngIf",r.AuthService.usuarioLogueado.correo==t.user),_.xp6(1),_.Q6J("ngIf",r.AuthService.usuarioLogueado.correo!=t.user)}}let Lw=(()=>{class n{constructor(t,r){this.Chat=t,this.AuthService=r,this.mensaje={user:"",message:"",date:Date().toString()}}ngOnInit(){}sendMessage(){let t=new Date;this.mensaje.user=this.AuthService.usuarioLogueado.correo,this.mensaje.date=t.getHours()+":"+t.getMinutes(),this.Chat.writeUserData(this.mensaje),this.mensaje.message=""}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(B0),_.Y36(Nd.e))},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-chat"]],decls:14,vars:2,consts:[[1,"container"],[1,"box"],["id","chat_window_1",1,"row","chat-window","col-md-12",2,"margin-left","10px"],[1,"col-xs-12","col-md-12"],[1,"panel","panel-default"],[1,"panel-body","msg_container_base"],[4,"ngFor","ngForOf"],[1,"panel-footer"],[1,"input-group"],["id","btn-input","type","text","placeholder","Ingrese su mensaje",1,"form-control","input-sm","chat_input",3,"ngModel","ngModelChange"],[1,"buttons",3,"click"],["class","row msg_container base_sent",4,"ngIf"],[4,"ngIf"],[1,"row","msg_container","base_sent"],[1,"col-md-10","col-xs-10"],[1,"messages","msg_sent"],[1,"row","msg_container","base_receive"],[1,"messages","msg_receive"]],template:function(t,r){1&t&&(_._UZ(0,"app-menu"),_.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),_.YNc(7,Fw,3,2,"div",6),_.qZA()(),_.TgZ(8,"div",7)(9,"div",8)(10,"input",9),_.NdJ("ngModelChange",function(a){return r.mensaje.message=a}),_.qZA(),_.TgZ(11,"div")(12,"button",10),_.NdJ("click",function(){return r.sendMessage()}),_._uU(13,"Enviar"),_.qZA()()()()()()()()),2&t&&(_.xp6(7),_.Q6J("ngForOf",r.Chat.items),_.xp6(3),_.Q6J("ngModel",r.mensaje.message))},directives:[dp.M,fs.sg,fs.O5,ku,_p,R_,Zd],styles:['.container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh}.box[_ngcontent-%COMP%]{padding:1em;margin-top:8em;border-radius:10px;box-shadow:0 14px 28px #00000040,0 10px 10px #00000038;min-width:800px;-webkit-backdrop-filter:blur(1px);backdrop-filter:blur(1px);background-color:#0c3b87aa}.chat-window[_ngcontent-%COMP%]{bottom:0;margin-left:10px}.chat-window[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > .panel[_ngcontent-%COMP%]{border-radius:5px 5px 0 0}.icon_minim[_ngcontent-%COMP%]{padding:2px 10px}.msg_container_base[_ngcontent-%COMP%]{margin:0;padding:0 10px 10px;max-height:500px;overflow-x:hidden}.msg_receive[_ngcontent-%COMP%]{padding-left:0;margin-left:0;border-radius:5px;background-color:#182229}.msg_sent[_ngcontent-%COMP%]{padding-bottom:20px!important;margin-right:0;background-color:#2163cede}.msg_sent[_ngcontent-%COMP%] > h6[_ngcontent-%COMP%]{color:#000}.msg_sent[_ngcontent-%COMP%] > time[_ngcontent-%COMP%]{color:#000}.msg_receive[_ngcontent-%COMP%] > h6[_ngcontent-%COMP%]{color:#13ce139e}.msg_receive[_ngcontent-%COMP%] > time[_ngcontent-%COMP%]{color:#13ce139e}.messages[_ngcontent-%COMP%]{padding:10px;border-radius:5px;box-shadow:0 1px 2px #182229;max-width:100%;color:#f0eeeeef}.messages[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:13px;margin:0 0 .2rem}.messages[_ngcontent-%COMP%] > time[_ngcontent-%COMP%]{font-size:11px}.msg_container[_ngcontent-%COMP%]{padding:10px;overflow:hidden;display:flex}.base_receive[_ngcontent-%COMP%] > .avatar[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;right:0;width:0;height:0;border:5px solid #FFF;border-left-color:#0000;border-bottom-color:#0000}.base_sent[_ngcontent-%COMP%]{justify-content:flex-end;align-items:flex-end}.base_sent[_ngcontent-%COMP%] > .avatar[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;width:0;height:0;border:5px solid white;border-right-color:transparent;border-top-color:transparent;box-shadow:1px 1px 2px rgba(black,.2)}.msg_sent[_ngcontent-%COMP%] > time[_ngcontent-%COMP%]{float:right}.msg_container_base[_ngcontent-%COMP%]::-webkit-scrollbar{background-color:#07275c;width:10px}.msg_container_base[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:10px}.btn-group.dropup[_ngcontent-%COMP%]{position:fixed;left:0;bottom:0}.buttons[_ngcontent-%COMP%]{width:100%;border-radius:1em;border:1px solid #07275c;background-color:#07275c;color:#fff;font-weight:700;letter-spacing:1px;text-transform:uppercase;transition:transform 80ms ease-in;padding:8px;cursor:pointer;margin-top:9px}.buttons[_ngcontent-%COMP%]:active, .bAccesoRapido[_ngcontent-%COMP%]:active{transform:scale(.95)}.buttons[_ngcontent-%COMP%]:focus, .bAccesoRapido[_ngcontent-%COMP%]:focus{outline:none}input[_ngcontent-%COMP%]{background-color:#eee;border:none;padding:10px;margin:10px;width:100%;border-radius:1em}']}),n})(),BA=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-home"]],decls:12,vars:0,consts:[[1,"container"],[1,"box"],[1,"lds-roller"]],template:function(t,r){1&t&&(_._UZ(0,"app-menu"),_.TgZ(1,"div",0)(2,"div",1)(3,"div",2),_._UZ(4,"div")(5,"div")(6,"div")(7,"div")(8,"div")(9,"div")(10,"div")(11,"div"),_.qZA()()())},directives:[dp.M],styles:['.container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh}.box[_ngcontent-%COMP%]{margin-top:10em;padding:2em;border-radius:10px;box-shadow:0 14px 28px #00000040,0 10px 10px #00000038;max-width:100%;-webkit-backdrop-filter:blur(1px);backdrop-filter:blur(1px);background-color:#ffffff98}.lds-roller[_ngcontent-%COMP%]{display:inline-block;position:relative;width:80px;height:80px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{animation:lds-roller 1.2s cubic-bezier(.5,0,.5,1) infinite;transform-origin:40px 40px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after{content:" ";display:block;position:absolute;width:7px;height:7px;border-radius:50%;background:#fff;margin:-4px 0 0 -4px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){animation-delay:-36ms}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1):after{top:63px;left:63px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){animation-delay:-72ms}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2):after{top:68px;left:56px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){animation-delay:-.108s}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3):after{top:71px;left:48px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){animation-delay:-.144s}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4):after{top:72px;left:40px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(5){animation-delay:-.18s}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(5):after{top:71px;left:32px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(6){animation-delay:-.216s}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(6):after{top:68px;left:24px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(7){animation-delay:-.252s}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(7):after{top:63px;left:17px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(8){animation-delay:-.288s}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(8):after{top:56px;left:12px}@keyframes lds-roller{0%{transform:rotate(0)}to{transform:rotate(360deg)}}']}),n})();Tn("firebase","9.10.0","app");const Vw="@firebase/installations",sy="0.5.12",Bw=`w:${sy}`,jw="FIS_v2",ko=new Ge("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Hw(n){return n instanceof Wt&&n.code.includes("request-failed")}function oy({projectId:n}){return`https://firebaseinstallations.googleapis.com/v1/projects/${n}/installations`}function $w(n){return{token:n.token,requestStatus:2,expiresIn:Gw(n.expiresIn),creationTime:Date.now()}}function ay(n,e){return Fp.apply(this,arguments)}function Fp(){return(Fp=k(function*(n,e){const r=(yield e.json()).error;return ko.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function ly({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function uy(n,{refreshToken:e}){const t=ly(n);return t.append("Authorization",function Ww(n){return`${jw} ${n}`}(e)),t}function Lp(n){return Vp.apply(this,arguments)}function Vp(){return(Vp=k(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function Gw(n){return Number(n.replace("s","000"))}function zw(n,e){return Up.apply(this,arguments)}function Up(){return(Up=k(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=oy(n),i=ly(n),a=e.getImmediate({optional:!0});if(a){const g=yield a.getHeartbeatsHeader();g&&i.append("x-firebase-client",g)}const d={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:jw,appId:n.appId,sdkVersion:Bw})},p=yield Lp(()=>fetch(r,d));if(p.ok){const g=yield p.json();return{fid:g.fid||t,registrationStatus:2,refreshToken:g.refreshToken,authToken:$w(g.authToken)}}throw yield ay("Create Installation",p)})).apply(this,arguments)}function cy(n){return new Promise(e=>{setTimeout(e,n)})}const Il=/^[cdef][\w-]{21}$/;function KA(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function Zu(n){return function dy(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return Il.test(t)?t:""}catch(n){return""}}function Jd(n){return`${n.appName}!${n.appId}`}const wa=new Map;function YA(n,e){const t=Jd(n);QA(t,e),function bt(n,e){const t=function Yw(){return!Dl&&"BroadcastChannel"in self&&(Dl=new BroadcastChannel("[Firebase] FID Change"),Dl.onmessage=n=>{QA(n.data.key,n.data.fid)}),Dl}();t&&t.postMessage({key:n,fid:e}),function Qw(){0===wa.size&&Dl&&(Dl.close(),Dl=null)}()}(t,e)}function QA(n,e){const t=wa.get(n);if(t)for(const r of t)r(e)}let Dl=null;const lo="firebase-installations-store";let Ju=null;function $n(){return Ju||(Ju=At("firebase-installations-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(lo)}})),Ju}function fy(n,e){return jp.apply(this,arguments)}function jp(){return(jp=k(function*(n,e){const t=Jd(n),i=(yield $n()).transaction(lo,"readwrite"),a=i.objectStore(lo),u=yield a.get(t);return yield a.put(e,t),yield i.done,(!u||u.fid!==e.fid)&&YA(n,e.fid),e})).apply(this,arguments)}function py(n){return gy.apply(this,arguments)}function gy(){return(gy=k(function*(n){const e=Jd(n),r=(yield $n()).transaction(lo,"readwrite");yield r.objectStore(lo).delete(e),yield r.done})).apply(this,arguments)}function Xu(n,e){return Hp.apply(this,arguments)}function Hp(){return(Hp=k(function*(n,e){const t=Jd(n),i=(yield $n()).transaction(lo,"readwrite"),a=i.objectStore(lo),u=yield a.get(t),d=e(u);return void 0===d?yield a.delete(t):yield a.put(d,t),yield i.done,d&&(!u||u.fid!==d.fid)&&YA(n,d.fid),d})).apply(this,arguments)}function $p(n){return Gp.apply(this,arguments)}function Gp(){return(Gp=k(function*(n){let e;const t=yield Xu(n.appConfig,r=>{const i=JA(r),a=XA(n,i);return e=a.registrationPromise,a.installationEntry});return""===t.fid?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})).apply(this,arguments)}function JA(n){return Xd(n||{fid:KA(),registrationStatus:0})}function XA(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(ko.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function eS(n,e){return Al.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:tS(n)}:{installationEntry:e}}function Al(){return(Al=k(function*(n,e){try{const t=yield zw(n,e);return fy(n.appConfig,t)}catch(t){throw Hw(t)&&409===t.customData.serverCode?yield py(n.appConfig):yield fy(n.appConfig,{fid:e.fid,registrationStatus:0}),t}})).apply(this,arguments)}function tS(n){return my.apply(this,arguments)}function my(){return(my=k(function*(n){let e=yield Zw(n.appConfig);for(;1===e.registrationStatus;)yield cy(100),e=yield Zw(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield $p(n);return r||t}return e})).apply(this,arguments)}function Zw(n){return Xu(n,e=>{if(!e)throw ko.create("installation-not-found");return Xd(e)})}function Xd(n){return function Jw(n){return 1===n.registrationStatus&&n.registrationTime+1e4<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function Xw(n,e){return Wp.apply(this,arguments)}function Wp(){return(Wp=k(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=nS(n,t),i=uy(n,t),a=e.getImmediate({optional:!0});if(a){const g=yield a.getHeartbeatsHeader();g&&i.append("x-firebase-client",g)}const d={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:Bw,appId:n.appId}})},p=yield Lp(()=>fetch(r,d));if(p.ok)return $w(yield p.json());throw yield ay("Generate Auth Token",p)})).apply(this,arguments)}function nS(n,{fid:e}){return`${oy(n)}/${e}/authTokens:generate`}function Sl(n){return xl.apply(this,arguments)}function xl(){return(xl=k(function*(n,e=!1){let t;const r=yield Xu(n.appConfig,a=>{if(!yy(a))throw ko.create("not-registered");const u=a.authToken;if(!e&&iS(u))return a;if(1===u.requestStatus)return t=rS(n,e),a;{if(!navigator.onLine)throw ko.create("app-offline");const d=sS(a);return t=tC(n,d),d}});return t?yield t:r.authToken})).apply(this,arguments)}function rS(n,e){return _y.apply(this,arguments)}function _y(){return(_y=k(function*(n,e){let t=yield eC(n.appConfig);for(;1===t.authToken.requestStatus;)yield cy(100),t=yield eC(n.appConfig);const r=t.authToken;return 0===r.requestStatus?Sl(n,e):r})).apply(this,arguments)}function eC(n){return Xu(n,e=>{if(!yy(e))throw ko.create("not-registered");return function oS(n){return 1===n.requestStatus&&n.requestTime+1e4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function tC(n,e){return zp.apply(this,arguments)}function zp(){return(zp=k(function*(n,e){try{const t=yield Xw(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield fy(n.appConfig,r),t}catch(t){if(!Hw(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield fy(n.appConfig,r)}else yield py(n.appConfig);throw t}})).apply(this,arguments)}function yy(n){return void 0!==n&&2===n.registrationStatus}function iS(n){return 2===n.requestStatus&&!function nC(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+36e5}(n)}function sS(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function rC(){return(rC=k(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield $p(e);return r?r.catch(console.error):Sl(e).catch(console.error),t.fid})).apply(this,arguments)}function iC(){return(iC=k(function*(n,e=!1){const t=n;return yield sC(t),(yield Sl(t,e)).token})).apply(this,arguments)}function sC(n){return ec.apply(this,arguments)}function ec(){return(ec=k(function*(n){const{registrationPromise:e}=yield $p(n);e&&(yield e)})).apply(this,arguments)}function wy(n){return ko.create("missing-app-config-values",{valueName:n})}const Cy="installations",cS=n=>{const e=n.getProvider("app").getImmediate(),t=function lS(n){if(!n||!n.options)throw wy("App Configuration");if(!n.name)throw wy("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw wy(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:Yr(e,"heartbeat"),_delete:()=>Promise.resolve()}},tc=n=>{const t=Yr(n.getProvider("app").getImmediate(),Cy).getImmediate();return{getId:()=>function O1(n){return rC.apply(this,arguments)}(t),getToken:i=>function R1(n){return iC.apply(this,arguments)}(t,i)}};(function dS(){pr(new Yt(Cy,cS,"PUBLIC")),pr(new Yt("installations-internal",tc,"PRIVATE"))})(),Tn(Vw,sy),Tn(Vw,sy,"esm2017");const Kp="@firebase/remote-config",Oi=new Ge("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class pC{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var t=this;return k(function*(){const[r,i]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(i&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const a=yield t.client.fetch(e),u=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===a.status&&u.push(t.storage.setLastSuccessfulFetchResponse(a)),yield Promise.all(u),a})()}}function gS(n=navigator){return n.languages&&n.languages[0]||n.language}class mS{constructor(e,t,r,i,a,u){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=a,this.appId=u}fetch(e){var t=this;return k(function*(){var r,i,a;const[u,d]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),g=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,C={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},A={sdk_version:t.sdkVersion,app_instance_id:u,app_instance_id_token:d,app_id:t.appId,language_code:gS()},R={method:"POST",headers:C,body:JSON.stringify(A)},U=fetch(g,R),H=new Promise((Nt,qt)=>{e.signal.addEventListener(()=>{const Bt=new Error("The operation was aborted.");Bt.name="AbortError",qt(Bt)})});let te;try{yield Promise.race([U,H]),te=yield U}catch(Nt){let qt="fetch-client-network";throw"AbortError"===(null===(r=Nt)||void 0===r?void 0:r.name)&&(qt="fetch-timeout"),Oi.create(qt,{originalErrorMessage:null===(i=Nt)||void 0===i?void 0:i.message})}let Ae=te.status;const lt=te.headers.get("ETag")||void 0;let _t,vt;if(200===te.status){let Nt;try{Nt=yield te.json()}catch(qt){throw Oi.create("fetch-client-parse",{originalErrorMessage:null===(a=qt)||void 0===a?void 0:a.message})}_t=Nt.entries,vt=Nt.state}if("INSTANCE_STATE_UNSPECIFIED"===vt?Ae=500:"NO_CHANGE"===vt?Ae=304:("NO_TEMPLATE"===vt||"EMPTY_CONFIG"===vt)&&(_t={}),304!==Ae&&200!==Ae)throw Oi.create("fetch-status",{httpStatus:Ae});return{status:Ae,eTag:lt,config:_t}})()}}class yS{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return k(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){var i=this;return k(function*(){yield function gC(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(a),r(Oi.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const a=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),a}catch(a){if(!function _S(n){if(!(n instanceof Wt&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(a))throw a;const u={throttleEndTimeMillis:Date.now()+Ti(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(u),i.attemptFetch(e,u)}})()}}class My{constructor(e,t,r,i,a){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=a,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function eh(n,e){var t;const r=n.target.error||void 0;return Oi.create(e,{originalErrorMessage:r&&(null===(t=r)||void 0===t?void 0:t.message)})}const Fo="app_namespace_store";class CS{constructor(e,t,r,i=function Ny(){return new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase_remote_config",1);r.onerror=i=>{e(eh(i,"storage-open"))},r.onsuccess=i=>{n(i.target.result)},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Fo,{keyPath:"compositeKey"})}}catch(r){e(Oi.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return k(function*(){const r=yield t.openDbPromise;return new Promise((i,a)=>{var u;const p=r.transaction([Fo],"readonly").objectStore(Fo),g=t.createCompositeKey(e);try{const C=p.get(g);C.onerror=A=>{a(eh(A,"storage-get"))},C.onsuccess=A=>{const R=A.target.result;i(R?R.value:void 0)}}catch(C){a(Oi.create("storage-get",{originalErrorMessage:null===(u=C)||void 0===u?void 0:u.message}))}})})()}set(e,t){var r=this;return k(function*(){const i=yield r.openDbPromise;return new Promise((a,u)=>{var d;const g=i.transaction([Fo],"readwrite").objectStore(Fo),C=r.createCompositeKey(e);try{const A=g.put({compositeKey:C,value:t});A.onerror=R=>{u(eh(R,"storage-set"))},A.onsuccess=()=>{a()}}catch(A){u(Oi.create("storage-set",{originalErrorMessage:null===(d=A)||void 0===d?void 0:d.message}))}})})()}delete(e){var t=this;return k(function*(){const r=yield t.openDbPromise;return new Promise((i,a)=>{var u;const p=r.transaction([Fo],"readwrite").objectStore(Fo),g=t.createCompositeKey(e);try{const C=p.delete(g);C.onerror=A=>{a(eh(A,"storage-delete"))},C.onsuccess=()=>{i()}}catch(C){a(Oi.create("storage-delete",{originalErrorMessage:null===(u=C)||void 0===u?void 0:u.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class mC{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return k(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),a=yield t;a&&(e.lastFetchStatus=a);const u=yield r;u&&(e.lastSuccessfulFetchTimestampMillis=u);const d=yield i;d&&(e.activeConfig=d)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function _C(){return yC.apply(this,arguments)}function yC(){return(yC=k(function*(){if(!_e())return!1;try{return yield oe()}catch(n){return!1}})).apply(this,arguments)}!function bS(){pr(new Yt("remote-config",function n(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Oi.create("registration-window");if(!_e())throw Oi.create("indexed-db-unavailable");const{projectId:a,apiKey:u,appId:d}=r.options;if(!a)throw Oi.create("registration-project-id");if(!u)throw Oi.create("registration-api-key");if(!d)throw Oi.create("registration-app-id");const p=new CS(d,r.name,t=t||"firebase"),g=new mC(p),C=new we(Kp);C.logLevel=zt.ERROR;const A=new mS(i,Mr,t,a,u,d),R=new yS(A,p),U=new pC(R,p,g,C),H=new My(r,U,g,p,C);return function hC(n){const e=Cn(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(H),H},"PUBLIC").setMultipleInstances(!0)),Tn(Kp,"0.3.11"),Tn(Kp,"0.3.11","esm2017")}();const IS="/firebase-messaging-sw.js",Qp="/firebase-cloud-messaging-push-scope",vC="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",rc="google.c.a.c_id",DS="google.c.a.c_l",$1="google.c.a.ts",EC="google.c.a.e";var ic=(()=>{return(n=ic||(ic={})).PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",ic;var n})();function Lo(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function AS(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let a=0;a<r.length;++a)i[a]=r.charCodeAt(a);return i}const Zp="fcm_token_details_db",Jp="fcm_token_object_Store";function Xp(n){return Ml.apply(this,arguments)}function Ml(){return Ml=k(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(a=>a.name).includes(Zp))return null;let e=null;return(yield At(Zp,5,{upgrade:(r=k(function*(i,a,u,d){var p;if(a<2||!i.objectStoreNames.contains(Jp))return;const g=d.objectStore(Jp),C=yield g.index("fcmSenderId").get(n);if(yield g.clear(),C)if(2===a){const A=C;if(!A.auth||!A.p256dh||!A.endpoint)return;e={token:A.fcmToken,createTime:null!==(p=A.createTime)&&void 0!==p?p:Date.now(),subscriptionOptions:{auth:A.auth,p256dh:A.p256dh,endpoint:A.endpoint,swScope:A.swScope,vapidKey:"string"==typeof A.vapidKey?A.vapidKey:Lo(A.vapidKey)}}}else if(3===a){const A=C;e={token:A.fcmToken,createTime:A.createTime,subscriptionOptions:{auth:Lo(A.auth),p256dh:Lo(A.p256dh),endpoint:A.endpoint,swScope:A.swScope,vapidKey:Lo(A.vapidKey)}}}else if(4===a){const A=C;e={token:A.fcmToken,createTime:A.createTime,subscriptionOptions:{auth:Lo(A.auth),p256dh:Lo(A.p256dh),endpoint:A.endpoint,swScope:A.swScope,vapidKey:Lo(A.vapidKey)}}}}),function(a,u,d,p){return r.apply(this,arguments)})})).close(),yield Ys(Zp),yield Ys("fcm_vapid_details_db"),yield Ys("undefined"),SS(e)?e:null;var r}),Ml.apply(this,arguments)}function SS(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}const Nl="firebase-messaging-store";let Oy=null;function th(){return Oy||(Oy=At("firebase-messaging-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Nl)}})),Oy}function TC(n){return IC.apply(this,arguments)}function IC(){return(IC=k(function*(n){const e=Ca(n),r=yield(yield th()).transaction(Nl).objectStore(Nl).get(e);if(r)return r;{const i=yield Xp(n.appConfig.senderId);if(i)return yield Ry(n,i),i}})).apply(this,arguments)}function Ry(n,e){return ky.apply(this,arguments)}function ky(){return(ky=k(function*(n,e){const t=Ca(n),i=(yield th()).transaction(Nl,"readwrite");return yield i.objectStore(Nl).put(e,t),yield i.done,e})).apply(this,arguments)}function sc(n){return eg.apply(this,arguments)}function eg(){return(eg=k(function*(n){const e=Ca(n),r=(yield th()).transaction(Nl,"readwrite");yield r.objectStore(Nl).delete(e),yield r.done})).apply(this,arguments)}function Ca({appConfig:n}){return n.appId}const Nr=new Ge("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function xS(n,e){return DC.apply(this,arguments)}function DC(){return(DC=k(function*(n,e){var t;const r=yield Vy(n),i=xC(e),a={method:"POST",headers:r,body:JSON.stringify(i)};let u;try{u=yield(yield fetch(Ly(n.appConfig),a)).json()}catch(d){throw Nr.create("token-subscribe-failed",{errorInfo:null===(t=d)||void 0===t?void 0:t.toString()})}if(u.error)throw Nr.create("token-subscribe-failed",{errorInfo:u.error.message});if(!u.token)throw Nr.create("token-subscribe-no-token");return u.token})).apply(this,arguments)}function AC(n,e){return SC.apply(this,arguments)}function SC(){return(SC=k(function*(n,e){var t;const r=yield Vy(n),i=xC(e.subscriptionOptions),a={method:"PATCH",headers:r,body:JSON.stringify(i)};let u;try{u=yield(yield fetch(`${Ly(n.appConfig)}/${e.token}`,a)).json()}catch(d){throw Nr.create("token-update-failed",{errorInfo:null===(t=d)||void 0===t?void 0:t.toString()})}if(u.error)throw Nr.create("token-update-failed",{errorInfo:u.error.message});if(!u.token)throw Nr.create("token-update-no-token");return u.token})).apply(this,arguments)}function Fy(n,e){return nh.apply(this,arguments)}function nh(){return(nh=k(function*(n,e){var t;const i={method:"DELETE",headers:yield Vy(n)};try{const u=yield(yield fetch(`${Ly(n.appConfig)}/${e}`,i)).json();if(u.error)throw Nr.create("token-unsubscribe-failed",{errorInfo:u.error.message})}catch(a){throw Nr.create("token-unsubscribe-failed",{errorInfo:null===(t=a)||void 0===t?void 0:t.toString()})}})).apply(this,arguments)}function Ly({projectId:n}){return`https://fcmregistrations.googleapis.com/v1/projects/${n}/registrations`}function Vy(n){return Uy.apply(this,arguments)}function Uy(){return(Uy=k(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})})).apply(this,arguments)}function xC({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==vC&&(i.web.applicationPubKey=r),i}const MS=6048e5;function NS(n){return By.apply(this,arguments)}function By(){return(By=k(function*(n){const e=yield NC(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Lo(e.getKey("auth")),p256dh:Lo(e.getKey("p256dh"))},r=yield TC(n.firebaseDependencies);if(r){if(PC(r.subscriptionOptions,t))return Date.now()>=r.createTime+MS?PS(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield Fy(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return Hy(n.firebaseDependencies,t)}return Hy(n.firebaseDependencies,t)})).apply(this,arguments)}function MC(n){return jy.apply(this,arguments)}function jy(){return(jy=k(function*(n){const e=yield TC(n.firebaseDependencies);e&&(yield Fy(n.firebaseDependencies,e.token),yield sc(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()})).apply(this,arguments)}function PS(n,e){return Pl.apply(this,arguments)}function Pl(){return(Pl=k(function*(n,e){try{const t=yield AC(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield Ry(n.firebaseDependencies,r),t}catch(t){throw yield MC(n),t}})).apply(this,arguments)}function Hy(n,e){return tg.apply(this,arguments)}function tg(){return(tg=k(function*(n,e){const r={token:yield xS(n,e),createTime:Date.now(),subscriptionOptions:e};return yield Ry(n,r),r.token})).apply(this,arguments)}function NC(n,e){return ng.apply(this,arguments)}function ng(){return(ng=k(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:AS(e)})})).apply(this,arguments)}function PC(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}function OC(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function OS(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i)}(e,n),function RS(n,e){!e.data||(n.data=e.data)}(e,n),function kS(n,e){var t,r,i,a,u;if(!e.fcmOptions&&!(null===(t=e.notification)||void 0===t?void 0:t.click_action))return;n.fcmOptions={};const d=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(a=e.notification)||void 0===a?void 0:a.click_action;d&&(n.fcmOptions.link=d);const p=null===(u=e.fcmOptions)||void 0===u?void 0:u.analytics_label;p&&(n.fcmOptions.analyticsLabel=p)}(e,n),e}function FS(n){return"object"==typeof n&&!!n&&rc in n}function RC(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function Ol(n){return Nr.create("missing-app-config-values",{valueName:n})}RC("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),RC("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class VS{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function LS(n){if(!n||!n.options)throw Ol("App Configuration Object");if(!n.name)throw Ol("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw Ol(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function rg(n){return gs.apply(this,arguments)}function gs(){return(gs=k(function*(n){var e;try{n.swRegistration=yield navigator.serviceWorker.register(IS,{scope:Qp}),n.swRegistration.update().catch(()=>{})}catch(t){throw Nr.create("failed-service-worker-registration",{browserErrorMessage:null===(e=t)||void 0===e?void 0:e.message})}})).apply(this,arguments)}function US(n,e){return rh.apply(this,arguments)}function rh(){return(rh=k(function*(n,e){if(!e&&!n.swRegistration&&(yield rg(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw Nr.create("invalid-sw-registration");n.swRegistration=e}})).apply(this,arguments)}function ih(n,e){return $y.apply(this,arguments)}function $y(){return($y=k(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=vC)})).apply(this,arguments)}function Gy(){return(Gy=k(function*(n,e){if(!navigator)throw Nr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Nr.create("permission-blocked");return yield ih(n,null==e?void 0:e.vapidKey),yield US(n,null==e?void 0:e.serviceWorkerRegistration),NS(n)})).apply(this,arguments)}function ig(n,e,t){return oc.apply(this,arguments)}function oc(){return(oc=k(function*(n,e,t){const r=BS(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[rc],message_name:t[DS],message_time:t[$1],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function BS(n){switch(n){case ic.NOTIFICATION_CLICKED:return"notification_open";case ic.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function sg(){return(sg=k(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===ic.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(OC(t)):n.onMessageHandler.next(OC(t)));const r=t.data;FS(r)&&"1"===r[EC]&&(yield ig(n,t.messageType,r))})).apply(this,arguments)}const Wy="@firebase/messaging",FC=n=>{const e=new VS(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function jS(n,e){return sg.apply(this,arguments)}(e,t)),e},HS=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>function kC(n,e){return Gy.apply(this,arguments)}(e,r)}};function GS(){return sh.apply(this,arguments)}function sh(){return(sh=k(function*(){try{yield oe()}catch(n){return!1}return"undefined"!=typeof window&&_e()&&Ue()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function $S(){pr(new Yt("messaging",FC,"PUBLIC")),pr(new Yt("messaging-internal",HS,"PRIVATE")),Tn(Wy,"0.9.16"),Tn(Wy,"0.9.16","esm2017")}();const oh="analytics",Yy="firebase_id",UC="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Qy="https://www.googletagmanager.com/gtag/js",jr=new we("@firebase/analytics");function Zy(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function BC(n,e){const t=document.createElement("script");t.src=`${Qy}?l=${n}&id=${e}`,t.async=!0,document.head.appendChild(t)}function jC(n,e,t,r,i,a){return lg.apply(this,arguments)}function lg(){return(lg=k(function*(n,e,t,r,i,a){const u=r[i];try{if(u)yield e[u];else{const p=(yield Zy(t)).find(g=>g.measurementId===i);p&&(yield e[p.appId])}}catch(d){jr.error(d)}n("config",i,a)})).apply(this,arguments)}function mi(n,e,t,r,i){return ba.apply(this,arguments)}function ba(){return(ba=k(function*(n,e,t,r,i){try{let a=[];if(i&&i.send_to){let u=i.send_to;Array.isArray(u)||(u=[u]);const d=yield Zy(t);for(const p of u){const g=d.find(A=>A.measurementId===p),C=g&&e[g.appId];if(!C){a=[];break}a.push(C)}}0===a.length&&(a=Object.values(e)),yield Promise.all(a),n("event",r,i||{})}catch(a){jr.error(a)}})).apply(this,arguments)}function Y1(){const n=window.document.getElementsByTagName("script");for(const e of Object.values(n))if(e.src&&e.src.includes(Qy))return e;return null}const Qi=new Ge("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),$C=new class HC{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function QS(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function Xy(n){return ug.apply(this,arguments)}function ug(){return(ug=k(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:QS(r)},a=UC.replace("{app-id}",t),u=yield fetch(a,i);if(200!==u.status&&304!==u.status){let d="";try{const p=yield u.json();(null===(e=p.error)||void 0===e?void 0:e.message)&&(d=p.error.message)}catch(p){}throw Qi.create("config-fetch-failed",{httpStatus:u.status,responseMessage:d})}return u.json()})).apply(this,arguments)}function GC(n){return ac.apply(this,arguments)}function ac(){return(ac=k(function*(n,e=$C,t){const{appId:r,apiKey:i,measurementId:a}=n.options;if(!r)throw Qi.create("no-app-id");if(!i){if(a)return{measurementId:a,appId:r};throw Qi.create("no-api-key")}const u=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new qC;return setTimeout(k(function*(){d.abort()}),void 0!==t?t:6e4),cg({appId:r,apiKey:i,measurementId:a},u,d,e)})).apply(this,arguments)}function cg(n,e,t){return WC.apply(this,arguments)}function WC(){return(WC=k(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=$C){var a,u;const{appId:d,measurementId:p}=n;try{yield zC(r,e)}catch(g){if(p)return jr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${p} provided in the "measurementId" field in the local Firebase config. [${null===(a=g)||void 0===a?void 0:a.message}]`),{appId:d,measurementId:p};throw g}try{const g=yield Xy(n);return i.deleteThrottleMetadata(d),g}catch(g){const C=g;if(!ZS(C)){if(i.deleteThrottleMetadata(d),p)return jr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${p} provided in the "measurementId" field in the local Firebase config. [${null==C?void 0:C.message}]`),{appId:d,measurementId:p};throw g}const A=503===Number(null===(u=null==C?void 0:C.customData)||void 0===u?void 0:u.httpStatus)?Ti(t,i.intervalMillis,30):Ti(t,i.intervalMillis),R={throttleEndTimeMillis:Date.now()+A,backoffCount:t+1};return i.setThrottleMetadata(d,R),jr.debug(`Calling attemptFetch again in ${A} millis`),cg(n,R,r,i)}})).apply(this,arguments)}function zC(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(a),r(Qi.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function ZS(n){if(!(n instanceof Wt&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}class qC{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let lc,hg;function ev(){return(ev=k(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const a=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:a}))}})).apply(this,arguments)}function iv(n){hg=n}function QC(n){lc=n}function XS(){return fg.apply(this,arguments)}function fg(){return(fg=k(function*(){var n;if(!_e())return jr.warn(Qi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield oe()}catch(e){return jr.warn(Qi.create("indexeddb-unavailable",{errorInfo:null===(n=e)||void 0===n?void 0:n.toString()}).message),!1}return!0})).apply(this,arguments)}function pg(){return(pg=k(function*(n,e,t,r,i,a,u){var d;const p=GC(n);p.then(U=>{t[U.measurementId]=U.appId,n.options.measurementId&&U.measurementId!==n.options.measurementId&&jr.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${U.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(U=>jr.error(U)),e.push(p);const g=XS().then(U=>{if(U)return r.getId()}),[C,A]=yield Promise.all([p,g]);Y1()||BC(a,C.measurementId),hg&&(i("consent","default",hg),iv(void 0)),i("js",new Date);const R=null!==(d=null==u?void 0:u.config)&&void 0!==d?d:{};return R.origin="firebase",R.update=!0,null!=A&&(R[Yy]=A),i("config",C.measurementId,R),lc&&(i("set",lc),QC(void 0)),C.measurementId})).apply(this,arguments)}class ZC{constructor(e){this.app=e}_delete(){return delete uo[this.app.options.appId],Promise.resolve()}}let uo={},sv=[];const JC={};let ov,Ta,gg="dataLayer",XC=!1;function J1(n,e,t){!function Z1(){const n=[];if(We()&&n.push("This is a browser extension environment."),Ue()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Qi.create("invalid-analytics-context",{errorInfo:e});jr.warn(t.message)}}();const r=n.options.appId;if(!r)throw Qi.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw Qi.create("no-api-key");jr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=uo[r])throw Qi.create("already-exists",{id:r});if(!XC){!function zS(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(gg);const{wrappedGtag:a,gtagCore:u}=function KS(n,e,t,r,i){let a=function(...u){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(a=window[i]),window[i]=function qS(n,e,t,r){function a(){return(a=k(function*(u,d,p){try{"event"===u?yield mi(n,e,t,d,p):"config"===u?yield jC(n,e,t,r,d,p):"consent"===u?n("consent","update",p):n("set",d)}catch(g){jr.error(g)}})).apply(this,arguments)}return function i(u,d,p){return a.apply(this,arguments)}}(a,n,e,t),{gtagCore:a,wrappedGtag:window[i]}}(uo,sv,JC,gg,"gtag");Ta=a,ov=u,XC=!0}return uo[r]=function ex(n,e,t,r,i,a,u){return pg.apply(this,arguments)}(n,sv,JC,e,ov,gg,t),new ZC(n)}function ek(){return uc.apply(this,arguments)}function uc(){return(uc=k(function*(){if(We()||!Ue()||!_e())return!1;try{return yield oe()}catch(n){return!1}})).apply(this,arguments)}const av="@firebase/analytics";!function rb(){pr(new Yt(oh,(e,{options:t})=>J1(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),pr(new Yt("analytics-internal",function n(e){try{const t=e.getProvider(oh).getImmediate();return{logEvent:(r,i,a)=>function tk(n,e,t,r){n=Cn(n),function KC(n,e,t,r,i){return ev.apply(this,arguments)}(Ta,uo[n.app.options.appId],e,t,r).catch(i=>jr.error(i))}(t,r,i,a)}}catch(t){throw Qi.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),Tn(av,"0.8.0"),Tn(av,"0.8.0","esm2017")}();var nk=L(727);class sx extends nk.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const mg={setInterval(n,e,...t){const{delegate:r}=mg;return(null==r?void 0:r.setInterval)?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=mg;return((null==e?void 0:e.clearInterval)||clearInterval)(n)},delegate:void 0};var lv=L(8737);class ib extends sx{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,a=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(a,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(a,this.id,t),this}requestAsyncId(e,t,r=0){return mg.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&mg.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(a){r=!0,i=a||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,lv.P)(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}class _g{constructor(e,t=_g.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}_g.now=Op.now;class ox extends _g{constructor(e,t=_g.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const lx=new class ax extends ox{}(class rk extends ib{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),sk=new ox(ib);var yg=L(9468),sb=L(5363);const _i=new _.GfV("7.4.1"),uv="__angularfire_symbol__analyticsIsSupportedValue",uh="__angularfire_symbol__analyticsIsSupported",cv="__angularfire_symbol__remoteConfigIsSupportedValue",dv="__angularfire_symbol__remoteConfigIsSupported",ch="__angularfire_symbol__messagingIsSupportedValue",vg="__angularfire_symbol__messagingIsSupported";function wg(n,e,t){if(e){if(1===e.length)return e[0];const a=e.filter(u=>u.app===t);if(1===a.length)return a[0]}return t.container.getProvider(n).getImmediate({optional:!0})}globalThis[uh]||(globalThis[uh]=ek().then(n=>globalThis[uv]=n).catch(()=>globalThis[uv]=!1)),globalThis[vg]||(globalThis[vg]=GS().then(n=>globalThis[ch]=n).catch(()=>globalThis[ch]=!1)),globalThis[dv]||(globalThis[dv]=_C().then(n=>globalThis[cv]=n).catch(()=>globalThis[cv]=!1));const Cg=(n,e)=>{const t=e?[e]:Qr(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(u=>{r.includes(u)||r.push(u)})}),r};function Ia(){}class Da{constructor(e,t=lx){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(u){i.runGuarded(()=>{e.apply(this,[u])})},t,r)}}class ob{constructor(e){this.zone=e,this.task=null}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ia,{},Ia,Ia)),t.pipe((0,Yi.b)({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let dh=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Da(Zone.current)),this.insideAngular=t.run(()=>new Da(Zone.current,sk)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(_.R0b))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Rl(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function uk(n){return Rl().ngZone.runOutsideAngular(()=>n())}function kl(n){return Rl().ngZone.run(()=>n())}function ab(n){return Rl(),function cx(n){return function(t){return(t=t.lift(new ob(n.ngZone))).pipe((0,yg.R)(n.outsideAngular),(0,sb.Q)(n.insideAngular))}}(Rl())(n)}const dx=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),kl(()=>n.apply(void 0,r))},Aa=(n,e)=>function(){let t;const r=arguments;for(let a=0;a<arguments.length;a++)"function"==typeof r[a]&&(e&&(t||(t=kl(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ia,{},Ia,Ia)))),r[a]=dx(r[a],t));const i=uk(()=>n.apply(this,r));if(!e){if(i instanceof Mi.y){const a=Rl();return i.pipe((0,yg.R)(a.outsideAngular),(0,sb.Q)(a.insideAngular))}return kl(()=>i)}return i instanceof Mi.y?i.pipe(ab):i instanceof Promise?kl(()=>new Promise((a,u)=>i.then(d=>kl(()=>a(d)),d=>kl(()=>u(d))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:kl(()=>i)};class Vo{constructor(e){return e}}class hh{constructor(){return Qr()}}const bg=new _.OlP("angularfire2._apps"),hv={provide:Vo,useFactory:function hx(n){return n&&1===n.length?n[0]:new Vo(Di())},deps:[[new _.FiY,bg]]},fv={provide:hh,deps:[[new _.FiY,bg]]};function lb(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Vo(r)}}let fx=(()=>{class n{constructor(t){Tn("angularfire",_i.full,"core"),Tn("angularfire",_i.full,"app"),Tn("angular",_.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(_.Lbi))},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[hv,fv]}),n})();function ub(n,...e){return{ngModule:fx,providers:[{provide:bg,useFactory:lb(n),multi:!0,deps:[_.R0b,_.zs3,dh,...e]}]}}const pk=Aa(Ga,!0),cb=new Map,mx={activated:!1,tokenObservers:[]},mk={initialized:!1,enabled:!1};function Hr(n){return cb.get(n)||mx}function co(n,e){cb.set(n,e)}function pv(){return mk}class Fl{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return k(function*(){t.stop();try{t.pending=new st,yield function pb(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new st,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const $r=new Ge("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Dg(n){if(!Hr(n).activated)throw $r.create("use-before-activation",{appName:n.name})}function gb(n,e){return mb.apply(this,arguments)}function mb(){return(mb=k(function*({url:n,body:e},t){var r,i;const a={"Content-Type":"application/json"},u=t.getImmediate({optional:!0});if(u){const U=yield u.getHeartbeatsHeader();U&&(a["X-Firebase-Client"]=U)}const d={method:"POST",body:JSON.stringify(e),headers:a};let p,g;try{p=yield fetch(n,d)}catch(U){throw $r.create("fetch-network-error",{originalErrorMessage:null===(r=U)||void 0===r?void 0:r.message})}if(200!==p.status)throw $r.create("fetch-status-error",{httpStatus:p.status});try{g=yield p.json()}catch(U){throw $r.create("fetch-parse-error",{originalErrorMessage:null===(i=U)||void 0===i?void 0:i.message})}const C=g.ttl.match(/^([\d.]+)(s)$/);if(!C||!C[2]||isNaN(Number(C[1])))throw $r.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const A=1e3*Number(C[1]),R=Date.now();return{token:g.token,expireTimeMillis:R+A,issuedAtTimeMillis:R}})).apply(this,arguments)}function _b(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const ph="firebase-app-check-store";let gh=null;function mv(){return gh||(gh=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var a;e($r.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(ph,{keyPath:"compositeKey"})}}catch(r){e($r.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),gh)}function wb(){return(wb=k(function*(n,e){const r=(yield mv()).transaction(ph,"readwrite"),a=r.objectStore(ph).put({compositeKey:n,value:e});return new Promise((u,d)=>{a.onsuccess=p=>{u()},r.onerror=p=>{var g;d($r.create("storage-set",{originalErrorMessage:null===(g=p.target.error)||void 0===g?void 0:g.message}))}})})).apply(this,arguments)}const _h=new we("@firebase/app-check");function Tb(n,e){return _e()?function wx(n,e){return function Ag(n,e){return wb.apply(this,arguments)}(function Cb(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{_h.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Tx(){return pv().enabled}function Ix(){return Db.apply(this,arguments)}function Db(){return(Db=k(function*(){const n=pv();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Dx={error:"UNKNOWN_ERROR"};function wk(n){return ae.encodeString(JSON.stringify(n),!1)}function yv(n){return Ab.apply(this,arguments)}function Ab(){return(Ab=k(function*(n,e=!1){const t=n.app;Dg(t);const r=Hr(t);let a,i=r.token;if(!i){const p=yield r.cachedTokenPromise;p&&h(p)&&(i=p)}if(!e&&i&&h(i))return{token:i.token};let d,u=!1;if(Tx()){r.exchangeTokenPromise||(r.exchangeTokenPromise=gb(_b(t,yield Ix()),n.heartbeatServiceProvider).then(g=>(r.exchangeTokenPromise=void 0,g)),u=!0);const p=yield r.exchangeTokenPromise;return yield Tb(t,p),co(t,Object.assign(Object.assign({},r),{token:p})),{token:p.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(p=>(r.exchangeTokenPromise=void 0,p)),u=!0),i=yield r.exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?_h.warn(p.message):_h.error(p),a=p}return i?(d={token:i.token},co(t,Object.assign(Object.assign({},r),{token:i})),yield Tb(t,i)):d=f(a),u&&c(t,d),d})).apply(this,arguments)}function s(n,e){const t=Hr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),co(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function o(n){const{app:e}=n,t=Hr(e);let r=t.tokenRefresher;r||(r=function l(n){const{app:e}=n;return new Fl(k(function*(){let r;if(r=Hr(e).token?yield yv(n,!0):yield yv(n),r.error)throw r.error}),()=>!0,()=>{const t=Hr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),co(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function c(n,e){const t=Hr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function h(n){return n.expireTimeMillis-Date.now()>0}function f(n){return{token:wk(Dx),error:n}}class m{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Hr(this.app);for(const t of e)s(this.app,t.next);return Promise.resolve()}}const Ck="app-check-internal";!function ej(){pr(new Yt("app-check",n=>function E(n,e){return new m(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Ck).initialize()})),pr(new Yt(Ck,n=>function b(n){return{getToken:e=>yv(n,e),addTokenListener:e=>function Sb(n,e,t,r){const{app:i}=n,a=Hr(i),u={next:t,error:r,type:e};if(co(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,u]})),a.token&&h(a.token)){const d=a.token;Promise.resolve().then(()=>{t({token:d.token}),o(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>o(n))}(n,"INTERNAL",e),removeTokenListener:e=>s(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),Tn("@firebase/app-check","0.5.12")}();class Ob{constructor(){return Cg("app-check")}}"undefined"!=typeof window&&window;var Tk=L(655);const sj=function Ik(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Dk=new Ge("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ak=new we("@firebase/auth");function Rb(n,...e){Ak.logLevel<=zt.ERROR&&Ak.error(`Auth (${Mr}): ${n}`,...e)}function ms(n,...e){throw xx(n,...e)}function xa(n,...e){return xx(n,...e)}function Sk(n,e,t){const r=Object.assign(Object.assign({},sj()),{[e]:t});return new Ge("auth","Firebase",r).create(e,{appName:n.name})}function xx(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Dk.create(n,...e)}function Qe(n,e,...t){if(!n)throw xx(e,...t)}function Ma(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Rb(e),new Error(e)}function cc(n,e){n||Ma(e)}const xk=new Map;function Vl(n){cc(n instanceof Function,"Expected a class definition");let e=xk.get(n);return e?(cc(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,xk.set(n,e),e)}function Ev(){var n;return"undefined"!=typeof self&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function Mk(){var n;return"undefined"!=typeof self&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class wv{constructor(e,t){this.shortDelay=e,this.longDelay=t,cc(t>e,"Short delay should be less than long delay!"),this.isMobile=Pe()||gt()}get(){return function lj(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function Mx(){return"http:"===Mk()||"https:"===Mk()}()||We()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Nx(n,e){cc(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class Nk{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Ma("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Ma("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Ma("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const cj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},dj=new wv(3e4,6e4);function Gr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function ti(n,e,t,r){return Px.apply(this,arguments)}function Px(){return(Px=k(function*(n,e,t,r,i={}){return Pk(n,i,k(function*(){let a={},u={};r&&("GET"===e?u=r:a={body:JSON.stringify(r)});const d=ui(Object.assign({key:n.config.apiKey},u)).slice(1),p=yield n._getAdditionalHeaders();return p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode),Nk.fetch()(Ok(n,n.config.apiHost,t,d),Object.assign({method:e,headers:p,referrerPolicy:"no-referrer"},a))}))})).apply(this,arguments)}function Pk(n,e,t){return Ox.apply(this,arguments)}function Ox(){return(Ox=k(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},cj),e);try{const i=new hj(n),a=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const u=yield a.json();if("needConfirmation"in u)throw Cv(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[p,g]=d.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===p)throw Cv(n,"credential-already-in-use",u);if("EMAIL_EXISTS"===p)throw Cv(n,"email-already-in-use",u);if("USER_DISABLED"===p)throw Cv(n,"user-disabled",u);const C=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Sk(n,C,g);ms(n,C)}}catch(i){if(i instanceof Wt)throw i;ms(n,"network-request-failed")}})).apply(this,arguments)}function Ul(n,e,t,r){return Rx.apply(this,arguments)}function Rx(){return(Rx=k(function*(n,e,t,r,i={}){const a=yield ti(n,e,t,r,i);return"mfaPendingCredential"in a&&ms(n,"multi-factor-auth-required",{_serverResponse:a}),a})).apply(this,arguments)}function Ok(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?Nx(n.config,i):`${n.config.apiScheme}://${i}`}class hj{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(xa(this.auth,"network-request-failed")),dj.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Cv(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=xa(n,e,r);return i.customData._tokenResponse=t,i}function kx(){return(kx=k(function*(n,e){return ti(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function gj(n,e){return Lx.apply(this,arguments)}function Lx(){return(Lx=k(function*(n,e){return ti(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function bv(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}function Vx(){return(Vx=k(function*(n,e=!1){const t=Cn(n),r=yield t.getIdToken(e),i=kb(r);Qe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a="object"==typeof i.firebase?i.firebase:void 0,u=null==a?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:bv(Ux(i.auth_time)),issuedAtTime:bv(Ux(i.iat)),expirationTime:bv(Ux(i.exp)),signInProvider:u||null,signInSecondFactor:(null==a?void 0:a.sign_in_second_factor)||null}})).apply(this,arguments)}function Ux(n){return 1e3*Number(n)}function kb(n){var e;const[t,r,i]=n.split(".");if(void 0===t||void 0===r||void 0===i)return Rb("JWT malformed, contained fewer than 3 sections"),null;try{const a=Ve(r);return a?JSON.parse(a):(Rb("Failed to decode base64 JWT payload"),null)}catch(a){return Rb("Caught error parsing JWT payload as JSON",null===(e=a)||void 0===e?void 0:e.toString()),null}}function Bl(n,e){return Bx.apply(this,arguments)}function Bx(){return(Bx=k(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof Wt&&yj(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})).apply(this,arguments)}function yj({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}class vj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(k(function*(){yield t.iteration()}),r)}iteration(){var e=this;return k(function*(){var t;try{yield e.user.getIdToken(!0)}catch(r){return void("auth/network-request-failed"===(null===(t=r)||void 0===t?void 0:t.code)&&e.schedule(!0))}e.schedule()})()}}class Rk{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=bv(this.lastLoginAt),this.creationTime=bv(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Tv(n){return jx.apply(this,arguments)}function jx(){return(jx=k(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield Bl(n,gj(t,{idToken:r}));Qe(null==i?void 0:i.users.length,t,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const u=(null===(e=a.providerUserInfo)||void 0===e?void 0:e.length)?Cj(a.providerUserInfo):[],d=wj(n.providerData,u),C=!!n.isAnonymous&&!(n.email&&a.passwordHash||(null==d?void 0:d.length)),A={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new Rk(a.createdAt,a.lastLoginAt),isAnonymous:C};Object.assign(n,A)})).apply(this,arguments)}function Hx(){return(Hx=k(function*(n){const e=Cn(n);yield Tv(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function wj(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Cj(n){return n.map(e=>{var{providerId:t}=e,r=(0,Tk._T)(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function $x(){return($x=k(function*(n,e){const t=yield Pk(n,{},k(function*(){const r=ui({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,u=Ok(n,i,"/v1/token",`key=${a}`),d=yield n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",Nk.fetch()(u,{method:"POST",headers:d,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}class Iv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Qe(e.idToken,"internal-error"),Qe(void 0!==e.idToken,"internal-error"),Qe(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function _j(n){const e=kb(n);return Qe(e,"internal-error"),Qe(void 0!==e.exp,"internal-error"),Qe(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var r=this;return k(function*(){return Qe(!r.accessToken||r.refreshToken,e,"user-token-expired"),t||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return k(function*(){const{accessToken:i,refreshToken:a,expiresIn:u}=yield function bj(n,e){return $x.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,a,Number(u))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,u=new Iv;return r&&(Qe("string"==typeof r,"internal-error",{appName:e}),u.refreshToken=r),i&&(Qe("string"==typeof i,"internal-error",{appName:e}),u.accessToken=i),a&&(Qe("number"==typeof a,"internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Iv,this.toJSON())}_performRefresh(){return Ma("not implemented")}}function dc(n,e){Qe("string"==typeof n||void 0===n,"internal-error",{appName:e})}class vh{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,a=(0,Tk._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Rk(a.createdAt||void 0,a.lastLoginAt||void 0)}getIdToken(e){var t=this;return k(function*(){const r=yield Bl(t,t.stsTokenManager.getToken(t.auth,e));return Qe(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function mj(n){return Vx.apply(this,arguments)}(this,e)}reload(){return function Ej(n){return Hx.apply(this,arguments)}(this)}_assign(e){this!==e&&(Qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new vh(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){Qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return k(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield Tv(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return k(function*(){const t=yield e.getIdToken();return yield Bl(e,function fj(n,e){return kx.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,a,u,d,p,g,C;const A=null!==(r=t.displayName)&&void 0!==r?r:void 0,R=null!==(i=t.email)&&void 0!==i?i:void 0,U=null!==(a=t.phoneNumber)&&void 0!==a?a:void 0,H=null!==(u=t.photoURL)&&void 0!==u?u:void 0,te=null!==(d=t.tenantId)&&void 0!==d?d:void 0,Ae=null!==(p=t._redirectEventId)&&void 0!==p?p:void 0,lt=null!==(g=t.createdAt)&&void 0!==g?g:void 0,_t=null!==(C=t.lastLoginAt)&&void 0!==C?C:void 0,{uid:vt,emailVerified:Nt,isAnonymous:qt,providerData:Bt,stsTokenManager:dn}=t;Qe(vt&&dn,e,"internal-error");const bi=Iv.fromJSON(this.name,dn);Qe("string"==typeof vt,e,"internal-error"),dc(A,e.name),dc(R,e.name),Qe("boolean"==typeof Nt,e,"internal-error"),Qe("boolean"==typeof qt,e,"internal-error"),dc(U,e.name),dc(H,e.name),dc(te,e.name),dc(Ae,e.name),dc(lt,e.name),dc(_t,e.name);const zs=new vh({uid:vt,auth:e,email:R,emailVerified:Nt,displayName:A,isAnonymous:qt,photoURL:H,phoneNumber:U,tenantId:te,stsTokenManager:bi,createdAt:lt,lastLoginAt:_t});return Bt&&Array.isArray(Bt)&&(zs.providerData=Bt.map(Bo=>Object.assign({},Bo))),Ae&&(zs._redirectEventId=Ae),zs}static _fromIdTokenResponse(e,t,r=!1){return k(function*(){const i=new Iv;i.updateFromServerResponse(t);const a=new vh({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Tv(a),a})()}}const kk=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return k(function*(){return!0})()}_set(t,r){var i=this;return k(function*(){i.storage[t]=r})()}_get(t){var r=this;return k(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return k(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function Fb(n,e,t){return`firebase:${n}:${e}:${t}`}class Pg{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Fb(this.userKey,i.apiKey,a),this.fullPersistenceKey=Fb("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return k(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?vh._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return k(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return k(function*(){if(!t.length)return new Pg(Vl(kk),e,r);const i=(yield Promise.all(t.map(function(){var g=k(function*(C){if(yield C._isAvailable())return C});return function(C){return g.apply(this,arguments)}}()))).filter(g=>g);let a=i[0]||Vl(kk);const u=Fb(r,e.config.apiKey,e.name);let d=null;for(const g of t)try{const C=yield g._get(u);if(C){const A=vh._fromJSON(e,C);g!==a&&(d=A),a=g;break}}catch(C){}const p=i.filter(g=>g._shouldAllowMigration);return a._shouldAllowMigration&&p.length?(a=p[0],d&&(yield a._set(u,d.toJSON())),yield Promise.all(t.map(function(){var g=k(function*(C){if(C!==a)try{yield C._remove(u)}catch(A){}});return function(C){return g.apply(this,arguments)}}())),new Pg(a,e,r)):new Pg(a,e,r)})()}}function Fk(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Uk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Lk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jk(e))return"Blackberry";if(Hk(e))return"Webos";if(Gx(e))return"Safari";if((e.includes("chrome/")||Vk(e))&&!e.includes("edge/"))return"Chrome";if(Bk(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==r?void 0:r.length))return r[1]}return"Other"}function Lk(n=ft()){return/firefox\//i.test(n)}function Gx(n=ft()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Vk(n=ft()){return/crios\//i.test(n)}function Uk(n=ft()){return/iemobile/i.test(n)}function Bk(n=ft()){return/android/i.test(n)}function jk(n=ft()){return/blackberry/i.test(n)}function Hk(n=ft()){return/webos/i.test(n)}function Lb(n=ft()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function $k(n=ft()){return Lb(n)||Bk(n)||Hk(n)||jk(n)||/windows phone/i.test(n)||Uk(n)}function Gk(n,e=[]){let t;switch(n){case"Browser":t=Fk(ft());break;case"Worker":t=`${Fk(ft())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Mr}/${r}`}class Aj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((u,d)=>{try{u(e(a))}catch(p){d(p)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return k(function*(){var r;if(t.auth.currentUser===e)return;const i=[];try{for(const a of t.queue)yield a(e),a.onAbort&&i.push(a.onAbort)}catch(a){i.reverse();for(const u of i)try{u()}catch(d){}throw t.auth._errorFactory.create("login-blocked",{originalMessage:null===(r=a)||void 0===r?void 0:r.message})}})()}}class Sj{constructor(e,t,r){this.app=e,this.heartbeatServiceProvider=t,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wk(this),this.idTokenSubscription=new Wk(this),this.beforeStateQueue=new Aj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Dk,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=Vl(t)),this._initializationPromise=this.queue(k(function*(){var i,a;if(!r._deleted&&(r.persistenceManager=yield Pg.create(r,e),!r._deleted)){if(null===(i=r._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch(u){}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(a=r.currentUser)||void 0===a?void 0:a.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return k(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return k(function*(){var r;const i=yield t.assertedPersistence.getCurrentUser();let a=i,u=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const d=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,p=null==a?void 0:a._redirectEventId,g=yield t.tryRedirectSignIn(e);(!d||d===p)&&(null==g?void 0:g.user)&&(a=g.user,u=!0)}if(!a)return t.directlySetCurrentUser(null);if(!a._redirectEventId){if(u)try{yield t.beforeStateQueue.runMiddleware(a)}catch(d){a=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(d))}return a?t.reloadAndSetCurrentUserOrClear(a):t.directlySetCurrentUser(null)}return Qe(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===a._redirectEventId?t.directlySetCurrentUser(a):t.reloadAndSetCurrentUserOrClear(a)})()}tryRedirectSignIn(e){var t=this;return k(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch(i){yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return k(function*(){var r;try{yield Tv(e)}catch(i){if("auth/network-request-failed"!==(null===(r=i)||void 0===r?void 0:r.code))return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function uj(){if("undefined"==typeof navigator)return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return k(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return k(function*(){const r=e?Cn(e):null;return r&&Qe(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return k(function*(){if(!r._deleted)return e&&Qe(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue(k(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return k(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue(k(function*(){yield t.assertedPersistence.setPersistence(Vl(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ge("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return k(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return k(function*(){if(!t.redirectPersistenceManager){const r=e&&Vl(e)||t._popupRedirectResolver;Qe(r,t,"argument-error"),t.redirectPersistenceManager=yield Pg.create(t,[Vl(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return k(function*(){var r,i;return t._isInitialized&&(yield t.queue(k(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return k(function*(){if(e===t.currentUser)return t.queue(k(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a="function"==typeof t?t:t.next.bind(t),u=this._isInitialized?Promise.resolve():this._initializationPromise;return Qe(u,this,"internal-error"),u.then(()=>a(this.currentUser)),"function"==typeof t?e.addObserver(t,r,i):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return k(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Gk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return k(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();return i&&(r["X-Firebase-Client"]=i),r})()}}function _s(n){return Cn(n)}class Wk{constructor(e){this.auth=e,this.observer=null,this.addObserver=function Ua(n,e){const t=new be(n,e);return t.subscribe.bind(t)}(t=>this.observer=t)}get next(){return Qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function jl(n,e){return rM.apply(this,arguments)}function rM(){return(rM=k(function*(n,e){return Ul(n,"POST","/v1/accounts:signInWithIdp",Gr(n,e))})).apply(this,arguments)}class hc{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Kj extends hc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ho{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return k(function*(){const a=yield vh._fromIdTokenResponse(e,r,i),u=Jk(r);return new ho({user:a,providerId:u,_tokenResponse:r,operationType:t})})()}static _forOperation(e,t,r){return k(function*(){yield e._updateTokensIfNecessary(r,!0);const i=Jk(r);return new ho({user:e,providerId:i,_tokenResponse:r,operationType:t})})()}}function Jk(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class jb extends Wt{constructor(e,t,r,i){var a;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,jb.prototype),this.customData={appName:e.name,tenantId:null!==(a=e.tenantId)&&void 0!==a?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new jb(e,t,r,i)}}function Xk(n,e,t,r){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw"auth/multi-factor-auth-required"===a.code?jb._fromErrorAndOperation(n,a,e,r):a})}function hM(n,e){return fM.apply(this,arguments)}function fM(){return(fM=k(function*(n,e,t=!1){const r=yield Bl(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return ho._forOperation(n,"link",r)})).apply(this,arguments)}function gM(){return(gM=k(function*(n,e,t=!1){var r;const{auth:i}=n,a="reauthenticate";try{const u=yield Bl(n,Xk(i,a,e,n),t);Qe(u.idToken,i,"internal-error");const d=kb(u.idToken);Qe(d,i,"internal-error");const{sub:p}=d;return Qe(n.uid===p,i,"user-mismatch"),ho._forOperation(n,a,u)}catch(u){throw"auth/user-not-found"===(null===(r=u)||void 0===r?void 0:r.code)&&ms(i,"user-mismatch"),u}})).apply(this,arguments)}function mM(){return(mM=k(function*(n,e,t=!1){const r="signIn",i=yield Xk(n,r,e),a=yield ho._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(a.user)),a})).apply(this,arguments)}const Gb="__sak";class iF{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Gb,"1"),this.storage.removeItem(Gb),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const pH=(()=>{class n extends iF{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function dH(){const n=ft();return Gx(n)||Lb(n)}()&&function Dj(){try{return!(!window||window===window.top)}catch(n){return!1}}(),this.fallbackToPolling=$k(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),a=this.localCache[r];i!==a&&t(r,a,i)}}onStorageEvent(t,r=!1){if(!t.key)return void this.forAllChangedKeys((d,p,g)=>{this.notifyListeners(d,g)});const i=t.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const d=this.storage.getItem(i);if(t.newValue!==d)null!==t.newValue?this.storage.setItem(i,t.newValue):this.storage.removeItem(i);else if(this.localCache[i]===t.newValue&&!r)return}const a=()=>{const d=this.storage.getItem(i);!r&&this.localCache[i]===d||this.notifyListeners(i,d)},u=this.storage.getItem(i);!function Ij(){return function Tt(){const n=ft();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}()&&10===document.documentMode}()||u===t.newValue||t.newValue===t.oldValue?a():setTimeout(a,10)}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const a of Array.from(i))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,r){var i=()=>super._set,a=this;return k(function*(){yield i().call(a,t,r),a.localCache[t]=JSON.stringify(r)})()}_get(t){var r=()=>super._get,i=this;return k(function*(){const a=yield r().call(i,t);return i.localCache[t]=JSON.stringify(a),a})()}_remove(t){var r=()=>super._remove,i=this;return k(function*(){yield r().call(i,t),delete i.localCache[t]})()}}return n.type="LOCAL",n})(),sF=(()=>{class n extends iF{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})();let mH=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(a=>a.isListeningto(t));if(r)return r;const i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){var r=this;return k(function*(){const i=t,{eventId:a,eventType:u,data:d}=i.data,p=r.handlersMap[u];if(!(null==p?void 0:p.size))return;i.ports[0].postMessage({status:"ack",eventId:a,eventType:u});const g=Array.from(p).map(function(){var A=k(function*(R){return R(i.origin,d)});return function(R){return A.apply(this,arguments)}}()),C=yield function gH(n){return Promise.all(n.map(function(){var e=k(function*(t){try{return{fulfilled:!0,value:yield t}}catch(r){return{fulfilled:!1,reason:r}}});return function(t){return e.apply(this,arguments)}}()))}(g);i.ports[0].postMessage({status:"done",eventId:a,eventType:u,response:C})})()}_subscribe(t,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function WM(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(10*Math.random());return n+t}class _H{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){var i=this;return k(function*(){const a="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let u,d;return new Promise((p,g)=>{const C=WM("",20);a.port1.start();const A=setTimeout(()=>{g(new Error("unsupported_event"))},r);d={messageChannel:a,onMessage(R){const U=R;if(U.data.eventId===C)switch(U.data.status){case"ack":clearTimeout(A),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(U.data.response);break;default:clearTimeout(A),clearTimeout(u),g(new Error("invalid_response"))}}},i.handlers.add(d),a.port1.addEventListener("message",d.onMessage),i.target.postMessage({eventType:e,eventId:C,data:t},[a.port2])}).finally(()=>{d&&i.removeMessageHandler(d)})})()}}function Wr(){return window}function zM(){return void 0!==Wr().WorkerGlobalScope&&"function"==typeof Wr().importScripts}function qM(){return(qM=k(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(n){return null}})).apply(this,arguments)}const oF="firebaseLocalStorageDb",Wb="firebaseLocalStorage",aF="fbase_key";class xv{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function zb(n,e){return n.transaction([Wb],e?"readwrite":"readonly").objectStore(Wb)}function KM(){const n=indexedDB.open(oF,1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Wb,{keyPath:aF})}catch(i){t(i)}}),n.addEventListener("success",k(function*(){const r=n.result;r.objectStoreNames.contains(Wb)?e(r):(r.close(),yield function bH(){const n=indexedDB.deleteDatabase(oF);return new xv(n).toPromise()}(),e(yield KM()))}))})}function lF(n,e,t){return YM.apply(this,arguments)}function YM(){return(YM=k(function*(n,e,t){const r=zb(n,!0).put({[aF]:e,value:t});return new xv(r).toPromise()})).apply(this,arguments)}function QM(){return(QM=k(function*(n,e){const t=zb(n,!1).get(e),r=yield new xv(t).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function uF(n,e){const t=zb(n,!0).delete(e);return new xv(t).toPromise()}const AH=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return k(function*(){return t.db||(t.db=yield KM()),t.db})()}_withRetries(t){var r=this;return k(function*(){let i=0;for(;;)try{const a=yield r._openDb();return yield t(a)}catch(a){if(i++>3)throw a;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return k(function*(){return zM()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return k(function*(){t.receiver=mH._getInstance(function wH(){return zM()?self:null}()),t.receiver._subscribe("keyChanged",function(){var r=k(function*(i,a){return{keyProcessed:(yield t._poll()).includes(a.key)}});return function(i,a){return r.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var r=k(function*(i,a){return["keyChanged"]});return function(i,a){return r.apply(this,arguments)}}())})()}initializeSender(){var t=this;return k(function*(){var r,i;if(t.activeServiceWorker=yield function vH(){return qM.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new _H(t.activeServiceWorker);const a=yield t.sender._send("ping",{},800);!a||(null===(r=a[0])||void 0===r?void 0:r.fulfilled)&&(null===(i=a[0])||void 0===i?void 0:i.value.includes("keyChanged"))&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var r=this;return k(function*(){if(r.sender&&r.activeServiceWorker&&function EH(){var n;return(null===(n=null==navigator?void 0:navigator.serviceWorker)||void 0===n?void 0:n.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:t},r.serviceWorkerReceiverAvailable?800:50)}catch(i){}})()}_isAvailable(){return k(function*(){try{if(!indexedDB)return!1;const t=yield KM();return yield lF(t,Gb,"1"),yield uF(t,Gb),!0}catch(t){}return!1})()}_withPendingWrite(t){var r=this;return k(function*(){r.pendingWrites++;try{yield t()}finally{r.pendingWrites--}})()}_set(t,r){var i=this;return k(function*(){return i._withPendingWrite(k(function*(){return yield i._withRetries(a=>lF(a,t,r)),i.localCache[t]=r,i.notifyServiceWorker(t)}))})()}_get(t){var r=this;return k(function*(){const i=yield r._withRetries(a=>function TH(n,e){return QM.apply(this,arguments)}(a,t));return r.localCache[t]=i,i})()}_remove(t){var r=this;return k(function*(){return r._withPendingWrite(k(function*(){return yield r._withRetries(i=>uF(i,t)),delete r.localCache[t],r.notifyServiceWorker(t)}))})()}_poll(){var t=this;return k(function*(){const r=yield t._withRetries(u=>{const d=zb(u,!1).getAll();return new xv(d).toPromise()});if(!r)return[];if(0!==t.pendingWrites)return[];const i=[],a=new Set;for(const{fbase_key:u,value:d}of r)a.add(u),JSON.stringify(t.localCache[u])!==JSON.stringify(d)&&(t.notifyListeners(u,d),i.push(u));for(const u of Object.keys(t.localCache))t.localCache[u]&&!a.has(u)&&(t.notifyListeners(u,null),i.push(u));return i})()}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const a of Array.from(i))a(r)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval(k(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();function dF(n){return`__${n}${Math.floor(1e6*Math.random())}`}function wh(n,e){return e?Vl(e):(Qe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}dF("rcb"),new wv(3e4,6e4);class oN extends class Nj{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ma("not implemented")}_getIdTokenResponse(e){return Ma("not implemented")}_linkToIdToken(e,t){return Ma("not implemented")}_getReauthenticationResolver(e){return Ma("not implemented")}}{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return jl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return jl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return jl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function GH(n){return function nF(n,e){return mM.apply(this,arguments)}(n.auth,new oN(n),n.bypassAuthState)}function WH(n){const{auth:e,user:t}=n;return Qe(t,e,"internal-error"),function tF(n,e){return gM.apply(this,arguments)}(t,new oN(n),n.bypassAuthState)}function zH(n){return aN.apply(this,arguments)}function aN(){return(aN=k(function*(n){const{auth:e,user:t}=n;return Qe(t,e,"internal-error"),hM(t,new oN(n),n.bypassAuthState)})).apply(this,arguments)}new wv(2e3,1e4);const Mv=new Map;class YH extends class qH{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=k(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(a){e.reject(a)}});return function(r,i){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return k(function*(){const{urlResponse:r,sessionId:i,postBody:a,tenantId:u,error:d,type:p}=e;if(d)return void t.reject(d);const g={auth:t.auth,requestUri:r,sessionId:i,tenantId:u||void 0,postBody:a||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(p)(g))}catch(C){t.reject(C)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return GH;case"linkViaPopup":case"linkViaRedirect":return zH;case"reauthViaPopup":case"reauthViaRedirect":return WH;default:ms(this.auth,"internal-error")}}resolve(e){cc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){cc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,t=this;return k(function*(){let r=Mv.get(t.auth._key());if(!r){try{const a=(yield function QH(n,e){return hN.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;r=()=>Promise.resolve(a)}catch(i){r=()=>Promise.reject(i)}Mv.set(t.auth._key(),r)}return t.bypassAuthState||Mv.set(t.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,r=this;return k(function*(){if("signInViaRedirect"===e.type)return t().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,t().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return k(function*(){})()}cleanUp(){}}function hN(){return(hN=k(function*(n,e){const t=pF(e),r=fF(n);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(t));return yield r._remove(t),i})).apply(this,arguments)}function ZH(n,e){Mv.set(n._key(),e)}function fF(n){return Vl(n._redirectPersistence)}function pF(n){return Fb("pendingRedirect",n.config.apiKey,n.name)}function gF(n,e){return vN.apply(this,arguments)}function vN(){return(vN=k(function*(n,e,t=!1){const r=_s(n),i=wh(r,e),u=yield new YH(r,i,t).execute();return u&&!t&&(delete u.user._redirectEventId,yield r._persistUserIfCurrent(u.user),yield r._setRedirectUser(null,e)),u})).apply(this,arguments)}class n${constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function r$(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yF(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!yF(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(xa(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(_F(e))}saveEventToCache(e){this.cachedEventUids.add(_F(e)),this.lastProcessedEventTime=Date.now()}}function _F(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function yF({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===(null==e?void 0:e.code)}function i$(n){return wN.apply(this,arguments)}function wN(){return(wN=k(function*(n,e={}){return ti(n,"GET","/v1/projects",e)})).apply(this,arguments)}const s$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,o$=/^https?/;function CN(){return(CN=k(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield i$(n);for(const t of e)try{if(l$(t))return}catch(r){}ms(n,"unauthorized-domain")})).apply(this,arguments)}function l$(n){const e=Ev(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return""===u.hostname&&""===r?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&u.hostname===r}if(!o$.test(t))return!1;if(s$.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const u$=new wv(3e4,6e4);function vF(){const n=Wr().___jsl;if(null==n?void 0:n.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}let Kb=null;function d$(n){return Kb=Kb||function c$(n){return new Promise((e,t)=>{var r,i,a;function u(){vF(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vF(),t(xa(n,"network-request-failed"))},timeout:u$.get()})}if(null===(i=null===(r=Wr().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)e(gapi.iframes.getContext());else{if(!(null===(a=Wr().gapi)||void 0===a?void 0:a.load)){const d=dF("iframefcb");return Wr()[d]=()=>{gapi.load?u():t(xa(n,"network-request-failed"))},function cF(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=xa("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",function NH(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(r)})}(`https://apis.google.com/js/api.js?onload=${d}`).catch(p=>t(p))}u()}}).catch(e=>{throw Kb=null,e})}(n),Kb}const h$=new wv(5e3,15e3),g$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},m$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _$(n){const e=n.config;Qe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Nx(e,"emulator/auth/iframe"):`https://${n.config.authDomain}/__/auth/iframe`,r={apiKey:e.apiKey,appName:n.name,v:Mr},i=m$.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${ui(r).slice(1)}`}function bN(){return bN=k(function*(n){const e=yield d$(n),t=Wr().gapi;return Qe(t,n,"internal-error"),e.open({where:document.body,url:_$(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:g$,dontclear:!0},r=>new Promise(function(){var i=k(function*(a,u){yield r.restyle({setHideOnLeave:!1});const d=xa(n,"network-request-failed"),p=Wr().setTimeout(()=>{u(d)},h$.get());function g(){Wr().clearTimeout(p),a(r)}r.ping(g).then(g,()=>{u(d)})});return function(a,u){return i.apply(this,arguments)}}()))}),bN.apply(this,arguments)}const v$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class EF{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function wF(n,e,t,r,i,a){Qe(n.config.authDomain,n,"auth-domain-config-required"),Qe(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Mr,eventId:i};if(e instanceof hc){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",On(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries(a||{}))u[p]=g}if(e instanceof Kj){const p=e.getScopes().filter(g=>""!==g);p.length>0&&(u.scopes=p.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const p of Object.keys(d))void 0===d[p]&&delete d[p];return`${function S$({config:n}){return n.emulator?Nx(n,"emulator/auth/handler"):`https://${n.authDomain}/__/auth/handler`}(n)}?${ui(d).slice(1)}`}const TN="webStorageSupport",M$=class x${constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sF,this._completeRedirectFn=gF,this._overrideRedirectResult=ZH}_openPopup(e,t,r,i){var a=this;return k(function*(){var u;cc(null===(u=a.eventManagers[e._key()])||void 0===u?void 0:u.manager,"_initialize() not called before _openPopup()");const d=wF(e,t,r,Ev(),i);return function T$(n,e,t,r=500,i=600){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const p=Object.assign(Object.assign({},v$),{width:r.toString(),height:i.toString(),top:a,left:u}),g=ft().toLowerCase();t&&(d=Vk(g)?"_blank":t),Lk(g)&&(e=e||"http://localhost",p.scrollbars="yes");const C=Object.entries(p).reduce((R,[U,H])=>`${R}${U}=${H},`,"");if(function Tj(n=ft()){var e;return Lb(n)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(g)&&"_self"!==d)return function I$(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}(e||"",d),new EF(null);const A=window.open(e||"",d,C);Qe(A,n,"popup-blocked");try{A.focus()}catch(R){}return new EF(A)}(e,d,WM())})()}_openRedirect(e,t,r,i){var a=this;return k(function*(){return yield a._originValidation(e),function yH(n){Wr().location.href=n}(wF(e,t,r,Ev(),i)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(cc(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){var t=this;return k(function*(){const r=yield function y$(n){return bN.apply(this,arguments)}(e),i=new n$(e);return r.register("authEvent",a=>(Qe(null==a?void 0:a.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(TN,{type:TN},i=>{var a;const u=null===(a=null==i?void 0:i[0])||void 0===a?void 0:a[TN];void 0!==u&&t(!!u),ms(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function a$(n){return CN.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return $k()||Gx()||Lb()}};var bF="@firebase/auth";class N${constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return k(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{var i;e((null===(i=r)||void 0===i?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);!t||(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function R$(n=Di()){const e=Yr(n,"auth");return e.isInitialized()?e.getImmediate():function oj(n,e){const t=Yr(n,"auth");if(t.isInitialized()){const i=t.getImmediate();if(Bn(t.getOptions(),null!=e?e:{}))return i;ms(i,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:M$,persistence:[AH,pH,sF]})}!function O$(n){pr(new Yt("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:a,authDomain:u}=r.options;return((d,p)=>{Qe(a&&!a.includes(":"),"invalid-api-key",{appName:d.name}),Qe(!(null==u?void 0:u.includes(":")),"argument-error",{appName:d.name});const g={apiKey:a,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Gk(n)},C=new Sj(d,p,g);return function aj(n,e){const t=(null==e?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Vl);(null==e?void 0:e.errorMap)&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,null==e?void 0:e.popupRedirectResolver)}(C,t),C})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),pr(new Yt("auth-internal",e=>{const t=_s(e.getProvider("auth").getImmediate());return new N$(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Tn(bF,"0.20.7",function P$(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),Tn(bF,"0.20.7","esm2017")}("Browser");class IN{constructor(e){return e}}class DN{constructor(){return Cg("auth")}}const AN=new _.OlP("angularfire2.auth-instances");function F$(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new IN(r)}}const L$={provide:DN,deps:[[new _.FiY,AN]]},V$={provide:IN,useFactory:function k$(n,e){const t=wg("auth",n,e);return t&&new IN(t)},deps:[[new _.FiY,AN],Vo]};let U$=(()=>{class n{constructor(){Tn("angularfire",_i.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[V$,L$]}),n})();function B$(n,...e){return{ngModule:U$,providers:[{provide:AN,useFactory:F$(n),multi:!0,deps:[_.R0b,_.zs3,dh,hh,[new _.FiY,Ob],...e]}]}}const j$=Aa(R$,!0);var pt,H$="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Hl={},SN=SN||{},$t=H$||self;function Yb(){}function Qb(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Nv(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var xN="closure_uid_"+(1e9*Math.random()>>>0),G$=0;function W$(n,e,t){return n.call.apply(n.bind,arguments)}function z$(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function ki(n,e,t){return(ki=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?W$:z$).apply(null,arguments)}function Zb(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function yi(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var u=Array(arguments.length-2),d=2;d<arguments.length;d++)u[d-2]=arguments[d];return e.prototype[i].apply(r,u)}}function fc(){this.s=this.s,this.o=this.o}var K$={};fc.prototype.s=!1,fc.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function $$(n){return Object.prototype.hasOwnProperty.call(n,xN)&&n[xN]||(n[xN]=++G$)}(this);delete K$[n]}},fc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const DF=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function MN(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function AF(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Qb(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let u=0;u<a;u++)n[i+u]=r[u]}else n.push(r)}}function Fi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Fi.prototype.h=function(){this.defaultPrevented=!0};var Y$=function(){if(!$t.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{$t.addEventListener("test",Yb,e),$t.removeEventListener("test",Yb,e)}catch(t){}return n}();function Jb(n){return/^[\s\xa0]*$/.test(n)}var SF=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function NN(n,e){return n<e?-1:n>e?1:0}function Xb(){var n=$t.navigator;return n&&(n=n.userAgent)?n:""}function Na(n){return-1!=Xb().indexOf(n)}function PN(n){return PN[" "](n),n}PN[" "]=Yb;var eT,n,Z$=Na("Opera"),Og=Na("Trident")||Na("MSIE"),xF=Na("Edge"),ON=xF||Og,MF=Na("Gecko")&&!(-1!=Xb().toLowerCase().indexOf("webkit")&&!Na("Edge"))&&!(Na("Trident")||Na("MSIE"))&&!Na("Edge"),J$=-1!=Xb().toLowerCase().indexOf("webkit")&&!Na("Edge");function NF(){var n=$t.document;return n?n.documentMode:void 0}e:{var RN="",kN=(n=Xb(),MF?/rv:([^\);]+)(\)|;)/.exec(n):xF?/Edge\/([\d\.]+)/.exec(n):Og?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):J$?/WebKit\/(\S+)/.exec(n):Z$?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(kN&&(RN=kN?kN[1]:""),Og){var FN=NF();if(null!=FN&&FN>parseFloat(RN)){eT=String(FN);break e}}eT=RN}var X$={};var tG=$t.document&&Og&&(NF()||parseInt(eT,10))||void 0;function Pv(n,e){if(Fi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(MF){e:{try{PN(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:nG[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Pv.X.h.call(this)}}yi(Pv,Fi);var nG={2:"touch",3:"pen",4:"mouse"};Pv.prototype.h=function(){Pv.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ov="closure_listenable_"+(1e6*Math.random()|0),rG=0;function iG(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++rG,this.ba=this.ea=!1}function tT(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function VN(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function OF(n){const e={};for(const t in n)e[t]=n[t];return e}const RF="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function kF(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<RF.length;a++)t=RF[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function nT(n){this.src=n,this.g={},this.h=0}function UN(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=DF(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(tT(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function BN(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}nT.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var u=BN(n,e,r,i);return-1<u?(e=n[u],t||(e.ea=!1)):((e=new iG(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var jN="closure_lm_"+(1e6*Math.random()|0),HN={};function FF(n,e,t,r,i){if(r&&r.once)return VF(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)FF(n,e[a],t,r,i);return null}return t=zN(t),n&&n[Ov]?n.N(e,t,Nv(r)?!!r.capture:!!r,i):LF(n,e,t,!1,r,i)}function LF(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var u=Nv(i)?!!i.capture:!!i,d=GN(n);if(d||(n[jN]=d=new nT(n)),(t=d.add(e,t,r,u,a)).proxy)return t;if(r=function sG(){const e=oG;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Y$||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(BF(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function VF(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)VF(n,e[a],t,r,i);return null}return t=zN(t),n&&n[Ov]?n.O(e,t,Nv(r)?!!r.capture:!!r,i):LF(n,e,t,!0,r,i)}function UF(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)UF(n,e[a],t,r,i);else r=Nv(r)?!!r.capture:!!r,t=zN(t),n&&n[Ov]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=BN(a=n.g[e],t,r,i))&&(tT(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=GN(n))&&(e=n.g[e.toString()],n=-1,e&&(n=BN(e,t,r,i)),(t=-1<n?e[n]:null)&&$N(t))}function $N(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Ov])UN(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(BF(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=GN(e))?(UN(t,n),0==t.h&&(t.src=null,e[jN]=null)):tT(n)}}}function BF(n){return n in HN?HN[n]:HN[n]="on"+n}function oG(n,e){if(n.ba)n=!0;else{e=new Pv(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&$N(n),n=t.call(r,e)}return n}function GN(n){return(n=n[jN])instanceof nT?n:null}var WN="__closure_events_fn_"+(1e9*Math.random()>>>0);function zN(n){return"function"==typeof n?n:(n[WN]||(n[WN]=function(e){return n.handleEvent(e)}),n[WN])}function ni(){fc.call(this),this.i=new nT(this),this.P=this,this.I=null}function vi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Fi(e,n);else if(e instanceof Fi)e.target=e.target||n;else{var i=e;kF(e=new Fi(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var u=e.g=t[a];i=rT(u,r,!0,e)&&i}if(i=rT(u=e.g=n,r,!0,e)&&i,i=rT(u,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=rT(u=e.g=t[a],r,!1,e)&&i}function rT(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var u=e[a];if(u&&!u.ba&&u.capture==t){var d=u.listener,p=u.ha||u.src;u.ea&&UN(n.i,u),i=!1!==d.call(p,r)&&i}}return i&&!r.defaultPrevented}yi(ni,fc),ni.prototype[Ov]=!0,ni.prototype.removeEventListener=function(n,e,t,r){UF(this,n,e,t,r)},ni.prototype.M=function(){if(ni.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)tT(t[r]);delete n.g[e],n.h--}}this.I=null},ni.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ni.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var qN=$t.JSON.stringify;function aG(){var n=$F;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var KN,jF=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new uG,n=>n.reset());class uG{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function cG(n){$t.setTimeout(()=>{throw n},0)}function HF(n,e){KN||function dG(){var n=$t.Promise.resolve(void 0);KN=function(){n.then(hG)}}(),YN||(KN(),YN=!0),$F.add(n,e)}var YN=!1,$F=new class lG{constructor(){this.h=this.g=null}add(e,t){const r=jF.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function hG(){for(var n;n=aG();){try{n.h.call(n.g)}catch(t){cG(t)}var e=jF;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}YN=!1}function iT(n,e){ni.call(this),this.h=n||1,this.g=e||$t,this.j=ki(this.kb,this),this.l=Date.now()}function QN(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function ZN(n,e,t){if("function"==typeof n)t&&(n=ki(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ki(n.handleEvent,n)}return 2147483647<Number(e)?-1:$t.setTimeout(n,e||0)}function GF(n){n.g=ZN(()=>{n.g=null,n.i&&(n.i=!1,GF(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}yi(iT,ni),(pt=iT.prototype).ca=!1,pt.R=null,pt.kb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),vi(this,"tick"),this.ca&&(QN(this),this.start()))}},pt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},pt.M=function(){iT.X.M.call(this),QN(this),delete this.g};class fG extends fc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:GF(this)}M(){super.M(),this.g&&($t.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rv(n){fc.call(this),this.h=n,this.g={}}yi(Rv,fc);var WF=[];function zF(n,e,t,r){Array.isArray(t)||(t&&(WF[0]=t.toString()),t=WF);for(var i=0;i<t.length;i++){var a=FF(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function qF(n){VN(n.g,function(e,t){this.g.hasOwnProperty(t)&&$N(e)},n),n.g={}}function sT(){this.g=!0}function Rg(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function _G(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var u=1;u<i.length;u++)i[u]=""}}}return qN(t)}catch(d){return e}}(n,t)+(r?" "+r:"")})}Rv.prototype.M=function(){Rv.X.M.call(this),qF(this)},Rv.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},sT.prototype.Aa=function(){this.g=!1},sT.prototype.info=function(){};var Ch={},KF=null;function oT(){return KF=KF||new ni}function YF(n){Fi.call(this,Ch.Oa,n)}function kv(n){const e=oT();vi(e,new YF(e,n))}function QF(n,e){Fi.call(this,Ch.STAT_EVENT,n),this.stat=e}function Zi(n){const e=oT();vi(e,new QF(e,n))}function ZF(n,e){Fi.call(this,Ch.Pa,n),this.size=e}function Fv(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return $t.setTimeout(function(){n()},e)}Ch.Oa="serverreachability",yi(YF,Fi),Ch.STAT_EVENT="statevent",yi(QF,Fi),Ch.Pa="timingevent",yi(ZF,Fi);var aT={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,La:7,TIMEOUT:8,Cb:9},JF={qb:"complete",Mb:"success",Ma:"error",La:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function JN(){}function eL(){}JN.prototype.h=null;var tP,Lv={OPEN:"a",pb:"b",Ma:"c",Bb:"d"};function XN(){Fi.call(this,"d")}function eP(){Fi.call(this,"c")}function lT(){}function Vv(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Rv(this),this.O=yG,this.T=new iT(n=ON?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new tL}function tL(){this.i=null,this.g="",this.h=!1}yi(XN,Fi),yi(eP,Fi),yi(lT,JN),lT.prototype.g=function(){return new XMLHttpRequest},lT.prototype.i=function(){return{}},tP=new lT;var yG=45e3,nP={},uT={};function rP(n,e,t){n.K=1,n.v=fT($l(e)),n.s=t,n.P=!0,nL(n,null)}function nL(n,e){n.F=Date.now(),Uv(n),n.A=$l(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),hL(t.i,"t",r),n.C=0,t=n.l.H,n.h=new tL,n.g=FL(n.l,t?e:null,!n.s),0<n.N&&(n.L=new fG(ki(n.Ka,n,n.g),n.N)),zF(n.S,n.g,"readystatechange",n.hb),e=n.H?OF(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),kv(1),function pG(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var u="",d=a.split("&"),p=0;p<d.length;p++){var g=d[p].split("=");if(1<g.length){var C=g[0];g=g[1];var A=C.split("_");u=2<=A.length&&"type"==A[1]?u+(C+"=")+g+"&":u+(C+"=redacted&")}}else u=null;else u=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.U,n.s)}function rL(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function iL(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=vG(n,t),i==uT){4==e&&(n.o=4,Zi(14),r=!1),Rg(n.j,n.m,null,"[Incomplete Response]");break}if(i==nP){n.o=4,Zi(15),Rg(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Rg(n.j,n.m,i,null),iP(n,i)}rL(n)&&i!=uT&&i!=nP&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Zi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),hP(e),e.K=!0,Zi(11))):(Rg(n.j,n.m,t,"[Invalid Chunked Response]"),bh(n),Bv(n))}function vG(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?uT:(t=Number(e.substring(t,r)),isNaN(t)?nP:(r+=1)+t>e.length?uT:(e=e.substr(r,t),n.C=r+t,e))}function Uv(n){n.V=Date.now()+n.O,sL(n,n.O)}function sL(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Fv(ki(n.fb,n),e)}function cT(n){n.B&&($t.clearTimeout(n.B),n.B=null)}function Bv(n){0==n.l.G||n.I||PL(n.l,n)}function bh(n){cT(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,QN(n.T),qF(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function iP(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||sP(t.h,n)))if(!n.J&&sP(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch(g){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=Fv(ki(t.bb,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;vT(t),_T(t)}dP(t),Zi(18)}if(1>=gL(t.h)&&t.ja){try{t.ja()}catch(g){}t.ja=void 0}}else Ih(t,11)}else if((n.J||t.g==n)&&vT(t),!Jb(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let g=i[e];if(t.T=g[0],g=g[1],2==t.G)if("c"==g[0]){t.I=g[1],t.ka=g[2];const C=g[3];null!=C&&(t.ma=C,t.j.info("VER="+t.ma));const A=g[4];null!=A&&(t.Ca=A,t.j.info("SVER="+t.Ca));const R=g[5];null!=R&&"number"==typeof R&&0<R&&(t.J=r=1.5*R,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const U=n.g;if(U){const H=U.g?U.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(H){var a=r.h;a.g||-1==H.indexOf("spdy")&&-1==H.indexOf("quic")&&-1==H.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(oP(a,a.h),a.h=null))}if(r.D){const te=U.g?U.g.getResponseHeader("X-HTTP-Session-Id"):null;te&&(r.za=te,nr(r.F,r.D,te))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var u=n;if((r=t).sa=kL(r,r.H?r.ka:null,r.V),u.J){mL(r.h,u);var d=u,p=r.J;p&&d.setTimeout(p),d.B&&(cT(d),Uv(d)),r.g=u}else ML(r);0<t.i.length&&yT(t)}else"stop"!=g[0]&&"close"!=g[0]||Ih(t,7);else 3==t.G&&("stop"==g[0]||"close"==g[0]?"stop"==g[0]?Ih(t,7):cP(t):"noop"!=g[0]&&t.l&&t.l.wa(g),t.A=0)}kv(4)}catch(g){}}function oL(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Qb(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function wG(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if("undefined"!=typeof Map&&n instanceof Map)return Array.from(n.keys());if(!("undefined"!=typeof Set&&n instanceof Set)){if(Qb(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function EG(n){if(n.W&&"function"==typeof n.W)return n.W();if("undefined"!=typeof Map&&n instanceof Map||"undefined"!=typeof Set&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Qb(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(pt=Vv.prototype).setTimeout=function(n){this.O=n},pt.hb=function(n){n=n.target;const e=this.L;e&&3==Gl(n)?e.l():this.Ka(n)},pt.Ka=function(n){try{if(n==this.g)e:{const C=Gl(this.g);var e=this.g.Ea();const A=this.g.aa();if(!(3>C)&&(3!=C||ON||this.g&&(this.h.h||this.g.fa()||TL(this.g)))){this.I||4!=C||7==e||kv(8==e||0>=A?3:2),cT(this);var t=this.g.aa();this.Y=t;t:if(rL(this)){var r=TL(this.g);n="";var i=r.length,a=4==Gl(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){bh(this),Bv(this);var u="";break t}this.h.i=new $t.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==t,function gG(n,e,t,r,i,a,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+u})}(this.j,this.u,this.A,this.m,this.U,C,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var d,p=this.g;if((d=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Jb(d)){var g=d;break t}}g=null}if(!(t=g)){this.i=!1,this.o=3,Zi(12),bh(this),Bv(this);break e}Rg(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,iP(this,t)}this.P?(iL(this,C,u),ON&&this.i&&3==C&&(zF(this.S,this.T,"tick",this.gb),this.T.start())):(Rg(this.j,this.m,u,null),iP(this,u)),4==C&&bh(this),this.i&&!this.I&&(4==C?PL(this.l,this):(this.i=!1,Uv(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,Zi(12)):(this.o=0,Zi(13)),bh(this),Bv(this)}}}catch(C){}},pt.gb=function(){if(this.g){var n=Gl(this.g),e=this.g.fa();this.C<e.length&&(cT(this),iL(this,n,e),this.i&&4!=n&&Uv(this))}},pt.cancel=function(){this.I=!0,bh(this)},pt.fb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function mG(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(kv(3),Zi(17)),bh(this),this.o=2,Bv(this)):sL(this,this.V-n)};var aL=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Th(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Th){this.h=void 0!==e?e:n.h,dT(this,n.j),this.s=n.s,this.g=n.g,hT(this,n.m),this.l=n.l,e=n.i;var t=new $v;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),lL(this,t),this.o=n.o}else n&&(t=String(n).match(aL))?(this.h=!!e,dT(this,t[1]||"",!0),this.s=jv(t[2]||""),this.g=jv(t[3]||"",!0),hT(this,t[4]),this.l=jv(t[5]||"",!0),lL(this,t[6]||"",!0),this.o=jv(t[7]||"")):(this.h=!!e,this.i=new $v(null,this.h))}function $l(n){return new Th(n)}function dT(n,e,t){n.j=t?jv(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function hT(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function lL(n,e,t){e instanceof $v?(n.i=e,function SG(n,e){e&&!n.j&&(pc(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(cL(this,r),hL(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Hv(e,DG)),n.i=new $v(e,n.h))}function nr(n,e,t){n.i.set(e,t)}function fT(n){return nr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function jv(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Hv(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,bG),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function bG(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Th.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Hv(e,uL,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Hv(e,uL,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Hv(t,"/"==t.charAt(0)?IG:TG,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Hv(t,AG)),n.join("")};var uL=/[#\/\?@]/g,TG=/[#\?:]/g,IG=/[#\?]/g,DG=/[#\?@]/g,AG=/#/g;function $v(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function pc(n){n.g||(n.g=new Map,n.h=0,n.i&&function CG(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function cL(n,e){pc(n),e=kg(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function dL(n,e){return pc(n),e=kg(n,e),n.g.has(e)}function hL(n,e,t){cL(n,e),0<t.length&&(n.i=null,n.g.set(kg(n,e),MN(t)),n.h+=t.length)}function kg(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function fL(n){this.l=n||MG,n=$t.PerformanceNavigationTiming?0<(n=$t.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!($t.g&&$t.g.Ga&&$t.g.Ga()&&$t.g.Ga().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(pt=$v.prototype).add=function(n,e){pc(this),this.i=null,n=kg(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},pt.forEach=function(n,e){pc(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},pt.oa=function(){pc(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},pt.W=function(n){pc(this);let e=[];if("string"==typeof n)dL(this,n)&&(e=e.concat(this.g.get(kg(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},pt.set=function(n,e){return pc(this),this.i=null,dL(this,n=kg(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},pt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},pt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),u=this.W(r);for(r=0;r<u.length;r++){var i=a;""!==u[r]&&(i+="="+encodeURIComponent(String(u[r]))),n.push(i)}}return this.i=n.join("&")};var MG=10;function pL(n){return!!n.h||!!n.g&&n.g.size>=n.j}function gL(n){return n.h?1:n.g?n.g.size:0}function sP(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function oP(n,e){n.g?n.g.add(e):n.h=e}function mL(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function _L(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return MN(n.i)}function aP(){}function NG(){this.g=new aP}function PG(n,e,t){const r=t||"";try{oL(n,function(i,a){let u=i;Nv(i)&&(u=qN(i)),e.push(r+a+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function pT(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function Gv(n){this.l=n.$b||null,this.j=n.ib||!1}function gT(n,e){ni.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=lP,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}fL.prototype.cancel=function(){if(this.i=_L(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},aP.prototype.stringify=function(n){return $t.JSON.stringify(n,void 0)},aP.prototype.parse=function(n){return $t.JSON.parse(n,void 0)},yi(Gv,JN),Gv.prototype.g=function(){return new gT(this.l,this.j)},Gv.prototype.i=function(n){return function(){return n}}({}),yi(gT,ni);var lP=0;function yL(n){n.j.read().then(n.Sa.bind(n)).catch(n.ga.bind(n))}function Wv(n){n.readyState=4,n.l=null,n.j=null,n.A=null,zv(n)}function zv(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(pt=gT.prototype).open=function(n,e){if(this.readyState!=lP)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,zv(this)},pt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||$t).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ga.bind(this))},pt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Wv(this)),this.readyState=lP},pt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,zv(this)),this.g&&(this.readyState=3,zv(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ga.bind(this));else if(void 0!==$t.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;yL(this)}else n.text().then(this.Ua.bind(this),this.ga.bind(this))},pt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Wv(this):zv(this),3==this.readyState&&yL(this)}},pt.Ua=function(n){this.g&&(this.response=this.responseText=n,Wv(this))},pt.Ta=function(n){this.g&&(this.response=n,Wv(this))},pt.ga=function(){this.g&&Wv(this)},pt.setRequestHeader=function(n,e){this.v.append(n,e)},pt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},pt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(gT.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var RG=$t.JSON.parse;function Pr(n){ni.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=vL,this.K=this.L=!1}yi(Pr,ni);var vL="",kG=/^https?$/i,FG=["POST","PUT"];function EL(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,wL(n),mT(n)}function wL(n){n.D||(n.D=!0,vi(n,"complete"),vi(n,"error"))}function CL(n){if(n.h&&void 0!==SN&&(!n.C[1]||4!=Gl(n)||2!=n.aa()))if(n.v&&4==Gl(n))ZN(n.Ha,0,n);else if(vi(n,"readystatechange"),4==Gl(n)){n.h=!1;try{const d=n.aa();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===d){var i=String(n.H).match(aL)[1]||null;if(!i&&$t.self&&$t.self.location){var a=$t.self.location.protocol;i=a.substr(0,a.length-1)}r=!kG.test(i?i.toLowerCase():"")}t=r}if(t)vi(n,"complete"),vi(n,"success");else{n.m=6;try{var u=2<Gl(n)?n.g.statusText:""}catch(p){u=""}n.j=u+" ["+n.aa()+"]",wL(n)}}finally{mT(n)}}}function mT(n,e){if(n.g){bL(n);const t=n.g,r=n.C[0]?Yb:null;n.g=null,n.C=null,e||vi(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function bL(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&($t.clearTimeout(n.A),n.A=null)}function Gl(n){return n.g?n.g.readyState:0}function TL(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case vL:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function IL(n){let e="";return VN(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function uP(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=IL(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):nr(n,e,t))}function qv(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function DL(n){this.Ca=0,this.i=[],this.j=new sT,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.$a=this.U=0,this.Ya=qv("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Wa=qv("baseRetryDelayMs",5e3,n),this.ab=qv("retryDelaySeedMs",1e4,n),this.Za=qv("forwardChannelMaxRetries",2,n),this.ta=qv("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Yb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new fL(n&&n.concurrentRequestLimit),this.Fa=new NG,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Xa=n&&n.Wb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function cP(n){if(AL(n),3==n.G){var e=n.U++,t=$l(n.F);nr(t,"SID",n.I),nr(t,"RID",e),nr(t,"TYPE","terminate"),Kv(n,t),(e=new Vv(n,n.j,e,void 0)).K=2,e.v=fT($l(t)),t=!1,$t.navigator&&$t.navigator.sendBeacon&&(t=$t.navigator.sendBeacon(e.v.toString(),"")),!t&&$t.Image&&((new Image).src=e.v,t=!0),t||(e.g=FL(e.l,null),e.g.da(e.v)),e.F=Date.now(),Uv(e)}RL(n)}function _T(n){n.g&&(hP(n),n.g.cancel(),n.g=null)}function AL(n){_T(n),n.u&&($t.clearTimeout(n.u),n.u=null),vT(n),n.h.cancel(),n.m&&("number"==typeof n.m&&$t.clearTimeout(n.m),n.m=null)}function yT(n){pL(n.h)||n.m||(n.m=!0,HF(n.Ja,n),n.C=0)}function SL(n,e){var t;t=e?e.m:n.U++;const r=$l(n.F);nr(r,"SID",n.I),nr(r,"RID",t),nr(r,"AID",n.T),Kv(n,r),n.o&&n.s&&uP(r,n.o,n.s),t=new Vv(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=xL(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),oP(n.h,t),rP(t,r,e)}function Kv(n,e){n.ia&&VN(n.ia,function(t,r){nr(e,r,t)}),n.l&&oL({},function(t,r){nr(e,r,t)})}function xL(n,e,t){t=Math.min(n.i.length,t);var r=n.l?ki(n.l.Qa,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const u=["count="+t];-1==a?0<t?(a=i[0].h,u.push("ofs="+a)):a=0:u.push("ofs="+a);let d=!0;for(let p=0;p<t;p++){let g=i[p].h;const C=i[p].g;if(g-=a,0>g)a=Math.max(0,i[p].h-100),d=!1;else try{PG(C,u,"req"+g+"_")}catch(A){r&&r(C)}}if(d){r=u.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function ML(n){n.g||n.u||(n.Z=1,HF(n.Ia,n),n.A=0)}function dP(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Fv(ki(n.Ia,n),OL(n,n.A)),n.A++,0))}function hP(n){null!=n.B&&($t.clearTimeout(n.B),n.B=null)}function NL(n){n.g=new Vv(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=$l(n.sa);nr(e,"RID","rpc"),nr(e,"SID",n.I),nr(e,"CI",n.L?"0":"1"),nr(e,"AID",n.T),nr(e,"TYPE","xmlhttp"),Kv(n,e),n.o&&n.s&&uP(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=fT($l(e)),t.s=null,t.P=!0,nL(t,n)}function vT(n){null!=n.v&&($t.clearTimeout(n.v),n.v=null)}function PL(n,e){var t=null;if(n.g==e){vT(n),hP(n),n.g=null;var r=2}else{if(!sP(n.h,e))return;t=e.D,mL(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;vi(r=oT(),new ZF(r,t,e,i)),yT(n)}else ML(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function VG(n,e){return!(gL(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Ya?0:n.Za)||(n.m=Fv(ki(n.Ja,n,e),OL(n,n.C)),n.C++,0)))}(n,e)||2==r&&dP(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Ih(n,5);break;case 4:Ih(n,10);break;case 3:Ih(n,6);break;default:Ih(n,2)}}function OL(n,e){let t=n.Wa+Math.floor(Math.random()*n.ab);return n.l||(t*=2),t*e}function Ih(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=ki(n.jb,n);t||(t=new Th("//www.google.com/images/cleardot.gif"),$t.location&&"http"==$t.location.protocol||dT(t,"https"),fT(t)),function OG(n,e){const t=new sT;if($t.Image){const r=new Image;r.onload=Zb(pT,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Zb(pT,t,r,"TestLoadImage: error",!1,e),r.onabort=Zb(pT,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Zb(pT,t,r,"TestLoadImage: timeout",!1,e),$t.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Zi(2);n.G=0,n.l&&n.l.va(e),RL(n),AL(n)}function RL(n){if(n.G=0,n.la=[],n.l){const e=_L(n.h);(0!=e.length||0!=n.i.length)&&(AF(n.la,e),AF(n.la,n.i),n.h.i.length=0,MN(n.i),n.i.length=0),n.l.ua()}}function kL(n,e,t){var r=t instanceof Th?$l(t):new Th(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),hT(r,r.m);else{var i=$t.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new Th(null,void 0);r&&dT(a,r),e&&(a.g=e),i&&hT(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&nr(r,t,e),nr(r,"VER",n.ma),Kv(n,r),r}function FL(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Pr(t&&n.Da&&!n.ra?new Gv({ib:!0}):n.ra)).L=n.H,e}function LL(){}function ET(){if(Og&&!(10<=Number(tG)))throw Error("Environmental error: no available transport.")}function js(n,e){ni.call(this),this.g=new DL(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Xb)&&!Jb(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Jb(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Fg(this)}function VL(n){XN.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function UL(){eP.call(this),this.status=1}function Fg(n){this.g=n}(pt=Pr.prototype).da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():tP.g(),this.C=function XF(n){return n.h||(n.h=n.i())}(this.u?this.u:tP),this.g.onreadystatechange=ki(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void EL(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=$t.FormData&&n instanceof $t.FormData,!(0<=DF(FG,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,u]of t)this.g.setRequestHeader(a,u);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{bL(this),0<this.B&&((this.K=function LG(n){return Og&&function eG(){return function Q$(n){var e=X$;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=SF(String(eT)).split("."),t=SF("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var i=e[u]||"",a=t[u]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=NN(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||NN(0==i[2].length,0==a[2].length)||NN(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ki(this.qa,this)):this.A=ZN(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){EL(this,a)}},pt.qa=function(){void 0!==SN&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,vi(this,"timeout"),this.abort(8))},pt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,vi(this,"complete"),vi(this,"abort"),mT(this))},pt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),mT(this,!0)),Pr.X.M.call(this)},pt.Ha=function(){this.s||(this.F||this.v||this.l?CL(this):this.eb())},pt.eb=function(){CL(this)},pt.aa=function(){try{return 2<Gl(this)?this.g.status:-1}catch(n){return-1}},pt.fa=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},pt.Ra=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),RG(e)}},pt.Ea=function(){return this.m},pt.Na=function(){return"string"==typeof this.j?this.j:String(this.j)},(pt=DL.prototype).ma=8,pt.G=1,pt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new Vv(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=OF(a),kF(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=xL(this,i,e),nr(t=$l(this.F),"RID",n),nr(t,"CVER",22),this.D&&nr(t,"X-HTTP-Session-Id",this.D),Kv(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(IL(a)))+"&"+e:this.o&&uP(t,this.o,a)),oP(this.h,i),this.Xa&&nr(t,"TYPE","init"),this.O?(nr(t,"$req",e),nr(t,"SID","null"),i.Z=!0,rP(i,t,null)):rP(i,t,e),this.G=2}}else 3==this.G&&(n?SL(this,n):0==this.i.length||pL(this.h)||SL(this))},pt.Ia=function(){if(this.u=null,NL(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Fv(ki(this.cb,this),n)}},pt.cb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Zi(10),_T(this),NL(this))},pt.bb=function(){null!=this.v&&(this.v=null,_T(this),dP(this),Zi(19))},pt.jb=function(n){n?(this.j.info("Successfully pinged google.com"),Zi(2)):(this.j.info("Failed to ping google.com"),Zi(1))},(pt=LL.prototype).xa=function(){},pt.wa=function(){},pt.va=function(){},pt.ua=function(){},pt.Qa=function(){},ET.prototype.g=function(n,e){return new js(n,e)},yi(js,ni),js.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Zi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=kL(n,null,n.V),yT(n)},js.prototype.close=function(){cP(this.g)},js.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=qN(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.$a++,n)),3==e.G&&yT(e)},js.prototype.M=function(){this.g.l=null,delete this.j,cP(this.g),delete this.g,js.X.M.call(this)},yi(VL,XN),yi(UL,eP),yi(Fg,LL),Fg.prototype.xa=function(){vi(this.g,"a")},Fg.prototype.wa=function(n){vi(this.g,new VL(n))},Fg.prototype.va=function(n){vi(this.g,new UL(n))},Fg.prototype.ua=function(){vi(this.g,"b")},ET.prototype.createWebChannel=ET.prototype.g,js.prototype.send=js.prototype.u,js.prototype.open=js.prototype.m,js.prototype.close=js.prototype.close,aT.NO_ERROR=0,aT.TIMEOUT=8,aT.HTTP_ERROR=6,JF.COMPLETE="complete",eL.EventType=Lv,Lv.OPEN="a",Lv.CLOSE="b",Lv.ERROR="c",Lv.MESSAGE="d",ni.prototype.listen=ni.prototype.N,Pr.prototype.listenOnce=Pr.prototype.O,Pr.prototype.getLastError=Pr.prototype.Na,Pr.prototype.getLastErrorCode=Pr.prototype.Ea,Pr.prototype.getStatus=Pr.prototype.aa,Pr.prototype.getResponseJson=Pr.prototype.Ra,Pr.prototype.getResponseText=Pr.prototype.fa,Pr.prototype.send=Pr.prototype.da;var UG=Hl.createWebChannelTransport=function(){return new ET},BG=Hl.getStatEventTarget=function(){return oT()},fP=Hl.ErrorCode=aT,jG=Hl.EventType=JF,HG=Hl.Event=Ch,BL=Hl.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},$G=Hl.FetchXmlHttpFactory=Gv,wT=Hl.WebChannel=eL,GG=Hl.XhrIo=Pr;const jL="@firebase/firestore";class ri{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ri.UNAUTHENTICATED=new ri(null),ri.GOOGLE_CREDENTIALS=new ri("google-credentials-uid"),ri.FIRST_PARTY=new ri("first-party-uid"),ri.MOCK_USER=new ri("mock-user");let Lg="9.10.0";const gc=new we("@firebase/firestore");function pP(){return gc.logLevel}function Be(n,...e){if(gc.logLevel<=zt.DEBUG){const t=e.map(gP);gc.debug(`Firestore (${Lg}): ${n}`,...t)}}function Ir(n,...e){if(gc.logLevel<=zt.ERROR){const t=e.map(gP);gc.error(`Firestore (${Lg}): ${n}`,...t)}}function Vg(n,...e){if(gc.logLevel<=zt.WARN){const t=e.map(gP);gc.warn(`Firestore (${Lg}): ${n}`,...t)}}function gP(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function ut(n="Unexpected state"){const e=`FIRESTORE (${Lg}) INTERNAL ASSERTION FAILED: `+n;throw Ir(e),new Error(e)}function kt(n,e){n||ut()}function et(n,e){return n}const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Le extends Wt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ii{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class HL{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class WG{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ri.UNAUTHENTICATED))}shutdown(){}}class qG{constructor(e){this.t=e,this.currentUser=ri.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let u=new ii;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ii,e.enqueueRetryable(()=>a(this.currentUser))};const d=()=>{const g=u;e.enqueueRetryable(k(function*(){yield g.promise,yield a(r.currentUser)}))},p=g=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(g=>p(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ii)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(kt("string"==typeof r.accessToken),new HL(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return kt(null===e||"string"==typeof e),new ri(e)}}class KG{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=ri.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(kt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class YG{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new KG(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(ri.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $L{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QG{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.A;return this.A=a.token,Be("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(kt("string"==typeof t.token),this.A=t.token,new $L(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ZG(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class GL{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=ZG(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Gt(n,e){return n<e?-1:n>e?1:0}function Ug(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}class ur{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Le(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Le(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Le(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Le(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ur.fromMillis(Date.now())}static fromDate(e){return ur.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ur(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Gt(this.nanoseconds,e.nanoseconds):Gt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Mt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Mt(e)}static min(){return new Mt(new ur(0,0))}static max(){return new Mt(new ur(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Yv{constructor(e,t,r){void 0===t?t=0:t>e.length&&ut(),void 0===r?r=e.length-t:r>e.length-t&&ut(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Yv.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Yv?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),u=t.get(i);if(a<u)return-1;if(a>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class pn extends Yv{construct(e,t,r){return new pn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Le(he.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new pn(t)}static emptyPath(){return new pn([])}}const JG=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dr extends Yv{construct(e,t,r){return new Dr(e,t,r)}static isValidIdentifier(e){return JG.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Dr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Le(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new Le(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Le(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else"`"===d?(u=!u,i++):"."!==d||u?(r+=d,i++):(a(),i++)}if(a(),u)throw new Le(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dr(t)}static emptyPath(){return new Dr([])}}class Ze{constructor(e){this.path=e}static fromPath(e){return new Ze(pn.fromString(e))}static fromName(e){return new Ze(pn.fromString(e).popFirst(5))}static empty(){return new Ze(pn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===pn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return pn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ze(new pn(e.slice()))}}function qL(n){return new Hs(n.readTime,n.key,-1)}class Hs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Hs(Mt.min(),Ze.empty(),-1)}static max(){return new Hs(Mt.max(),Ze.empty(),-1)}}function _P(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ze.comparator(n.documentKey,e.documentKey),0!==t?t:Gt(n.largestBatchId,e.largestBatchId))}const KL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";function mc(n){return yP.apply(this,arguments)}function yP(){return yP=k(function*(n){if(n.code!==he.FAILED_PRECONDITION||n.message!==KL)throw n;Be("LocalStore","Unexpectedly lost primary lease")}),yP.apply(this,arguments)}class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ut(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):re.reject(t)}static resolve(e){return new re((t,r)=>{t(e)})}static reject(e){return new re((t,r)=>{r(e)})}static waitFor(e){return new re((t,r)=>{let i=0,a=0,u=!1;e.forEach(d=>{++i,d.next(()=>{++a,u&&a===i&&t()},p=>r(p))}),u=!0,a===i&&t()})}static or(e){let t=re.resolve(!1);for(const r of e)t=t.next(i=>i?re.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new re((r,i)=>{const a=e.length,u=new Array(a);let d=0;for(let p=0;p<a;p++){const g=p;t(e[g]).next(C=>{u[g]=C,++d,d===a&&r(u)},C=>i(C))}})}static doWhile(e,t){return new re((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}function _c(n){return"IndexedDbTransactionError"===n.name}class ys{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function QL(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Sh(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ZL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}ys.at=-1;class mr{constructor(e,t){this.comparator=e,this.root=t||Ei.EMPTY}insert(e,t){return new mr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ei.BLACK,null,null))}remove(e){return new mr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ei.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new IT(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new IT(this.root,e,this.comparator,!1)}getReverseIterator(){return new IT(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new IT(this.root,e,this.comparator,!0)}}class IT{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ei{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:Ei.RED,this.left=null!=i?i:Ei.EMPTY,this.right=null!=a?a:Ei.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Ei(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ei.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ei.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ei.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ei.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ut();const e=this.left.check();if(e!==this.right.check())throw ut();return e+(this.isRed()?0:1)}}Ei.EMPTY=null,Ei.RED=!0,Ei.BLACK=!1,Ei.EMPTY=new class{constructor(){this.size=0}get key(){throw ut()}get value(){throw ut()}get color(){throw ut()}get left(){throw ut()}get right(){throw ut()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ei(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ln{constructor(e){this.comparator=e,this.data=new mr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new JL(this.data.getIterator())}getIteratorFrom(e){return new JL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Ln)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ln(this.comparator);return t.data=e,t}}class JL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class $s{constructor(e){this.fields=e,e.sort(Dr.comparator)}static empty(){return new $s([])}unionWith(e){let t=new Ln(Dr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new $s(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ug(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class zr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new zr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new zr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Gt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zr.EMPTY_BYTE_STRING=new zr("");const o3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yc(n){if(kt(!!n),"string"==typeof n){let e=0;const t=o3.exec(n);if(kt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_r(n.seconds),nanos:_r(n.nanos)}}function _r(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function xh(n){return"string"==typeof n?zr.fromBase64String(n):zr.fromUint8Array(n)}function EP(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function XL(n){const e=n.mapValue.fields.__previous_value__;return EP(e)?XL(e):e}function Jv(n){const e=yc(n.mapValue.fields.__local_write_time__.timestampValue);return new ur(e.seconds,e.nanos)}class a3{constructor(e,t,r,i,a,u,d,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.useFetchStreams=p}}class Mh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Mh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Mh&&e.projectId===this.projectId&&e.database===this.database}}function Xv(n){return null==n}function eE(n){return 0===n&&1/n==-1/0}const vc_mapValue={fields:{__type__:{stringValue:"__max__"}}};function Nh(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?EP(n)?4:iV(n)?9007199254740991:10:ut()}function Pa(n,e){if(n===e)return!0;const t=Nh(n);if(t!==Nh(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Jv(n).isEqual(Jv(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=yc(r.timestampValue),u=yc(i.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,xh(n.bytesValue).isEqual(xh(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return _r(r.geoPointValue.latitude)===_r(i.geoPointValue.latitude)&&_r(r.geoPointValue.longitude)===_r(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return _r(r.integerValue)===_r(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=_r(r.doubleValue),u=_r(i.doubleValue);return a===u?eE(a)===eE(u):isNaN(a)&&isNaN(u)}return!1}(n,e);case 9:return Ug(n.arrayValue.values||[],e.arrayValue.values||[],Pa);case 10:return function(r,i){const a=r.mapValue.fields||{},u=i.mapValue.fields||{};if(QL(a)!==QL(u))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(void 0===u[d]||!Pa(a[d],u[d])))return!1;return!0}(n,e);default:return ut()}var i}function tE(n,e){return void 0!==(n.values||[]).find(t=>Pa(t,e))}function Ec(n,e){if(n===e)return 0;const t=Nh(n),r=Nh(e);if(t!==r)return Gt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Gt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const u=_r(i.integerValue||i.doubleValue),d=_r(a.integerValue||a.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1}(n,e);case 3:return tV(n.timestampValue,e.timestampValue);case 4:return tV(Jv(n),Jv(e));case 5:return Gt(n.stringValue,e.stringValue);case 6:return function(i,a){const u=xh(i),d=xh(a);return u.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const u=i.split("/"),d=a.split("/");for(let p=0;p<u.length&&p<d.length;p++){const g=Gt(u[p],d[p]);if(0!==g)return g}return Gt(u.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const u=Gt(_r(i.latitude),_r(a.latitude));return 0!==u?u:Gt(_r(i.longitude),_r(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const u=i.values||[],d=a.values||[];for(let p=0;p<u.length&&p<d.length;++p){const g=Ec(u[p],d[p]);if(g)return g}return Gt(u.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===vc_mapValue&&a===vc_mapValue)return 0;if(i===vc_mapValue)return 1;if(a===vc_mapValue)return-1;const u=i.fields||{},d=Object.keys(u),p=a.fields||{},g=Object.keys(p);d.sort(),g.sort();for(let C=0;C<d.length&&C<g.length;++C){const A=Gt(d[C],g[C]);if(0!==A)return A;const R=Ec(u[d[C]],p[g[C]]);if(0!==R)return R}return Gt(d.length,g.length)}(n.mapValue,e.mapValue);default:throw ut()}}function tV(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Gt(n,e);const t=yc(n),r=yc(e),i=Gt(t.seconds,r.seconds);return 0!==i?i:Gt(t.nanos,r.nanos)}function jg(n){return wP(n)}function wP(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=yc(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?xh(n.bytesValue).toBase64():"referenceValue"in n?Ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const u of r.values||[])a?a=!1:i+=",",i+=wP(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",u=!0;for(const d of i)u?u=!1:a+=",",a+=`${d}:${wP(r.fields[d])}`;return a+"}"}(n.mapValue):ut();var e}function CP(n){return!!n&&"integerValue"in n}function nE(n){return!!n&&"arrayValue"in n}function nV(n){return!!n&&"nullValue"in n}function rV(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function AT(n){return!!n&&"mapValue"in n}function rE(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Sh(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=rE(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=rE(n.arrayValue.values[t]);return e}return Object.assign({},n)}function iV(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}class wi{constructor(e){this.value=e}static empty(){return new wi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!AT(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=rE(t)}setAll(e){let t=Dr.emptyPath(),r={},i=[];e.forEach((u,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=d.popLast()}u?r[d.lastSegment()]=rE(u):i.push(d.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());AT(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Pa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];AT(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Sh(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new wi(rE(this.value))}}function aV(n){const e=[];return Sh(n.fields,(t,r)=>{const i=new Dr([t]);if(AT(r)){const a=aV(r.mapValue).fields;if(0===a.length)e.push(i);else for(const u of a)e.push(i.child(u))}else e.push(i)}),new $s(e)}class Gn{constructor(e,t,r,i,a,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=u}static newInvalidDocument(e){return new Gn(e,0,Mt.min(),Mt.min(),wi.empty(),0)}static newFoundDocument(e,t,r){return new Gn(e,1,t,Mt.min(),r,0)}static newNoDocument(e,t){return new Gn(e,2,t,Mt.min(),wi.empty(),0)}static newUnknownDocument(e,t){return new Gn(e,3,t,Mt.min(),wi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Mt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class c3{constructor(e,t=null,r=[],i=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=u,this.endAt=d,this.ht=null}}function lV(n,e=null,t=[],r=[],i=null,a=null,u=null){return new c3(n,e,t,r,i,a,u)}function Oh(n){const e=et(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+jg(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Xv(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>jg(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>jg(r)).join(",")),e.ht=t}return e.ht}function iE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!v3(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Pa(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!fV(n.startAt,e.startAt)&&fV(n.endAt,e.endAt)}function ST(n){return Ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Ci extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new h3(e,t,r):"array-contains"===t?new g3(e,r):"in"===t?new m3(e,r):"not-in"===t?new _3(e,r):"array-contains-any"===t?new y3(e,r):new Ci(e,t,r)}static lt(e,t,r){return"in"===t?new f3(e,r):new p3(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Ec(t,this.value)):null!==t&&Nh(this.value)===Nh(t)&&this.ft(Ec(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ut()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class h3 extends Ci{constructor(e,t,r){super(e,t,r),this.key=Ze.fromName(r.referenceValue)}matches(e){const t=Ze.comparator(e.key,this.key);return this.ft(t)}}class f3 extends Ci{constructor(e,t){super(e,"in",t),this.keys=dV(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class p3 extends Ci{constructor(e,t){super(e,"not-in",t),this.keys=dV(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function dV(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ze.fromName(r.referenceValue))}class g3 extends Ci{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return nE(t)&&tE(t.arrayValue,this.value)}}class m3 extends Ci{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&tE(this.value.arrayValue,t)}}class _3 extends Ci{constructor(e,t){super(e,"not-in",t)}matches(e){if(tE(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!tE(this.value.arrayValue,t)}}class y3 extends Ci{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!nE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>tE(this.value.arrayValue,r))}}class wc{constructor(e,t){this.position=e,this.inclusive=t}}class Hg{constructor(e,t="asc"){this.field=e,this.dir=t}}function v3(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function hV(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],u=n.position[i];if(r=a.field.isKeyField()?Ze.comparator(Ze.fromName(u.referenceValue),t.key):Ec(u,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function fV(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Pa(n.position[t],e.position[t]))return!1;return!0}class Wl{constructor(e,t=null,r=[],i=[],a=null,u="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=p,this._t=null,this.wt=null}}function $g(n){return new Wl(n)}function gV(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Gg(n){const e=et(n);if(null===e._t){e._t=[];const t=function TP(n){for(const e of n.filters)if(e.dt())return e.field;return null}(e),r=function bP(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Hg(t)),e._t.push(new Hg(Dr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e._t.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Hg(Dr.keyField(),a))}}}return e._t}function vs(n){const e=et(n);if(!e.wt)if("F"===e.limitType)e.wt=lV(e.path,e.collectionGroup,Gg(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Gg(e))t.push(new Hg(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new wc(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new wc(e.startAt.position,e.startAt.inclusive):null;e.wt=lV(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function MT(n,e,t){return new Wl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function sE(n,e){return iE(vs(n),vs(e))&&n.limitType===e.limitType}function mV(n){return`${Oh(vs(n))}|lt:${n.limitType}`}function DP(n){return`Query(target=${function d3(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${jg(r.value)}`;var r}).join(", ")}]`),Xv(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>jg(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>jg(t)).join(",")),`Target(${e})`}(vs(n))}; limitType=${n.limitType})`}function AP(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ze.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,u){const d=hV(i,a,u);return i.inclusive?d<=0:d<0}(t.startAt,Gg(t),r)||t.endAt&&!function(i,a,u){const d=hV(i,a,u);return i.inclusive?d>=0:d>0}(t.endAt,Gg(t),r)));var t,r}function yV(n){return(e,t)=>{let r=!1;for(const i of Gg(n)){const a=E3(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function E3(n,e,t){const r=n.field.isKeyField()?Ze.comparator(e.key,t.key):function(i,a,u){const d=a.data.field(i),p=u.data.field(i);return null!==d&&null!==p?Ec(d,p):ut()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ut()}}function vV(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:eE(e)?"-0":e}}function EV(n){return{integerValue:""+n}}function wV(n,e){return function eV(n){return"number"==typeof n&&Number.isInteger(n)&&!eE(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}(e)?EV(e):vV(n,e)}class NT{constructor(){this._=void 0}}function w3(n,e,t){return n instanceof Wg?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Rh?bV(n,e):n instanceof kh?TV(n,e):function(r,i){const a=CV(r,i),u=IV(a)+IV(r.yt);return CP(a)&&CP(r.yt)?EV(u):vV(r.It,u)}(n,e)}function C3(n,e,t){return n instanceof Rh?bV(n,e):n instanceof kh?TV(n,e):t}function CV(n,e){return n instanceof zg?CP(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Wg extends NT{}class Rh extends NT{constructor(e){super(),this.elements=e}}function bV(n,e){const t=DV(e);for(const r of n.elements)t.some(i=>Pa(i,r))||t.push(r);return{arrayValue:{values:t}}}class kh extends NT{constructor(e){super(),this.elements=e}}function TV(n,e){let t=DV(e);for(const r of n.elements)t=t.filter(i=>!Pa(i,r));return{arrayValue:{values:t}}}class zg extends NT{constructor(e,t){super(),this.It=e,this.yt=t}}function IV(n){return _r(n.integerValue||n.doubleValue)}function DV(n){return nE(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class T3{constructor(e,t){this.version=e,this.transformResults=t}}class rr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new rr}static exists(e){return new rr(void 0,e)}static updateTime(e){return new rr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function PT(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class OT{}function AV(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Kg(n.key,rr.none()):new qg(n.key,n.data,rr.none());{const t=n.data,r=wi.empty();let i=new Ln(Dr.comparator);for(let a of e.fields)if(!i.has(a)){let u=t.field(a);null===u&&a.length>1&&(a=a.popLast(),u=t.field(a)),null===u?r.delete(a):r.set(a,u),i=i.add(a)}return new zl(n.key,r,new $s(i.toArray()),rr.none())}}function I3(n,e,t){n instanceof qg?function(r,i,a){const u=r.value.clone(),d=MV(r.fieldTransforms,i,a.transformResults);u.setAll(d),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,t):n instanceof zl?function(r,i,a){if(!PT(r.precondition,i))return void i.convertToUnknownDocument(a.version);const u=MV(r.fieldTransforms,i,a.transformResults),d=i.data;d.setAll(xV(r)),d.setAll(u),i.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function aE(n,e,t,r){return n instanceof qg?function(i,a,u,d){if(!PT(i.precondition,a))return u;const p=i.value.clone(),g=NV(i.fieldTransforms,d,a);return p.setAll(g),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof zl?function(i,a,u,d){if(!PT(i.precondition,a))return u;const p=NV(i.fieldTransforms,d,a),g=a.data;return g.setAll(xV(i)),g.setAll(p),a.convertToFoundDocument(a.version,g).setHasLocalMutations(),null===u?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(C=>C.field))}(n,e,t,r):(u=t,PT(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u);var a,u}function D3(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=CV(r.transform,i||null);null!=a&&(null===t&&(t=wi.empty()),t.set(r.field,a))}return t||null}function SV(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Ug(t,r,(i,a)=>function b3(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Rh&&r instanceof Rh||t instanceof kh&&r instanceof kh?Ug(t.elements,r.elements,Pa):t instanceof zg&&r instanceof zg?Pa(t.yt,r.yt):t instanceof Wg&&r instanceof Wg);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class qg extends OT{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class zl extends OT{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function xV(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function MV(n,e,t){const r=new Map;kt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],u=a.transform,d=e.data.field(a.field);r.set(a.field,C3(u,d,t[i]))}return r}function NV(n,e,t){const r=new Map;for(const i of n){const a=i.transform,u=t.data.field(i.field);r.set(i.field,w3(a,u,e))}return r}class Kg extends OT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SP extends OT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class A3{constructor(e){this.count=e}}var Or,gn;function PV(n){switch(n){default:return ut();case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0}}function OV(n){if(void 0===n)return Ir("GRPC error has no .code"),he.UNKNOWN;switch(n){case Or.OK:return he.OK;case Or.CANCELLED:return he.CANCELLED;case Or.UNKNOWN:return he.UNKNOWN;case Or.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case Or.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case Or.INTERNAL:return he.INTERNAL;case Or.UNAVAILABLE:return he.UNAVAILABLE;case Or.UNAUTHENTICATED:return he.UNAUTHENTICATED;case Or.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case Or.NOT_FOUND:return he.NOT_FOUND;case Or.ALREADY_EXISTS:return he.ALREADY_EXISTS;case Or.PERMISSION_DENIED:return he.PERMISSION_DENIED;case Or.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case Or.ABORTED:return he.ABORTED;case Or.OUT_OF_RANGE:return he.OUT_OF_RANGE;case Or.UNIMPLEMENTED:return he.UNIMPLEMENTED;case Or.DATA_LOSS:return he.DATA_LOSS;default:return ut()}}(gn=Or||(Or={}))[gn.OK=0]="OK",gn[gn.CANCELLED=1]="CANCELLED",gn[gn.UNKNOWN=2]="UNKNOWN",gn[gn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gn[gn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gn[gn.NOT_FOUND=5]="NOT_FOUND",gn[gn.ALREADY_EXISTS=6]="ALREADY_EXISTS",gn[gn.PERMISSION_DENIED=7]="PERMISSION_DENIED",gn[gn.UNAUTHENTICATED=16]="UNAUTHENTICATED",gn[gn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gn[gn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gn[gn.ABORTED=10]="ABORTED",gn[gn.OUT_OF_RANGE=11]="OUT_OF_RANGE",gn[gn.UNIMPLEMENTED=12]="UNIMPLEMENTED",gn[gn.INTERNAL=13]="INTERNAL",gn[gn.UNAVAILABLE=14]="UNAVAILABLE",gn[gn.DATA_LOSS=15]="DATA_LOSS";class Cc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Sh(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return ZL(this.inner)}size(){return this.innerSize}}const S3=new mr(Ze.comparator);function Es(){return S3}const RV=new mr(Ze.comparator);function lE(...n){let e=RV;for(const t of n)e=e.insert(t.key,t);return e}function kV(n){let e=RV;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Oa(){return uE()}function FV(){return uE()}function uE(){return new Cc(n=>n.toString(),(n,e)=>n.isEqual(e))}const x3=new mr(Ze.comparator),M3=new Ln(Ze.comparator);function Zt(...n){let e=M3;for(const t of n)e=e.add(t);return e}const N3=new Ln(Gt);function RT(){return N3}class cE{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,dE.createSynthesizedTargetChangeForCurrentChange(e,t)),new cE(Mt.min(),r,RT(),Es(),Zt())}}class dE{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new dE(zr.EMPTY_BYTE_STRING,t,Zt(),Zt(),Zt())}}class kT{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class LV{constructor(e,t){this.targetId=e,this.At=t}}class VV{constructor(e,t,r=zr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class UV{constructor(){this.Rt=0,this.bt=jV(),this.Pt=zr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Zt(),t=Zt(),r=Zt();return this.bt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ut()}}),new dE(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=jV()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class P3{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Es(),this.qt=BV(),this.Kt=new Ln(Gt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:ut()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const a=i.target;if(ST(a))if(0===r){const u=new Ze(a.path);this.jt(t,u,Gn.newNoDocument(u,Mt.min()))}else kt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((a,u)=>{const d=this.Xt(u);if(d){if(a.current&&ST(d.target)){const p=new Ze(d.target.path);null!==this.Ut.get(p)||this.ee(u,p)||this.jt(u,p,Gn.newNoDocument(p,e))}a.Dt&&(t.set(u,a.xt()),a.Nt())}});let r=Zt();this.qt.forEach((a,u)=>{let d=!0;u.forEachWhile(p=>{const g=this.Xt(p);return!g||2===g.purpose||(d=!1,!1)}),d&&(r=r.add(a))}),this.Ut.forEach((a,u)=>u.setReadTime(e));const i=new cE(e,t,this.Kt,this.Ut,r);return this.Ut=Es(),this.qt=BV(),this.Kt=new Ln(Gt),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let t=this.Lt.get(e);return t||(t=new UV,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new Ln(Gt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Be("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new UV),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function BV(){return new mr(Ze.comparator)}function jV(){return new mr(Ze.comparator)}const O3={asc:"ASCENDING",desc:"DESCENDING"},R3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class k3{constructor(e,t){this.databaseId=e,this.gt=t}}function hE(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function HV(n,e){return n.gt?e.toBase64():e.toUint8Array()}function F3(n,e){return hE(n,e.toTimestamp())}function si(n){return kt(!!n),Mt.fromTimestamp(function(e){const t=yc(e);return new ur(t.seconds,t.nanos)}(n))}function xP(n,e){return(t=n,new pn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function $V(n){const e=pn.fromString(n);return kt(JV(e)),e}function fE(n,e){return xP(n.databaseId,e.path)}function Ra(n,e){const t=$V(e);if(t.get(1)!==n.databaseId.projectId)throw new Le(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Le(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ze(WV(t))}function MP(n,e){return xP(n.databaseId,e)}function pE(n){return new pn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function WV(n){return kt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function zV(n,e,t){return{name:fE(n,e),fields:t.value.mapValue.fields}}function KV(n,e){return{documents:[MP(n,e.path)]}}function YV(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=MP(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=MP(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(p){if(0===p.length)return;const g=p.map(C=>function(A){if("=="===A.op){if(rV(A.value))return{unaryFilter:{field:Yg(A.field),op:"IS_NAN"}};if(nV(A.value))return{unaryFilter:{field:Yg(A.field),op:"IS_NULL"}}}else if("!="===A.op){if(rV(A.value))return{unaryFilter:{field:Yg(A.field),op:"IS_NOT_NAN"}};if(nV(A.value))return{unaryFilter:{field:Yg(A.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yg(A.field),op:H3(A.op),value:A.value}}}(C));return 1===g.length?g[0]:{compositeFilter:{op:"AND",filters:g}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(p){if(0!==p.length)return p.map(g=>{return{field:Yg((C=g).field),direction:j3(C.dir)};var C})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const u=(g=e.limit,n.gt||Xv(g)?g:{value:g});var g,d,p;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function QV(n){let e=function GV(n){const e=$V(n);return 4===e.length?pn.emptyPath():WV(e)}(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){kt(1===r);const C=t.from[0];C.allDescendants?i=C.collectionId:e=e.child(C.collectionId)}let a=[];t.where&&(a=ZV(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(C=>{return new Hg(Qg((A=C).field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction));var A}));let d=null;t.limit&&(d=function(C){let A;return A="object"==typeof C?C.value:C,Xv(A)?null:A}(t.limit));let p=null;var C;t.startAt&&(p=new wc((C=t.startAt).values||[],!!C.before));let g=null;return t.endAt&&(g=function(C){return new wc(C.values||[],!C.before)}(t.endAt)),function pV(n,e,t,r,i,a,u,d){return new Wl(n,e,t,r,i,a,u,d)}(e,i,u,a,d,"F",p,g)}function ZV(n){return n?void 0!==n.unaryFilter?[G3(n)]:void 0!==n.fieldFilter?[$3(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>ZV(e)).reduce((e,t)=>e.concat(t)):ut():[]}function j3(n){return O3[n]}function H3(n){return R3[n]}function Yg(n){return{fieldPath:n.canonicalString()}}function Qg(n){return Dr.fromServerFormat(n.fieldPath)}function $3(n){return Ci.create(Qg(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ut()}}(n.fieldFilter.op),n.fieldFilter.value)}function G3(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Qg(n.unaryFilter.field);return Ci.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Qg(n.unaryFilter.field);return Ci.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Qg(n.unaryFilter.field);return Ci.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Qg(n.unaryFilter.field);return Ci.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ut()}}function W3(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function JV(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class OP{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&I3(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=aE(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=aE(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=FV();return this.mutations.forEach(i=>{const a=e.get(i.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(i.key)?null:d;const p=AV(u,d);null!==p&&r.set(i.key,p),u.isValidDocument()||u.convertToNoDocument(Mt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Zt())}isEqual(e){return this.batchId===e.batchId&&Ug(this.mutations,e.mutations,(t,r)=>SV(t,r))&&Ug(this.baseMutations,e.baseMutations,(t,r)=>SV(t,r))}}class RP{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){kt(e.mutations.length===r.length);let i=x3;const a=e.mutations;for(let u=0;u<a.length;u++)i=i.insert(a[u].key,r[u].version);return new RP(e,t,r,i)}}class kP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class bc{constructor(e,t,r,i,a=Mt.min(),u=Mt.min(),d=zr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d}withSequenceNumber(e){return new bc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new bc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new bc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class sU{constructor(e){this.re=e}}function FP(n){const e=QV({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?MT(e,e.limit,"L"):e}class Uh{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(_r(e.integerValue));else if("doubleValue"in e){const r=_r(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),eE(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(xh(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?iV(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):ut()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),Ze.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}Uh.Te=new Uh;class _W{constructor(){this.Ye=new VP}addToCollectionParentIndex(e,t){return this.Ye.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(Hs.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(Hs.min())}updateCollectionGroup(e,t,r){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class VP{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ln(pn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ln(pn.comparator)).toArray()}}new Uint8Array(0);class ws{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ws(e,ws.DEFAULT_COLLECTION_PERCENTILE,ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}ws.DEFAULT_COLLECTION_PERCENTILE=10,ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ws.DEFAULT=new ws(41943040,ws.DEFAULT_COLLECTION_PERCENTILE,ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ws.DISABLED=new ws(-1,0,0);class Hh{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Hh(0)}static vn(){return new Hh(-1)}}class AW{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class DU{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&aE(r.mutation,i,$s.empty(),ur.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Zt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Zt()){const i=Oa();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let u=lE();return a.forEach((d,p)=>{u=u.insert(d,p.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=Oa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Zt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((u,d)=>{t.set(u,d)})})}computeViews(e,t,r,i){let a=Es();const u=uE(),d=uE();return t.forEach((p,g)=>{const C=r.get(g.key);i.has(g.key)&&(void 0===C||C.mutation instanceof zl)?a=a.insert(g.key,g):void 0!==C&&(u.set(g.key,C.mutation.getFieldMask()),aE(C.mutation,g,C.mutation.getFieldMask(),ur.now()))}),this.recalculateAndSaveOverlays(e,a).next(p=>(p.forEach((g,C)=>u.set(g,C)),t.forEach((g,C)=>{var A;return d.set(g,new AW(C,null!==(A=u.get(g))&&void 0!==A?A:null))}),d))}recalculateAndSaveOverlays(e,t){const r=uE();let i=new mr((u,d)=>u-d),a=Zt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const d of u)d.keys().forEach(p=>{const g=t.get(p);if(null===g)return;let C=r.get(p)||$s.empty();C=d.applyToLocalView(g,C),r.set(p,C);const A=(i.get(d.batchId)||Zt()).add(p);i=i.insert(d.batchId,A)})}).next(()=>{const u=[],d=i.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,C=p.value,A=FV();C.forEach(R=>{if(!a.has(R)){const U=AV(t.get(R),r.get(R));null!==U&&A.set(R,U),a=a.add(R)}}),u.push(this.documentOverlayCache.saveOverlays(e,g,A))}return re.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ze.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):function IP(n){return null!==n.collectionGroup}(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const u=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):re.resolve(Oa());let d=-1,p=a;return u.next(g=>re.forEach(g,(C,A)=>(d<A.largestBatchId&&(d=A.largestBatchId),a.get(C)?re.resolve():this.getBaseDocument(e,C,A).next(R=>{p=p.insert(C,R)}))).next(()=>this.populateOverlays(e,g,a)).next(()=>this.computeViews(e,p,g,Zt())).next(C=>({batchId:d,changes:kV(C)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ze(t)).next(r=>{let i=lE();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=lE();return this.indexManager.getCollectionParents(e,i).next(u=>re.forEach(u,d=>{const p=(g=t,C=d.child(i),new Wl(C,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,C;return this.getDocumentsMatchingCollectionQuery(e,p,r).next(g=>{g.forEach((C,A)=>{a=a.insert(C,A)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((d,p)=>{const g=p.getKey();null===i.get(g)&&(i=i.insert(g,Gn.newInvalidDocument(g)))});let u=lE();return i.forEach((d,p)=>{const g=a.get(d);void 0!==g&&aE(g.mutation,p,$s.empty(),ur.now()),AP(t,p)&&(u=u.insert(d,p))}),u})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):re.resolve(Gn.newInvalidDocument(t))}}class SW{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return re.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:si(r.createTime)}),re.resolve()}getNamedQuery(e,t){return re.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:FP(r.bundledQuery),readTime:si(r.readTime)}),re.resolve();var r}}class xW{constructor(){this.overlays=new mr(Ze.comparator),this.es=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Oa();return re.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ue(e,t,a)}),re.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.es.delete(r)),re.resolve()}getOverlaysForCollection(e,t,r){const i=Oa(),a=t.length+1,u=new Ze(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===a&&p.largestBatchId>r&&i.set(p.getKey(),p)}return re.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new mr((g,C)=>g-C);const u=this.overlays.getIterator();for(;u.hasNext();){const g=u.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let C=a.get(g.largestBatchId);null===C&&(C=Oa(),a=a.insert(g.largestBatchId,C)),C.set(g.getKey(),g)}}const d=Oa(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,C)=>d.set(g,C)),!(d.size()>=i)););return re.resolve(d)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const u=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new kP(t,r));let a=this.es.get(t);void 0===a&&(a=Zt(),this.es.set(t,a)),this.es.set(t,a.add(r.key))}}class UP{constructor(){this.ns=new Ln(ai.ss),this.rs=new Ln(ai.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new ai(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new ai(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ze(new pn([])),r=new ai(t,e),i=new ai(t,e+1),a=[];return this.rs.forEachInRange([r,i],u=>{this.cs(u),a.push(u.key)}),a}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ze(new pn([])),r=new ai(t,e),i=new ai(t,e+1);let a=Zt();return this.rs.forEachInRange([r,i],u=>{a=a.add(u.key)}),a}containsKey(e){const t=new ai(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ai{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ze.comparator(e.key,t.key)||Gt(e._s,t._s)}static os(e,t){return Gt(e._s,t._s)||Ze.comparator(e.key,t.key)}}class MW{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Ln(ai.ss)}checkEmpty(e){return re.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ws;this.ws++;const u=new OP(a,t,r,i);this.mutationQueue.push(u);for(const d of i)this.gs=this.gs.add(new ai(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return re.resolve(u)}lookupMutationBatch(e,t){return re.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),a=i<0?0:i;return re.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ai(t,0),i=new ai(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],u=>{const d=this.ys(u._s);a.push(d)}),re.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ln(Gt);return t.forEach(i=>{const a=new ai(i,0),u=new ai(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([a,u],d=>{r=r.add(d._s)})}),re.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Ze.isDocumentKey(a)||(a=a.child(""));const u=new ai(new Ze(a),0);let d=new Ln(Gt);return this.gs.forEachWhile(p=>{const g=p.key.path;return!!r.isPrefixOf(g)&&(g.length===i&&(d=d.add(p._s)),!0)},u),re.resolve(this.Is(d))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){kt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return re.forEach(t.mutations,i=>{const a=new ai(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new ai(t,0),i=this.gs.firstAfterOrEqual(r);return re.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return re.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class NW{constructor(e){this.Es=e,this.docs=new mr(Ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,u=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return re.resolve(r?r.document.mutableCopy():Gn.newInvalidDocument(t))}getEntries(e,t){let r=Es();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Gn.newInvalidDocument(i))}),re.resolve(r)}getAllFromCollection(e,t,r){let i=Es();const a=new Ze(t.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:d,value:{document:p}}=u.getNext();if(!t.isPrefixOf(d.path))break;d.path.length>t.length+1||_P(qL(p),r)<=0||(i=i.insert(p.key,p.mutableCopy()))}return re.resolve(i)}getAllFromCollectionGroup(e,t,r,i){ut()}As(e,t){return re.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new PW(this)}getSize(e){return re.resolve(this.size)}}class PW extends class TW{constructor(){this.changes=new Cc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?re.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),re.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class OW{constructor(e){this.persistence=e,this.Rs=new Cc(t=>Oh(t),iE),this.lastRemoteSnapshotVersion=Mt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new UP,this.targetCount=0,this.vs=Hh.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),re.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Hh(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.Dn(t),re.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Rs.forEach((u,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.Rs.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),re.waitFor(a).next(()=>i)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return re.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),re.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(u=>{a.push(i.markPotentiallyOrphaned(e,u))}),re.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),re.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return re.resolve(r)}containsKey(e,t){return re.resolve(this.Ps.containsKey(t))}}class AU{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new ys(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new OW(this),this.indexManager=new _W,this.remoteDocumentCache=new NW(r=>this.referenceDelegate.xs(r)),this.It=new sU(t),this.Ns=new SW(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new xW,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new MW(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Be("MemoryPersistence","Starting transaction:",e);const i=new RW(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(a=>this.referenceDelegate.Ms(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Os(e,t){return re.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class RW extends class t3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}{constructor(e){super(),this.currentSequenceNumber=e}}class GT{constructor(e){this.persistence=e,this.Fs=new UP,this.$s=null}static Bs(e){return new GT(e)}get Ls(){if(this.$s)return this.$s;throw ut()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),re.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),re.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ls.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Ms(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.Ls,r=>{const i=Ze.fromPath(r);return this.Us(e,i).next(a=>{a||t.removeEntry(i,Mt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return re.or([()=>re.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class $P{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Zt(),i=Zt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new $P(e,t.fromCache,r,i)}}class xU{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(a=>a||this.Mi(e,t,i,r)).next(a=>a||this.Oi(e,t))}ki(e,t){if(gV(t))return re.resolve(null);let r=vs(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=MT(t,null,"F"),r=vs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const u=Zt(...a);return this.Ni.getDocuments(e,u).next(d=>this.indexManager.getMinOffset(e,r).next(p=>{const g=this.Fi(t,d);return this.$i(t,g,u,p.readTime)?this.ki(e,MT(t,null,"F")):this.Bi(e,g,t,p)}))})))}Mi(e,t,r,i){return gV(t)||i.isEqual(Mt.min())?this.Oi(e,t):this.Ni.getDocuments(e,r).next(a=>{const u=this.Fi(t,a);return this.$i(t,u,r,i)?this.Oi(e,t):(pP()<=zt.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),DP(t)),this.Bi(e,u,t,function zL(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Mt.fromTimestamp(1e9===r?new ur(t+1,0):new ur(t,r));return new Hs(i,Ze.empty(),e)}(i,-1)))})}Fi(e,t){let r=new Ln(yV(e));return t.forEach((i,a)=>{AP(e,a)&&(r=r.add(a))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Oi(e,t){return pP()<=zt.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",DP(t)),this.Ni.getDocumentsMatchingQuery(e,t,Hs.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(u=>{a=a.insert(u.key,u)}),a))}}class FW{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new mr(Gt),this.qi=new Cc(a=>Oh(a),iE),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DU(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function NU(n,e){return GP.apply(this,arguments)}function GP(){return GP=k(function*(n,e){const t=et(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const u=[],d=[];let p=Zt();for(const g of i){u.push(g.batchId);for(const C of g.mutations)p=p.add(C.key)}for(const g of a){d.push(g.batchId);for(const C of g.mutations)p=p.add(C.key)}return t.localDocuments.getDocuments(r,p).next(g=>({ji:g,removedBatchIds:u,addedBatchIds:d}))})})}),GP.apply(this,arguments)}function LW(n,e){const t=et(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Gi.newChangeBuffer({trackRemovals:!0});return function(u,d,p,g){const C=p.batch,A=C.keys();let R=re.resolve();return A.forEach(U=>{R=R.next(()=>g.getEntry(d,U)).next(H=>{const te=p.docVersions.get(U);kt(null!==te),H.version.compareTo(te)<0&&(C.applyToRemoteDocument(H,p),H.isValidDocument()&&(H.setReadTime(p.commitVersion),g.addEntry(H)))})}),R.next(()=>u.mutationQueue.removeMutationBatch(d,C))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let d=Zt();for(let p=0;p<u.mutationResults.length;++p)u.mutationResults[p].transformResults.length>0&&(d=d.add(u.batch.mutations[p].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function PU(n){const e=et(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function VW(n,e){const t=et(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const d=[];e.targetChanges.forEach((C,A)=>{const R=i.get(A);if(!R)return;d.push(t.Cs.removeMatchingKeys(a,C.removedDocuments,A).next(()=>t.Cs.addMatchingKeys(a,C.addedDocuments,A)));let U=R.withSequenceNumber(a.currentSequenceNumber);var H,te,Ae;e.targetMismatches.has(A)?U=U.withResumeToken(zr.EMPTY_BYTE_STRING,Mt.min()).withLastLimboFreeSnapshotVersion(Mt.min()):C.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(C.resumeToken,r)),i=i.insert(A,U),te=U,Ae=C,(0===(H=R).resumeToken.approximateByteSize()||te.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=3e8||Ae.addedDocuments.size+Ae.modifiedDocuments.size+Ae.removedDocuments.size>0)&&d.push(t.Cs.updateTargetData(a,U))});let p=Es(),g=Zt();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,C))}),d.push(function OU(n,e,t){let r=Zt(),i=Zt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let u=Es();return t.forEach((d,p)=>{const g=a.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(i=i.add(d)),p.isNoDocument()&&p.version.isEqual(Mt.min())?(e.removeEntry(d,p.readTime),u=u.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||0===p.version.compareTo(g.version)&&g.hasPendingWrites?(e.addEntry(p),u=u.insert(d,p)):Be("LocalStore","Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)}),{Wi:u,zi:i}})}(a,u,e.documentUpdates).next(C=>{p=C.Wi,g=C.zi})),!r.isEqual(Mt.min())){const C=t.Cs.getLastRemoteSnapshotVersion(a).next(A=>t.Cs.setTargetsMetadata(a,a.currentSequenceNumber,r));d.push(C)}return re.waitFor(d).next(()=>u.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,p,g)).next(()=>p)}).then(a=>(t.Ui=i,a))}function UW(n,e){const t=et(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Xg(n,e){const t=et(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(a=>a?(i=a,re.resolve(i)):t.Cs.allocateTargetId(r).next(u=>(i=new bc(e,u,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function em(n,e,t){return WP.apply(this,arguments)}function WP(){return WP=k(function*(n,e,t){const r=et(n),i=r.Ui.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!_c(u))throw u;Be("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),WP.apply(this,arguments)}function zT(n,e,t){const r=et(n);let i=Mt.min(),a=Zt();return r.persistence.runTransaction("Execute query","readonly",u=>function(d,p,g){const C=et(d),A=C.qi.get(g);return void 0!==A?re.resolve(C.Ui.get(A)):C.Cs.getTargetData(p,g)}(r,u,vs(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(u,d.targetId).next(p=>{a=p})}).next(()=>r.Li.getDocumentsMatchingQuery(u,e,t?i:Mt.min(),t?a:Zt())).next(d=>(function FU(n,e,t){let r=Mt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ki.set(e,r)}(r,function _V(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),d),{documents:d,Hi:a})))}class QP{constructor(){this.activeTargetIds=RT()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class UU{constructor(){this.Lr=new QP,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new QP,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class HW{qr(e){}shutdown(){}}class BU{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const $W={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class GW{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class WW extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,a){const u=this.ao(e,t);Be("RestConnection","Sending: ",u,r);const d={};return this.ho(d,i,a),this.lo(e,u,d,r).then(p=>(Be("RestConnection","Received: ",p),p),p=>{throw Vg("RestConnection",`${e} failed with error: `,p,"url: ",u,"request:",r),p})}fo(e,t,r,i,a,u){return this.co(e,t,r,i,a)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Lg,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ao(e,t){return`${this.oo}/v1/${t}:${$W[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,i){return new Promise((a,u)=>{const d=new GG;d.listenOnce(jG.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case fP.NO_ERROR:const g=d.getResponseJson();Be("Connection","XHR received:",JSON.stringify(g)),a(g);break;case fP.TIMEOUT:Be("Connection",'RPC "'+e+'" timed out'),u(new Le(he.DEADLINE_EXCEEDED,"Request time out"));break;case fP.HTTP_ERROR:const C=d.getStatus();if(Be("Connection",'RPC "'+e+'" failed with status:',C,"response text:",d.getResponseText()),C>0){const A=d.getResponseJson().error;if(A&&A.status&&A.message){const R=function(U){const H=U.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(H)>=0?H:he.UNKNOWN}(A.status);u(new Le(R,A.message))}else u(new Le(he.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new Le(he.UNAVAILABLE,"Connection failed."));break;default:ut()}}finally{Be("Connection",'RPC "'+e+'" completed.')}});const p=JSON.stringify(i);d.send(t,"POST",p,r,15)})}_o(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=UG(),u=BG(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new $G({})),this.ho(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const p=i.join("");Be("Connection","Creating WebChannel: "+p,d);const g=a.createWebChannel(p,d);let C=!1,A=!1;const R=new GW({Hr:H=>{A?Be("Connection","Not sending because WebChannel is closed:",H):(C||(Be("Connection","Opening WebChannel transport."),g.open(),C=!0),Be("Connection","WebChannel sending:",H),g.send(H))},Jr:()=>g.close()}),U=(H,te,Ae)=>{H.listen(te,lt=>{try{Ae(lt)}catch(_t){setTimeout(()=>{throw _t},0)}})};return U(g,wT.EventType.OPEN,()=>{A||Be("Connection","WebChannel transport opened.")}),U(g,wT.EventType.CLOSE,()=>{A||(A=!0,Be("Connection","WebChannel transport closed"),R.io())}),U(g,wT.EventType.ERROR,H=>{A||(A=!0,Vg("Connection","WebChannel transport errored:",H),R.io(new Le(he.UNAVAILABLE,"The operation could not be completed")))}),U(g,wT.EventType.MESSAGE,H=>{var te;if(!A){const Ae=H.data[0];kt(!!Ae);const lt=Ae,_t=lt.error||(null===(te=lt[0])||void 0===te?void 0:te.error);if(_t){Be("Connection","WebChannel received error:",_t);const vt=_t.status;let Nt=function(Bt){const dn=Or[Bt];if(void 0!==dn)return OV(dn)}(vt),qt=_t.message;void 0===Nt&&(Nt=he.INTERNAL,qt="Unknown error status: "+vt+" with message "+_t.message),A=!0,R.io(new Le(Nt,qt)),g.close()}else Be("Connection","WebChannel received:",Ae),R.ro(Ae)}}),U(u,HG.STAT_EVENT,H=>{H.stat===BL.PROXY?Be("Connection","Detected buffering proxy"):H.stat===BL.NOPROXY&&Be("Connection","Detected no buffering proxy")}),setTimeout(()=>{R.so()},0),R}}function YT(){return"undefined"!=typeof document?document:null}function TE(n){return new k3(n,!0)}class JP{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Hs=e,this.timerId=t,this.wo=r,this.mo=i,this.yo=a,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,t-r);i>0&&Be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class HU{constructor(e,t,r,i,a,u,d,p){this.Hs=e,this.Po=r,this.vo=i,this.Vo=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new JP(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return k(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return k(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return k(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===he.RESOURCE_EXHAUSTED?(Ir(t.toString()),Ir("Using maximum backoff delay to prevent overloading the backend."),r.xo.Eo()):t&&t.code===he.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Le(he.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Mo(){var e=this;this.state=5,this.xo.Ao(k(function*(){e.state=0,e.start()}))}Qo(e){return Be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zW extends HU{constructor(e,t,r,i,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.It=a}jo(e,t){return this.Vo._o("Listen",e,t)}onMessage(e){this.xo.reset();const t=function V3(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:ut(),i=e.targetChange.targetIds||[],a=function(p,g){return p.gt?(kt(void 0===g||"string"==typeof g),zr.fromBase64String(g||"")):(kt(void 0===g||g instanceof Uint8Array),zr.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&function(p){const g=void 0===p.code?he.UNKNOWN:OV(p.code);return new Le(g,p.message||"")}(u);t=new VV(r,i,a,d||null)}else if("documentChange"in e){const r=e.documentChange,i=Ra(n,r.document.name),a=si(r.document.updateTime),u=new wi({mapValue:{fields:r.document.fields}}),d=Gn.newFoundDocument(i,a,u);t=new kT(r.targetIds||[],r.removedTargetIds||[],d.key,d)}else if("documentDelete"in e){const r=e.documentDelete,i=Ra(n,r.document),a=r.readTime?si(r.readTime):Mt.min(),u=Gn.newNoDocument(i,a);t=new kT([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=Ra(n,r.document);t=new kT([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ut();{const r=e.filter,a=new A3(r.count||0);t=new LV(r.targetId,a)}}var p;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return Mt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Mt.min():a.readTime?si(a.readTime):Mt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=pE(this.It),t.addTarget=function(i,a){let u;const d=a.target;return u=ST(d)?{documents:KV(i,d)}:{query:YV(i,d)},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?u.resumeToken=HV(i,a.resumeToken):a.snapshotVersion.compareTo(Mt.min())>0&&(u.readTime=hE(i,a.snapshotVersion.toTimestamp())),u}(this.It,e);const r=function B3(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ut()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=pE(this.It),t.removeTarget=e,this.Bo(t)}}class qW extends HU{constructor(e,t,r,i,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.It=a,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.Vo._o("Write",e,t)}onMessage(e){if(kt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function U3(n,e){return n&&n.length>0?(kt(void 0!==e),n.map(t=>function(r,i){let a=si(r.updateTime?r.updateTime:i);return a.isEqual(Mt.min())&&(a=si(i)),new T3(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=si(e.commitTime);return this.listener.Zo(r,t)}return kt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=pE(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>function gE(n,e){let t;if(e instanceof qg)t={update:zV(n,e.key,e.value)};else if(e instanceof Kg)t={delete:fE(n,e.key)};else if(e instanceof zl)t={update:zV(n,e.key,e.data),updateMask:W3(e.fieldMask)};else{if(!(e instanceof SP))return ut();t={verify:fE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const u=a.transform;if(u instanceof Wg)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Rh)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof kh)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof zg)return{fieldPath:a.field.canonicalString(),increment:u.yt};throw ut()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:F3(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ut()),t;var i}(this.It,r))};this.Bo(t)}}class KW extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.Vo=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new Le(he.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.Vo.co(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Le(he.UNKNOWN,i.toString())})}fo(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.Vo.fo(e,t,r,a,u,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Le(he.UNKNOWN,a.toString())})}terminate(){this.nu=!0}}class YW{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Ir(t),this.ou=!1):Be("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class QW{constructor(e,t,r,i,a){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.qr(d=>{r.enqueueAndForget(k(function*(){var p;Dc(u)&&(Be("RemoteStore","Restarting streams for network reachability change."),yield(p=k(function*(g){const C=et(g);C._u.add(4),yield tm(C),C.gu.set("Unknown"),C._u.delete(4),yield IE(C)}),function(g){return p.apply(this,arguments)})(u))}))}),this.gu=new YW(r,i)}}function IE(n){return XP.apply(this,arguments)}function XP(){return XP=k(function*(n){if(Dc(n))for(const e of n.wu)yield e(!0)}),XP.apply(this,arguments)}function tm(n){return eO.apply(this,arguments)}function eO(){return eO=k(function*(n){for(const e of n.wu)yield e(!1)}),eO.apply(this,arguments)}function QT(n,e){const t=et(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),rO(t)?nO(t):rm(t).ko()&&tO(t,e))}function DE(n,e){const t=et(n),r=rm(t);t.du.delete(e),r.ko()&&$U(t,e),0===t.du.size&&(r.ko()?r.Fo():Dc(t)&&t.gu.set("Unknown"))}function tO(n,e){n.yu.Ot(e.targetId),rm(n).zo(e)}function $U(n,e){n.yu.Ot(e),rm(n).Ho(e)}function nO(n){n.yu=new P3({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),rm(n).start(),n.gu.uu()}function rO(n){return Dc(n)&&!rm(n).No()&&n.du.size>0}function Dc(n){return 0===et(n)._u.size}function GU(n){n.yu=void 0}function ZW(n){return iO.apply(this,arguments)}function iO(){return iO=k(function*(n){n.du.forEach((e,t)=>{tO(n,e)})}),iO.apply(this,arguments)}function JW(n,e){return sO.apply(this,arguments)}function sO(){return sO=k(function*(n,e){GU(n),rO(n)?(n.gu.hu(e),nO(n)):n.gu.set("Unknown")}),sO.apply(this,arguments)}function XW(n,e,t){return oO.apply(this,arguments)}function oO(){return oO=k(function*(n,e,t){if(n.gu.set("Online"),e instanceof VV&&2===e.state&&e.cause)try{yield(r=k(function*(i,a){const u=a.cause;for(const d of a.targetIds)i.du.has(d)&&(yield i.remoteSyncer.rejectListen(d,u),i.du.delete(d),i.yu.removeTarget(d))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ZT(n,r)}else if(e instanceof kT?n.yu.Gt(e):e instanceof LV?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Mt.min()))try{const r=yield PU(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const u=i.yu.te(a);return u.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const g=i.du.get(p);g&&i.du.set(p,g.withResumeToken(d.resumeToken,a))}}),u.targetMismatches.forEach(d=>{const p=i.du.get(d);if(!p)return;i.du.set(d,p.withResumeToken(zr.EMPTY_BYTE_STRING,p.snapshotVersion)),$U(i,d);const g=new bc(p.target,d,1,p.sequenceNumber);tO(i,g)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){Be("RemoteStore","Failed to raise snapshot:",r),yield ZT(n,r)}var r}),oO.apply(this,arguments)}function ZT(n,e,t){return aO.apply(this,arguments)}function aO(){return aO=k(function*(n,e,t){if(!_c(e))throw e;n._u.add(1),yield tm(n),n.gu.set("Offline"),t||(t=()=>PU(n.localStore)),n.asyncQueue.enqueueRetryable(k(function*(){Be("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield IE(n)}))}),aO.apply(this,arguments)}function WU(n,e){return e().catch(t=>ZT(n,t,e))}function nm(n){return lO.apply(this,arguments)}function lO(){return lO=k(function*(n){const e=et(n),t=Ac(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;ez(e);)try{const i=yield UW(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,tz(e,i)}catch(i){yield ZT(e,i)}zU(e)&&qU(e)}),lO.apply(this,arguments)}function ez(n){return Dc(n)&&n.fu.length<10}function tz(n,e){n.fu.push(e);const t=Ac(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function zU(n){return Dc(n)&&!Ac(n).No()&&n.fu.length>0}function qU(n){Ac(n).start()}function nz(n){return uO.apply(this,arguments)}function uO(){return uO=k(function*(n){Ac(n).eu()}),uO.apply(this,arguments)}function rz(n){return cO.apply(this,arguments)}function cO(){return cO=k(function*(n){const e=Ac(n);for(const t of n.fu)e.Xo(t.mutations)}),cO.apply(this,arguments)}function iz(n,e,t){return dO.apply(this,arguments)}function dO(){return dO=k(function*(n,e,t){const r=n.fu.shift(),i=RP.from(r,e,t);yield WU(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield nm(n)}),dO.apply(this,arguments)}function sz(n,e){return hO.apply(this,arguments)}function hO(){return hO=k(function*(n,e){var t;e&&Ac(n).Yo&&(yield(t=k(function*(r,i){if(PV(a=i.code)&&a!==he.ABORTED){const u=r.fu.shift();Ac(r).Oo(),yield WU(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield nm(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),zU(n)&&qU(n)}),hO.apply(this,arguments)}function KU(n,e){return fO.apply(this,arguments)}function fO(){return fO=k(function*(n,e){const t=et(n);t.asyncQueue.verifyOperationInProgress(),Be("RemoteStore","RemoteStore received new credentials");const r=Dc(t);t._u.add(3),yield tm(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield IE(t)}),fO.apply(this,arguments)}function gO(){return gO=k(function*(n,e){const t=et(n);e?(t._u.delete(2),yield IE(t)):e||(t._u.add(2),yield tm(t),t.gu.set("Unknown"))}),gO.apply(this,arguments)}function rm(n){return n.pu||(n.pu=function(e,t,r){const i=et(e);return i.su(),new zW(t,i.Vo,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:ZW.bind(null,n),Zr:JW.bind(null,n),Wo:XW.bind(null,n)}),n.wu.push(function(){var e=k(function*(t){t?(n.pu.Oo(),rO(n)?nO(n):n.gu.set("Unknown")):(yield n.pu.stop(),GU(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Ac(n){return n.Iu||(n.Iu=function(e,t,r){const i=et(e);return i.su(),new qW(t,i.Vo,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:nz.bind(null,n),Zr:sz.bind(null,n),tu:rz.bind(null,n),Zo:iz.bind(null,n)}),n.wu.push(function(){var e=k(function*(t){t?(n.Iu.Oo(),yield nm(n)):(yield n.Iu.stop(),n.fu.length>0&&(Be("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class mO{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,a){const u=Date.now()+r,d=new mO(e,t,u,i,a);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Le(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function im(n,e){if(Ir("AsyncQueue",`${e}: ${n}`),_c(n))return new Le(he.UNAVAILABLE,`${e}: ${n}`);throw n}class sm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ze.comparator(t.key,r.key):(t,r)=>Ze.comparator(t.key,r.key),this.keyedMap=lE(),this.sortedSet=new mr(this.comparator)}static emptySet(e){return new sm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof sm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new sm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class YU{constructor(){this.Tu=new mr(Ze.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):ut():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class om{constructor(e,t,r,i,a,u,d,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=p}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(u=>{a.push({type:0,doc:u})}),new om(e,t,sm.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class oz{constructor(){this.Au=void 0,this.listeners=[]}}class az{constructor(){this.queries=new Cc(e=>mV(e),sE),this.onlineState="Unknown",this.Ru=new Set}}function yO(){return yO=k(function*(n,e){const t=et(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new oz),i)try{a.Au=yield t.onListen(r)}catch(u){const d=im(u,`Initialization of query '${DP(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,a),a.listeners.push(e),e.bu(t.onlineState),a.Au&&e.Pu(a.Au)&&wO(t)}),yO.apply(this,arguments)}function EO(){return EO=k(function*(n,e){const t=et(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const u=a.listeners.indexOf(e);u>=0&&(a.listeners.splice(u,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),EO.apply(this,arguments)}function lz(n,e){const t=et(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const d of u.listeners)d.Pu(i)&&(r=!0);u.Au=i}}r&&wO(t)}function uz(n,e,t){const r=et(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function wO(n){n.Ru.forEach(e=>{e.next()})}class CO{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new om(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||!(this.options.Nu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=om.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class JU{constructor(e){this.key=e}}class XU{constructor(e){this.key=e}}class e2{constructor(e,t){this.query=e,this.Lu=t,this.Uu=null,this.current=!1,this.qu=Zt(),this.mutatedKeys=Zt(),this.Ku=yV(e),this.Gu=new sm(this.Ku)}get Qu(){return this.Lu}ju(e,t){const r=t?t.Wu:new YU,i=t?t.Gu:this.Gu;let a=t?t.mutatedKeys:this.mutatedKeys,u=i,d=!1;const p="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,g="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((C,A)=>{const R=i.get(C),U=AP(this.query,A)?A:null,H=!!R&&this.mutatedKeys.has(R.key),te=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let Ae=!1;R&&U?R.data.isEqual(U.data)?H!==te&&(r.track({type:3,doc:U}),Ae=!0):this.zu(R,U)||(r.track({type:2,doc:U}),Ae=!0,(p&&this.Ku(U,p)>0||g&&this.Ku(U,g)<0)&&(d=!0)):!R&&U?(r.track({type:0,doc:U}),Ae=!0):R&&!U&&(r.track({type:1,doc:R}),Ae=!0,(p||g)&&(d=!0)),Ae&&(U?(u=u.add(U),a=te?a.add(C):a.delete(C)):(u=u.delete(C),a=a.delete(C)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const C="F"===this.query.limitType?u.last():u.first();u=u.delete(C.key),a=a.delete(C.key),r.track({type:1,doc:C})}return{Gu:u,Wu:r,$i:d,mutatedKeys:a}}zu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const a=e.Wu.Eu();a.sort((g,C)=>function(A,R){const U=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ut()}};return U(A)-U(R)}(g.type,C.type)||this.Ku(g.doc,C.doc)),this.Hu(r);const u=t?this.Ju():[],d=0===this.qu.size&&this.current?1:0,p=d!==this.Uu;return this.Uu=d,0!==a.length||p?{snapshot:new om(this.query,e.Gu,i,a,e.mutatedKeys,0===d,p,!1),Yu:u}:{Yu:u}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new YU,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=Zt(),this.Gu.forEach(r=>{this.Xu(r.key)&&(this.qu=this.qu.add(r.key))});const t=[];return e.forEach(r=>{this.qu.has(r)||t.push(new XU(r))}),this.qu.forEach(r=>{e.has(r)||t.push(new JU(r))}),t}Zu(e){this.Lu=e.Hi,this.qu=Zt();const t=this.ju(e.documents);return this.applyChanges(t,!0)}tc(){return om.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class hz{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class fz{constructor(e){this.key=e,this.ec=!1}}class pz{constructor(e,t,r,i,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.nc={},this.sc=new Cc(d=>mV(d),sE),this.ic=new Map,this.rc=new Set,this.oc=new mr(Ze.comparator),this.uc=new Map,this.cc=new UP,this.ac={},this.hc=new Map,this.lc=Hh.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function gz(n,e){return bO.apply(this,arguments)}function bO(){return bO=k(function*(n,e){const t=zO(n);let r,i;const a=t.sc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.tc();else{const u=yield Xg(t.localStore,vs(e));t.isPrimaryClient&&QT(t.remoteStore,u);const d=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield TO(t,e,r,"current"===d)}return i}),bO.apply(this,arguments)}function TO(n,e,t,r){return IO.apply(this,arguments)}function IO(){return IO=k(function*(n,e,t,r){n.dc=(C,A,R)=>{return(U=k(function*(H,te,Ae,lt){let _t=te.view.ju(Ae);_t.$i&&(_t=yield zT(H.localStore,te.query,!1).then(({documents:qt})=>te.view.ju(qt,_t)));const vt=lt&&lt.targetChanges.get(te.targetId),Nt=te.view.applyChanges(_t,H.isPrimaryClient,vt);return kO(H,te.targetId,Nt.Yu),Nt.snapshot}),function(H,te,Ae,lt){return U.apply(this,arguments)})(n,C,A,R);var U};const i=yield zT(n.localStore,e,!0),a=new e2(e,i.Hi),u=a.ju(i.documents),d=dE.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),p=a.applyChanges(u,n.isPrimaryClient,d);kO(n,t,p.Yu);const g=new hz(e,t,a);return n.sc.set(e,g),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),p.snapshot}),IO.apply(this,arguments)}function mz(n,e){return DO.apply(this,arguments)}function DO(){return DO=k(function*(n,e){const t=et(n),r=t.sc.get(e),i=t.ic.get(r.targetId);if(i.length>1)return t.ic.set(r.targetId,i.filter(a=>!sE(a,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield em(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),DE(t.remoteStore,r.targetId),am(t,r.targetId)}).catch(mc))):(am(t,r.targetId),yield em(t.localStore,r.targetId,!0))}),DO.apply(this,arguments)}function AO(){return AO=k(function*(n,e,t){const r=qO(n);try{const i=yield function(a,u){const d=et(a),p=ur.now(),g=u.reduce((R,U)=>R.add(U.key),Zt());let C,A;return d.persistence.runTransaction("Locally write mutations","readwrite",R=>{let U=Es(),H=Zt();return d.Gi.getEntries(R,g).next(te=>{U=te,U.forEach((Ae,lt)=>{lt.isValidDocument()||(H=H.add(Ae))})}).next(()=>d.localDocuments.getOverlayedDocuments(R,U)).next(te=>{C=te;const Ae=[];for(const lt of u){const _t=D3(lt,C.get(lt.key).overlayedDocument);null!=_t&&Ae.push(new zl(lt.key,_t,aV(_t.value.mapValue),rr.exists(!0)))}return d.mutationQueue.addMutationBatch(R,p,Ae,u)}).next(te=>{A=te;const Ae=te.applyToLocalDocumentSet(C,H);return d.documentOverlayCache.saveOverlays(R,te.batchId,Ae)})}).then(()=>({batchId:A.batchId,changes:kV(C)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,u,d){let p=a.ac[a.currentUser.toKey()];p||(p=new mr(Gt)),p=p.insert(u,d),a.ac[a.currentUser.toKey()]=p}(r,i.batchId,t),yield ql(r,i.changes),yield nm(r.remoteStore)}catch(i){const a=im(i,"Failed to persist write");t.reject(a)}}),AO.apply(this,arguments)}function t2(n,e){return SO.apply(this,arguments)}function SO(){return SO=k(function*(n,e){const t=et(n);try{const r=yield VW(t.localStore,e);e.targetChanges.forEach((i,a)=>{const u=t.uc.get(a);u&&(kt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.ec=!0:i.modifiedDocuments.size>0?kt(u.ec):i.removedDocuments.size>0&&(kt(u.ec),u.ec=!1))}),yield ql(t,r,e)}catch(r){yield mc(r)}}),SO.apply(this,arguments)}function n2(n,e,t){const r=et(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.sc.forEach((a,u)=>{const d=u.view.bu(e);d.snapshot&&i.push(d.snapshot)}),function(a,u){const d=et(a);d.onlineState=u;let p=!1;d.queries.forEach((g,C)=>{for(const A of C.listeners)A.bu(u)&&(p=!0)}),p&&wO(d)}(r.eventManager,e),i.length&&r.nc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function yz(n,e,t){return xO.apply(this,arguments)}function xO(){return xO=k(function*(n,e,t){const r=et(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.uc.get(e),a=i&&i.key;if(a){let u=new mr(Ze.comparator);u=u.insert(a,Gn.newNoDocument(a,Mt.min()));const d=Zt().add(a),p=new cE(Mt.min(),new Map,new Ln(Gt),u,d);yield t2(r,p),r.oc=r.oc.remove(a),r.uc.delete(e),FO(r)}else yield em(r.localStore,e,!1).then(()=>am(r,e,t)).catch(mc)}),xO.apply(this,arguments)}function vz(n,e){return MO.apply(this,arguments)}function MO(){return MO=k(function*(n,e){const t=et(n),r=e.batch.batchId;try{const i=yield LW(t.localStore,e);RO(t,r,null),OO(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ql(t,i)}catch(i){yield mc(i)}}),MO.apply(this,arguments)}function Ez(n,e,t){return NO.apply(this,arguments)}function NO(){return NO=k(function*(n,e,t){const r=et(n);try{const i=yield function(a,u){const d=et(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let g;return d.mutationQueue.lookupMutationBatch(p,u).next(C=>(kt(null!==C),g=C.keys(),d.mutationQueue.removeMutationBatch(p,C))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,g,u)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,g)).next(()=>d.localDocuments.getDocuments(p,g))})}(r.localStore,e);RO(r,e,t),OO(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ql(r,i)}catch(i){yield mc(i)}}),NO.apply(this,arguments)}function OO(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function RO(n,e,t){const r=et(n);let i=r.ac[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.ac[r.currentUser.toKey()]=i}}function am(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc._c(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.ls(e).forEach(r=>{n.cc.containsKey(r)||r2(n,r)})}function r2(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(DE(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),FO(n))}function kO(n,e,t){for(const r of t)r instanceof JU?(n.cc.addReference(r.key,e),Cz(n,r)):r instanceof XU?(Be("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||r2(n,r.key)):ut()}function Cz(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||(Be("SyncEngine","New document in limbo: "+t),n.rc.add(r),FO(n))}function FO(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new Ze(pn.fromString(e)),r=n.lc.next();n.uc.set(r,new fz(t)),n.oc=n.oc.insert(t,r),QT(n.remoteStore,new bc(vs($g(t.path)),r,2,ys.at))}}function ql(n,e,t){return LO.apply(this,arguments)}function LO(){return LO=k(function*(n,e,t){const r=et(n),i=[],a=[],u=[];var d;r.sc.isEmpty()||(r.sc.forEach((d,p)=>{u.push(r.dc(p,e,t).then(g=>{if(g){r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,g.fromCache?"not-current":"current"),i.push(g);const C=$P.Ci(p.targetId,g);a.push(C)}}))}),yield Promise.all(u),r.nc.Wo(i),yield(d=k(function*(p,g){const C=et(p);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>re.forEach(g,R=>re.forEach(R.Si,U=>C.persistence.referenceDelegate.addReference(A,R.targetId,U)).next(()=>re.forEach(R.Di,U=>C.persistence.referenceDelegate.removeReference(A,R.targetId,U)))))}catch(A){if(!_c(A))throw A;Be("LocalStore","Failed to update sequence numbers: "+A)}for(const A of g){const R=A.targetId;if(!A.fromCache){const U=C.Ui.get(R),te=U.withLastLimboFreeSnapshotVersion(U.snapshotVersion);C.Ui=C.Ui.insert(R,te)}}}),function(p,g){return d.apply(this,arguments)})(r.localStore,a))}),LO.apply(this,arguments)}function bz(n,e){return VO.apply(this,arguments)}function VO(){return VO=k(function*(n,e){const t=et(n);if(!t.currentUser.isEqual(e)){Be("SyncEngine","User change. New user:",e.toKey());const r=yield NU(t.localStore,e);t.currentUser=e,(i=t).hc.forEach(u=>{u.forEach(d=>{d.reject(new Le(he.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ql(t,r.ji)}var i}),VO.apply(this,arguments)}function Tz(n,e){const t=et(n),r=t.uc.get(e);if(r&&r.ec)return Zt().add(r.key);{let i=Zt();const a=t.ic.get(e);if(!a)return i;for(const u of a){const d=t.sc.get(u);i=i.unionWith(d.view.Qu)}return i}}function zO(n){const e=et(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=t2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Tz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yz.bind(null,e),e.nc.Wo=lz.bind(null,e.eventManager),e.nc._c=uz.bind(null,e.eventManager),e}function qO(n){const e=et(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ez.bind(null,e),e}class Oz{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return k(function*(){t.It=TE(e.databaseInfo.databaseId),t.sharedClientState=t.mc(e),t.persistence=t.gc(e),yield t.persistence.start(),t.localStore=t.yc(e),t.gcScheduler=t.Ic(e,t.localStore),t.indexBackfillerScheduler=t.Tc(e,t.localStore)})()}Ic(e,t){return null}Tc(e,t){return null}yc(e){return function MU(n,e,t,r){return new FW(n,e,t,r)}(this.persistence,new xU,e.initialUser,this.It)}gc(e){return new AU(GT.Bs,this.It)}mc(e){return new UU}terminate(){var e=this;return k(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class KO{initialize(e,t){var r=this;return k(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>n2(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=bz.bind(null,r.syncEngine),yield function pO(n,e){return gO.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new az}createDatastore(e){const t=TE(e.databaseInfo.databaseId),r=new WW(e.databaseInfo);return new KW(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=d=>n2(this.syncEngine,d,0),u=BU.C()?new BU:new HW,new QW(t,r,i,a,u);var t,r,i,a,u}createSyncEngine(e,t){return function(r,i,a,u,d,p,g){const C=new pz(r,i,a,u,d,p);return g&&(C.fc=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=k(function*(t){const r=et(t);Be("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield tm(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}class JT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):Ir("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Uz{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ri.UNAUTHENTICATED,this.clientId=GL.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=k(function*(d){Be("FirestoreClient","Received user=",d.uid),yield a.authCredentialListener(d),a.user=d});return function(d){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(Be("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return k(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Le(he.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(k(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=im(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function a2(n,e){return YO.apply(this,arguments)}function YO(){return YO=k(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Be("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=k(function*(a){r.isEqual(a)||(yield NU(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),YO.apply(this,arguments)}function l2(n,e){return QO.apply(this,arguments)}function QO(){return QO=k(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield ZO(n);Be("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>KU(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>KU(e.remoteStore,a)),n.onlineComponents=e}),QO.apply(this,arguments)}function ZO(n){return JO.apply(this,arguments)}function JO(){return JO=k(function*(n){return n.offlineComponents||(Be("FirestoreClient","Using default OfflineComponentProvider"),yield a2(n,new Oz)),n.offlineComponents}),JO.apply(this,arguments)}function XT(n){return XO.apply(this,arguments)}function XO(){return XO=k(function*(n){return n.onlineComponents||(Be("FirestoreClient","Using default OnlineComponentProvider"),yield l2(n,new KO)),n.onlineComponents}),XO.apply(this,arguments)}function lm(n){return tR.apply(this,arguments)}function tR(){return tR=k(function*(n){const e=yield XT(n),t=e.eventManager;return t.onListen=gz.bind(null,e.syncEngine),t.onUnlisten=mz.bind(null,e.syncEngine),t}),tR.apply(this,arguments)}const f2=new Map;function nR(n,e,t){if(!t)throw new Le(he.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function p2(n){if(!Ze.isDocumentKey(n))throw new Le(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function g2(n){if(Ze.isDocumentKey(n))throw new Le(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function tI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ut()}function mn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Le(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=tI(n);throw new Le(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class _2{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Le(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Le(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function Kz(n,e,t,r){if(!0===e&&!0===r)throw new Le(he.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class AE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _2({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Le(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Le(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _2(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new WG;switch(t.type){case"gapi":return new YG(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Le(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=f2.get(e);t&&(Be("ComponentProvider","Removing Datastore"),f2.delete(e),t.terminate())}(this),Promise.resolve()}}class Ar{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ar(this.firestore,e,this._key)}}class Li{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Li(this.firestore,e,this._query)}}class Fa extends Li{constructor(e,t,r){super(e,t,$g(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ar(this.firestore,null,new Ze(e))}withConverter(e){return new Fa(this.firestore,e,this._path)}}function Yz(n,e,...t){if(n=Cn(n),nR("collection","path",e),n instanceof AE){const r=pn.fromString(e,...t);return g2(r),new Fa(n,null,r)}{if(!(n instanceof Ar||n instanceof Fa))throw new Le(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pn.fromString(e,...t));return g2(r),new Fa(n.firestore,null,r)}}function y2(n,e,...t){if(n=Cn(n),1===arguments.length&&(e=GL.R()),nR("doc","path",e),n instanceof AE){const r=pn.fromString(e,...t);return p2(r),new Ar(n,null,new Ze(r))}{if(!(n instanceof Ar||n instanceof Fa))throw new Le(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pn.fromString(e,...t));return p2(r),new Ar(n.firestore,n instanceof Fa?n.converter:null,new Ze(r))}}class Zz{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new JP(this,"async_queue_retry"),this.jc=()=>{const t=YT();t&&Be("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.bo()};const e=YT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const t=YT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const t=new ii;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return k(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(t){if(!_c(t))throw t;Be("AsyncQueue","Operation failed with retryable error: "+t)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const t=this.$c.then(()=>(this.Kc=!0,e().catch(r=>{throw this.qc=r,this.Kc=!1,Ir("INTERNAL UNHANDLED ERROR: ",function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),u}(r)),r}).then(r=>(this.Kc=!1,r))));return this.$c=t,t}enqueueAfterDelay(e,t,r){this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);const i=mO.createAndSchedule(this,e,t,r,a=>this.Jc(a));return this.Uc.push(i),i}Wc(){this.qc&&ut()}verifyOperationInProgress(){}Yc(){var e=this;return k(function*(){let t;do{t=e.$c,yield t}while(t!==e.$c)})()}Xc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function rR(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class ir extends AE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Zz,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||v2(this),this._firestoreClient.terminate()}}function Xz(n,e){const r="string"==typeof n?n:e||"(default)";return Yr("object"==typeof n?n:Di(),"firestore").getImmediate({identifier:r})}function qr(n){return n._firestoreClient||v2(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function v2(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new a3(n._databaseId,a,n._persistenceKey,(d=t).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var a,d;n._firestoreClient=new Uz(n._authCredentials,n._appCheckCredentials,n._queue,r)}class um{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Le(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Gh{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gh(zr.fromBase64String(e))}catch(t){throw new Le(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Gh(zr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class C2{constructor(e){this._methodName=e}}class iR{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Le(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Le(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Gt(this._lat,e._lat)||Gt(this._long,e._long)}}const eq=/^__.*__$/;class tq{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new zl(e,this.data,this.fieldMask,t,this.fieldTransforms):new qg(e,this.data,t,this.fieldTransforms)}}function T2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ut()}}class nI{constructor(e,t,r,i,a,u){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ea(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new nI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.sa({path:r,ra:!1});return i.oa(e),i}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.sa({path:r,ra:!1});return i.ea(),i}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return iI(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(T2(this.na)&&eq.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class nq{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||TE(e)}fa(e,t,r,i=!1){return new nI({na:e,methodName:t,la:r,path:Dr.emptyPath(),ra:!1,ha:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function cm(n){const e=n._freezeSettings(),t=TE(n._databaseId);return new nq(n._databaseId,!!e.ignoreUndefinedProperties,t)}function sR(n,e,t,r,i,a={}){const u=n.fa(a.merge||a.mergeFields?2:0,e,t,i);aR("Data must be an object, but it was:",u,r);const d=x2(r,u);let p,g;if(a.merge)p=new $s(u.fieldMask),g=u.fieldTransforms;else if(a.mergeFields){const C=[];for(const A of a.mergeFields){const R=lR(e,A,t);if(!u.contains(R))throw new Le(he.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);N2(C,R)||C.push(R)}p=new $s(C),g=u.fieldTransforms.filter(A=>p.covers(A.field))}else p=null,g=u.fieldTransforms;return new tq(new wi(d),p,g)}function Wh(n,e){if(M2(n=Cn(n)))return aR("Unsupported field value:",e,n),x2(n,e);if(n instanceof C2)return function(t,r){if(!T2(r.na))throw r.aa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.aa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const u of t){let d=Wh(u,r.ca(a));null==d&&(d={nullValue:"NULL_VALUE"}),i.push(d),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=Cn(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return wV(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=ur.fromDate(t);return{timestampValue:hE(r.It,i)}}if(t instanceof ur){const i=new ur(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:hE(r.It,i)}}if(t instanceof iR)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Gh)return{bytesValue:HV(r.It,t._byteString)};if(t instanceof Ar){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.aa(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:xP(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.aa(`Unsupported field value: ${tI(t)}`)}(n,e)}function x2(n,e){const t={};return ZL(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Sh(n,(r,i)=>{const a=Wh(i,e.ia(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function M2(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ur||n instanceof iR||n instanceof Gh||n instanceof Ar||n instanceof C2)}function aR(n,e,t){if(!M2(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=tI(t);throw e.aa("an object"===r?n+" a custom object":n+" "+r)}var r}function lR(n,e,t){if((e=Cn(e))instanceof um)return e._internalPath;if("string"==typeof e)return rI(n,e);throw iI("Field path arguments must be of type string or ",n,!1,void 0,t)}const oq=new RegExp("[~\\*/\\[\\]]");function rI(n,e,t){if(e.search(oq)>=0)throw iI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new um(...e.split("."))._internalPath}catch(r){throw iI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function iI(n,e,t,r,i){const a=r&&!r.isEmpty(),u=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(a||u)&&(p+=" (found",a&&(p+=` in field ${r}`),u&&(p+=` in document ${i}`),p+=")"),new Le(he.INVALID_ARGUMENT,d+n+p)}function N2(n,e){return n.some(t=>t.isEqual(e))}class uR{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ar(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new aq(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(sI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class aq extends uR{data(){return super.data()}}function sI(n,e){return"string"==typeof e?rI(n,e):e instanceof um?e._internalPath:e._delegate._internalPath}class zh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class dm extends uR{constructor(e,t,r,i,a,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new oI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(sI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class oI extends dm{data(e={}){return super.data(e)}}class hm{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new zh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new oI(this._firestore,this._userDataWriter,r.key,r,new zh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Le(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new oI(r._firestore,r._userDataWriter,u.doc.key,u.doc,new zh(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const d=new oI(r._firestore,r._userDataWriter,u.doc.key,u.doc,new zh(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,g=-1;return 0!==u.type&&(p=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),1!==u.type&&(a=a.add(u.doc),g=a.indexOf(u.doc.key)),{type:lq(u.type),doc:d,oldIndex:p,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function lq(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ut()}}class qh extends class hq{convertValue(e,t="none"){switch(Nh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _r(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ut()}}convertObject(e,t){const r={};return Sh(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new iR(_r(e.latitude),_r(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=XL(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Jv(e));default:return null}}convertTimestamp(e){const t=yc(e);return new ur(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=pn.fromString(e);kt(JV(r));const i=new Mh(r.get(1),r.get(3)),a=new Ze(r.popFirst(5));return i.isEqual(t)||Ir(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gh(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ar(this.firestore,null,t)}}function pq(n){return xE(mn(n.firestore,ir),[new Kg(n._key,rr.none())])}function gq(n,e){const t=mn(n.firestore,ir),r=y2(n),i=function cR(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}(n.converter,e);return xE(t,[sR(cm(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,rr.exists(!1))]).then(()=>r)}function xE(n,e){return function(t,r){const i=new ii;return t.asyncQueue.enqueueAndForget(k(function*(){return function _z(n,e,t){return AO.apply(this,arguments)}(yield function eR(n){return XT(n).then(e=>e.syncEngine)}(t),r,i)})),i.promise}(qr(n),e)}!function(n,e=!0){Lg="9.10.0",pr(new Yt("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),u=new ir(new qG(t.getProvider("auth-internal")),new QG(t.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Le(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mh(d.options.projectId,p)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),Tn(jL,"3.5.0",n),Tn(jL,"3.5.0","esm2017")}();var yq={includeMetadataChanges:!1};function hR(n,e){return void 0===e&&(e=yq),new Mi.y(function(t){var r=function mq(n,...e){var t,r,i;n=Cn(n);let a={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||rR(e[u])||(a=e[u],u++);const d={includeMetadataChanges:a.includeMetadataChanges};if(rR(e[u])){const A=e[u];e[u]=null===(t=A.next)||void 0===t?void 0:t.bind(A),e[u+1]=null===(r=A.error)||void 0===r?void 0:r.bind(A),e[u+2]=null===(i=A.complete)||void 0===i?void 0:i.bind(A)}let p,g,C;if(n instanceof Ar)g=mn(n.firestore,ir),C=$g(n._key.path),p={next:A=>{e[u]&&e[u](function dR(n,e,t){const r=t.docs.get(e._key),i=new qh(n);return new dm(n,i,e._key,r,new zh(t.hasPendingWrites,t.fromCache),e.converter)}(g,n,A))},error:e[u+1],complete:e[u+2]};else{const A=mn(n,Li);g=mn(A.firestore,ir),C=A._query;const R=new qh(g);p={next:U=>{e[u]&&e[u](new hm(g,R,A,U))},error:e[u+1],complete:e[u+2]},function P2(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Le(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(n._query)}return function(A,R,U,H){const te=new JT(H),Ae=new CO(R,te,U);return A.asyncQueue.enqueueAndForget(k(function*(){return function _O(n,e){return yO.apply(this,arguments)}(yield lm(A),Ae)})),()=>{te.Rc(),A.asyncQueue.enqueueAndForget(k(function*(){return function vO(n,e){return EO.apply(this,arguments)}(yield lm(A),Ae)}))}}(qr(g),C,d,p)}(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function Iq(n,e){return void 0===e&&(e={}),function Tq(n){return hR(n,{includeMetadataChanges:!0}).pipe((0,ga.U)(function(e){return e.docs}))}(n).pipe((0,ga.U)(function(t){return t.map(function(r){return function j2(n,e){void 0===e&&(e={});var t=n.data();return!n.exists()||"object"!=typeof t||null===t||e.idField&&(t[e.idField]=n.id),t}(r,e)})}))}class lI{constructor(e){return e}}const W2="firestore",gR=new _.OlP("angularfire2.firestore-instances");function Sq(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new lI(r)}}const xq={provide:class Dq{constructor(){return Cg(W2)}},deps:[[new _.FiY,gR]]},Mq={provide:lI,useFactory:function Aq(n,e){const t=wg(W2,n,e);return t&&new lI(t)},deps:[[new _.FiY,gR],Vo]};let Nq=(()=>{class n{constructor(){Tn("angularfire",_i.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[Mq,xq]}),n})();function Pq(n,...e){return{ngModule:Nq,providers:[{provide:gR,useFactory:Sq(n),multi:!0,deps:[_.R0b,_.zs3,dh,hh,[new _.FiY,DN],[new _.FiY,Ob],...e]}]}}const Oq=Aa(Iq,!0),z2=Aa(gq,!0),q2=Aa(Yz,!0),Rq=Aa(pq,!0),kq=Aa(y2,!0),Fq=Aa(Xz,!0);let K2=(()=>{class n{constructor(t){this.FireStore=t,this.listaUsuariosCollectionReference=q2(this.FireStore,"usuarios"),this.logLoginUsuariosCollectionReference=q2(this.FireStore,"logInicioSesionUsuarios")}AltaUsuarios(t){return z2(this.listaUsuariosCollectionReference,t)}AltaLogUsuarios(t){return z2(this.logLoginUsuariosCollectionReference,t)}BajaUsuarios(t){const r=kq(this.FireStore,`usuarios/${t.id}`);return Rq(r)}ListaUsuarios(){return Oq(this.listaUsuariosCollectionReference,{idField:"id"})}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(lI))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Lq(n,e){1&n&&(_.TgZ(0,"div")(1,"i",16),_._uU(2,"El usuario no existe"),_.qZA()())}function Vq(n,e){1&n&&(_.TgZ(0,"div")(1,"i",16),_._uU(2,"*Correo requerido"),_.qZA()())}function Uq(n,e){if(1&n&&_.YNc(0,Vq,3,0,"div",9),2&n){const t=e.$implicit;_.Q6J("ngIf",null==t?null:t.required)}}function Bq(n,e){1&n&&(_.TgZ(0,"div")(1,"i",16),_._uU(2,"*Clave requerido"),_.qZA()())}function jq(n,e){if(1&n&&_.YNc(0,Bq,3,0,"div",9),2&n){const t=e.$implicit;_.Q6J("ngIf",null==t?null:t.required)}}let mR=(()=>{class n{constructor(t,r,i,a){this.router=t,this.FirestoreService=r,this.AuthService=i,this.formBuilder=a,this.logUsuarios={},this.usuario={correo:"",clave:""},this.listaUsuario=[],this.auxLista=[],this.existeUsuario=!0,this.formLogin=this.formBuilder.group({correo:["",[Ki.required]],clave:["",[Ki.required]]})}ngOnInit(){this.FirestoreService.ListaUsuarios().subscribe(t=>{this.listaUsuario=t,this.cargarArray()})}cargarArray(){for(const t of this.listaUsuario)this.auxLista.push(t)}login(){var t,r;if(this.formLogin.valid){this.usuario={correo:null===(t=this.formLogin.get("correo"))||void 0===t?void 0:t.value,clave:null===(r=this.formLogin.get("clave"))||void 0===r?void 0:r.value};for(const i of this.auxLista)if(i.correo==this.usuario.correo&&i.clave==this.usuario.clave){let a=new Date;this.logUsuarios.usuario=this.usuario,this.logUsuarios.fechaIngreso=a,this.FirestoreService.AltaLogUsuarios(this.logUsuarios),this.AuthService.usuarioLogueado=this.usuario,this.router.navigateByUrl("/home")}else this.existeUsuario=!1}}onLoginAuto(t){var r,i,a,u;switch(t){case 1:null===(r=this.formLogin.get("correo"))||void 0===r||r.setValue("Invitado1@gmail.com"),null===(i=this.formLogin.get("clave"))||void 0===i||i.setValue("Invitado1");break;case 2:null===(a=this.formLogin.get("correo"))||void 0===a||a.setValue("Invitado2@gmail.com"),null===(u=this.formLogin.get("clave"))||void 0===u||u.setValue("Invitado2")}}registrarse(){this.router.navigateByUrl("/registro")}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(fe.F0),_.Y36(K2),_.Y36(Nd.e),_.Y36(bw))},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-login"]],decls:32,vars:4,consts:[[1,"background"],[1,"d-grid","gap-2","col-12","mx-auto"],[1,"container"],[1,"box"],["errorTailor","",3,"formGroup","submit"],[2,"text-align","center","font-weight","bold","padding-bottom","10px"],[1,"user-box"],["type","text","id","correo","formControlName","correo","name","","required","",3,"controlErrorsTpl"],["type","password","id","clave","formControlName","clave","name","","required","",3,"controlErrorsTpl"],[4,"ngIf"],[1,"buttons"],[2,"color","black","text-align","center","opacity","70%","font-weight","bold"],[1,"buttons",2,"color","white","text-align","center","opacity","80%","font-weight","bold",3,"click"],[1,"bAccesoRapido",3,"click"],["correoError",""],["claveError",""],[1,"errorForms"]],template:function(t,r){if(1&t&&(_.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4),_.NdJ("submit",function(){return r.login()}),_.TgZ(5,"h1",5),_._uU(6,"INICIAR SESI\xd3N"),_.qZA(),_.TgZ(7,"div",6),_._UZ(8,"input",7),_.TgZ(9,"label"),_._uU(10,"Correo"),_.qZA()(),_.TgZ(11,"div",6),_._UZ(12,"input",8),_.TgZ(13,"label"),_._uU(14,"Contrase\xf1a"),_.qZA()(),_.YNc(15,Lq,3,0,"div",9),_.TgZ(16,"button",10),_._uU(17,"Entrar"),_.qZA()(),_._UZ(18,"hr"),_.TgZ(19,"p",11),_._uU(20,"\xbfA\xfan no estas Registrado?"),_.qZA(),_.TgZ(21,"button",12),_.NdJ("click",function(){return r.registrarse()}),_._uU(22,"\xa1Reg\xedstrese ahora!"),_.qZA(),_._UZ(23,"hr"),_.TgZ(24,"button",13),_.NdJ("click",function(){return r.onLoginAuto(1)}),_._uU(25,"Invitado 1"),_.qZA(),_.TgZ(26,"button",13),_.NdJ("click",function(){return r.onLoginAuto(2)}),_._uU(27,"Invitado 2"),_.qZA()()()()(),_.YNc(28,Uq,1,1,"ng-template",null,14,_.W1O),_.YNc(30,jq,1,1,"ng-template",null,15,_.W1O)),2&t){const i=_.MAs(29),a=_.MAs(31);_.xp6(4),_.Q6J("formGroup",r.formLogin),_.xp6(4),_.Q6J("controlErrorsTpl",i),_.xp6(4),_.Q6J("controlErrorsTpl",a),_.xp6(3),_.Q6J("ngIf",!r.existeUsuario)}},directives:[Dp,ew,Qu,Sp,Zd,ku,_p,bl,Tl,fs.O5],styles:["p[_ngcontent-%COMP%]{color:#a5a0a0;padding:12px 10px}input[_ngcontent-%COMP%]{background-color:#eee;border:none;padding:10px;margin:10px;width:100%;border-radius:1em}.background[_ngcontent-%COMP%]{width:100%;height:100%;background:url(backgroundRetro2.9abd952e861ecc2c.jpg) no-repeat center center fixed;background-size:cover}.container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh}.buttons[_ngcontent-%COMP%]{width:100%;border-radius:1em;border:1px solid #07275c;background-color:#07275c;color:#fff;font-size:18px;padding:12px 45px;margin-top:5px;letter-spacing:1px;text-transform:uppercase;transition:transform 80ms ease-in;font-size:12px;font-weight:700;cursor:pointer}.bAccesoRapido[_ngcontent-%COMP%]{width:35%;font-size:10px;font-weight:700;margin-left:10%;color:#fff;border-radius:1em;border:1px solid #07275c;background-color:#07275c;letter-spacing:1px;text-transform:uppercase;transition:transform 80ms ease-in;opacity:80%;padding:10px}.buttons[_ngcontent-%COMP%]:active, .bAccesoRapido[_ngcontent-%COMP%]:active{transform:scale(.95)}.buttons[_ngcontent-%COMP%]:focus, .bAccesoRapido[_ngcontent-%COMP%]:focus{outline:none}.user-box[_ngcontent-%COMP%]{display:block;align-items:center;justify-content:center;position:relative;padding-bottom:10px;margin:-10px 10px -10px -10px}.user-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:16px;border:none;outline:none}.user-box[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:0;left:0;padding:21px;font-size:16px;color:#777;pointer-events:none;transition:.5s}.user-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus ~ label[_ngcontent-%COMP%], .user-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid ~ label[_ngcontent-%COMP%]{top:-22px;left:0;color:#000000a8;font-size:14px;font-weight:700}.user-box[_ngcontent-%COMP%]   .ng-touched[_ngcontent-%COMP%]{border:2px solid rgb(216,54,26)}.user-box[_ngcontent-%COMP%]   .ng-valid[_ngcontent-%COMP%]{border:2px solid rgb(62,211,62)}.errorForms[_ngcontent-%COMP%]{color:#d8361a;margin-left:10px}.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto auto;padding:10px}.grid-item[_ngcontent-%COMP%]{background-color:#fffc;border:1px solid rgba(0,0,0,.8);padding:20px;font-size:30px;text-align:center}@media only screen and (max-width:600px){.box[_ngcontent-%COMP%]{padding:2em;border-radius:10px;box-shadow:0 14px 28px #00000040,0 10px 10px #00000038;overflow:hidden;max-width:100%;width:100%;-webkit-backdrop-filter:blur(1px);backdrop-filter:blur(1px);background-color:#ffffff98}}@media only screen and (max-width:768px){.box[_ngcontent-%COMP%]{padding:2em;border-radius:10px;box-shadow:0 14px 28px #00000040,0 10px 10px #00000038;overflow:hidden;max-width:85%;width:100%;-webkit-backdrop-filter:blur(1px);backdrop-filter:blur(1px);background-color:#ffffff98}}@media only screen and (max-width:992px){.box[_ngcontent-%COMP%]{padding:2em;border-radius:10px;box-shadow:0 14px 28px #00000040,0 10px 10px #00000038;overflow:hidden;max-width:90%;width:100%;-webkit-backdrop-filter:blur(1px);backdrop-filter:blur(1px);background-color:#ffffff98}}@media only screen and (min-width:1200px){.box[_ngcontent-%COMP%]{padding:2em;border-radius:10px;box-shadow:0 14px 28px #00000040,0 10px 10px #00000038;overflow:hidden;max-width:50%;width:100%;-webkit-backdrop-filter:blur(1px);backdrop-filter:blur(1px);background-color:#ffffff98}}"]}),n})(),Hq=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-quien-soy"]],decls:19,vars:0,consts:[[1,"container"],[1,"box"],[1,"row","row-cols-1","row-cols-sm-2","row-cols-md-1"],["align","center",1,"col"],["align","start",2,"width","100%","margin-bottom","6px","margin-top","5px"],["src","../../../assets/img/quienSoy/perfil.png","height","280px","width","auto",2,"border-radius","20%","border","2px solid black"],[2,"font-size","18px","font-weight","bold","letter-spacing","1px"],["align","center",2,"width","100%","margin-bottom","5px","margin-top","5px"],["src","../../../assets/img/juegos/black jack/BlackJack.png","height","400px","width","auto",2,"border-radius","5%"]],template:function(t,r){1&t&&(_._UZ(0,"app-menu"),_.TgZ(1,"div",0)(2,"div",1)(3,"h2"),_._uU(4,"QUIEN SOY YO"),_.qZA(),_.TgZ(5,"div",2)(6,"div",3)(7,"div",4),_._UZ(8,"img",5),_.qZA()(),_.TgZ(9,"p",6),_._uU(10,"Nombre Completo: Jhossymar Balderrama Rocha"),_.qZA()(),_.TgZ(11,"p"),_._uU(12," Lorem ipsum dolor sit amet. Aut officia accusantium aut sunt quaenon aliquam sed enim omnis. Et exercitationem molestiae qui impedit repellat eum galisum placeat ut ducimus perferendis! Qui omnis quam ut iure quia et repellat debitis sed deleniti Quis aut dolor odit. Eos consequuntur dolores sed odit ipsam eos ipsa aliquid ut doloremque architecto et voluptates enim! Qui vero laudantium Hic officia hic odio quia a blanditiis nulla et voluptatum libero At deserunt doloribus! Eum voluptas dolorum Id numquam aut dolorum amet et quia temporibus id corporis quia sit officia deleniti! Sit repellendus necessitatibus vel odio enim est voluptates galisum ut nesciunt sequi et sunt blanditiis. Ut ducimus porro non quisquam nihil Aut nemo qui dolorem omnis ut culpa nihil At voluptatem officia et voluptatem rerum. Et quia necessitatibusnon aliquam sit maiores iure. "),_.qZA(),_.TgZ(13,"h3"),_._uU(14,"Mi juego - Black-Jack"),_.qZA(),_.TgZ(15,"div",7),_._UZ(16,"img",8),_.qZA(),_.TgZ(17,"p"),_._uU(18," El objetivo de este juego es conseguir una puntuaci\xf3n superior a la del sistema sin exceder de 21 puntos, donde las personas participantes juegan contra el casino. Se denomina Black Jack al obtener la suma de 21 puntos con las primeras cartas. "),_.qZA()()())},directives:[dp.M],styles:[".container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh}.box[_ngcontent-%COMP%]{margin-top:10em;padding:2em;border-radius:10px;box-shadow:0 14px 28px #00000040,0 10px 10px #00000038;max-width:100%;-webkit-backdrop-filter:blur(1px);backdrop-filter:blur(1px);background-color:#ffffff98}"]}),n})();function $q(n,e){1&n&&(_.TgZ(0,"div",16)(1,"i",17),_._uU(2,"*Ya existe una cuenta con este correo"),_.qZA()())}function Gq(n,e){1&n&&(_.TgZ(0,"div")(1,"i",17),_._uU(2,"*Correo Invalido"),_.qZA()())}function Wq(n,e){if(1&n&&_.YNc(0,Gq,3,0,"div",18),2&n){const t=e.$implicit;_.Q6J("ngIf",null==t?null:t.required)}}function zq(n,e){1&n&&(_.TgZ(0,"div")(1,"i",17),_._uU(2,"*Ingrese una clave con al menos 6 caracteres"),_.qZA()())}function qq(n,e){1&n&&(_.TgZ(0,"div")(1,"i",17),_._uU(2,"*Clave requerido"),_.qZA()())}function Kq(n,e){if(1&n&&(_.YNc(0,zq,3,0,"div",18),_.YNc(1,qq,3,0,"div",18)),2&n){const t=e.$implicit;_.Q6J("ngIf",null==t?null:t.minlength),_.xp6(1),_.Q6J("ngIf",null==t?null:t.required)}}function Yq(n,e){1&n&&(_.TgZ(0,"div")(1,"i",17),_._uU(2,"*Reingreso de clave requerido"),_.qZA()())}function Qq(n,e){1&n&&(_.TgZ(0,"div")(1,"i",17),_._uU(2,"*Reingrese clave."),_.qZA()())}function Zq(n,e){if(1&n&&(_.YNc(0,Yq,3,0,"div",18),_.YNc(1,Qq,3,0,"div",18)),2&n){const t=e.$implicit,r=_.oxw();_.Q6J("ngIf",null==t?null:t.required),_.xp6(1),_.Q6J("ngIf",r.claveVerificada)}}const Jq=[{path:"",component:mR},{path:"login",component:mR},{path:"registro",component:(()=>{class n{constructor(t,r,i,a){this.router=t,this.FirestoreService=r,this.formBuilder=i,this.AuthService=a,this.logUsuarios={},this.usuario={correo:"",clave:"",claveReingreso:""},this.listaUsuarios=[],this.auxLista=[],this.userExist=!1,this.claveVerificada=!1,this.correoVerificado=!1,this.formRegistro=this.formBuilder.group({correo:["",[Ki.required,Ki.email]],clave:["",[Ki.required,Ki.minLength(6)]],claveReingreso:["",[Ki.required,Ki.minLength(6)]]})}ngOnInit(){this.FirestoreService.ListaUsuarios().subscribe(t=>{this.listaUsuarios=t,this.cargarArray()})}cargarArray(){for(const t of this.listaUsuarios)this.auxLista.push(t)}registrarse(){if(this.formRegistro.valid&&this.validacionDatosUsuario()){this.userExist=!1;let t=new Date;this.logUsuarios={usuario:this.usuario,fechaIngreso:t},this.AuthService.usuarioLogueado=this.usuario,this.FirestoreService.AltaUsuarios(this.usuario),this.FirestoreService.AltaLogUsuarios(this.logUsuarios),this.router.navigateByUrl("/home")}}validacionDatosUsuario(){var t,r,i;let a=!0;this.usuario={correo:null===(t=this.formRegistro.get("correo"))||void 0===t?void 0:t.value,clave:null===(r=this.formRegistro.get("clave"))||void 0===r?void 0:r.value,claveReingreso:null===(i=this.formRegistro.get("claveReingreso"))||void 0===i?void 0:i.value},this.usuario.clave!==this.usuario.claveReingreso?(this.claveVerificada=!0,a=!1):this.claveVerificada=!1;for(const u of this.auxLista){if(u.correo==this.usuario.correo){this.userExist=!0,a=!1;break}this.userExist=!1}return a}volverLogin(){this.router.navigateByUrl("/login")}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(fe.F0),_.Y36(K2),_.Y36(bw),_.Y36(Nd.e))},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-registro"]],decls:31,vars:5,consts:[[1,"background"],[1,"d-grid","gap-2","col-12","mx-auto"],[1,"container"],[1,"box"],[2,"text-align","center","font-weight","bold","margin-bottom","20px"],["errorTailor","",3,"formGroup","submit"],[1,"user-box"],["type","text","id","correo","formControlName","correo","name","","required","",3,"controlErrorsTpl"],["style","padding-bottom: 10px;",4,"ngIf"],["type","password","id","clave","formControlName","clave","name","","required","",3,"controlErrorsTpl"],["type","password","id","claveReingreso","formControlName","claveReingreso","name","","required","",3,"controlErrorsTpl"],[1,"buttons"],[1,"buttons",2,"color","white","text-align","center","opacity","80%","font-weight","bold",3,"click"],["correoError",""],["claveError",""],["claveReingresoError",""],[2,"padding-bottom","10px"],[1,"errorForms"],[4,"ngIf"]],template:function(t,r){if(1&t&&(_.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),_._uU(5,"REGISTRO"),_.qZA(),_.TgZ(6,"form",5),_.NdJ("submit",function(){return r.registrarse()}),_.TgZ(7,"div",6),_._UZ(8,"input",7),_.TgZ(9,"label"),_._uU(10,"Correo"),_.qZA()(),_.YNc(11,$q,3,0,"div",8),_.TgZ(12,"div",6),_._UZ(13,"input",9),_.TgZ(14,"label"),_._uU(15,"Contrase\xf1a"),_.qZA()(),_.TgZ(16,"div",6),_._UZ(17,"input",10),_.TgZ(18,"label"),_._uU(19,"Reingrese Contrase\xf1a"),_.qZA()(),_.TgZ(20,"button",11),_._uU(21,"registrarse"),_.qZA()(),_._UZ(22,"hr"),_.TgZ(23,"button",12),_.NdJ("click",function(){return r.volverLogin()}),_._uU(24,"Volver a Login"),_.qZA()()()()(),_.YNc(25,Wq,1,1,"ng-template",null,13,_.W1O),_.YNc(27,Kq,2,2,"ng-template",null,14,_.W1O),_.YNc(29,Zq,2,2,"ng-template",null,15,_.W1O)),2&t){const i=_.MAs(26),a=_.MAs(28),u=_.MAs(30);_.xp6(6),_.Q6J("formGroup",r.formRegistro),_.xp6(2),_.Q6J("controlErrorsTpl",i),_.xp6(3),_.Q6J("ngIf",r.userExist),_.xp6(2),_.Q6J("controlErrorsTpl",a),_.xp6(4),_.Q6J("controlErrorsTpl",u)}},directives:[Dp,ew,Qu,Sp,Zd,ku,_p,bl,Tl,fs.O5],styles:["p[_ngcontent-%COMP%]{color:#a5a0a0;padding:12px 10px}input[_ngcontent-%COMP%]{background-color:#eee;border:none;padding:10px;margin:10px;width:100%;border-radius:1em}.background[_ngcontent-%COMP%]{width:100%;height:100%;background:url(backgroundRetro2.9abd952e861ecc2c.jpg) no-repeat center center fixed;background-size:cover}.container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh}.buttons[_ngcontent-%COMP%]{width:100%;border-radius:1em;border:1px solid #07275c;background-color:#07275c;color:#fff;font-size:18px;padding:12px 45px;margin-top:5px;letter-spacing:1px;text-transform:uppercase;transition:transform 80ms ease-in;font-size:12px;font-weight:700;cursor:pointer}.buttons[_ngcontent-%COMP%]:active{transform:scale(.95)}.buttons[_ngcontent-%COMP%]:focus{outline:none}.user-box[_ngcontent-%COMP%]{display:block;align-items:center;justify-content:center;position:relative;padding-bottom:10px;margin:-10px 10px -10px -10px}.user-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:16px;border:none;outline:none}.user-box[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:0;left:0;padding:21px;font-size:16px;color:#777;pointer-events:none;transition:.5s}.user-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus ~ label[_ngcontent-%COMP%], .user-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid ~ label[_ngcontent-%COMP%]{top:-22px;left:0;color:#000000a8;font-size:14px;font-weight:700}.user-box[_ngcontent-%COMP%]   .ng-touched[_ngcontent-%COMP%]{border:2px solid rgb(216,54,26)}.user-box[_ngcontent-%COMP%]   .ng-valid[_ngcontent-%COMP%]{border:2px solid rgb(62,211,62)}.errorForms[_ngcontent-%COMP%]{color:#d8361a;margin-left:10px}@media only screen and (max-width:600px){.box[_ngcontent-%COMP%]{padding:2em;border-radius:10px;box-shadow:0 14px 28px #00000040,0 10px 10px #00000038;overflow:hidden;max-width:100%;width:100%;-webkit-backdrop-filter:blur(1px);backdrop-filter:blur(1px);background-color:#ffffff98}}@media only screen and (max-width:768px){.box[_ngcontent-%COMP%]{padding:2em;border-radius:10px;box-shadow:0 14px 28px #00000040,0 10px 10px #00000038;overflow:hidden;max-width:85%;width:100%;-webkit-backdrop-filter:blur(1px);backdrop-filter:blur(1px);background-color:#ffffff98}}@media only screen and (max-width:992px){.box[_ngcontent-%COMP%]{padding:2em;border-radius:10px;box-shadow:0 14px 28px #00000040,0 10px 10px #00000038;overflow:hidden;max-width:90%;width:100%;-webkit-backdrop-filter:blur(1px);backdrop-filter:blur(1px);background-color:#ffffff98}}@media only screen and (min-width:1200px){.box[_ngcontent-%COMP%]{padding:2em;border-radius:10px;box-shadow:0 14px 28px #00000040,0 10px 10px #00000038;overflow:hidden;max-width:50%;width:100%;-webkit-backdrop-filter:blur(1px);backdrop-filter:blur(1px);background-color:#ffffff98}}"]}),n})()},{path:"home",component:BA},{path:"juegos",loadChildren:()=>L.e(238).then(L.bind(L,238)).then(n=>n.JuegosModule)},{path:"chat",component:Lw},{path:"quienSoy",component:Hq},{path:"**",component:mR}];let Xq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({imports:[[fe.Bz.forRoot(Jq)],fe.Bz]}),n})(),e6=(()=>{class n{constructor(){this.title="SalaDeJuegos"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,consts:[[1,"background"]],template:function(t,r){1&t&&(_.TgZ(0,"div",0),_._UZ(1,"router-outlet"),_.qZA())},directives:[fe.lC],styles:[".background[_ngcontent-%COMP%]{width:100%;height:auto;background:url(backgroundRetro3.555fa635cee0d390.jpg) no-repeat center center fixed;background-size:cover}"]}),n})();const Y2_firebase={projectId:"tp-sala-de-juegos-ea7d0",appId:"1:670408003211:web:777e5171d2e6170e764e8e",storageBucket:"tp-sala-de-juegos-ea7d0.appspot.com",locationId:"us-central",apiKey:"AIzaSyCDhZt938o1k9WmkR0vW5EPoTPgMn-O-XE",authDomain:"tp-sala-de-juegos-ea7d0.firebaseapp.com",messagingSenderId:"670408003211"};class _R{constructor(e){return e}}const Q2="database",yR=new _.OlP("angularfire2.database-instances");function r6(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new _R(r)}}const i6={provide:class t6{constructor(){return Cg(Q2)}},deps:[[new _.FiY,yR]]},s6={provide:_R,useFactory:function n6(n,e){const t=wg(Q2,n,e);return t&&new _R(t)},deps:[[new _.FiY,yR],Vo]};let o6=(()=>{class n{constructor(){Tn("angularfire",_i.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[s6,i6]}),n})();function a6(n,...e){return{ngModule:o6,providers:[{provide:yR,useFactory:r6(n),multi:!0,deps:[_.R0b,_.zs3,dh,hh,[new _.FiY,DN],[new _.FiY,Ob],...e]}]}}const l6=Aa(L0,!0);var u6=L(520),c6=L(2290),Wn=L(1777);const cn=!1;function Z2(n){return new _.vHH(3e3,cn)}function G6(){return"undefined"!=typeof window&&void 0!==window.document}function vR(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Sc(n){switch(n.length){case 0:return new Wn.ZN;case 1:return n[0];default:return new Wn.ZE(n)}}function J2(n,e,t,r,i={},a={}){const u=[],d=[];let p=-1,g=null;if(r.forEach(C=>{const A=C.offset,R=A==p,U=R&&g||{};Object.keys(C).forEach(H=>{let te=H,Ae=C[H];if("offset"!==H)switch(te=e.normalizePropertyName(te,u),Ae){case Wn.k1:Ae=i[H];break;case Wn.l3:Ae=a[H];break;default:Ae=e.normalizeStyleValue(H,te,Ae,u)}U[te]=Ae}),R||d.push(U),g=U,p=A}),u.length)throw function O6(n){return new _.vHH(3502,cn)}();return d}function ER(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&wR(t,"start",n)));break;case"done":n.onDone(()=>r(t&&wR(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&wR(t,"destroy",n)))}}function wR(n,e,t){const r=t.totalTime,a=CR(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),u=n._data;return null!=u&&(a._data=u),a}function CR(n,e,t,r,i="",a=0,u){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:a,disabled:!!u}}function Gs(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function X2(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let bR=(n,e)=>!1,eB=(n,e,t)=>[],tB=null;function TR(n){const e=n.parentNode||n.host;return e===tB?null:e}(vR()||"undefined"!=typeof Element)&&(G6()?(tB=(()=>document.documentElement)(),bR=(n,e)=>{for(;e;){if(e===n)return!0;e=TR(e)}return!1}):bR=(n,e)=>n.contains(e),eB=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Kh=null,nB=!1;function rB(n){Kh||(Kh=function z6(){return"undefined"!=typeof document?document.body:null}()||{},nB=!!Kh.style&&"WebkitAppearance"in Kh.style);let e=!0;return Kh.style&&!function W6(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Kh.style,!e&&nB&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Kh.style)),e}const iB=bR,sB=eB;let oB=(()=>{class n{validateStyleProperty(t){return rB(t)}matchesElement(t,r){return!1}containsElement(t,r){return iB(t,r)}getParentElement(t){return TR(t)}query(t,r,i){return sB(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,a,u,d=[],p){return new Wn.ZN(i,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),IR=(()=>{class n{}return n.NOOP=new oB,n})();const DR="ng-enter",cI="ng-leave",dI="ng-trigger",hI=".ng-trigger",lB="ng-animating",AR=".ng-animating";function Yh(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:SR(parseFloat(e[1]),e[2])}function SR(n,e){return"s"===e?1e3*n:n}function fI(n,e,t){return n.hasOwnProperty("duration")?n:function Y6(n,e,t){let i,a=0,u="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return e.push(Z2()),{duration:0,delay:0,easing:""};i=SR(parseFloat(d[1]),d[2]);const p=d[3];null!=p&&(a=SR(parseFloat(p),d[4]));const g=d[5];g&&(u=g)}else i=n;if(!t){let d=!1,p=e.length;i<0&&(e.push(function d6(){return new _.vHH(3100,cn)}()),d=!0),a<0&&(e.push(function h6(){return new _.vHH(3101,cn)}()),d=!0),d&&e.splice(p,0,Z2())}return{duration:i,delay:a,easing:u}}(n,e,t)}function fm(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function xc(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else fm(n,t);return t}function cB(n,e,t){return t?e+":"+t+";":""}function dB(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=cB(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=cB(0,J6(t),n.style[t]));n.setAttribute("style",e)}function La(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=MR(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),vR()&&dB(n))}function Qh(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=MR(t);n.style[r]=""}),vR()&&dB(n))}function ME(n){return Array.isArray(n)?1==n.length?n[0]:(0,Wn.vP)(n):n}const xR=new RegExp("{{\\s*(.+?)\\s*}}","g");function hB(n){let e=[];if("string"==typeof n){let t;for(;t=xR.exec(n);)e.push(t[1]);xR.lastIndex=0}return e}function pI(n,e,t){const r=n.toString(),i=r.replace(xR,(a,u)=>{let d=e[u];return e.hasOwnProperty(u)||(t.push(function p6(n){return new _.vHH(3003,cn)}()),d=""),d.toString()});return i==r?n:i}function gI(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Z6=/-+([a-z0-9])/g;function MR(n){return n.replace(Z6,(...e)=>e[1].toUpperCase())}function J6(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ws(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function g6(n){return new _.vHH(3004,cn)}()}}function fB(n,e){return window.getComputedStyle(n)[e]}function i4(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function s4(n,e,t){if(":"==n[0]){const p=function o4(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function x6(n){return new _.vHH(3016,cn)}()),"* => *"}}(n,t);if("function"==typeof p)return void e.push(p);n=p}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function S6(n){return new _.vHH(3015,cn)}()),e;const i=r[1],a=r[2],u=r[3];e.push(pB(i,u));"<"==a[0]&&!("*"==i&&"*"==u)&&e.push(pB(u,i))}(r,t,e)):t.push(n),t}const vI=new Set(["true","1"]),EI=new Set(["false","0"]);function pB(n,e){const t=vI.has(n)||EI.has(n),r=vI.has(e)||EI.has(e);return(i,a)=>{let u="*"==n||n==i,d="*"==e||e==a;return!u&&t&&"boolean"==typeof i&&(u=i?vI.has(n):EI.has(n)),!d&&r&&"boolean"==typeof a&&(d=a?vI.has(e):EI.has(e)),u&&d}}const a4=new RegExp("s*:selfs*,?","g");function NR(n,e,t,r){return new l4(n).build(e,t,r)}class l4{constructor(e){this._driver=e}build(e,t,r){const i=new d4(t);this._resetContextStyleTimingState(i);const a=Ws(this,ME(e),i);return i.unsupportedCSSPropertiesFound.size&&i.unsupportedCSSPropertiesFound.keys(),a}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const a=[],u=[];return"@"==e.name.charAt(0)&&t.errors.push(function _6(){return new _.vHH(3006,cn)}()),e.definitions.forEach(d=>{if(this._resetContextStyleTimingState(t),0==d.type){const p=d,g=p.name;g.toString().split(/\s*,\s*/).forEach(C=>{p.name=C,a.push(this.visitState(p,t))}),p.name=g}else if(1==d.type){const p=this.visitTransition(d,t);r+=p.queryCount,i+=p.depCount,u.push(p)}else t.errors.push(function y6(){return new _.vHH(3007,cn)}())}),{type:7,name:e.name,states:a,transitions:u,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const a=new Set,u=i||{};r.styles.forEach(d=>{if(wI(d)){const p=d;Object.keys(p).forEach(g=>{hB(p[g]).forEach(C=>{u.hasOwnProperty(C)||a.add(C)})})}}),a.size&&(gI(a.values()),t.errors.push(function v6(n,e){return new _.vHH(3008,cn)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Ws(this,ME(e.animation),t);return{type:1,matchers:i4(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Zh(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Ws(this,r,t)),options:Zh(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const a=e.steps.map(u=>{t.currentTime=r;const d=Ws(this,u,t);return i=Math.max(i,t.currentTime),d});return t.currentTime=i,{type:3,steps:a,options:Zh(e.options)}}visitAnimate(e,t){const r=function f4(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return PR(fI(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=PR(0,0,"");return a.dynamic=!0,a.strValue=t,a}const i=fI(t,e);return PR(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,a=e.styles?e.styles:(0,Wn.oB)({});if(5==a.type)i=this.visitKeyframes(a,t);else{let u=e.styles,d=!1;if(!u){d=!0;const g={};r.easing&&(g.easing=r.easing),u=(0,Wn.oB)(g)}t.currentTime+=r.duration+r.delay;const p=this.visitStyle(u,t);p.isEmptyStep=d,i=p}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(u=>{"string"==typeof u?u==Wn.l3?r.push(u):t.errors.push(function E6(n){return new _.vHH(3002,cn)}()):r.push(u)}):r.push(e.styles);let i=!1,a=null;return r.forEach(u=>{if(wI(u)){const d=u,p=d.easing;if(p&&(a=p,delete d.easing),!i)for(let g in d)if(d[g].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:a,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,a=t.currentTime;r&&a>0&&(a-=r.duration+r.delay),e.styles.forEach(u=>{"string"!=typeof u&&Object.keys(u).forEach(d=>{if(!this._driver.validateStyleProperty(d))return delete u[d],void t.unsupportedCSSPropertiesFound.add(d);const p=t.collectedStyles[t.currentQuerySelector],g=p[d];let C=!0;g&&(a!=i&&a>=g.startTime&&i<=g.endTime&&(t.errors.push(function w6(n,e,t,r,i){return new _.vHH(3010,cn)}()),C=!1),a=g.startTime),C&&(p[d]={startTime:a,endTime:i}),t.options&&function Q6(n,e,t){const r=e.params||{},i=hB(n);i.length&&i.forEach(a=>{r.hasOwnProperty(a)||t.push(function f6(n){return new _.vHH(3001,cn)}())})}(u[d],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function C6(){return new _.vHH(3011,cn)}()),r;let a=0;const u=[];let d=!1,p=!1,g=0;const C=e.steps.map(lt=>{const _t=this._makeStyleAst(lt,t);let vt=null!=_t.offset?_t.offset:function h4(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(wI(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(wI(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(_t.styles),Nt=0;return null!=vt&&(a++,Nt=_t.offset=vt),p=p||Nt<0||Nt>1,d=d||Nt<g,g=Nt,u.push(Nt),_t});p&&t.errors.push(function b6(){return new _.vHH(3012,cn)}()),d&&t.errors.push(function T6(){return new _.vHH(3200,cn)}());const A=e.steps.length;let R=0;a>0&&a<A?t.errors.push(function I6(){return new _.vHH(3202,cn)}()):0==a&&(R=1/(A-1));const U=A-1,H=t.currentTime,te=t.currentAnimateTimings,Ae=te.duration;return C.forEach((lt,_t)=>{const vt=R>0?_t==U?1:R*_t:u[_t],Nt=vt*Ae;t.currentTime=H+te.delay+Nt,te.duration=Nt,this._validateStyleAst(lt,t),lt.offset=vt,r.styles.push(lt)}),r}visitReference(e,t){return{type:8,animation:Ws(this,ME(e.animation),t),options:Zh(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Zh(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Zh(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[a,u]=function u4(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(a4,"")),n=n.replace(/@\*/g,hI).replace(/@\w+/g,t=>hI+"-"+t.substr(1)).replace(/:animating/g,AR),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+a:a,Gs(t.collectedStyles,t.currentQuerySelector,{});const d=Ws(this,ME(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:a,limit:i.limit||0,optional:!!i.optional,includeSelf:u,animation:d,originalSelector:e.selector,options:Zh(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function D6(){return new _.vHH(3013,cn)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:fI(e.timings,t.errors,!0);return{type:12,animation:Ws(this,ME(e.animation),t),timings:r,options:null}}}class d4{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function wI(n){return!Array.isArray(n)&&"object"==typeof n}function Zh(n){return n?(n=fm(n)).params&&(n.params=function c4(n){return n?fm(n):null}(n.params)):n={},n}function PR(n,e,t){return{duration:n,delay:e,easing:t}}function OR(n,e,t,r,i,a,u=null,d=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:a,totalTime:i+a,easing:u,subTimeline:d}}class CI{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const m4=new RegExp(":enter","g"),y4=new RegExp(":leave","g");function RR(n,e,t,r,i,a={},u={},d,p,g=[]){return(new v4).buildKeyframes(n,e,t,r,i,a,u,d,p,g)}class v4{buildKeyframes(e,t,r,i,a,u,d,p,g,C=[]){g=g||new CI;const A=new kR(e,t,g,i,a,C,[]);A.options=p,A.currentTimeline.setStyles([u],null,A.errors,p),Ws(this,r,A);const R=A.timelines.filter(U=>U.containsAnimation());if(Object.keys(d).length){let U;for(let H=R.length-1;H>=0;H--){const te=R[H];if(te.element===t){U=te;break}}U&&!U.allowOnlyTimelineStyles()&&U.setStyles([d],null,A.errors,p)}return R.length?R.map(U=>U.buildKeyframes()):[OR(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),a=t.currentTimeline.currentTime,u=this._visitSubInstructions(r,i,i.options);a!=u&&t.transformIntoNewTimeline(u)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let a=t.currentTimeline.currentTime;const u=null!=r.duration?Yh(r.duration):null,d=null!=r.delay?Yh(r.delay):null;return 0!==u&&e.forEach(p=>{const g=t.appendInstructionToTimeline(p,u,d);a=Math.max(a,g.duration+g.delay)}),a}visitReference(e,t){t.updateOptions(e.options,!0),Ws(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const a=e.options;if(a&&(a.params||a.delay)&&(i=t.createSubContext(a),i.transformIntoNewTimeline(),null!=a.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=bI);const u=Yh(a.delay);i.delayNextStep(u)}e.steps.length&&(e.steps.forEach(u=>Ws(this,u,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const a=e.options&&e.options.delay?Yh(e.options.delay):0;e.steps.forEach(u=>{const d=t.createSubContext(e.options);a&&d.delayNextStep(a),Ws(this,u,d),i=Math.max(i,d.currentTimeline.currentTime),r.push(d.currentTimeline)}),r.forEach(u=>t.currentTimeline.mergeTimelineCollectedStyles(u)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return fI(t.params?pI(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const a=e.style;5==a.type?this.visitKeyframes(a,t):(t.incrementTime(r.duration),this.visitStyle(a,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const a=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(a):r.setStyles(e.styles,a,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,a=r.duration,d=t.createSubContext().currentTimeline;d.easing=r.easing,e.styles.forEach(p=>{d.forwardTime((p.offset||0)*a),d.setStyles(p.styles,p.easing,t.errors,t.options),d.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(d),t.transformIntoNewTimeline(i+a),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},a=i.delay?Yh(i.delay):0;a&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=bI);let u=r;const d=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=d.length;let p=null;d.forEach((g,C)=>{t.currentQueryIndex=C;const A=t.createSubContext(e.options,g);a&&A.delayNextStep(a),g===t.element&&(p=A.currentTimeline),Ws(this,e.animation,A),A.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,A.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(u),p&&(t.currentTimeline.mergeTimelineCollectedStyles(p),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,a=e.timings,u=Math.abs(a.duration),d=u*(t.currentQueryTotal-1);let p=u*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":p=d-p;break;case"full":p=r.currentStaggerTime}const C=t.currentTimeline;p&&C.delayNextStep(p);const A=C.currentTime;Ws(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-A+(i.startTime-r.currentTimeline.startTime)}}const bI={};class kR{constructor(e,t,r,i,a,u,d,p){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=a,this.errors=u,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=bI,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new TI(this._driver,t,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Yh(r.duration)),null!=r.delay&&(i.delay=Yh(r.delay));const a=r.params;if(a){let u=i.params;u||(u=this.options.params={}),Object.keys(a).forEach(d=>{(!t||!u.hasOwnProperty(d))&&(u[d]=pI(a[d],u,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,a=new kR(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(e),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(e){return this.previousNode=bI,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},a=new E4(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(a),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,a,u){let d=[];if(i&&d.push(this.element),e.length>0){e=(e=e.replace(m4,"."+this._enterClassName)).replace(y4,"."+this._leaveClassName);let g=this._driver.query(this.element,e,1!=r);0!==r&&(g=r<0?g.slice(g.length+r,g.length):g.slice(0,r)),d.push(...g)}return!a&&0==d.length&&u.push(function A6(n){return new _.vHH(3014,cn)}()),d}}class TI{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new TI(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Wn.l3,this._currentKeyframe[t]=Wn.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const a=i&&i.params||{},u=function w4(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(a=>{t[a]=Wn.l3})):xc(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(u).forEach(d=>{const p=pI(u[d],a,r);this._pendingStyles[d]=p,this._localTimelineStyles.hasOwnProperty(d)||(this._backFill[d]=this._globalTimelineStyles.hasOwnProperty(d)?this._globalTimelineStyles[d]:Wn.l3),this._updateStyle(d,p)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((d,p)=>{const g=xc(d,!0);Object.keys(g).forEach(C=>{const A=g[C];A==Wn.k1?e.add(C):A==Wn.l3&&t.add(C)}),r||(g.offset=p/this.duration),i.push(g)});const a=e.size?gI(e.values()):[],u=t.size?gI(t.values()):[];if(r){const d=i[0],p=fm(d);d.offset=0,p.offset=1,i=[d,p]}return OR(this.element,i,a,u,this.duration,this.startTime,this.easing,!1)}}class E4 extends TI{constructor(e,t,r,i,a,u,d=!1){super(e,t,u.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=a,this._stretchStartingKeyframe=d,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const a=[],u=r+t,d=t/u,p=xc(e[0],!1);p.offset=0,a.push(p);const g=xc(e[0],!1);g.offset=_B(d),a.push(g);const C=e.length-1;for(let A=1;A<=C;A++){let R=xc(e[A],!1);R.offset=_B((t+R.offset*r)/u),a.push(R)}r=u,t=0,i="",e=a}return OR(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function _B(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class FR{}class C4 extends FR{normalizePropertyName(e,t){return MR(e)}normalizeStyleValue(e,t,r,i){let a="";const u=r.toString().trim();if(b4[t]&&0!==r&&"0"!==r)if("number"==typeof r)a="px";else{const d=r.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&i.push(function m6(n,e){return new _.vHH(3005,cn)}())}return u+a}}const b4=(()=>function T4(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function yB(n,e,t,r,i,a,u,d,p,g,C,A,R){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:a,toState:r,toStyles:u,timelines:d,queriedElements:p,preStyleProps:g,postStyleProps:C,totalTime:A,errors:R}}const LR={};class vB{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function I4(n,e,t,r,i){return n.some(a=>a(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],a=this._stateStyles[e],u=i?i.buildStyles(t,r):{};return a?a.buildStyles(t,r):u}build(e,t,r,i,a,u,d,p,g,C){const A=[],R=this.ast.options&&this.ast.options.params||LR,H=this.buildStyles(r,d&&d.params||LR,A),te=p&&p.params||LR,Ae=this.buildStyles(i,te,A),lt=new Set,_t=new Map,vt=new Map,Nt="void"===i,qt={params:Object.assign(Object.assign({},R),te)},Bt=C?[]:RR(e,t,this.ast.animation,a,u,H,Ae,qt,g,A);let dn=0;if(Bt.forEach(zs=>{dn=Math.max(zs.duration+zs.delay,dn)}),A.length)return yB(t,this._triggerName,r,i,Nt,H,Ae,[],[],_t,vt,dn,A);Bt.forEach(zs=>{const Bo=zs.element,kB=Gs(_t,Bo,{});zs.preStyleProps.forEach(Jh=>kB[Jh]=!0);const PE=Gs(vt,Bo,{});zs.postStyleProps.forEach(Jh=>PE[Jh]=!0),Bo!==t&&lt.add(Bo)});const bi=gI(lt.values());return yB(t,this._triggerName,r,i,Nt,H,Ae,Bt,bi,_t,vt,dn)}}class D4{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=fm(this.defaultParams);return Object.keys(e).forEach(a=>{const u=e[a];null!=u&&(i[a]=u)}),this.styles.styles.forEach(a=>{if("string"!=typeof a){const u=a;Object.keys(u).forEach(d=>{let p=u[d];p.length>1&&(p=pI(p,i,t));const g=this.normalizer.normalizePropertyName(d,t);p=this.normalizer.normalizeStyleValue(d,g,p,t),r[g]=p})}}),r}}class S4{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new D4(i.style,i.options&&i.options.params||{},r)}),EB(this.states,"true","1"),EB(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new vB(e,i,this.states))}),this.fallbackTransition=function x4(n,e,t){return new vB(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,d)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(u=>u.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function EB(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const M4=new CI;class N4{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],a=NR(this._driver,t,r,[]);if(r.length)throw function R6(n){return new _.vHH(3503,cn)}();this._animations[e]=a}_buildPlayer(e,t,r){const i=e.element,a=J2(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,a,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],a=this._animations[e];let u;const d=new Map;if(a?(u=RR(this._driver,t,a,DR,cI,{},{},r,M4,i),u.forEach(C=>{const A=Gs(d,C.element,{});C.postStyleProps.forEach(R=>A[R]=null)})):(i.push(function k6(){return new _.vHH(3300,cn)}()),u=[]),i.length)throw function F6(n){return new _.vHH(3504,cn)}();d.forEach((C,A)=>{Object.keys(C).forEach(R=>{C[R]=this._driver.computeStyle(A,R,Wn.l3)})});const g=Sc(u.map(C=>{const A=d.get(C.element);return this._buildPlayer(C,{},A)}));return this._playersById[e]=g,g.onDestroy(()=>this.destroy(e)),this.players.push(g),g}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function L6(n){return new _.vHH(3301,cn)}();return t}listen(e,t,r,i){const a=CR(t,"","","");return ER(this._getPlayer(e),r,a,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const a=this._getPlayer(e);switch(r){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const wB="ng-animate-queued",VR="ng-animate-disabled",F4=[],CB={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},L4={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},fo="__ng_removed";class UR{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function j4(n){return null!=n?n:null}(r?e.value:e),r){const a=fm(e);delete a.value,this.options=a}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const NE="void",BR=new UR(NE);class V4{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,po(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw function V6(n,e){return new _.vHH(3302,cn)}();if(null==r||0==r.length)throw function U6(n){return new _.vHH(3303,cn)}();if(!function H4(n){return"start"==n||"done"==n}(r))throw function B6(n,e){return new _.vHH(3400,cn)}();const a=Gs(this._elementListeners,e,[]),u={name:t,phase:r,callback:i};a.push(u);const d=Gs(this._engine.statesByElement,e,{});return d.hasOwnProperty(t)||(po(e,dI),po(e,dI+"-"+t),d[t]=BR),()=>{this._engine.afterFlush(()=>{const p=a.indexOf(u);p>=0&&a.splice(p,1),this._triggers[t]||delete d[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function j6(n){return new _.vHH(3401,cn)}();return t}trigger(e,t,r,i=!0){const a=this._getTrigger(t),u=new jR(this.id,t,e);let d=this._engine.statesByElement.get(e);d||(po(e,dI),po(e,dI+"-"+t),this._engine.statesByElement.set(e,d={}));let p=d[t];const g=new UR(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&p&&g.absorbOptions(p.options),d[t]=g,p||(p=BR),g.value!==NE&&p.value===g.value){if(!function W4(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const a=t[i];if(!e.hasOwnProperty(a)||n[a]!==e[a])return!1}return!0}(p.params,g.params)){const te=[],Ae=a.matchStyles(p.value,p.params,te),lt=a.matchStyles(g.value,g.params,te);te.length?this._engine.reportError(te):this._engine.afterFlush(()=>{Qh(e,Ae),La(e,lt)})}return}const R=Gs(this._engine.playersByElement,e,[]);R.forEach(te=>{te.namespaceId==this.id&&te.triggerName==t&&te.queued&&te.destroy()});let U=a.matchTransition(p.value,g.value,e,g.params),H=!1;if(!U){if(!i)return;U=a.fallbackTransition,H=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:U,fromState:p,toState:g,player:u,isFallbackTransition:H}),H||(po(e,wB),u.onStart(()=>{pm(e,wB)})),u.onDone(()=>{let te=this.players.indexOf(u);te>=0&&this.players.splice(te,1);const Ae=this._engine.playersByElement.get(e);if(Ae){let lt=Ae.indexOf(u);lt>=0&&Ae.splice(lt,1)}}),this.players.push(u),R.push(u),u}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,hI,!0);r.forEach(i=>{if(i[fo])return;const a=this._engine.fetchNamespacesByElement(i);a.size?a.forEach(u=>u.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const a=this._engine.statesByElement.get(e),u=new Map;if(a){const d=[];if(Object.keys(a).forEach(p=>{if(u.set(p,a[p].value),this._triggers[p]){const g=this.trigger(e,p,NE,i);g&&d.push(g)}}),d.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,u),r&&Sc(d).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(a=>{const u=a.name;if(i.has(u))return;i.add(u);const p=this._triggers[u].fallbackTransition,g=r[u]||BR,C=new UR(NE),A=new jR(this.id,u,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:u,transition:p,fromState:g,toState:C,player:A,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const a=r.players.length?r.playersByQueriedElement.get(e):[];if(a&&a.length)i=!0;else{let u=e;for(;u=u.parentNode;)if(r.statesByElement.get(u)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const a=e[fo];(!a||a===CB)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){po(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const a=r.element,u=this._elementListeners.get(a);u&&u.forEach(d=>{if(d.name==r.triggerName){const p=CR(a,r.triggerName,r.fromState.value,r.toState.value);p._data=e,ER(r.player,d.phase,p,d.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const a=r.transition.ast.depCount,u=i.transition.ast.depCount;return 0==a||0==u?a-u:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class U4{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,a)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new V4(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement,a=r.length-1;if(a>=0){let u=!1;if(void 0!==this.driver.getParentElement){let d=this.driver.getParentElement(t);for(;d;){const p=i.get(d);if(p){const g=r.indexOf(p);r.splice(g+1,0,e),u=!0;break}d=this.driver.getParentElement(d)}}else for(let d=a;d>=0;d--)if(this.driver.containsElement(r[d].hostElement,t)){r.splice(d+1,0,e),u=!0;break}u||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let a=0;a<i.length;a++){const u=r[i[a]].namespaceId;if(u){const d=this._fetchNamespace(u);d&&t.add(d)}}}return t}trigger(e,t,r,i){if(II(t)){const a=this._fetchNamespace(e);if(a)return a.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!II(t))return;const a=t[fo];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const u=this.collectedLeaveElements.indexOf(t);u>=0&&this.collectedLeaveElements.splice(u,1)}if(e){const u=this._fetchNamespace(e);u&&u.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),po(e,VR)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),pm(e,VR))}removeNode(e,t,r,i){if(II(t)){const a=e?this._fetchNamespace(e):null;if(a?a.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const u=this.namespacesByHostElement.get(t);u&&u.id!==e&&u.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,a){this.collectedLeaveElements.push(t),t[fo]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:a}}listen(e,t,r,i,a){return II(t)?this._fetchNamespace(e).listen(t,r,i,a):()=>{}}_buildInstruction(e,t,r,i,a){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,a)}destroyInnerAnimations(e){let t=this.driver.query(e,hI,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,AR,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Sc(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[fo];if(r&&r.setForRemoval){if(e[fo]=CB,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(VR))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)po(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Sc(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function H6(n){return new _.vHH(3402,cn)}()}_flushAnimations(e,t){const r=new CI,i=[],a=new Map,u=[],d=new Map,p=new Map,g=new Map,C=new Set;this.disabledNodes.forEach(ct=>{C.add(ct);const Dt=this.driver.query(ct,".ng-animate-queued",!0);for(let Ft=0;Ft<Dt.length;Ft++)C.add(Dt[Ft])});const A=this.bodyNode,R=Array.from(this.statesByElement.keys()),U=IB(R,this.collectedEnterElements),H=new Map;let te=0;U.forEach((ct,Dt)=>{const Ft=DR+te++;H.set(Dt,Ft),ct.forEach(vn=>po(vn,Ft))});const Ae=[],lt=new Set,_t=new Set;for(let ct=0;ct<this.collectedLeaveElements.length;ct++){const Dt=this.collectedLeaveElements[ct],Ft=Dt[fo];Ft&&Ft.setForRemoval&&(Ae.push(Dt),lt.add(Dt),Ft.hasAnimation?this.driver.query(Dt,".ng-star-inserted",!0).forEach(vn=>lt.add(vn)):_t.add(Dt))}const vt=new Map,Nt=IB(R,Array.from(lt));Nt.forEach((ct,Dt)=>{const Ft=cI+te++;vt.set(Dt,Ft),ct.forEach(vn=>po(vn,Ft))}),e.push(()=>{U.forEach((ct,Dt)=>{const Ft=H.get(Dt);ct.forEach(vn=>pm(vn,Ft))}),Nt.forEach((ct,Dt)=>{const Ft=vt.get(Dt);ct.forEach(vn=>pm(vn,Ft))}),Ae.forEach(ct=>{this.processLeaveNode(ct)})});const qt=[],Bt=[];for(let ct=this._namespaceList.length-1;ct>=0;ct--)this._namespaceList[ct].drainQueuedTransitions(t).forEach(Ft=>{const vn=Ft.player,li=Ft.element;if(qt.push(vn),this.collectedEnterElements.length){const Xi=li[fo];if(Xi&&Xi.setForMove){if(Xi.previousTriggersValues&&Xi.previousTriggersValues.has(Ft.triggerName)){const Xh=Xi.previousTriggersValues.get(Ft.triggerName),Nc=this.statesByElement.get(Ft.element);Nc&&Nc[Ft.triggerName]&&(Nc[Ft.triggerName].value=Xh)}return void vn.destroy()}}const Va=!A||!this.driver.containsElement(A,li),qs=vt.get(li),Mc=H.get(li),cr=this._buildInstruction(Ft,r,Mc,qs,Va);if(cr.errors&&cr.errors.length)return void Bt.push(cr);if(Va)return vn.onStart(()=>Qh(li,cr.fromStyles)),vn.onDestroy(()=>La(li,cr.toStyles)),void i.push(vn);if(Ft.isFallbackTransition)return vn.onStart(()=>Qh(li,cr.fromStyles)),vn.onDestroy(()=>La(li,cr.toStyles)),void i.push(vn);const VB=[];cr.timelines.forEach(Xi=>{Xi.stretchStartingKeyframe=!0,this.disabledNodes.has(Xi.element)||VB.push(Xi)}),cr.timelines=VB,r.append(li,cr.timelines),u.push({instruction:cr,player:vn,element:li}),cr.queriedElements.forEach(Xi=>Gs(d,Xi,[]).push(vn)),cr.preStyleProps.forEach((Xi,Xh)=>{const Nc=Object.keys(Xi);if(Nc.length){let ef=p.get(Xh);ef||p.set(Xh,ef=new Set),Nc.forEach($R=>ef.add($R))}}),cr.postStyleProps.forEach((Xi,Xh)=>{const Nc=Object.keys(Xi);let ef=g.get(Xh);ef||g.set(Xh,ef=new Set),Nc.forEach($R=>ef.add($R))})});if(Bt.length){const ct=[];Bt.forEach(Dt=>{ct.push(function $6(n,e){return new _.vHH(3505,cn)}())}),qt.forEach(Dt=>Dt.destroy()),this.reportError(ct)}const dn=new Map,bi=new Map;u.forEach(ct=>{const Dt=ct.element;r.has(Dt)&&(bi.set(Dt,Dt),this._beforeAnimationBuild(ct.player.namespaceId,ct.instruction,dn))}),i.forEach(ct=>{const Dt=ct.element;this._getPreviousPlayers(Dt,!1,ct.namespaceId,ct.triggerName,null).forEach(vn=>{Gs(dn,Dt,[]).push(vn),vn.destroy()})});const zs=Ae.filter(ct=>AB(ct,p,g)),Bo=new Map;TB(Bo,this.driver,_t,g,Wn.l3).forEach(ct=>{AB(ct,p,g)&&zs.push(ct)});const PE=new Map;U.forEach((ct,Dt)=>{TB(PE,this.driver,new Set(ct),p,Wn.k1)}),zs.forEach(ct=>{const Dt=Bo.get(ct),Ft=PE.get(ct);Bo.set(ct,Object.assign(Object.assign({},Dt),Ft))});const Jh=[],FB=[],LB={};u.forEach(ct=>{const{element:Dt,player:Ft,instruction:vn}=ct;if(r.has(Dt)){if(C.has(Dt))return Ft.onDestroy(()=>La(Dt,vn.toStyles)),Ft.disabled=!0,Ft.overrideTotalTime(vn.totalTime),void i.push(Ft);let li=LB;if(bi.size>1){let qs=Dt;const Mc=[];for(;qs=qs.parentNode;){const cr=bi.get(qs);if(cr){li=cr;break}Mc.push(qs)}Mc.forEach(cr=>bi.set(cr,li))}const Va=this._buildAnimation(Ft.namespaceId,vn,dn,a,PE,Bo);if(Ft.setRealPlayer(Va),li===LB)Jh.push(Ft);else{const qs=this.playersByElement.get(li);qs&&qs.length&&(Ft.parentPlayer=Sc(qs)),i.push(Ft)}}else Qh(Dt,vn.fromStyles),Ft.onDestroy(()=>La(Dt,vn.toStyles)),FB.push(Ft),C.has(Dt)&&i.push(Ft)}),FB.forEach(ct=>{const Dt=a.get(ct.element);if(Dt&&Dt.length){const Ft=Sc(Dt);ct.setRealPlayer(Ft)}}),i.forEach(ct=>{ct.parentPlayer?ct.syncPlayerEvents(ct.parentPlayer):ct.destroy()});for(let ct=0;ct<Ae.length;ct++){const Dt=Ae[ct],Ft=Dt[fo];if(pm(Dt,cI),Ft&&Ft.hasAnimation)continue;let vn=[];if(d.size){let Va=d.get(Dt);Va&&Va.length&&vn.push(...Va);let qs=this.driver.query(Dt,AR,!0);for(let Mc=0;Mc<qs.length;Mc++){let cr=d.get(qs[Mc]);cr&&cr.length&&vn.push(...cr)}}const li=vn.filter(Va=>!Va.destroyed);li.length?$4(this,Dt,li):this.processLeaveNode(Dt)}return Ae.length=0,Jh.forEach(ct=>{this.players.push(ct),ct.onDone(()=>{ct.destroy();const Dt=this.players.indexOf(ct);this.players.splice(Dt,1)}),ct.play()}),Jh}elementContainsData(e,t){let r=!1;const i=t[fo];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,a){let u=[];if(t){const d=this.playersByQueriedElement.get(e);d&&(u=d)}else{const d=this.playersByElement.get(e);if(d){const p=!a||a==NE;d.forEach(g=>{g.queued||!p&&g.triggerName!=i||u.push(g)})}}return(r||i)&&(u=u.filter(d=>!(r&&r!=d.namespaceId||i&&i!=d.triggerName))),u}_beforeAnimationBuild(e,t,r){const a=t.element,u=t.isRemovalTransition?void 0:e,d=t.isRemovalTransition?void 0:t.triggerName;for(const p of t.timelines){const g=p.element,C=g!==a,A=Gs(r,g,[]);this._getPreviousPlayers(g,C,u,d,t.toState).forEach(U=>{const H=U.getRealPlayer();H.beforeDestroy&&H.beforeDestroy(),U.destroy(),A.push(U)})}Qh(a,t.fromStyles)}_buildAnimation(e,t,r,i,a,u){const d=t.triggerName,p=t.element,g=[],C=new Set,A=new Set,R=t.timelines.map(H=>{const te=H.element;C.add(te);const Ae=te[fo];if(Ae&&Ae.removedBeforeQueried)return new Wn.ZN(H.duration,H.delay);const lt=te!==p,_t=function G4(n){const e=[];return DB(n,e),e}((r.get(te)||F4).map(dn=>dn.getRealPlayer())).filter(dn=>!!dn.element&&dn.element===te),vt=a.get(te),Nt=u.get(te),qt=J2(0,this._normalizer,0,H.keyframes,vt,Nt),Bt=this._buildPlayer(H,qt,_t);if(H.subTimeline&&i&&A.add(te),lt){const dn=new jR(e,d,te);dn.setRealPlayer(Bt),g.push(dn)}return Bt});g.forEach(H=>{Gs(this.playersByQueriedElement,H.element,[]).push(H),H.onDone(()=>function B4(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,H.element,H))}),C.forEach(H=>po(H,lB));const U=Sc(R);return U.onDestroy(()=>{C.forEach(H=>pm(H,lB)),La(p,t.toStyles)}),A.forEach(H=>{Gs(i,H,[]).push(U)}),U}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Wn.ZN(e.duration,e.delay)}}class jR{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Wn.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>ER(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Gs(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function II(n){return n&&1===n.nodeType}function bB(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function TB(n,e,t,r,i){const a=[];t.forEach(p=>a.push(bB(p)));const u=[];r.forEach((p,g)=>{const C={};p.forEach(A=>{const R=C[A]=e.computeStyle(g,A,i);(!R||0==R.length)&&(g[fo]=L4,u.push(g))}),n.set(g,C)});let d=0;return t.forEach(p=>bB(p,a[d++])),u}function IB(n,e){const t=new Map;if(n.forEach(d=>t.set(d,[])),0==e.length)return t;const i=new Set(e),a=new Map;function u(d){if(!d)return 1;let p=a.get(d);if(p)return p;const g=d.parentNode;return p=t.has(g)?g:i.has(g)?1:u(g),a.set(d,p),p}return e.forEach(d=>{const p=u(d);1!==p&&t.get(p).push(d)}),t}function po(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function pm(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function $4(n,e,t){Sc(t).onDone(()=>n.processLeaveNode(e))}function DB(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof Wn.ZE?DB(r.players,e):e.push(r)}}function AB(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(a=>i.add(a)):e.set(n,r),t.delete(n),!0}class DI{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,a)=>{},this._transitionEngine=new U4(e,t,r),this._timelineEngine=new N4(e,t,r),this._transitionEngine.onRemovalComplete=(i,a)=>this.onRemovalComplete(i,a)}registerTrigger(e,t,r,i,a){const u=e+"-"+i;let d=this._triggerCache[u];if(!d){const p=[],C=NR(this._driver,a,p,[]);if(p.length)throw function P6(n,e){return new _.vHH(3404,cn)}();d=function A4(n,e,t){return new S4(n,e,t)}(i,C,this._normalizer),this._triggerCache[u]=d}this._transitionEngine.registerTrigger(t,i,d)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[a,u]=X2(r);this._timelineEngine.command(a,t,u,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,a){if("@"==r.charAt(0)){const[u,d]=X2(r);return this._timelineEngine.listen(u,t,d,a)}return this._transitionEngine.listen(e,t,r,i,a)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let q4=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let a=n.initialStylesByElement.get(t);a||n.initialStylesByElement.set(t,a={}),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&La(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(La(this._element,this._initialStyles),this._endStyles&&(La(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Qh(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Qh(this._element,this._endStyles),this._endStyles=null),La(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function HR(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];K4(i)&&(e=e||{},e[i]=n[i])}return e}function K4(n){return"display"===n||"position"===n}class SB{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:fB(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Y4{validateStyleProperty(e){return rB(e)}matchesElement(e,t){return!1}containsElement(e,t){return iB(e,t)}getParentElement(e){return TR(e)}query(e,t,r){return sB(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,a,u=[]){const p={duration:r,delay:i,fill:0==i?"both":"forwards"};a&&(p.easing=a);const g={},C=u.filter(R=>R instanceof SB);(function X6(n,e){return 0===n||0===e})(r,i)&&C.forEach(R=>{let U=R.currentSnapshot;Object.keys(U).forEach(H=>g[H]=U[H])}),t=function e4(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let a=e[0],u=[];if(r.forEach(d=>{a.hasOwnProperty(d)||u.push(d),a[d]=t[d]}),u.length)for(var i=1;i<e.length;i++){let d=e[i];u.forEach(function(p){d[p]=fB(n,p)})}}return e}(e,t=t.map(R=>xc(R,!1)),g);const A=function z4(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=HR(e[0]),e.length>1&&(r=HR(e[e.length-1]))):e&&(t=HR(e)),t||r?new q4(n,t,r):null}(e,t);return new SB(e,t,p,A)}}let Q4=(()=>{class n extends Wn._j{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:_.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?(0,Wn.vP)(t):t;return xB(this._renderer,null,r,"register",[i]),new Z4(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(_.FYo),_.LFG(fs.K0))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();class Z4 extends Wn.LC{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new J4(this._id,e,t||{},this._renderer)}}class J4{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return xB(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function xB(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const MB="@.disabled";let X4=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(a,u)=>{const d=null==u?void 0:u.parentNode(a);d&&u.removeChild(d,a)}}createRenderer(t,r){const a=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let C=this._rendererCache.get(a);return C||(C=new NB("",a,this.engine),this._rendererCache.set(a,C)),C}const u=r.id,d=r.id+"-"+this._currentId;this._currentId++,this.engine.register(d,t);const p=C=>{Array.isArray(C)?C.forEach(p):this.engine.registerTrigger(u,d,t,C.name,C)};return r.data.animation.forEach(p),new e8(this,d,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(a=>{const[u,d]=a;u(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(_.FYo),_.LFG(DI),_.LFG(_.R0b))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();class NB{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==MB?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class e8 extends NB{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==MB?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function t8(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let a=t.substr(1),u="";return"@"!=a.charAt(0)&&([a,u]=function n8(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(a)),this.engine.listen(this.namespaceId,i,a,u,d=>{this.factory.scheduleListenerCallback(d._data||-1,r,d)})}return this.delegate.listen(e,t,r)}}let r8=(()=>{class n extends DI{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(fs.K0),_.LFG(IR),_.LFG(FR))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const PB=new _.OlP("AnimationModuleType"),OB=[{provide:Wn._j,useClass:Q4},{provide:FR,useFactory:function i8(){return new C4}},{provide:DI,useClass:r8},{provide:_.FYo,useFactory:function s8(n,e,t){return new X4(n,e,t)},deps:[T.se,DI,_.R0b]}],RB=[{provide:IR,useFactory:()=>new Y4},{provide:PB,useValue:"BrowserAnimations"},...OB],o8=[{provide:IR,useClass:oB},{provide:PB,useValue:"NoopAnimations"},...OB];let a8=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?o8:RB}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:RB,imports:[T.b2]}),n})(),l8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n,bootstrap:[e6]}),n.\u0275inj=_.cJS({providers:[],imports:[[T.b2,Xq,Tr,ub(()=>pk(Y2_firebase)),B$(()=>j$()),a6(()=>l6()),Pq(()=>Fq()),Q_,u6.JF,c6.Rh.forRoot({timeOut:2500,positionClass:"toast-top-right",preventDuplicates:!0,progressBar:!0}),a8,Ow.forRoot({errors:{useValue:{required:"*Campo requerido",minlength:({requiredLength:e,actualLength:t})=>`Expect ${e} but got ${t}`,invalidAddress:e=>"Address isn't valid"}}})]]}),n})();(0,_.G48)(),T.q6().bootstrapModule(l8).catch(n=>console.error(n))},8306:(rt,ve,L)=>{L.d(ve,{y:()=>Te});var T=L(930),_=L(727),fe=L(8822),me=L(4671);var K=L(2416),Ce=L(576),Fe=L(2806);let Te=(()=>{class Ve{constructor(nt){nt&&(this._subscribe=nt)}lift(nt){const De=new Ve;return De.source=this,De.operator=nt,De}subscribe(nt,De,st){const Ot=function ht(Ve){return Ve&&Ve instanceof T.Lv||function Ie(Ve){return Ve&&(0,Ce.m)(Ve.next)&&(0,Ce.m)(Ve.error)&&(0,Ce.m)(Ve.complete)}(Ve)&&(0,_.Nn)(Ve)}(nt)?nt:new T.Hp(nt,De,st);return(0,Fe.x)(()=>{const{operator:ft,source:Pe}=this;Ot.add(ft?ft.call(Ot,Pe):Pe?this._subscribe(Ot):this._trySubscribe(Ot))}),Ot}_trySubscribe(nt){try{return this._subscribe(nt)}catch(De){nt.error(De)}}forEach(nt,De){return new(De=ae(De))((st,Ot)=>{const ft=new T.Hp({next:Pe=>{try{nt(Pe)}catch(J){Ot(J),ft.unsubscribe()}},error:Ot,complete:st});this.subscribe(ft)})}_subscribe(nt){var De;return null===(De=this.source)||void 0===De?void 0:De.subscribe(nt)}[fe.L](){return this}pipe(...nt){return function ue(Ve){return 0===Ve.length?me.y:1===Ve.length?Ve[0]:function(nt){return Ve.reduce((De,st)=>st(De),nt)}}(nt)(this)}toPromise(nt){return new(nt=ae(nt))((De,st)=>{let Ot;this.subscribe(ft=>Ot=ft,ft=>st(ft),()=>De(Ot))})}}return Ve.create=$e=>new Ve($e),Ve})();function ae(Ve){var $e;return null!==($e=null!=Ve?Ve:K.v.Promise)&&void 0!==$e?$e:Promise}},7579:(rt,ve,L)=>{L.d(ve,{x:()=>K});var T=L(8306),_=L(727);const me=(0,L(3888).d)(Fe=>function(){Fe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var k=L(8737),ue=L(2806);let K=(()=>{class Fe extends T.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ae){const Ie=new Ce(this,this);return Ie.operator=ae,Ie}_throwIfClosed(){if(this.closed)throw new me}next(ae){(0,ue.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ie of this.currentObservers)Ie.next(ae)}})}error(ae){(0,ue.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ae;const{observers:Ie}=this;for(;Ie.length;)Ie.shift().error(ae)}})}complete(){(0,ue.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ae}=this;for(;ae.length;)ae.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ae;return(null===(ae=this.observers)||void 0===ae?void 0:ae.length)>0}_trySubscribe(ae){return this._throwIfClosed(),super._trySubscribe(ae)}_subscribe(ae){return this._throwIfClosed(),this._checkFinalizedStatuses(ae),this._innerSubscribe(ae)}_innerSubscribe(ae){const{hasError:Ie,isStopped:ht,observers:Ve}=this;return Ie||ht?_.Lc:(this.currentObservers=null,Ve.push(ae),new _.w0(()=>{this.currentObservers=null,(0,k.P)(Ve,ae)}))}_checkFinalizedStatuses(ae){const{hasError:Ie,thrownError:ht,isStopped:Ve}=this;Ie?ae.error(ht):Ve&&ae.complete()}asObservable(){const ae=new T.y;return ae.source=this,ae}}return Fe.create=(Te,ae)=>new Ce(Te,ae),Fe})();class Ce extends K{constructor(Te,ae){super(),this.destination=Te,this.source=ae}next(Te){var ae,Ie;null===(Ie=null===(ae=this.destination)||void 0===ae?void 0:ae.next)||void 0===Ie||Ie.call(ae,Te)}error(Te){var ae,Ie;null===(Ie=null===(ae=this.destination)||void 0===ae?void 0:ae.error)||void 0===Ie||Ie.call(ae,Te)}complete(){var Te,ae;null===(ae=null===(Te=this.destination)||void 0===Te?void 0:Te.complete)||void 0===ae||ae.call(Te)}_subscribe(Te){var ae,Ie;return null!==(Ie=null===(ae=this.source)||void 0===ae?void 0:ae.subscribe(Te))&&void 0!==Ie?Ie:_.Lc}}},930:(rt,ve,L)=>{L.d(ve,{Hp:()=>nt,Lv:()=>Ie});var T=L(576),_=L(727),fe=L(2416),me=L(7849),k=L(5032);const ue=Fe("C",void 0,void 0);function Fe(Pe,J,pe){return{kind:Pe,value:J,error:pe}}var Te=L(3410),ae=L(2806);class Ie extends _.w0{constructor(J){super(),this.isStopped=!1,J?(this.destination=J,(0,_.Nn)(J)&&J.add(this)):this.destination=ft}static create(J,pe,We){return new nt(J,pe,We)}next(J){this.isStopped?Ot(function Ce(Pe){return Fe("N",Pe,void 0)}(J),this):this._next(J)}error(J){this.isStopped?Ot(function K(Pe){return Fe("E",void 0,Pe)}(J),this):(this.isStopped=!0,this._error(J))}complete(){this.isStopped?Ot(ue,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(J){this.destination.next(J)}_error(J){try{this.destination.error(J)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ht=Function.prototype.bind;function Ve(Pe,J){return ht.call(Pe,J)}class $e{constructor(J){this.partialObserver=J}next(J){const{partialObserver:pe}=this;if(pe.next)try{pe.next(J)}catch(We){De(We)}}error(J){const{partialObserver:pe}=this;if(pe.error)try{pe.error(J)}catch(We){De(We)}else De(J)}complete(){const{partialObserver:J}=this;if(J.complete)try{J.complete()}catch(pe){De(pe)}}}class nt extends Ie{constructor(J,pe,We){let gt;if(super(),(0,T.m)(J)||!J)gt={next:null!=J?J:void 0,error:null!=pe?pe:void 0,complete:null!=We?We:void 0};else{let Oe;this&&fe.v.useDeprecatedNextContext?(Oe=Object.create(J),Oe.unsubscribe=()=>this.unsubscribe(),gt={next:J.next&&Ve(J.next,Oe),error:J.error&&Ve(J.error,Oe),complete:J.complete&&Ve(J.complete,Oe)}):gt=J}this.destination=new $e(gt)}}function De(Pe){fe.v.useDeprecatedSynchronousErrorHandling?(0,ae.O)(Pe):(0,me.h)(Pe)}function Ot(Pe,J){const{onStoppedNotification:pe}=fe.v;pe&&Te.z.setTimeout(()=>pe(Pe,J))}const ft={closed:!0,next:k.Z,error:function st(Pe){throw Pe},complete:k.Z}},727:(rt,ve,L)=>{L.d(ve,{Lc:()=>ue,w0:()=>k,Nn:()=>K});var T=L(576);const fe=(0,L(3888).d)(Fe=>function(ae){Fe(this),this.message=ae?`${ae.length} errors occurred during unsubscription:\n${ae.map((Ie,ht)=>`${ht+1}) ${Ie.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ae});var me=L(8737);class k{constructor(Te){this.initialTeardown=Te,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Te;if(!this.closed){this.closed=!0;const{_parentage:ae}=this;if(ae)if(this._parentage=null,Array.isArray(ae))for(const Ve of ae)Ve.remove(this);else ae.remove(this);const{initialTeardown:Ie}=this;if((0,T.m)(Ie))try{Ie()}catch(Ve){Te=Ve instanceof fe?Ve.errors:[Ve]}const{_finalizers:ht}=this;if(ht){this._finalizers=null;for(const Ve of ht)try{Ce(Ve)}catch($e){Te=null!=Te?Te:[],$e instanceof fe?Te=[...Te,...$e.errors]:Te.push($e)}}if(Te)throw new fe(Te)}}add(Te){var ae;if(Te&&Te!==this)if(this.closed)Ce(Te);else{if(Te instanceof k){if(Te.closed||Te._hasParent(this))return;Te._addParent(this)}(this._finalizers=null!==(ae=this._finalizers)&&void 0!==ae?ae:[]).push(Te)}}_hasParent(Te){const{_parentage:ae}=this;return ae===Te||Array.isArray(ae)&&ae.includes(Te)}_addParent(Te){const{_parentage:ae}=this;this._parentage=Array.isArray(ae)?(ae.push(Te),ae):ae?[ae,Te]:Te}_removeParent(Te){const{_parentage:ae}=this;ae===Te?this._parentage=null:Array.isArray(ae)&&(0,me.P)(ae,Te)}remove(Te){const{_finalizers:ae}=this;ae&&(0,me.P)(ae,Te),Te instanceof k&&Te._removeParent(this)}}k.EMPTY=(()=>{const Fe=new k;return Fe.closed=!0,Fe})();const ue=k.EMPTY;function K(Fe){return Fe instanceof k||Fe&&"closed"in Fe&&(0,T.m)(Fe.remove)&&(0,T.m)(Fe.add)&&(0,T.m)(Fe.unsubscribe)}function Ce(Fe){(0,T.m)(Fe)?Fe():Fe.unsubscribe()}},2416:(rt,ve,L)=>{L.d(ve,{v:()=>T});const T={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(rt,ve,L)=>{L.d(ve,{z:()=>k});var T=L(8189),fe=L(7669),me=L(8996);function k(...ue){return function _(){return(0,T.J)(1)}()((0,me.D)(ue,(0,fe.yG)(ue)))}},515:(rt,ve,L)=>{L.d(ve,{E:()=>_});const _=new(L(8306).y)(k=>k.complete())},8996:(rt,ve,L)=>{L.d(ve,{D:()=>J});var T=L(8421),_=L(5363),fe=L(9468),ue=L(8306),Ce=L(2202),Fe=L(576),Te=L(9672);function Ie(pe,We){if(!pe)throw new Error("Iterable cannot be null");return new ue.y(gt=>{(0,Te.f)(gt,We,()=>{const Oe=pe[Symbol.asyncIterator]();(0,Te.f)(gt,We,()=>{Oe.next().then(Tt=>{Tt.done?gt.complete():gt.next(Tt.value)})},0,!0)})})}var ht=L(3670),Ve=L(8239),$e=L(1144),nt=L(6495),De=L(2206),st=L(4532),Ot=L(3260);function J(pe,We){return We?function Pe(pe,We){if(null!=pe){if((0,ht.c)(pe))return function me(pe,We){return(0,T.Xf)(pe).pipe((0,fe.R)(We),(0,_.Q)(We))}(pe,We);if((0,$e.z)(pe))return function K(pe,We){return new ue.y(gt=>{let Oe=0;return We.schedule(function(){Oe===pe.length?gt.complete():(gt.next(pe[Oe++]),gt.closed||this.schedule())})})}(pe,We);if((0,Ve.t)(pe))return function k(pe,We){return(0,T.Xf)(pe).pipe((0,fe.R)(We),(0,_.Q)(We))}(pe,We);if((0,De.D)(pe))return Ie(pe,We);if((0,nt.T)(pe))return function ae(pe,We){return new ue.y(gt=>{let Oe;return(0,Te.f)(gt,We,()=>{Oe=pe[Ce.h](),(0,Te.f)(gt,We,()=>{let Tt,ne;try{({value:Tt,done:ne}=Oe.next())}catch(ie){return void gt.error(ie)}ne?gt.complete():gt.next(Tt)},0,!0)}),()=>(0,Fe.m)(null==Oe?void 0:Oe.return)&&Oe.return()})}(pe,We);if((0,Ot.L)(pe))return function ft(pe,We){return Ie((0,Ot.Q)(pe),We)}(pe,We)}throw(0,st.z)(pe)}(pe,We):(0,T.Xf)(pe)}},8421:(rt,ve,L)=>{L.d(ve,{Xf:()=>ht});var T=L(655),_=L(1144),fe=L(8239),me=L(8306),k=L(3670),ue=L(2206),K=L(4532),Ce=L(6495),Fe=L(3260),Te=L(576),ae=L(7849),Ie=L(8822);function ht(Pe){if(Pe instanceof me.y)return Pe;if(null!=Pe){if((0,k.c)(Pe))return function Ve(Pe){return new me.y(J=>{const pe=Pe[Ie.L]();if((0,Te.m)(pe.subscribe))return pe.subscribe(J);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Pe);if((0,_.z)(Pe))return function $e(Pe){return new me.y(J=>{for(let pe=0;pe<Pe.length&&!J.closed;pe++)J.next(Pe[pe]);J.complete()})}(Pe);if((0,fe.t)(Pe))return function nt(Pe){return new me.y(J=>{Pe.then(pe=>{J.closed||(J.next(pe),J.complete())},pe=>J.error(pe)).then(null,ae.h)})}(Pe);if((0,ue.D)(Pe))return st(Pe);if((0,Ce.T)(Pe))return function De(Pe){return new me.y(J=>{for(const pe of Pe)if(J.next(pe),J.closed)return;J.complete()})}(Pe);if((0,Fe.L)(Pe))return function Ot(Pe){return st((0,Fe.Q)(Pe))}(Pe)}throw(0,K.z)(Pe)}function st(Pe){return new me.y(J=>{(function ft(Pe,J){var pe,We,gt,Oe;return(0,T.mG)(this,void 0,void 0,function*(){try{for(pe=(0,T.KL)(Pe);!(We=yield pe.next()).done;)if(J.next(We.value),J.closed)return}catch(Tt){gt={error:Tt}}finally{try{We&&!We.done&&(Oe=pe.return)&&(yield Oe.call(pe))}finally{if(gt)throw gt.error}}J.complete()})})(Pe,J).catch(pe=>J.error(pe))})}},6451:(rt,ve,L)=>{L.d(ve,{T:()=>ue});var T=L(8189),_=L(8421),fe=L(515),me=L(7669),k=L(8996);function ue(...K){const Ce=(0,me.yG)(K),Fe=(0,me._6)(K,1/0),Te=K;return Te.length?1===Te.length?(0,_.Xf)(Te[0]):(0,T.J)(Fe)((0,k.D)(Te,Ce)):fe.E}},9646:(rt,ve,L)=>{L.d(ve,{of:()=>fe});var T=L(7669),_=L(8996);function fe(...me){const k=(0,T.yG)(me);return(0,_.D)(me,k)}},5403:(rt,ve,L)=>{L.d(ve,{x:()=>_});var T=L(930);function _(me,k,ue,K,Ce){return new fe(me,k,ue,K,Ce)}class fe extends T.Lv{constructor(k,ue,K,Ce,Fe,Te){super(k),this.onFinalize=Fe,this.shouldUnsubscribe=Te,this._next=ue?function(ae){try{ue(ae)}catch(Ie){k.error(Ie)}}:super._next,this._error=Ce?function(ae){try{Ce(ae)}catch(Ie){k.error(Ie)}finally{this.unsubscribe()}}:super._error,this._complete=K?function(){try{K()}catch(ae){k.error(ae)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var k;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ue}=this;super.unsubscribe(),!ue&&(null===(k=this.onFinalize)||void 0===k||k.call(this))}}}},4351:(rt,ve,L)=>{L.d(ve,{b:()=>fe});var T=L(5577),_=L(576);function fe(me,k){return(0,_.m)(k)?(0,T.z)(me,k,1):(0,T.z)(me,1)}},9300:(rt,ve,L)=>{L.d(ve,{h:()=>fe});var T=L(4482),_=L(5403);function fe(me,k){return(0,T.e)((ue,K)=>{let Ce=0;ue.subscribe((0,_.x)(K,Fe=>me.call(k,Fe,Ce++)&&K.next(Fe)))})}},4004:(rt,ve,L)=>{L.d(ve,{U:()=>fe});var T=L(4482),_=L(5403);function fe(me,k){return(0,T.e)((ue,K)=>{let Ce=0;ue.subscribe((0,_.x)(K,Fe=>{K.next(me.call(k,Fe,Ce++))}))})}},8189:(rt,ve,L)=>{L.d(ve,{J:()=>fe});var T=L(5577),_=L(4671);function fe(me=1/0){return(0,T.z)(_.y,me)}},5577:(rt,ve,L)=>{L.d(ve,{z:()=>Ce});var T=L(4004),_=L(8421),fe=L(4482),me=L(9672),k=L(5403),K=L(576);function Ce(Fe,Te,ae=1/0){return(0,K.m)(Te)?Ce((Ie,ht)=>(0,T.U)((Ve,$e)=>Te(Ie,Ve,ht,$e))((0,_.Xf)(Fe(Ie,ht))),ae):("number"==typeof Te&&(ae=Te),(0,fe.e)((Ie,ht)=>function ue(Fe,Te,ae,Ie,ht,Ve,$e,nt){const De=[];let st=0,Ot=0,ft=!1;const Pe=()=>{ft&&!De.length&&!st&&Te.complete()},J=We=>st<Ie?pe(We):De.push(We),pe=We=>{Ve&&Te.next(We),st++;let gt=!1;(0,_.Xf)(ae(We,Ot++)).subscribe((0,k.x)(Te,Oe=>{null==ht||ht(Oe),Ve?J(Oe):Te.next(Oe)},()=>{gt=!0},void 0,()=>{if(gt)try{for(st--;De.length&&st<Ie;){const Oe=De.shift();$e?(0,me.f)(Te,$e,()=>pe(Oe)):pe(Oe)}Pe()}catch(Oe){Te.error(Oe)}}))};return Fe.subscribe((0,k.x)(Te,J,()=>{ft=!0,Pe()})),()=>{null==nt||nt()}}(Ie,ht,Fe,ae)))}},5363:(rt,ve,L)=>{L.d(ve,{Q:()=>me});var T=L(9672),_=L(4482),fe=L(5403);function me(k,ue=0){return(0,_.e)((K,Ce)=>{K.subscribe((0,fe.x)(Ce,Fe=>(0,T.f)(Ce,k,()=>Ce.next(Fe),ue),()=>(0,T.f)(Ce,k,()=>Ce.complete(),ue),Fe=>(0,T.f)(Ce,k,()=>Ce.error(Fe),ue)))})}},3099:(rt,ve,L)=>{L.d(ve,{B:()=>k});var T=L(8421),_=L(7579),fe=L(930),me=L(4482);function k(K={}){const{connector:Ce=(()=>new _.x),resetOnError:Fe=!0,resetOnComplete:Te=!0,resetOnRefCountZero:ae=!0}=K;return Ie=>{let ht,Ve,$e,nt=0,De=!1,st=!1;const Ot=()=>{null==Ve||Ve.unsubscribe(),Ve=void 0},ft=()=>{Ot(),ht=$e=void 0,De=st=!1},Pe=()=>{const J=ht;ft(),null==J||J.unsubscribe()};return(0,me.e)((J,pe)=>{nt++,!st&&!De&&Ot();const We=$e=null!=$e?$e:Ce();pe.add(()=>{nt--,0===nt&&!st&&!De&&(Ve=ue(Pe,ae))}),We.subscribe(pe),!ht&&nt>0&&(ht=new fe.Hp({next:gt=>We.next(gt),error:gt=>{st=!0,Ot(),Ve=ue(ft,Fe,gt),We.error(gt)},complete:()=>{De=!0,Ot(),Ve=ue(ft,Te),We.complete()}}),(0,T.Xf)(J).subscribe(ht))})(Ie)}}function ue(K,Ce,...Fe){if(!0===Ce)return void K();if(!1===Ce)return;const Te=new fe.Hp({next:()=>{Te.unsubscribe(),K()}});return Ce(...Fe).subscribe(Te)}},8675:(rt,ve,L)=>{L.d(ve,{O:()=>me});var T=L(7272),_=L(7669),fe=L(4482);function me(...k){const ue=(0,_.yG)(k);return(0,fe.e)((K,Ce)=>{(ue?(0,T.z)(k,K,ue):(0,T.z)(k,K)).subscribe(Ce)})}},9468:(rt,ve,L)=>{L.d(ve,{R:()=>_});var T=L(4482);function _(fe,me=0){return(0,T.e)((k,ue)=>{ue.add(fe.schedule(()=>k.subscribe(ue),me))})}},3900:(rt,ve,L)=>{L.d(ve,{w:()=>me});var T=L(8421),_=L(4482),fe=L(5403);function me(k,ue){return(0,_.e)((K,Ce)=>{let Fe=null,Te=0,ae=!1;const Ie=()=>ae&&!Fe&&Ce.complete();K.subscribe((0,fe.x)(Ce,ht=>{null==Fe||Fe.unsubscribe();let Ve=0;const $e=Te++;(0,T.Xf)(k(ht,$e)).subscribe(Fe=(0,fe.x)(Ce,nt=>Ce.next(ue?ue(ht,nt,$e,Ve++):nt),()=>{Fe=null,Ie()}))},()=>{ae=!0,Ie()}))})}},8505:(rt,ve,L)=>{L.d(ve,{b:()=>k});var T=L(576),_=L(4482),fe=L(5403),me=L(4671);function k(ue,K,Ce){const Fe=(0,T.m)(ue)||K||Ce?{next:ue,error:K,complete:Ce}:ue;return Fe?(0,_.e)((Te,ae)=>{var Ie;null===(Ie=Fe.subscribe)||void 0===Ie||Ie.call(Fe);let ht=!0;Te.subscribe((0,fe.x)(ae,Ve=>{var $e;null===($e=Fe.next)||void 0===$e||$e.call(Fe,Ve),ae.next(Ve)},()=>{var Ve;ht=!1,null===(Ve=Fe.complete)||void 0===Ve||Ve.call(Fe),ae.complete()},Ve=>{var $e;ht=!1,null===($e=Fe.error)||void 0===$e||$e.call(Fe,Ve),ae.error(Ve)},()=>{var Ve,$e;ht&&(null===(Ve=Fe.unsubscribe)||void 0===Ve||Ve.call(Fe)),null===($e=Fe.finalize)||void 0===$e||$e.call(Fe)}))}):me.y}},3410:(rt,ve,L)=>{L.d(ve,{z:()=>T});const T={setTimeout(_,fe,...me){const{delegate:k}=T;return(null==k?void 0:k.setTimeout)?k.setTimeout(_,fe,...me):setTimeout(_,fe,...me)},clearTimeout(_){const{delegate:fe}=T;return((null==fe?void 0:fe.clearTimeout)||clearTimeout)(_)},delegate:void 0}},2202:(rt,ve,L)=>{L.d(ve,{h:()=>_});const _=function T(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(rt,ve,L)=>{L.d(ve,{L:()=>T});const T="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(rt,ve,L)=>{L.d(ve,{_6:()=>ue,jO:()=>me,yG:()=>k});var T=L(576);function fe(K){return K[K.length-1]}function me(K){return(0,T.m)(fe(K))?K.pop():void 0}function k(K){return function _(K){return K&&(0,T.m)(K.schedule)}(fe(K))?K.pop():void 0}function ue(K,Ce){return"number"==typeof fe(K)?K.pop():Ce}},4742:(rt,ve,L)=>{L.d(ve,{D:()=>k});const{isArray:T}=Array,{getPrototypeOf:_,prototype:fe,keys:me}=Object;function k(K){if(1===K.length){const Ce=K[0];if(T(Ce))return{args:Ce,keys:null};if(function ue(K){return K&&"object"==typeof K&&_(K)===fe}(Ce)){const Fe=me(Ce);return{args:Fe.map(Te=>Ce[Te]),keys:Fe}}}return{args:K,keys:null}}},8737:(rt,ve,L)=>{function T(_,fe){if(_){const me=_.indexOf(fe);0<=me&&_.splice(me,1)}}L.d(ve,{P:()=>T})},3888:(rt,ve,L)=>{function T(_){const me=_(k=>{Error.call(k),k.stack=(new Error).stack});return me.prototype=Object.create(Error.prototype),me.prototype.constructor=me,me}L.d(ve,{d:()=>T})},1810:(rt,ve,L)=>{function T(_,fe){return _.reduce((me,k,ue)=>(me[k]=fe[ue],me),{})}L.d(ve,{n:()=>T})},2806:(rt,ve,L)=>{L.d(ve,{O:()=>me,x:()=>fe});var T=L(2416);let _=null;function fe(k){if(T.v.useDeprecatedSynchronousErrorHandling){const ue=!_;if(ue&&(_={errorThrown:!1,error:null}),k(),ue){const{errorThrown:K,error:Ce}=_;if(_=null,K)throw Ce}}else k()}function me(k){T.v.useDeprecatedSynchronousErrorHandling&&_&&(_.errorThrown=!0,_.error=k)}},9672:(rt,ve,L)=>{function T(_,fe,me,k=0,ue=!1){const K=fe.schedule(function(){me(),ue?_.add(this.schedule(null,k)):this.unsubscribe()},k);if(_.add(K),!ue)return K}L.d(ve,{f:()=>T})},4671:(rt,ve,L)=>{function T(_){return _}L.d(ve,{y:()=>T})},1144:(rt,ve,L)=>{L.d(ve,{z:()=>T});const T=_=>_&&"number"==typeof _.length&&"function"!=typeof _},2206:(rt,ve,L)=>{L.d(ve,{D:()=>_});var T=L(576);function _(fe){return Symbol.asyncIterator&&(0,T.m)(null==fe?void 0:fe[Symbol.asyncIterator])}},576:(rt,ve,L)=>{function T(_){return"function"==typeof _}L.d(ve,{m:()=>T})},3670:(rt,ve,L)=>{L.d(ve,{c:()=>fe});var T=L(8822),_=L(576);function fe(me){return(0,_.m)(me[T.L])}},6495:(rt,ve,L)=>{L.d(ve,{T:()=>fe});var T=L(2202),_=L(576);function fe(me){return(0,_.m)(null==me?void 0:me[T.h])}},8239:(rt,ve,L)=>{L.d(ve,{t:()=>_});var T=L(576);function _(fe){return(0,T.m)(null==fe?void 0:fe.then)}},3260:(rt,ve,L)=>{L.d(ve,{L:()=>me,Q:()=>fe});var T=L(655),_=L(576);function fe(k){return(0,T.FC)(this,arguments,function*(){const K=k.getReader();try{for(;;){const{value:Ce,done:Fe}=yield(0,T.qq)(K.read());if(Fe)return yield(0,T.qq)(void 0);yield yield(0,T.qq)(Ce)}}finally{K.releaseLock()}})}function me(k){return(0,_.m)(null==k?void 0:k.getReader)}},4482:(rt,ve,L)=>{L.d(ve,{A:()=>_,e:()=>fe});var T=L(576);function _(me){return(0,T.m)(null==me?void 0:me.lift)}function fe(me){return k=>{if(_(k))return k.lift(function(ue){try{return me(ue,this)}catch(K){this.error(K)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(rt,ve,L)=>{L.d(ve,{Z:()=>me});var T=L(4004);const{isArray:_}=Array;function me(k){return(0,T.U)(ue=>function fe(k,ue){return _(ue)?k(...ue):k(ue)}(k,ue))}},5032:(rt,ve,L)=>{function T(){}L.d(ve,{Z:()=>T})},7849:(rt,ve,L)=>{L.d(ve,{h:()=>fe});var T=L(2416),_=L(3410);function fe(me){_.z.setTimeout(()=>{const{onUnhandledError:k}=T.v;if(!k)throw me;k(me)})}},4532:(rt,ve,L)=>{function T(_){return new TypeError(`You provided ${null!==_&&"object"==typeof _?"an invalid object":`'${_}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(ve,{z:()=>T})},655:(rt,ve,L)=>{function me(ne,ie){var de={};for(var _e in ne)Object.prototype.hasOwnProperty.call(ne,_e)&&ie.indexOf(_e)<0&&(de[_e]=ne[_e]);if(null!=ne&&"function"==typeof Object.getOwnPropertySymbols){var oe=0;for(_e=Object.getOwnPropertySymbols(ne);oe<_e.length;oe++)ie.indexOf(_e[oe])<0&&Object.prototype.propertyIsEnumerable.call(ne,_e[oe])&&(de[_e[oe]]=ne[_e[oe]])}return de}function Ce(ne,ie,de,_e){return new(de||(de=Promise))(function(Ue,It){function an(zn){try{Ge(_e.next(zn))}catch(yr){It(yr)}}function Wt(zn){try{Ge(_e.throw(zn))}catch(yr){It(yr)}}function Ge(zn){zn.done?Ue(zn.value):function oe(Ue){return Ue instanceof de?Ue:new de(function(It){It(Ue)})}(zn.value).then(an,Wt)}Ge((_e=_e.apply(ne,ie||[])).next())})}function De(ne){return this instanceof De?(this.v=ne,this):new De(ne)}function st(ne,ie,de){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,_e=de.apply(ne,ie||[]),Ue=[];return oe={},It("next"),It("throw"),It("return"),oe[Symbol.asyncIterator]=function(){return this},oe;function It(Se){_e[Se]&&(oe[Se]=function(se){return new Promise(function(Z,le){Ue.push([Se,se,Z,le])>1||an(Se,se)})})}function an(Se,se){try{!function Wt(Se){Se.value instanceof De?Promise.resolve(Se.value.v).then(Ge,zn):yr(Ue[0][2],Se)}(_e[Se](se))}catch(Z){yr(Ue[0][3],Z)}}function Ge(Se){an("next",Se)}function zn(Se){an("throw",Se)}function yr(Se,se){Se(se),Ue.shift(),Ue.length&&an(Ue[0][0],Ue[0][1])}}function ft(ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var de,ie=ne[Symbol.asyncIterator];return ie?ie.call(ne):(ne=function Ie(ne){var ie="function"==typeof Symbol&&Symbol.iterator,de=ie&&ne[ie],_e=0;if(de)return de.call(ne);if(ne&&"number"==typeof ne.length)return{next:function(){return ne&&_e>=ne.length&&(ne=void 0),{value:ne&&ne[_e++],done:!ne}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(ne),de={},_e("next"),_e("throw"),_e("return"),de[Symbol.asyncIterator]=function(){return this},de);function _e(Ue){de[Ue]=ne[Ue]&&function(It){return new Promise(function(an,Wt){!function oe(Ue,It,an,Wt){Promise.resolve(Wt).then(function(Ge){Ue({value:Ge,done:an})},It)}(an,Wt,(It=ne[Ue](It)).done,It.value)})}}}L.d(ve,{FC:()=>st,KL:()=>ft,_T:()=>me,mG:()=>Ce,qq:()=>De})},1777:(rt,ve,L)=>{L.d(ve,{LC:()=>_,SB:()=>Fe,X$:()=>me,ZE:()=>Ot,ZN:()=>st,_j:()=>T,eR:()=>ae,jt:()=>k,k1:()=>ft,l3:()=>fe,oB:()=>Ce,vP:()=>K});class T{}class _{}const fe="*";function me(Pe,J){return{type:7,name:Pe,definitions:J,options:{}}}function k(Pe,J=null){return{type:4,styles:J,timings:Pe}}function K(Pe,J=null){return{type:2,steps:Pe,options:J}}function Ce(Pe){return{type:6,styles:Pe,offset:null}}function Fe(Pe,J,pe){return{type:0,name:Pe,styles:J,options:pe}}function ae(Pe,J,pe=null){return{type:1,expr:Pe,animation:J,options:pe}}function De(Pe){Promise.resolve(null).then(Pe)}class st{constructor(J=0,pe=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=J+pe}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(J=>J()),this._onDoneFns=[])}onStart(J){this._onStartFns.push(J)}onDone(J){this._onDoneFns.push(J)}onDestroy(J){this._onDestroyFns.push(J)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){De(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(J=>J()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(J=>J()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(J){this._position=this.totalTime?J*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(J){const pe="start"==J?this._onStartFns:this._onDoneFns;pe.forEach(We=>We()),pe.length=0}}class Ot{constructor(J){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=J;let pe=0,We=0,gt=0;const Oe=this.players.length;0==Oe?De(()=>this._onFinish()):this.players.forEach(Tt=>{Tt.onDone(()=>{++pe==Oe&&this._onFinish()}),Tt.onDestroy(()=>{++We==Oe&&this._onDestroy()}),Tt.onStart(()=>{++gt==Oe&&this._onStart()})}),this.totalTime=this.players.reduce((Tt,ne)=>Math.max(Tt,ne.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(J=>J()),this._onDoneFns=[])}init(){this.players.forEach(J=>J.init())}onStart(J){this._onStartFns.push(J)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(J=>J()),this._onStartFns=[])}onDone(J){this._onDoneFns.push(J)}onDestroy(J){this._onDestroyFns.push(J)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(J=>J.play())}pause(){this.players.forEach(J=>J.pause())}restart(){this.players.forEach(J=>J.restart())}finish(){this._onFinish(),this.players.forEach(J=>J.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(J=>J.destroy()),this._onDestroyFns.forEach(J=>J()),this._onDestroyFns=[])}reset(){this.players.forEach(J=>J.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(J){const pe=J*this.totalTime;this.players.forEach(We=>{const gt=We.totalTime?Math.min(1,pe/We.totalTime):1;We.setPosition(gt)})}getPosition(){const J=this.players.reduce((pe,We)=>null===pe||We.totalTime>pe.totalTime?We:pe,null);return null!=J?J.getPosition():0}beforeDestroy(){this.players.forEach(J=>{J.beforeDestroy&&J.beforeDestroy()})}triggerCallback(J){const pe="start"==J?this._onStartFns:this._onDoneFns;pe.forEach(We=>We()),pe.length=0}}const ft="!"},9808:(rt,ve,L)=>{L.d(ve,{Do:()=>Pe,EM:()=>Ko,HT:()=>k,JF:()=>Sn,K0:()=>K,Mx:()=>Ys,O5:()=>fr,S$:()=>De,V_:()=>Te,Ye:()=>J,b0:()=>ft,bD:()=>yo,ez:()=>ji,lw:()=>Ce,mr:()=>Ot,q:()=>fe,sg:()=>hr,tP:()=>ja,w_:()=>ue});var T=L(5e3);let _=null;function fe(){return _}function k(S){_||(_=S)}class ue{}const K=new T.OlP("DocumentToken");let Ce=(()=>{class S{historyGo(D){throw new Error("Not implemented")}}return S.\u0275fac=function(D){return new(D||S)},S.\u0275prov=T.Yz7({token:S,factory:function(){return function Fe(){return(0,T.LFG)(ae)}()},providedIn:"platform"}),S})();const Te=new T.OlP("Location Initialized");let ae=(()=>{class S extends Ce{constructor(D){super(),this._doc=D,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return fe().getBaseHref(this._doc)}onPopState(D){const F=fe().getGlobalEventTarget(this._doc,"window");return F.addEventListener("popstate",D,!1),()=>F.removeEventListener("popstate",D)}onHashChange(D){const F=fe().getGlobalEventTarget(this._doc,"window");return F.addEventListener("hashchange",D,!1),()=>F.removeEventListener("hashchange",D)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(D){this.location.pathname=D}pushState(D,F,G){Ie()?this._history.pushState(D,F,G):this.location.hash=G}replaceState(D,F,G){Ie()?this._history.replaceState(D,F,G):this.location.hash=G}forward(){this._history.forward()}back(){this._history.back()}historyGo(D=0){this._history.go(D)}getState(){return this._history.state}}return S.\u0275fac=function(D){return new(D||S)(T.LFG(K))},S.\u0275prov=T.Yz7({token:S,factory:function(){return function ht(){return new ae((0,T.LFG)(K))}()},providedIn:"platform"}),S})();function Ie(){return!!window.history.pushState}function Ve(S,P){if(0==S.length)return P;if(0==P.length)return S;let D=0;return S.endsWith("/")&&D++,P.startsWith("/")&&D++,2==D?S+P.substring(1):1==D?S+P:S+"/"+P}function $e(S){const P=S.match(/#|\?|$/),D=P&&P.index||S.length;return S.slice(0,D-("/"===S[D-1]?1:0))+S.slice(D)}function nt(S){return S&&"?"!==S[0]?"?"+S:S}let De=(()=>{class S{historyGo(D){throw new Error("Not implemented")}}return S.\u0275fac=function(D){return new(D||S)},S.\u0275prov=T.Yz7({token:S,factory:function(){return function st(S){const P=(0,T.LFG)(K).location;return new ft((0,T.LFG)(Ce),P&&P.origin||"")}()},providedIn:"root"}),S})();const Ot=new T.OlP("appBaseHref");let ft=(()=>{class S extends De{constructor(D,F){if(super(),this._platformLocation=D,this._removeListenerFns=[],null==F&&(F=this._platformLocation.getBaseHrefFromDOM()),null==F)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=F}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(D){this._removeListenerFns.push(this._platformLocation.onPopState(D),this._platformLocation.onHashChange(D))}getBaseHref(){return this._baseHref}prepareExternalUrl(D){return Ve(this._baseHref,D)}path(D=!1){const F=this._platformLocation.pathname+nt(this._platformLocation.search),G=this._platformLocation.hash;return G&&D?`${F}${G}`:F}pushState(D,F,G,ge){const Me=this.prepareExternalUrl(G+nt(ge));this._platformLocation.pushState(D,F,Me)}replaceState(D,F,G,ge){const Me=this.prepareExternalUrl(G+nt(ge));this._platformLocation.replaceState(D,F,Me)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(D=0){var F,G;null===(G=(F=this._platformLocation).historyGo)||void 0===G||G.call(F,D)}}return S.\u0275fac=function(D){return new(D||S)(T.LFG(Ce),T.LFG(Ot,8))},S.\u0275prov=T.Yz7({token:S,factory:S.\u0275fac}),S})(),Pe=(()=>{class S extends De{constructor(D,F){super(),this._platformLocation=D,this._baseHref="",this._removeListenerFns=[],null!=F&&(this._baseHref=F)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(D){this._removeListenerFns.push(this._platformLocation.onPopState(D),this._platformLocation.onHashChange(D))}getBaseHref(){return this._baseHref}path(D=!1){let F=this._platformLocation.hash;return null==F&&(F="#"),F.length>0?F.substring(1):F}prepareExternalUrl(D){const F=Ve(this._baseHref,D);return F.length>0?"#"+F:F}pushState(D,F,G,ge){let Me=this.prepareExternalUrl(G+nt(ge));0==Me.length&&(Me=this._platformLocation.pathname),this._platformLocation.pushState(D,F,Me)}replaceState(D,F,G,ge){let Me=this.prepareExternalUrl(G+nt(ge));0==Me.length&&(Me=this._platformLocation.pathname),this._platformLocation.replaceState(D,F,Me)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(D=0){var F,G;null===(G=(F=this._platformLocation).historyGo)||void 0===G||G.call(F,D)}}return S.\u0275fac=function(D){return new(D||S)(T.LFG(Ce),T.LFG(Ot,8))},S.\u0275prov=T.Yz7({token:S,factory:S.\u0275fac}),S})(),J=(()=>{class S{constructor(D,F){this._subject=new T.vpe,this._urlChangeListeners=[],this._platformStrategy=D;const G=this._platformStrategy.getBaseHref();this._platformLocation=F,this._baseHref=$e(gt(G)),this._platformStrategy.onPopState(ge=>{this._subject.emit({url:this.path(!0),pop:!0,state:ge.state,type:ge.type})})}path(D=!1){return this.normalize(this._platformStrategy.path(D))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(D,F=""){return this.path()==this.normalize(D+nt(F))}normalize(D){return S.stripTrailingSlash(function We(S,P){return S&&P.startsWith(S)?P.substring(S.length):P}(this._baseHref,gt(D)))}prepareExternalUrl(D){return D&&"/"!==D[0]&&(D="/"+D),this._platformStrategy.prepareExternalUrl(D)}go(D,F="",G=null){this._platformStrategy.pushState(G,"",D,F),this._notifyUrlChangeListeners(this.prepareExternalUrl(D+nt(F)),G)}replaceState(D,F="",G=null){this._platformStrategy.replaceState(G,"",D,F),this._notifyUrlChangeListeners(this.prepareExternalUrl(D+nt(F)),G)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(D=0){var F,G;null===(G=(F=this._platformStrategy).historyGo)||void 0===G||G.call(F,D)}onUrlChange(D){this._urlChangeListeners.push(D),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(F=>{this._notifyUrlChangeListeners(F.url,F.state)}))}_notifyUrlChangeListeners(D="",F){this._urlChangeListeners.forEach(G=>G(D,F))}subscribe(D,F,G){return this._subject.subscribe({next:D,error:F,complete:G})}}return S.normalizeQueryParams=nt,S.joinWithSlash=Ve,S.stripTrailingSlash=$e,S.\u0275fac=function(D){return new(D||S)(T.LFG(De),T.LFG(Ce))},S.\u0275prov=T.Yz7({token:S,factory:function(){return function pe(){return new J((0,T.LFG)(De),(0,T.LFG)(Ce))}()},providedIn:"root"}),S})();function gt(S){return S.replace(/\/index.html$/,"")}function Ys(S,P){P=encodeURIComponent(P);for(const D of S.split(";")){const F=D.indexOf("="),[G,ge]=-1==F?[D,""]:[D.slice(0,F),D.slice(F+1)];if(G.trim()===P)return decodeURIComponent(ge)}return null}class is{constructor(P,D,F,G){this.$implicit=P,this.ngForOf=D,this.index=F,this.count=G}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let hr=(()=>{class S{constructor(D,F,G){this._viewContainer=D,this._template=F,this._differs=G,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(D){this._ngForOf=D,this._ngForOfDirty=!0}set ngForTrackBy(D){this._trackByFn=D}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(D){D&&(this._template=D)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const D=this._ngForOf;!this._differ&&D&&(this._differ=this._differs.find(D).create(this.ngForTrackBy))}if(this._differ){const D=this._differ.diff(this._ngForOf);D&&this._applyChanges(D)}}_applyChanges(D){const F=this._viewContainer;D.forEachOperation((G,ge,Me)=>{if(null==G.previousIndex)F.createEmbeddedView(this._template,new is(G.item,this._ngForOf,-1,-1),null===Me?void 0:Me);else if(null==Me)F.remove(null===ge?void 0:ge);else if(null!==ge){const ot=F.get(ge);F.move(ot,Me),bs(ot,G)}});for(let G=0,ge=F.length;G<ge;G++){const ot=F.get(G).context;ot.index=G,ot.count=ge,ot.ngForOf=this._ngForOf}D.forEachIdentityChange(G=>{bs(F.get(G.currentIndex),G)})}static ngTemplateContextGuard(D,F){return!0}}return S.\u0275fac=function(D){return new(D||S)(T.Y36(T.s_b),T.Y36(T.Rgc),T.Y36(T.ZZ4))},S.\u0275dir=T.lG2({type:S,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),S})();function bs(S,P){S.context.$implicit=P.item}let fr=(()=>{class S{constructor(D,F){this._viewContainer=D,this._context=new Jt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=F}set ngIf(D){this._context.$implicit=this._context.ngIf=D,this._updateView()}set ngIfThen(D){kr("ngIfThen",D),this._thenTemplateRef=D,this._thenViewRef=null,this._updateView()}set ngIfElse(D){kr("ngIfElse",D),this._elseTemplateRef=D,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(D,F){return!0}}return S.\u0275fac=function(D){return new(D||S)(T.Y36(T.s_b),T.Y36(T.Rgc))},S.\u0275dir=T.lG2({type:S,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),S})();class Jt{constructor(){this.$implicit=null,this.ngIf=null}}function kr(S,P){if(P&&!P.createEmbeddedView)throw new Error(`${S} must be a TemplateRef, but received '${(0,T.AaK)(P)}'.`)}let ja=(()=>{class S{constructor(D){this._viewContainerRef=D,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(D){if(D.ngTemplateOutlet){const F=this._viewContainerRef;this._viewRef&&F.remove(F.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?F.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&D.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return S.\u0275fac=function(D){return new(D||S)(T.Y36(T.s_b))},S.\u0275dir=T.lG2({type:S,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[T.TTD]}),S})(),ji=(()=>{class S{}return S.\u0275fac=function(D){return new(D||S)},S.\u0275mod=T.oAB({type:S}),S.\u0275inj=T.cJS({}),S})();const yo="browser";let Ko=(()=>{class S{}return S.\u0275prov=(0,T.Yz7)({token:S,providedIn:"root",factory:()=>new za((0,T.LFG)(K),window)}),S})();class za{constructor(P,D){this.document=P,this.window=D,this.offset=()=>[0,0]}setOffset(P){this.offset=Array.isArray(P)?()=>P:P}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(P){this.supportsScrolling()&&this.window.scrollTo(P[0],P[1])}scrollToAnchor(P){if(!this.supportsScrolling())return;const D=function Hi(S,P){const D=S.getElementById(P)||S.getElementsByName(P)[0];if(D)return D;if("function"==typeof S.createTreeWalker&&S.body&&(S.body.createShadowRoot||S.body.attachShadow)){const F=S.createTreeWalker(S.body,NodeFilter.SHOW_ELEMENT);let G=F.currentNode;for(;G;){const ge=G.shadowRoot;if(ge){const Me=ge.getElementById(P)||ge.querySelector(`[name="${P}"]`);if(Me)return Me}G=F.nextNode()}}return null}(this.document,P);D&&(this.scrollToElement(D),D.focus())}setHistoryScrollRestoration(P){if(this.supportScrollRestoration()){const D=this.window.history;D&&D.scrollRestoration&&(D.scrollRestoration=P)}}scrollToElement(P){const D=P.getBoundingClientRect(),F=D.left+this.window.pageXOffset,G=D.top+this.window.pageYOffset,ge=this.offset();this.window.scrollTo(F-ge[0],G-ge[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const P=Zs(this.window.history)||Zs(Object.getPrototypeOf(this.window.history));return!(!P||!P.writable&&!P.set)}catch(P){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(P){return!1}}}function Zs(S){return Object.getOwnPropertyDescriptor(S,"scrollRestoration")}class Sn{}},520:(rt,ve,L)=>{L.d(ve,{JF:()=>Rr,eN:()=>oe});var T=L(9808),_=L(5e3),fe=L(9646),me=L(8306),k=L(4351),ue=L(9300),K=L(4004);class Ce{}class Fe{}class Te{constructor(z){this.normalizedNames=new Map,this.lazyUpdate=null,z?this.lazyInit="string"==typeof z?()=>{this.headers=new Map,z.split("\n").forEach(Y=>{const ke=Y.indexOf(":");if(ke>0){const Ee=Y.slice(0,ke),Re=Ee.toLowerCase(),Je=Y.slice(ke+1).trim();this.maybeSetNormalizedName(Ee,Re),this.headers.has(Re)?this.headers.get(Re).push(Je):this.headers.set(Re,[Je])}})}:()=>{this.headers=new Map,Object.keys(z).forEach(Y=>{let ke=z[Y];const Ee=Y.toLowerCase();"string"==typeof ke&&(ke=[ke]),ke.length>0&&(this.headers.set(Ee,ke),this.maybeSetNormalizedName(Y,Ee))})}:this.headers=new Map}has(z){return this.init(),this.headers.has(z.toLowerCase())}get(z){this.init();const Y=this.headers.get(z.toLowerCase());return Y&&Y.length>0?Y[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(z){return this.init(),this.headers.get(z.toLowerCase())||null}append(z,Y){return this.clone({name:z,value:Y,op:"a"})}set(z,Y){return this.clone({name:z,value:Y,op:"s"})}delete(z,Y){return this.clone({name:z,value:Y,op:"d"})}maybeSetNormalizedName(z,Y){this.normalizedNames.has(Y)||this.normalizedNames.set(Y,z)}init(){this.lazyInit&&(this.lazyInit instanceof Te?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(z=>this.applyUpdate(z)),this.lazyUpdate=null))}copyFrom(z){z.init(),Array.from(z.headers.keys()).forEach(Y=>{this.headers.set(Y,z.headers.get(Y)),this.normalizedNames.set(Y,z.normalizedNames.get(Y))})}clone(z){const Y=new Te;return Y.lazyInit=this.lazyInit&&this.lazyInit instanceof Te?this.lazyInit:this,Y.lazyUpdate=(this.lazyUpdate||[]).concat([z]),Y}applyUpdate(z){const Y=z.name.toLowerCase();switch(z.op){case"a":case"s":let ke=z.value;if("string"==typeof ke&&(ke=[ke]),0===ke.length)return;this.maybeSetNormalizedName(z.name,Y);const Ee=("a"===z.op?this.headers.get(Y):void 0)||[];Ee.push(...ke),this.headers.set(Y,Ee);break;case"d":const Re=z.value;if(Re){let Je=this.headers.get(Y);if(!Je)return;Je=Je.filter(at=>-1===Re.indexOf(at)),0===Je.length?(this.headers.delete(Y),this.normalizedNames.delete(Y)):this.headers.set(Y,Je)}else this.headers.delete(Y),this.normalizedNames.delete(Y)}}forEach(z){this.init(),Array.from(this.normalizedNames.keys()).forEach(Y=>z(this.normalizedNames.get(Y),this.headers.get(Y)))}}class ae{encodeKey(z){return $e(z)}encodeValue(z){return $e(z)}decodeKey(z){return decodeURIComponent(z)}decodeValue(z){return decodeURIComponent(z)}}const ht=/%(\d[a-f0-9])/gi,Ve={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function $e(be){return encodeURIComponent(be).replace(ht,(z,Y)=>{var ke;return null!==(ke=Ve[Y])&&void 0!==ke?ke:z})}function nt(be){return`${be}`}class De{constructor(z={}){if(this.updates=null,this.cloneFrom=null,this.encoder=z.encoder||new ae,z.fromString){if(z.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Ie(be,z){const Y=new Map;return be.length>0&&be.replace(/^\?/,"").split("&").forEach(Ee=>{const Re=Ee.indexOf("="),[Je,at]=-1==Re?[z.decodeKey(Ee),""]:[z.decodeKey(Ee.slice(0,Re)),z.decodeValue(Ee.slice(Re+1))],Kt=Y.get(Je)||[];Kt.push(at),Y.set(Je,Kt)}),Y}(z.fromString,this.encoder)}else z.fromObject?(this.map=new Map,Object.keys(z.fromObject).forEach(Y=>{const ke=z.fromObject[Y];this.map.set(Y,Array.isArray(ke)?ke:[ke])})):this.map=null}has(z){return this.init(),this.map.has(z)}get(z){this.init();const Y=this.map.get(z);return Y?Y[0]:null}getAll(z){return this.init(),this.map.get(z)||null}keys(){return this.init(),Array.from(this.map.keys())}append(z,Y){return this.clone({param:z,value:Y,op:"a"})}appendAll(z){const Y=[];return Object.keys(z).forEach(ke=>{const Ee=z[ke];Array.isArray(Ee)?Ee.forEach(Re=>{Y.push({param:ke,value:Re,op:"a"})}):Y.push({param:ke,value:Ee,op:"a"})}),this.clone(Y)}set(z,Y){return this.clone({param:z,value:Y,op:"s"})}delete(z,Y){return this.clone({param:z,value:Y,op:"d"})}toString(){return this.init(),this.keys().map(z=>{const Y=this.encoder.encodeKey(z);return this.map.get(z).map(ke=>Y+"="+this.encoder.encodeValue(ke)).join("&")}).filter(z=>""!==z).join("&")}clone(z){const Y=new De({encoder:this.encoder});return Y.cloneFrom=this.cloneFrom||this,Y.updates=(this.updates||[]).concat(z),Y}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(z=>this.map.set(z,this.cloneFrom.map.get(z))),this.updates.forEach(z=>{switch(z.op){case"a":case"s":const Y=("a"===z.op?this.map.get(z.param):void 0)||[];Y.push(nt(z.value)),this.map.set(z.param,Y);break;case"d":if(void 0===z.value){this.map.delete(z.param);break}{let ke=this.map.get(z.param)||[];const Ee=ke.indexOf(nt(z.value));-1!==Ee&&ke.splice(Ee,1),ke.length>0?this.map.set(z.param,ke):this.map.delete(z.param)}}}),this.cloneFrom=this.updates=null)}}class Ot{constructor(){this.map=new Map}set(z,Y){return this.map.set(z,Y),this}get(z){return this.map.has(z)||this.map.set(z,z.defaultValue()),this.map.get(z)}delete(z){return this.map.delete(z),this}has(z){return this.map.has(z)}keys(){return this.map.keys()}}function Pe(be){return"undefined"!=typeof ArrayBuffer&&be instanceof ArrayBuffer}function J(be){return"undefined"!=typeof Blob&&be instanceof Blob}function pe(be){return"undefined"!=typeof FormData&&be instanceof FormData}class gt{constructor(z,Y,ke,Ee){let Re;if(this.url=Y,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=z.toUpperCase(),function ft(be){switch(be){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Ee?(this.body=void 0!==ke?ke:null,Re=Ee):Re=ke,Re&&(this.reportProgress=!!Re.reportProgress,this.withCredentials=!!Re.withCredentials,Re.responseType&&(this.responseType=Re.responseType),Re.headers&&(this.headers=Re.headers),Re.context&&(this.context=Re.context),Re.params&&(this.params=Re.params)),this.headers||(this.headers=new Te),this.context||(this.context=new Ot),this.params){const Je=this.params.toString();if(0===Je.length)this.urlWithParams=Y;else{const at=Y.indexOf("?");this.urlWithParams=Y+(-1===at?"?":at<Y.length-1?"&":"")+Je}}else this.params=new De,this.urlWithParams=Y}serializeBody(){return null===this.body?null:Pe(this.body)||J(this.body)||pe(this.body)||function We(be){return"undefined"!=typeof URLSearchParams&&be instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof De?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||pe(this.body)?null:J(this.body)?this.body.type||null:Pe(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof De?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(z={}){var Y;const ke=z.method||this.method,Ee=z.url||this.url,Re=z.responseType||this.responseType,Je=void 0!==z.body?z.body:this.body,at=void 0!==z.withCredentials?z.withCredentials:this.withCredentials,Kt=void 0!==z.reportProgress?z.reportProgress:this.reportProgress;let mt=z.headers||this.headers,dr=z.params||this.params;const qn=null!==(Y=z.context)&&void 0!==Y?Y:this.context;return void 0!==z.setHeaders&&(mt=Object.keys(z.setHeaders).reduce((sr,qe)=>sr.set(qe,z.setHeaders[qe]),mt)),z.setParams&&(dr=Object.keys(z.setParams).reduce((sr,qe)=>sr.set(qe,z.setParams[qe]),dr)),new gt(ke,Ee,Je,{params:dr,headers:mt,context:qn,reportProgress:Kt,responseType:Re,withCredentials:at})}}var Oe=(()=>((Oe=Oe||{})[Oe.Sent=0]="Sent",Oe[Oe.UploadProgress=1]="UploadProgress",Oe[Oe.ResponseHeader=2]="ResponseHeader",Oe[Oe.DownloadProgress=3]="DownloadProgress",Oe[Oe.Response=4]="Response",Oe[Oe.User=5]="User",Oe))();class Tt{constructor(z,Y=200,ke="OK"){this.headers=z.headers||new Te,this.status=void 0!==z.status?z.status:Y,this.statusText=z.statusText||ke,this.url=z.url||null,this.ok=this.status>=200&&this.status<300}}class ne extends Tt{constructor(z={}){super(z),this.type=Oe.ResponseHeader}clone(z={}){return new ne({headers:z.headers||this.headers,status:void 0!==z.status?z.status:this.status,statusText:z.statusText||this.statusText,url:z.url||this.url||void 0})}}class ie extends Tt{constructor(z={}){super(z),this.type=Oe.Response,this.body=void 0!==z.body?z.body:null}clone(z={}){return new ie({body:void 0!==z.body?z.body:this.body,headers:z.headers||this.headers,status:void 0!==z.status?z.status:this.status,statusText:z.statusText||this.statusText,url:z.url||this.url||void 0})}}class de extends Tt{constructor(z){super(z,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${z.url||"(unknown url)"}`:`Http failure response for ${z.url||"(unknown url)"}: ${z.status} ${z.statusText}`,this.error=z.error||null}}function _e(be,z){return{body:z,headers:be.headers,context:be.context,observe:be.observe,params:be.params,reportProgress:be.reportProgress,responseType:be.responseType,withCredentials:be.withCredentials}}let oe=(()=>{class be{constructor(Y){this.handler=Y}request(Y,ke,Ee={}){let Re;if(Y instanceof gt)Re=Y;else{let Kt,mt;Kt=Ee.headers instanceof Te?Ee.headers:new Te(Ee.headers),Ee.params&&(mt=Ee.params instanceof De?Ee.params:new De({fromObject:Ee.params})),Re=new gt(Y,ke,void 0!==Ee.body?Ee.body:null,{headers:Kt,context:Ee.context,params:mt,reportProgress:Ee.reportProgress,responseType:Ee.responseType||"json",withCredentials:Ee.withCredentials})}const Je=(0,fe.of)(Re).pipe((0,k.b)(Kt=>this.handler.handle(Kt)));if(Y instanceof gt||"events"===Ee.observe)return Je;const at=Je.pipe((0,ue.h)(Kt=>Kt instanceof ie));switch(Ee.observe||"body"){case"body":switch(Re.responseType){case"arraybuffer":return at.pipe((0,K.U)(Kt=>{if(null!==Kt.body&&!(Kt.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Kt.body}));case"blob":return at.pipe((0,K.U)(Kt=>{if(null!==Kt.body&&!(Kt.body instanceof Blob))throw new Error("Response is not a Blob.");return Kt.body}));case"text":return at.pipe((0,K.U)(Kt=>{if(null!==Kt.body&&"string"!=typeof Kt.body)throw new Error("Response is not a string.");return Kt.body}));default:return at.pipe((0,K.U)(Kt=>Kt.body))}case"response":return at;default:throw new Error(`Unreachable: unhandled observe type ${Ee.observe}}`)}}delete(Y,ke={}){return this.request("DELETE",Y,ke)}get(Y,ke={}){return this.request("GET",Y,ke)}head(Y,ke={}){return this.request("HEAD",Y,ke)}jsonp(Y,ke){return this.request("JSONP",Y,{params:(new De).append(ke,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(Y,ke={}){return this.request("OPTIONS",Y,ke)}patch(Y,ke,Ee={}){return this.request("PATCH",Y,_e(Ee,ke))}post(Y,ke,Ee={}){return this.request("POST",Y,_e(Ee,ke))}put(Y,ke,Ee={}){return this.request("PUT",Y,_e(Ee,ke))}}return be.\u0275fac=function(Y){return new(Y||be)(_.LFG(Ce))},be.\u0275prov=_.Yz7({token:be,factory:be.\u0275fac}),be})();class Ue{constructor(z,Y){this.next=z,this.interceptor=Y}handle(z){return this.interceptor.intercept(z,this.next)}}const It=new _.OlP("HTTP_INTERCEPTORS");let an=(()=>{class be{intercept(Y,ke){return ke.handle(Y)}}return be.\u0275fac=function(Y){return new(Y||be)},be.\u0275prov=_.Yz7({token:be,factory:be.\u0275fac}),be})();const ze=/^\)\]\}',?\n/;let _n=(()=>{class be{constructor(Y){this.xhrFactory=Y}handle(Y){if("JSONP"===Y.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new me.y(ke=>{const Ee=this.xhrFactory.build();if(Ee.open(Y.method,Y.urlWithParams),Y.withCredentials&&(Ee.withCredentials=!0),Y.headers.forEach((qe,wn)=>Ee.setRequestHeader(qe,wn.join(","))),Y.headers.has("Accept")||Ee.setRequestHeader("Accept","application/json, text/plain, */*"),!Y.headers.has("Content-Type")){const qe=Y.detectContentTypeHeader();null!==qe&&Ee.setRequestHeader("Content-Type",qe)}if(Y.responseType){const qe=Y.responseType.toLowerCase();Ee.responseType="json"!==qe?qe:"text"}const Re=Y.serializeBody();let Je=null;const at=()=>{if(null!==Je)return Je;const qe=Ee.statusText||"OK",wn=new Te(Ee.getAllResponseHeaders()),St=function dt(be){return"responseURL"in be&&be.responseURL?be.responseURL:/^X-Request-URL:/m.test(be.getAllResponseHeaders())?be.getResponseHeader("X-Request-URL"):null}(Ee)||Y.url;return Je=new ne({headers:wn,status:Ee.status,statusText:qe,url:St}),Je},Kt=()=>{let{headers:qe,status:wn,statusText:St,url:Ti}=at(),Rn=null;204!==wn&&(Rn=void 0===Ee.response?Ee.responseText:Ee.response),0===wn&&(wn=Rn?200:0);let vr=wn>=200&&wn<300;if("json"===Y.responseType&&"string"==typeof Rn){const Cn=Rn;Rn=Rn.replace(ze,"");try{Rn=""!==Rn?JSON.parse(Rn):null}catch(Yt){Rn=Cn,vr&&(vr=!1,Rn={error:Yt,text:Rn})}}vr?(ke.next(new ie({body:Rn,headers:qe,status:wn,statusText:St,url:Ti||void 0})),ke.complete()):ke.error(new de({error:Rn,headers:qe,status:wn,statusText:St,url:Ti||void 0}))},mt=qe=>{const{url:wn}=at(),St=new de({error:qe,status:Ee.status||0,statusText:Ee.statusText||"Unknown Error",url:wn||void 0});ke.error(St)};let dr=!1;const qn=qe=>{dr||(ke.next(at()),dr=!0);let wn={type:Oe.DownloadProgress,loaded:qe.loaded};qe.lengthComputable&&(wn.total=qe.total),"text"===Y.responseType&&!!Ee.responseText&&(wn.partialText=Ee.responseText),ke.next(wn)},sr=qe=>{let wn={type:Oe.UploadProgress,loaded:qe.loaded};qe.lengthComputable&&(wn.total=qe.total),ke.next(wn)};return Ee.addEventListener("load",Kt),Ee.addEventListener("error",mt),Ee.addEventListener("timeout",mt),Ee.addEventListener("abort",mt),Y.reportProgress&&(Ee.addEventListener("progress",qn),null!==Re&&Ee.upload&&Ee.upload.addEventListener("progress",sr)),Ee.send(Re),ke.next({type:Oe.Sent}),()=>{Ee.removeEventListener("error",mt),Ee.removeEventListener("abort",mt),Ee.removeEventListener("load",Kt),Ee.removeEventListener("timeout",mt),Y.reportProgress&&(Ee.removeEventListener("progress",qn),null!==Re&&Ee.upload&&Ee.upload.removeEventListener("progress",sr)),Ee.readyState!==Ee.DONE&&Ee.abort()}})}}return be.\u0275fac=function(Y){return new(Y||be)(_.LFG(T.JF))},be.\u0275prov=_.Yz7({token:be,factory:be.\u0275fac}),be})();const An=new _.OlP("XSRF_COOKIE_NAME"),En=new _.OlP("XSRF_HEADER_NAME");class On{}let Jn=(()=>{class be{constructor(Y,ke,Ee){this.doc=Y,this.platform=ke,this.cookieName=Ee,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const Y=this.doc.cookie||"";return Y!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,T.Mx)(Y,this.cookieName),this.lastCookieString=Y),this.lastToken}}return be.\u0275fac=function(Y){return new(Y||be)(_.LFG(T.K0),_.LFG(_.Lbi),_.LFG(An))},be.\u0275prov=_.Yz7({token:be,factory:be.\u0275fac}),be})(),Bn=(()=>{class be{constructor(Y,ke){this.tokenService=Y,this.headerName=ke}intercept(Y,ke){const Ee=Y.url.toLowerCase();if("GET"===Y.method||"HEAD"===Y.method||Ee.startsWith("http://")||Ee.startsWith("https://"))return ke.handle(Y);const Re=this.tokenService.getToken();return null!==Re&&!Y.headers.has(this.headerName)&&(Y=Y.clone({headers:Y.headers.set(this.headerName,Re)})),ke.handle(Y)}}return be.\u0275fac=function(Y){return new(Y||be)(_.LFG(On),_.LFG(En))},be.\u0275prov=_.Yz7({token:be,factory:be.\u0275fac}),be})(),es=(()=>{class be{constructor(Y,ke){this.backend=Y,this.injector=ke,this.chain=null}handle(Y){if(null===this.chain){const ke=this.injector.get(It,[]);this.chain=ke.reduceRight((Ee,Re)=>new Ue(Ee,Re),this.backend)}return this.chain.handle(Y)}}return be.\u0275fac=function(Y){return new(Y||be)(_.LFG(Fe),_.LFG(_.zs3))},be.\u0275prov=_.Yz7({token:be,factory:be.\u0275fac}),be})(),Xn=(()=>{class be{static disable(){return{ngModule:be,providers:[{provide:Bn,useClass:an}]}}static withOptions(Y={}){return{ngModule:be,providers:[Y.cookieName?{provide:An,useValue:Y.cookieName}:[],Y.headerName?{provide:En,useValue:Y.headerName}:[]]}}}return be.\u0275fac=function(Y){return new(Y||be)},be.\u0275mod=_.oAB({type:be}),be.\u0275inj=_.cJS({providers:[Bn,{provide:It,useExisting:Bn,multi:!0},{provide:On,useClass:Jn},{provide:An,useValue:"XSRF-TOKEN"},{provide:En,useValue:"X-XSRF-TOKEN"}]}),be})(),Rr=(()=>{class be{}return be.\u0275fac=function(Y){return new(Y||be)},be.\u0275mod=_.oAB({type:be}),be.\u0275inj=_.cJS({providers:[oe,{provide:Ce,useClass:es},_n,{provide:Fe,useExisting:_n}],imports:[[Xn.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),be})()},5e3:(rt,ve,L)=>{L.d(ve,{$8M:()=>jt,$Z:()=>xp,AFp:()=>rx,AaK:()=>Ce,AsE:()=>Qu,BQk:()=>Np,CHM:()=>Zo,CRH:()=>Qy,CZH:()=>eb,CqO:()=>Pp,EJc:()=>ib,EiD:()=>e0,EpF:()=>V_,F4k:()=>IA,FYo:()=>EC,FiY:()=>du,G48:()=>fk,GfV:()=>Zp,Gpc:()=>ae,JOm:()=>Os,JVY:()=>Rf,L6k:()=>cd,LAX:()=>pu,LFG:()=>Vr,LSH:()=>xm,Lbi:()=>nb,MAs:()=>bp,NdJ:()=>B_,OlP:()=>Vt,Oqu:()=>kp,PXZ:()=>ck,Q6J:()=>F_,QGY:()=>U_,Qsj:()=>G1,R0b:()=>_i,RDi:()=>Zs,Rgc:()=>ih,SBq:()=>rc,Sil:()=>lx,Suo:()=>UC,TTD:()=>Yr,TgZ:()=>Mp,Tol:()=>X_,Udp:()=>Z_,VLi:()=>Cg,W1O:()=>lg,XFs:()=>wt,Xpm:()=>jn,Y36:()=>zd,YKP:()=>eg,YNc:()=>zu,Yjl:()=>j,Yz7:()=>se,ZZ4:()=>Ag,_Bn:()=>mC,_UZ:()=>L_,_Vd:()=>Qp,_c5:()=>Tb,_uU:()=>iy,aQg:()=>mh,c2e:()=>sx,cJS:()=>le,cg1:()=>wa,d8E:()=>dy,dDg:()=>ux,deG:()=>Xt,dqk:()=>mt,eBb:()=>cl,eFA:()=>ab,ekj:()=>Kd,g9A:()=>av,h0i:()=>sc,hGG:()=>bx,hij:()=>Qd,iGM:()=>VC,ifc:()=>Ee,ip1:()=>nx,kL8:()=>qw,lG2:()=>q,mCW:()=>gu,n5z:()=>fn,oAB:()=>Vi,oJD:()=>Sm,oxw:()=>G_,pB0:()=>da,q3G:()=>tr,q4F:()=>wC,qLn:()=>Gf,qOj:()=>Fu,qZA:()=>bl,qzn:()=>ca,s9C:()=>W_,sBO:()=>gk,sIi:()=>kd,s_b:()=>oc,soG:()=>lv,tBr:()=>cu,tb:()=>rb,tp0:()=>ld,uIk:()=>A_,vHH:()=>$e,vpe:()=>gs,wAp:()=>bt,xp6:()=>Td,yhl:()=>Of,ynx:()=>qu,z2F:()=>hv,z3N:()=>Ps,zSh:()=>g_,zs3:()=>Us});var T=L(7579),_=L(727),fe=L(8306),me=L(6451),k=L(3099);function ue(s){for(let o in s)if(s[o]===ue)return o;throw Error("Could not find renamed property on target object.")}function K(s,o){for(const l in o)o.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=o[l])}function Ce(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(Ce).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function Fe(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const Te=ue({__forward_ref__:ue});function ae(s){return s.__forward_ref__=ae,s.toString=function(){return Ce(this())},s}function Ie(s){return ht(s)?s():s}function ht(s){return"function"==typeof s&&s.hasOwnProperty(Te)&&s.__forward_ref__===ae}class $e extends Error{constructor(o,l){super(function nt(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,l)),this.code=o}}function De(s){return"string"==typeof s?s:null==s?"":String(s)}function st(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():De(s)}function J(s,o){const l=o?` in ${o}`:"";throw new $e(-201,`No provider for ${st(s)} found${l}`)}function Wt(s,o){null==s&&function Ge(s,o,l,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${l} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function se(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function le(s){return{providers:s.providers||[],imports:s.imports||[]}}function ze(s){return dt(s,On)||dt(s,Bn)}function dt(s,o){return s.hasOwnProperty(o)?s[o]:null}function En(s){return s&&(s.hasOwnProperty(Jn)||s.hasOwnProperty(es))?s[Jn]:null}const On=ue({\u0275prov:ue}),Jn=ue({\u0275inj:ue}),Bn=ue({ngInjectableDef:ue}),es=ue({ngInjectorDef:ue});var wt=(()=>((wt=wt||{})[wt.Default=0]="Default",wt[wt.Host=1]="Host",wt[wt.Self=2]="Self",wt[wt.SkipSelf=4]="SkipSelf",wt[wt.Optional=8]="Optional",wt))();let ui;function Rr(s){const o=ui;return ui=s,o}function go(s,o,l){const c=ze(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:l&wt.Optional?null:void 0!==o?o:void J(Ce(s),"Injector")}function be(s){return{toString:s}.toString()}var z=(()=>((z=z||{})[z.OnPush=0]="OnPush",z[z.Default=1]="Default",z))(),Ee=(()=>{return(s=Ee||(Ee={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Ee;var s})();const Re="undefined"!=typeof globalThis&&globalThis,Je="undefined"!=typeof window&&window,at="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,mt=Re||"undefined"!=typeof global&&global||Je||at,sr={},qe=[],wn=ue({\u0275cmp:ue}),St=ue({\u0275dir:ue}),Ti=ue({\u0275pipe:ue}),Rn=ue({\u0275mod:ue}),vr=ue({\u0275fac:ue}),Cn=ue({__NG_ELEMENT_ID__:ue});let Yt=0;function jn(s){return be(()=>{const l={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===z.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||qe,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Ee.Emulated,id:"c",styles:s.styles||qe,_:null,setInput:null,schemas:s.schemas||null,tView:null},h=s.directives,f=s.features,m=s.pipes;return c.id+=Yt++,c.inputs=ee(s.inputs,l),c.outputs=ee(s.outputs),f&&f.forEach(E=>E(c)),c.directiveDefs=h?()=>("function"==typeof h?h():h).map(Ks):null,c.pipeDefs=m?()=>("function"==typeof m?m():m).map(ts):null,c})}function Ks(s){return Q(s)||function we(s){return s[St]||null}(s)}function ts(s){return function He(s){return s[Ti]||null}(s)}const mo={};function Vi(s){return be(()=>{const o={type:s.type,bootstrap:s.bootstrap||qe,declarations:s.declarations||qe,imports:s.imports||qe,exports:s.exports||qe,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(mo[s.id]=s.type),o})}function ee(s,o){if(null==s)return sr;const l={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],f=h;Array.isArray(h)&&(f=h[1],h=h[0]),l[h]=c,o&&(o[h]=f)}return l}const q=jn;function j(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Q(s){return s[wn]||null}function Et(s,o){const l=s[Rn]||null;if(!l&&!0===o)throw new Error(`Type ${Ce(s)} does not have '\u0275mod' property.`);return l}function Fr(s){return Array.isArray(s)&&"object"==typeof s[1]}function ci(s){return Array.isArray(s)&&!0===s[1]}function ss(s){return 0!=(8&s.flags)}function $o(s){return 2==(2&s.flags)}function _o(s){return 1==(1&s.flags)}function xr(s){return null!==s.template}function Kl(s){return 0!=(512&s[2])}function os(s,o){return s.hasOwnProperty(vr)?s[vr]:null}class pr{constructor(o,l,c){this.previousValue=o,this.currentValue=l,this.firstChange=c}isFirstChange(){return this.firstChange}}function Yr(){return qo}function qo(s){return s.type.prototype.ngOnChanges&&(s.setInput=cf),uf}function uf(){const s=yo(this),o=null==s?void 0:s.current;if(o){const l=s.previous;if(l===sr)s.previous=o;else for(let c in o)l[c]=o[c];s.current=null,this.ngOnChanges(o)}}function cf(s,o,l,c){const h=yo(s)||function Mr(s,o){return s[ji]=o}(s,{previous:sr,current:null}),f=h.current||(h.current={}),m=h.previous,E=this.declaredInputs[l],b=m[E];f[E]=new pr(b&&b.currentValue,o,m===sr),s[c]=o}Yr.ngInherit=!0;const ji="__ngSimpleChanges__";function yo(s){return s[ji]||null}let za;function Zs(s){za=s}function Hi(){return void 0!==za?za:"undefined"!=typeof document?document:void 0}function Sn(s){return!!s.listen}const S={createRenderer:(s,o)=>Hi()};function D(s){for(;Array.isArray(s);)s=s[0];return s}function ge(s,o){return D(o[s])}function Me(s,o){return D(o[s.index])}function ln(s,o){return s.data[o]}function Qt(s,o){const l=o[s];return Fr(l)?l:l[0]}function tn(s){return 4==(4&s[2])}function er(s){return 128==(128&s[2])}function xn(s,o){return null==o?null:s[o]}function $i(s){s[18]=0}function Zr(s,o){s[5]+=o;let l=s,c=s[3];for(;null!==c&&(1===o&&1===l[5]||-1===o&&0===l[5]);)c[5]+=o,l=c,c=c[3]}const Ct={lFrame:Gc(null),bindingsEnabled:!0};function Lc(){return Ct.bindingsEnabled}function Ne(){return Ct.lFrame.lView}function nn(){return Ct.lFrame.tView}function Zo(s){return Ct.lFrame.contextLView=s,s[8]}function rn(){let s=Jo();for(;null!==s&&64===s.type;)s=s.parent;return s}function Jo(){return Ct.lFrame.currentTNode}function lr(s,o){const l=Ct.lFrame;l.currentTNode=s,l.isParent=o}function Hn(){return Ct.lFrame.isParent}function Vc(){Ct.lFrame.isParent=!1}function Xs(){return Ct.lFrame.bindingIndex++}function ls(s){const o=Ct.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,l}function hf(s,o){const l=Ct.lFrame;l.bindingIndex=l.bindingRootIndex=s,jc(o)}function jc(s){Ct.lFrame.currentDirectiveIndex=s}function Hc(s){const o=Ct.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}function $c(){return Ct.lFrame.currentQueryIndex}function Ya(s){Ct.lFrame.currentQueryIndex=s}function Qa(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function ea(s,o,l){if(l&wt.SkipSelf){let h=o,f=s;for(;!(h=h.parent,null!==h||l&wt.Host||(h=Qa(f),null===h||(f=f[15],10&h.type))););if(null===h)return!1;o=h,s=f}const c=Ct.lFrame=Eo();return c.currentTNode=o,c.lView=s,!0}function Za(s){const o=Eo(),l=s[1];Ct.lFrame=o,o.currentTNode=l.firstChild,o.lView=s,o.tView=l,o.contextLView=s,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function Eo(){const s=Ct.lFrame,o=null===s?null:s.child;return null===o?Gc(s):o}function Gc(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Wc(){const s=Ct.lFrame;return Ct.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const ta=Wc;function wo(){const s=Wc();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function wr(){return Ct.lFrame.selectedIndex}function Ss(s){Ct.lFrame.selectedIndex=s}function Nn(){const s=Ct.lFrame;return ln(s.tView,s.selectedIndex)}function eu(s,o){for(let l=o.directiveStart,c=o.directiveEnd;l<c;l++){const f=s.data[l].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:E,ngAfterViewInit:b,ngAfterViewChecked:M,ngOnDestroy:N}=f;m&&(s.contentHooks||(s.contentHooks=[])).push(-l,m),E&&((s.contentHooks||(s.contentHooks=[])).push(l,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,E)),b&&(s.viewHooks||(s.viewHooks=[])).push(-l,b),M&&((s.viewHooks||(s.viewHooks=[])).push(l,M),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,M)),null!=N&&(s.destroyHooks||(s.destroyHooks=[])).push(l,N)}}function Ja(s,o,l){nu(s,o,3,l)}function tu(s,o,l,c){(3&s[2])===l&&nu(s,o,l,c)}function na(s,o){let l=s[2];(3&l)===o&&(l&=2047,l+=1,s[2]=l)}function nu(s,o,l,c){const f=null!=c?c:-1,m=o.length-1;let E=0;for(let b=void 0!==c?65535&s[18]:0;b<m;b++)if("number"==typeof o[b+1]){if(E=o[b],null!=c&&E>=c)break}else o[b]<0&&(s[18]+=65536),(E<f||-1==f)&&(Yc(s,l,o,b),s[18]=(4294901760&s[18])+b+2),b++}function Yc(s,o,l,c){const h=l[c]<0,f=l[c+1],E=s[h?-l[c]:l[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{f.call(E)}finally{}}}else try{f.call(E)}finally{}}class Xa{constructor(o,l,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=c}}function el(s,o,l){const c=Sn(s);let h=0;for(;h<l.length;){const f=l[h];if("number"==typeof f){if(0!==f)break;h++;const m=l[h++],E=l[h++],b=l[h++];c?s.setAttribute(o,E,b,m):o.setAttributeNS(m,E,b)}else{const m=f,E=l[++h];tl(m)?c&&s.setProperty(o,m,E):c?s.setAttribute(o,m,E):o.setAttribute(m,E),h++}}return h}function Zc(s){return 3===s||4===s||6===s}function tl(s){return 64===s.charCodeAt(0)}function Jc(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let l=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?l=h:0===l||xs(s,l,h,null,-1===l||2===l?o[++c]:null)}}return s}function xs(s,o,l,c,h){let f=0,m=s.length;if(-1===o)m=-1;else for(;f<s.length;){const E=s[f++];if("number"==typeof E){if(E===o){m=-1;break}if(E>o){m=f-1;break}}}for(;f<s.length;){const E=s[f];if("number"==typeof E)break;if(E===l){if(null===c)return void(null!==h&&(s[f+1]=h));if(c===s[f+1])return void(s[f+2]=h)}f++,null!==c&&f++,null!==h&&f++}-1!==m&&(s.splice(m,0,o),f=m+1),s.splice(f++,0,l),null!==c&&s.splice(f++,0,c),null!==h&&s.splice(f++,0,h)}function iu(s){return-1!==s}function ra(s){return 32767&s}function ia(s,o){let l=function mm(s){return s>>16}(s),c=o;for(;l>0;)c=c[15],l--;return c}let us=!0;function sa(s){const o=us;return us=s,o}let oa=0;function Co(s,o){const l=td(s,o);if(-1!==l)return l;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,ed(c.data,s),ed(o,null),ed(c.blueprint,null));const h=rl(s,o),f=s.injectorIndex;if(iu(h)){const m=ra(h),E=ia(h,o),b=E[1].data;for(let M=0;M<8;M++)o[f+M]=E[m+M]|b[m+M]}return o[f+8]=h,f}function ed(s,o){s.push(0,0,0,0,0,0,0,0,o)}function td(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function rl(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,c=null,h=o;for(;null!==h;){const f=h[1],m=f.type;if(c=2===m?f.declTNode:1===m?h[6]:null,null===c)return-1;if(l++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|l<<16}return-1}function aa(s,o,l){!function Ef(s,o,l){let c;"string"==typeof l?c=l.charCodeAt(0)||0:l.hasOwnProperty(Cn)&&(c=l[Cn]),null==c&&(c=l[Cn]=oa++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,l)}function w(s,o,l){if(l&wt.Optional)return s;J(o,"NodeInjector")}function v(s,o,l,c){if(l&wt.Optional&&void 0===c&&(c=null),0==(l&(wt.Self|wt.Host))){const h=s[9],f=Rr(void 0);try{return h?h.get(o,c,l&wt.Optional):go(o,c,l&wt.Optional)}finally{Rr(f)}}return w(c,o,l)}function y(s,o,l,c=wt.Default,h){if(null!==s){const f=function ce(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Cn)?s[Cn]:void 0;return"number"==typeof o?o>=0?255&o:x:o}(l);if("function"==typeof f){if(!ea(o,s,c))return c&wt.Host?w(h,l,c):v(o,l,c,h);try{const m=f(c);if(null!=m||c&wt.Optional)return m;J(l)}finally{ta()}}else if("number"==typeof f){let m=null,E=td(s,o),b=-1,M=c&wt.Host?o[16][6]:null;for((-1===E||c&wt.SkipSelf)&&(b=-1===E?rl(s,o):o[E+8],-1!==b&&Rt(c,!1)?(m=o[1],E=ra(b),o=ia(b,o)):E=-1);-1!==E;){const N=o[1];if(Xe(f,E,N.data)){const V=O(E,o,l,m,c,M);if(V!==I)return V}b=o[E+8],-1!==b&&Rt(c,o[1].data[E+8]===M)&&Xe(f,E,o)?(m=N,E=ra(b),o=ia(b,o)):E=-1}}}return v(o,l,c,h)}const I={};function x(){return new tt(rn(),Ne())}function O(s,o,l,c,h,f){const m=o[1],E=m.data[s+8],N=B(E,m,l,null==c?$o(E)&&us:c!=m&&0!=(3&E.type),h&wt.Host&&f===E);return null!==N?$(o,m,N,E):I}function B(s,o,l,c,h){const f=s.providerIndexes,m=o.data,E=1048575&f,b=s.directiveStart,N=f>>20,W=h?E+N:s.directiveEnd;for(let X=c?E:E+N;X<W;X++){const ye=m[X];if(X<b&&l===ye||X>=b&&ye.type===l)return X}if(h){const X=m[b];if(X&&xr(X)&&X.type===l)return b}return null}function $(s,o,l,c){let h=s[l];const f=o.data;if(function Qc(s){return s instanceof Xa}(h)){const m=h;m.resolving&&function Ot(s,o){const l=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new $e(-200,`Circular dependency in DI detected for ${s}${l}`)}(st(f[l]));const E=sa(m.canSeeViewProviders);m.resolving=!0;const b=m.injectImpl?Rr(m.injectImpl):null;ea(s,c,wt.Default);try{h=s[l]=m.factory(void 0,f,s,c),o.firstCreatePass&&l>=c.directiveStart&&function Kc(s,o,l){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:f}=o.type.prototype;if(c){const m=qo(o);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,m),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,m)}h&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,h),f&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,f),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,f))}(l,f[l],o)}finally{null!==b&&Rr(b),sa(E),m.resolving=!1,ta()}}return h}function Xe(s,o,l){return!!(l[o+(s>>5)]&1<<s)}function Rt(s,o){return!(s&wt.Self||s&wt.Host&&o)}class tt{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,c){return y(this._tNode,this._lView,o,c,l)}}function fn(s){return be(()=>{const o=s.prototype.constructor,l=o[vr]||on(o),c=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==c;){const f=h[vr]||on(h);if(f&&f!==l)return f;h=Object.getPrototypeOf(h)}return f=>new f})}function on(s){return ht(s)?()=>{const o=on(Ie(s));return o&&o()}:os(s)}function jt(s){return function _m(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const l=s.attrs;if(l){const c=l.length;let h=0;for(;h<c;){const f=l[h];if(Zc(f))break;if(0===f)h+=2;else if("number"==typeof f)for(h++;h<c&&"string"==typeof l[h];)h++;else{if(f===o)return l[h+1];h+=2}}}return null}(rn(),s)}const xt="__parameters__";function su(s,o,l){return be(()=>{const c=function il(s){return function(...l){if(s){const c=s(...l);for(const h in c)this[h]=c[h]}}}(o);function h(...f){if(this instanceof h)return c.apply(this,f),this;const m=new h(...f);return E.annotation=m,E;function E(b,M,N){const V=b.hasOwnProperty(xt)?b[xt]:Object.defineProperty(b,xt,{value:[]})[xt];for(;V.length<=N;)V.push(null);return(V[N]=V[N]||[]).push(m),b}}return l&&(h.prototype=Object.create(l.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class Vt{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=se({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Xt=new Vt("AnalyzeForEntryComponents");function cs(s,o){void 0===o&&(o=s);for(let l=0;l<s.length;l++){let c=s[l];Array.isArray(c)?(o===s&&(o=s.slice(0,l)),cs(c,o)):o!==s&&o.push(c)}return o}function no(s,o){s.forEach(l=>Array.isArray(l)?no(l,o):o(l))}function VE(s,o,l){o>=s.length?s.push(l):s.splice(o,0,l)}function id(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Zn(s,o,l){let c=Cr(s,o);return c>=0?s[1|c]=l:(c=~c,function bf(s,o,l,c){let h=s.length;if(h==o)s.push(l,c);else if(1===h)s.push(c,s[0]),s[0]=l;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=l,s[o+1]=c}}(s,c,o,l)),c}function ym(s,o){const l=Cr(s,o);if(l>=0)return s[1|l]}function Cr(s,o){return function Tf(s,o,l){let c=0,h=s.length>>l;for(;h!==c;){const f=c+(h-c>>1),m=s[f<<l];if(o===m)return f<<l;m>o?h=f:c=f+1}return~(h<<l)}(s,o,1)}const ad={},Em="__NG_DI_FLAG__",Dn="ngTempTokenPath",PI=/\n/gm,Af="__source",ou=ue({provide:String,useValue:ue});let Wi;function au(s){const o=Wi;return Wi=s,o}function Ht(s,o=wt.Default){if(void 0===Wi)throw new $e(203,"");return null===Wi?go(s,void 0,o):Wi.get(s,o&wt.Optional?null:void 0,o)}function Vr(s,o=wt.Default){return(function Xn(){return ui}()||Ht)(Ie(s),o)}const OI=Vr;function Un(s){const o=[];for(let l=0;l<s.length;l++){const c=Ie(s[l]);if(Array.isArray(c)){if(0===c.length)throw new $e(900,"");let h,f=wt.Default;for(let m=0;m<c.length;m++){const E=c[m],b=RI(E);"number"==typeof b?-1===b?h=E.token:f|=b:h=E}o.push(Vr(h,f))}else o.push(Vr(c))}return o}function ol(s,o){return s[Em]=o,s.prototype[Em]=o,s}function RI(s){return s[Em]}const cu=ol(su("Inject",s=>({token:s})),-1),du=ol(su("Optional"),8),ld=ol(su("SkipSelf"),4);let xf,ll;function al(s){var o;return(null===(o=function fu(){if(void 0===xf&&(xf=null,mt.trustedTypes))try{xf=mt.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return xf}())||void 0===o?void 0:o.createHTML(s))||s}function Nf(s){var o;return(null===(o=function ua(){if(void 0===ll&&(ll=null,mt.trustedTypes))try{ll=mt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return ll}())||void 0===o?void 0:o.createHTML(s))||s}class ul{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class qE extends ul{getTypeName(){return"HTML"}}class UI extends ul{getTypeName(){return"Style"}}class BI extends ul{getTypeName(){return"Script"}}class jI extends ul{getTypeName(){return"URL"}}class ds extends ul{getTypeName(){return"ResourceURL"}}function Ps(s){return s instanceof ul?s.changingThisBreaksApplicationSecurity:s}function ca(s,o){const l=Of(s);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===o}function Of(s){return s instanceof ul&&s.getTypeName()||null}function Rf(s){return new qE(s)}function cd(s){return new UI(s)}function cl(s){return new BI(s)}function pu(s){return new jI(s)}function da(s){return new ds(s)}class HI{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const l=(new window.DOMParser).parseFromString(al(o),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(o):(l.removeChild(l.firstChild),l)}catch(l){return null}}}class dd{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const c=this.inertDocument.createElement("body");l.appendChild(c)}}getInertBodyElement(o){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=al(o),l;const c=this.inertDocument.createElement("body");return c.innerHTML=al(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(o){const l=o.attributes;for(let h=l.length-1;0<h;h--){const m=l.item(h).name;("xmlns:ns1"===m||0===m.indexOf("ns1:"))&&o.removeAttribute(m)}let c=o.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const GI=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,hd=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function gu(s){return(s=String(s)).match(GI)||s.match(hd)?s:"unsafe:"+s}function Xr(s){const o={};for(const l of s.split(","))o[l]=!0;return o}function dl(...s){const o={};for(const l of s)for(const c in l)l.hasOwnProperty(c)&&(o[c]=!0);return o}const YE=Xr("area,br,col,hr,img,wbr"),Pn=Xr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),hs=Xr("rp,rt"),pd=dl(YE,dl(Pn,Xr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),dl(hs,Xr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),dl(hs,Pn)),Ao=Xr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ff=Xr("srcset"),fl=dl(Ao,Ff,Xr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Xr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),JE=Xr("script,style,template");class Lf{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let l=o.firstChild,c=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?c=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,c&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let h=this.checkClobberedElement(l,l.nextSibling);if(h){l=h;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(o){const l=o.nodeName.toLowerCase();if(!pd.hasOwnProperty(l))return this.sanitizedSomething=!0,!JE.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const c=o.attributes;for(let h=0;h<c.length;h++){const f=c.item(h),m=f.name,E=m.toLowerCase();if(!fl.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let b=f.value;Ao[E]&&(b=gu(b)),Ff[E]&&(s=b,b=(s=String(s)).split(",").map(o=>gu(o.trim())).join(", ")),this.buf.push(" ",m,'="',XE(b),'"')}var s;return this.buf.push(">"),!0}endElement(o){const l=o.nodeName.toLowerCase();pd.hasOwnProperty(l)&&!YE.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(o){this.buf.push(XE(o))}checkClobberedElement(o,l){if(l&&(o.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return l}}const zI=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,qI=/([^\#-~ |!])/g;function XE(s){return s.replace(/&/g,"&amp;").replace(zI,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(qI,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Vf;function e0(s,o){let l=null;try{Vf=Vf||function KE(s){const o=new dd(s);return function $I(){try{return!!(new window.DOMParser).parseFromString(al(""),"text/html")}catch(s){return!1}}()?new HI(o):o}(s);let c=o?String(o):"";l=Vf.getInertBodyElement(c);let h=5,f=c;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,c=f,f=l.innerHTML,l=Vf.getInertBodyElement(c)}while(c!==f);return al((new Lf).sanitizeChildren(Am(l)||l))}finally{if(l){const c=Am(l)||l;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function Am(s){return"content"in s&&function KI(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var tr=(()=>((tr=tr||{})[tr.NONE=0]="NONE",tr[tr.HTML=1]="HTML",tr[tr.STYLE=2]="STYLE",tr[tr.SCRIPT=3]="SCRIPT",tr[tr.URL=4]="URL",tr[tr.RESOURCE_URL=5]="RESOURCE_URL",tr))();function Sm(s){const o=gd();return o?Nf(o.sanitize(tr.HTML,s)||""):ca(s,"HTML")?Nf(Ps(s)):e0(Hi(),De(s))}function xm(s){const o=gd();return o?o.sanitize(tr.URL,s)||"":ca(s,"URL")?Ps(s):gu(De(s))}function gd(){const s=Ne();return s&&s[12]}const n0="__ngContext__";function ei(s,o){s[n0]=o}function md(s){const o=function mu(s){return s[n0]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function km(s){return s.ngOriginalError}function oD(s,...o){s.error(...o)}class Gf{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o),c=function sD(s){return s&&s.ngErrorLogger||oD}(o);c(this._console,"ERROR",o),l&&c(this._console,"ORIGINAL ERROR",l)}_findOriginalError(o){let l=o&&km(o);for(;l&&km(l);)l=km(l);return l||null}}const dD=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(mt))();function ro(s){return s instanceof Function?s():s}var Os=(()=>((Os=Os||{})[Os.Important=1]="Important",Os[Os.DashCase=2]="DashCase",Os))();function _u(s,o){return undefined(s,o)}function _d(s){const o=s[3];return ci(o)?o[3]:o}function yd(s){return xo(s[13])}function Um(s){return xo(s[4])}function xo(s){for(;null!==s&&!ci(s);)s=s[4];return s}function yu(s,o,l,c,h){if(null!=c){let f,m=!1;ci(c)?f=c:Fr(c)&&(m=!0,c=c[0]);const E=D(c);0===s&&null!==l?null==h?g0(o,l,E):Rs(o,l,E,h||null,!0):1===s&&null!==l?Rs(o,l,E,h||null,!0):2===s?function ha(s,o,l){const c=Cu(s,o);c&&function yD(s,o,l,c){Sn(s)?s.removeChild(o,l,c):o.removeChild(l)}(s,c,o,l)}(o,E,m):3===s&&o.destroyNode(E),null!=f&&function v0(s,o,l,c,h){const f=l[7];f!==D(l)&&yu(o,s,c,f,h);for(let E=10;E<l.length;E++){const b=l[E];Du(b[1],b,s,o,c,f)}}(o,s,f,l,h)}}function Yf(s,o,l){if(Sn(s))return s.createElement(o,l);{const c=null!==l?function Ko(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(l):null;return null===c?s.createElement(o):s.createElementNS(c,o)}}function Hm(s,o){const l=s[9],c=l.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,Zr(h,-1)),l.splice(c,1)}function Zf(s,o){if(s.length<=10)return;const l=10+o,c=s[l];if(c){const h=c[17];null!==h&&h!==s&&Hm(h,c),o>0&&(s[l-1][4]=c[4]);const f=id(s,10+o);!function mD(s,o){Du(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const m=f[19];null!==m&&m.detachView(f[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function Eu(s,o){if(!(256&o[2])){const l=o[11];Sn(l)&&l.destroyNode&&Du(s,o,l,3,null,null),function _D(s){let o=s[13];if(!o)return wu(s[1],s);for(;o;){let l=null;if(Fr(o))l=o[13];else{const c=o[10];c&&(l=c)}if(!l){for(;o&&!o[4]&&o!==s;)Fr(o)&&wu(o[1],o),o=o[3];null===o&&(o=s),Fr(o)&&wu(o[1],o),l=o&&o[4]}o=l}}(o)}}function wu(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function Gm(s,o){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let c=0;c<l.length;c+=2){const h=o[l[c]];if(!(h instanceof Xa)){const f=l[c+1];if(Array.isArray(f))for(let m=0;m<f.length;m+=2){const E=h[f[m]],b=f[m+1];try{b.call(E)}finally{}}else try{f.call(h)}finally{}}}}(s,o),function $m(s,o){const l=s.cleanup,c=o[7];let h=-1;if(null!==l)for(let f=0;f<l.length-1;f+=2)if("string"==typeof l[f]){const m=l[f+1],E="function"==typeof m?m(o):D(o[m]),b=c[h=l[f+2]],M=l[f+3];"boolean"==typeof M?E.removeEventListener(l[f],b,M):M>=0?c[h=M]():c[h=-M].unsubscribe(),f+=2}else{const m=c[h=l[f+1]];l[f].call(m)}if(null!==c){for(let f=h+1;f<c.length;f++)c[f]();o[7]=null}}(s,o),1===o[1].type&&Sn(o[11])&&o[11].destroy();const l=o[17];if(null!==l&&ci(o[3])){l!==o[3]&&Hm(l,o);const c=o[19];null!==c&&c.detachView(s)}}}function Jf(s,o,l){return function p0(s,o,l){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return l[0];if(2&c.flags){const h=s.data[c.directiveStart].encapsulation;if(h===Ee.None||h===Ee.Emulated)return null}return Me(c,l)}(s,o.parent,l)}function Rs(s,o,l,c,h){Sn(s)?s.insertBefore(o,l,c,h):o.insertBefore(l,c,h)}function g0(s,o,l){Sn(s)?s.appendChild(o,l):o.appendChild(l)}function m0(s,o,l,c,h){null!==c?Rs(s,o,l,c,h):g0(s,o,l)}function Cu(s,o){return Sn(s)?s.parentNode(o):o.parentNode}let y0=function zm(s,o,l){return 40&s.type?Me(s,l):null};function bu(s,o,l,c){const h=Jf(s,c,o),f=o[11],E=function _0(s,o,l){return y0(s,o,l)}(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(l))for(let b=0;b<l.length;b++)m0(f,h,l[b],E,!1);else m0(f,h,l,E,!1)}function Tu(s,o){if(null!==o){const l=o.type;if(3&l)return Me(o,s);if(4&l)return Iu(-1,s[o.index]);if(8&l){const c=o.child;if(null!==c)return Tu(s,c);{const h=s[o.index];return ci(h)?Iu(-1,h):D(h)}}if(32&l)return _u(o,s)()||D(s[o.index]);{const c=Xf(s,o);return null!==c?Array.isArray(c)?c[0]:Tu(_d(s[16]),c):Tu(s,o.next)}}return null}function Xf(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Iu(s,o){const l=10+s+1;if(l<o.length){const c=o[l],h=c[1].firstChild;if(null!==h)return Tu(c,h)}return o[7]}function vd(s,o,l,c,h,f,m){for(;null!=l;){const E=c[l.index],b=l.type;if(m&&0===o&&(E&&ei(D(E),c),l.flags|=4),64!=(64&l.flags))if(8&b)vd(s,o,l.child,c,h,f,!1),yu(o,s,h,E,f);else if(32&b){const M=_u(l,c);let N;for(;N=M();)yu(o,s,h,N,f);yu(o,s,h,E,f)}else 16&b?Ed(s,o,c,l,h,f):yu(o,s,h,E,f);l=m?l.projectionNext:l.next}}function Du(s,o,l,c,h,f){vd(l,c,s.firstChild,o,h,f,!1)}function Ed(s,o,l,c,h,f){const m=l[16],b=m[6].projection[c.projection];if(Array.isArray(b))for(let M=0;M<b.length;M++)yu(o,s,h,b[M],f);else vd(s,o,b,m[3],h,f,!0)}function Au(s,o,l){Sn(s)?s.setAttribute(o,"style",l):o.style.cssText=l}function wd(s,o,l){Sn(s)?""===l?s.removeAttribute(o,"class"):s.setAttribute(o,"class",l):o.className=l}function E0(s,o,l){let c=s.length;for(;;){const h=s.indexOf(o,l);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const f=o.length;if(h+f===c||s.charCodeAt(h+f)<=32)return h}l=h+1}}const w0="ng-template";function Ym(s,o,l){let c=0;for(;c<s.length;){let h=s[c++];if(l&&"class"===h){if(h=s[c],-1!==E0(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function Cd(s){return 4===s.type&&s.value!==w0}function C0(s,o,l){return o===(4!==s.type||l?s.value:w0)}function wD(s,o,l){let c=4;const h=s.attrs||[],f=function b0(s){for(let o=0;o<s.length;o++)if(Zc(s[o]))return o;return s.length}(h);let m=!1;for(let E=0;E<o.length;E++){const b=o[E];if("number"!=typeof b){if(!m)if(4&c){if(c=2|1&c,""!==b&&!C0(s,b,l)||""===b&&1===o.length){if(fi(c))return!1;m=!0}}else{const M=8&c?b:o[++E];if(8&c&&null!==s.attrs){if(!Ym(s.attrs,M,l)){if(fi(c))return!1;m=!0}continue}const V=so(8&c?"class":b,h,Cd(s),l);if(-1===V){if(fi(c))return!1;m=!0;continue}if(""!==M){let W;W=V>f?"":h[V+1].toLowerCase();const X=8&c?W:null;if(X&&-1!==E0(X,M,0)||2&c&&M!==W){if(fi(c))return!1;m=!0}}}}else{if(!m&&!fi(c)&&!fi(b))return!1;if(m&&fi(b))continue;m=!1,c=b|1&c}}return fi(c)||m}function fi(s){return 0==(1&s)}function so(s,o,l,c){if(null===o)return-1;let h=0;if(c||!l){let f=!1;for(;h<o.length;){const m=o[h];if(m===s)return h;if(3===m||6===m)f=!0;else{if(1===m||2===m){let E=o[++h];for(;"string"==typeof E;)E=o[++h];continue}if(4===m)break;if(0===m){h+=4;continue}}h+=f?1:2}return-1}return function Qm(s,o){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const c=s[l];if("number"==typeof c)return-1;if(c===o)return l;l++}return-1}(o,s)}function Su(s,o,l=!1){for(let c=0;c<o.length;c++)if(wD(s,o[c],l))return!0;return!1}function ep(s,o){return s?":not("+o.trim()+")":o}function bD(s){let o=s[0],l=1,c=2,h="",f=!1;for(;l<s.length;){let m=s[l];if("string"==typeof m)if(2&c){const E=s[++l];h+="["+m+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?h+="."+m:4&c&&(h+=" "+m);else""!==h&&!fi(m)&&(o+=ep(f,h),h=""),c=m,f=f||!fi(c);l++}return""!==h&&(o+=ep(f,h)),o}const Ut={};function Td(s){Zm(nn(),Ne(),wr()+s,!1)}function Zm(s,o,l,c){if(!c)if(3==(3&o[2])){const f=s.preOrderCheckHooks;null!==f&&Ja(o,f,l)}else{const f=s.preOrderHooks;null!==f&&tu(o,f,0,l)}Ss(l)}function Id(s,o){return s<<17|o<<2}function ks(s){return s>>17&32767}function Xm(s){return 2|s}function Mo(s){return(131068&s)>>2}function tp(s,o){return-131069&s|o<<2}function np(s){return 1|s}function lp(s,o){const l=s.contentQueries;if(null!==l)for(let c=0;c<l.length;c+=2){const h=l[c],f=l[c+1];if(-1!==f){const m=s.data[f];Ya(h),m.contentQueries(2,o[f],f)}}}function up(s,o,l,c,h,f,m,E,b,M){const N=o.blueprint.slice();return N[0]=h,N[2]=140|c,$i(N),N[3]=N[15]=s,N[8]=l,N[10]=m||s&&s[10],N[11]=E||s&&s[11],N[12]=b||s&&s[12]||null,N[9]=M||s&&s[9]||null,N[6]=f,N[16]=2==o.type?s[16]:N,N}function Pu(s,o,l,c,h){let f=s.data[o];if(null===f)f=function N0(s,o,l,c,h){const f=Jo(),m=Hn(),b=s.data[o]=function P0(s,o,l,c,h,f){return{type:l,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?f:f&&f.parent,l,o,c,h);return null===s.firstChild&&(s.firstChild=b),null!==f&&(m?null==f.child&&null!==b.parent&&(f.child=b):null===f.next&&(f.next=b)),b}(s,o,l,c,h),function gr(){return Ct.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=l,f.value=c,f.attrs=h;const m=function as(){const s=Ct.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();f.injectorIndex=null===m?-1:m.injectorIndex}return lr(f,!0),f}function pa(s,o,l,c){if(0===l)return-1;const h=o.length;for(let f=0;f<l;f++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function cp(s,o,l){Za(o);try{const c=s.viewQuery;null!==c&&U0(1,c,l);const h=s.template;null!==h&&kD(s,o,h,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&lp(s,o),s.staticViewQueries&&U0(2,s.viewQuery,l);const f=s.components;null!==f&&function Nu(s,o){for(let l=0;l<o.length;l++)L0(s,o[l])}(o,f)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,wo()}}function Md(s,o,l,c){const h=o[2];if(256!=(256&h)){Za(o);try{$i(o),function Xo(s){return Ct.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&kD(s,o,l,2,c);const m=3==(3&h);if(m){const M=s.preOrderCheckHooks;null!==M&&Ja(o,M,null)}else{const M=s.preOrderHooks;null!==M&&tu(o,M,0,null),na(o,0)}if(function k0(s){for(let o=yd(s);null!==o;o=Um(o)){if(!o[2])continue;const l=o[9];for(let c=0;c<l.length;c++){const h=l[c],f=h[3];0==(1024&h[2])&&Zr(f,1),h[2]|=1024}}}(o),function XD(s){for(let o=yd(s);null!==o;o=Um(o))for(let l=10;l<o.length;l++){const c=o[l],h=c[1];er(c)&&Md(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&lp(s,o),m){const M=s.contentCheckHooks;null!==M&&Ja(o,M)}else{const M=s.contentHooks;null!==M&&tu(o,M,1),na(o,1)}!function ml(s,o){const l=s.hostBindingOpCodes;if(null!==l)try{for(let c=0;c<l.length;c++){const h=l[c];if(h<0)Ss(~h);else{const f=h,m=l[++c],E=l[++c];hf(m,f),E(2,o[f])}}}finally{Ss(-1)}}(s,o);const E=s.components;null!==E&&function i1(s,o){for(let l=0;l<o.length;l++)g1(s,o[l])}(o,E);const b=s.viewQuery;if(null!==b&&U0(2,b,c),m){const M=s.viewCheckHooks;null!==M&&Ja(o,M)}else{const M=s.viewHooks;null!==M&&tu(o,M,2),na(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-73,1024&o[2]&&(o[2]&=-1025,Zr(o[3],-1))}finally{wo()}}}function s1(s,o,l,c){const h=o[10],m=tn(o);try{!m&&h.begin&&h.begin(),m&&cp(s,o,c),Md(s,o,l,c)}finally{!m&&h.end&&h.end()}}function kD(s,o,l,c,h){const f=wr(),m=2&c;try{Ss(-1),m&&o.length>20&&Zm(s,o,20,!1),l(c,h)}finally{Ss(f)}}function Ou(s,o,l){if(ss(o)){const h=o.directiveEnd;for(let f=o.directiveStart;f<h;f++){const m=s.data[f];m.contentQueries&&m.contentQueries(1,l[f],f)}}}function Ru(s,o,l){!Lc()||(function h1(s,o,l,c){const h=l.directiveStart,f=l.directiveEnd;s.firstCreatePass||Co(l,o),ei(c,o);const m=l.initialInputs;for(let E=h;E<f;E++){const b=s.data[E],M=xr(b);M&&u_(o,l,b);const N=$(o,s,E,l);ei(N,o),null!==m&&ZD(0,E-h,N,b,0,m),M&&(Qt(l.index,o)[8]=N)}}(s,o,l,Me(l,o)),128==(128&l.flags)&&function WD(s,o,l){const c=l.directiveStart,h=l.directiveEnd,m=l.index,E=function gm(){return Ct.lFrame.currentDirectiveIndex}();try{Ss(m);for(let b=c;b<h;b++){const M=s.data[b],N=o[b];jc(b),(null!==M.hostBindings||0!==M.hostVars||null!==M.hostAttrs)&&zD(M,N)}}finally{Ss(-1),jc(E)}}(s,o,l))}function _l(s,o,l=Me){const c=o.localNames;if(null!==c){let h=o.index+1;for(let f=0;f<c.length;f+=2){const m=c[f+1],E=-1===m?l(o,s):s[m];s[h++]=E}}}function o_(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=a_(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function a_(s,o,l,c,h,f,m,E,b,M){const N=20+c,V=N+h,W=function o1(s,o){const l=[];for(let c=0;c<o;c++)l.push(c<s?null:Ut);return l}(N,V),X="function"==typeof M?M():M;return W[1]={type:s,blueprint:W,template:l,queries:null,viewQuery:E,declTNode:o,data:W.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:b,consts:X,incompleteFirstPass:!1}}function VD(s,o,l,c){const h=Nd(o);null===l?h.push(c):(h.push(l),s.firstCreatePass&&B0(s).push(c,h.length-1))}function UD(s,o,l){for(let c in s)if(s.hasOwnProperty(c)){const h=s[c];(l=null===l?{}:l).hasOwnProperty(c)?l[c].push(o,h):l[c]=[o,h]}return l}function xi(s,o,l,c,h,f,m,E){const b=Me(o,l);let N,M=o.inputs;!E&&null!=M&&(N=M[c])?(j0(s,l,N,c,h),$o(o)&&function l1(s,o){const l=Qt(o,s);16&l[2]||(l[2]|=64)}(l,o.index)):3&o.type&&(c=function a1(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=m?m(h,o.value||"",c):h,Sn(f)?f.setProperty(b,c,h):tl(c)||(b.setProperty?b.setProperty(c,h):b[c]=h))}function l_(s,o,l,c){let h=!1;if(Lc()){const f=function qD(s,o,l){const c=s.directiveRegistry;let h=null;if(c)for(let f=0;f<c.length;f++){const m=c[f];Su(l,m.selectors,!1)&&(h||(h=[]),aa(Co(l,o),s,m.type),xr(m)?(KD(s,l),h.unshift(m)):h.push(m))}return h}(s,o,l),m=null===c?null:{"":-1};if(null!==f){h=!0,QD(l,s.data.length,f.length);for(let N=0;N<f.length;N++){const V=f[N];V.providersResolver&&V.providersResolver(V)}let E=!1,b=!1,M=pa(s,o,f.length,null);for(let N=0;N<f.length;N++){const V=f[N];l.mergedAttrs=Jc(l.mergedAttrs,V.hostAttrs),O0(s,l,o,M,V),f1(M,V,m),null!==V.contentQueries&&(l.flags|=8),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(l.flags|=128);const W=V.type.prototype;!E&&(W.ngOnChanges||W.ngOnInit||W.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),E=!0),!b&&(W.ngOnChanges||W.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),b=!0),M++}!function BD(s,o){const c=o.directiveEnd,h=s.data,f=o.attrs,m=[];let E=null,b=null;for(let M=o.directiveStart;M<c;M++){const N=h[M],V=N.inputs,W=null===f||Cd(o)?null:JD(V,f);m.push(W),E=UD(V,M,E),b=UD(N.outputs,M,b)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=m,o.inputs=E,o.outputs=b}(s,l)}m&&function YD(s,o,l){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const f=l[o[h+1]];if(null==f)throw new $e(-301,!1);c.push(o[h],f)}}}(l,c,m)}return l.mergedAttrs=Jc(l.mergedAttrs,l.attrs),h}function $D(s,o,l,c,h,f){const m=f.hostBindings;if(m){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const b=~o.index;(function GD(s){let o=s.length;for(;o>0;){const l=s[--o];if("number"==typeof l&&l<0)return l}return 0})(E)!=b&&E.push(b),E.push(c,h,m)}}function zD(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function KD(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function f1(s,o,l){if(l){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)l[o.exportAs[c]]=s;xr(o)&&(l[""]=s)}}function QD(s,o,l){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+l,s.providerIndexes=o}function O0(s,o,l,c,h){s.data[c]=h;const f=h.factory||(h.factory=os(h.type)),m=new Xa(f,xr(h),null);s.blueprint[c]=m,l[c]=m,$D(s,o,0,c,pa(s,l,h.hostVars,Ut),h)}function u_(s,o,l){const c=Me(o,s),h=o_(l),f=s[10],m=d_(s,up(s,h,null,l.onPush?64:16,c,o,f,f.createRenderer(c,l),null,null));s[o.index]=m}function Ls(s,o,l,c,h,f){const m=Me(s,o);!function c_(s,o,l,c,h,f,m){if(null==f)Sn(s)?s.removeAttribute(o,h,l):o.removeAttribute(h);else{const E=null==m?De(f):m(f,c||"",h);Sn(s)?s.setAttribute(o,h,E,l):l?o.setAttributeNS(l,h,E):o.setAttribute(h,E)}}(o[11],m,f,s.value,l,c,h)}function ZD(s,o,l,c,h,f){const m=f[o];if(null!==m){const E=c.setInput;for(let b=0;b<m.length;){const M=m[b++],N=m[b++],V=m[b++];null!==E?c.setInput(l,V,M,N):l[N]=V}}}function JD(s,o){let l=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===l&&(l=[]),l.push(h,s[h],o[c+1])),c+=2}else c+=2;else c+=4}return l}function R0(s,o,l,c){return new Array(s,!0,!1,o,null,0,c,l,null,null)}function g1(s,o){const l=Qt(o,s);if(er(l)){const c=l[1];80&l[2]?Md(c,l,c.template,l[8]):l[5]>0&&F0(l)}}function F0(s){for(let c=yd(s);null!==c;c=Um(c))for(let h=10;h<c.length;h++){const f=c[h];if(1024&f[2]){const m=f[1];Md(m,f,m.template,f[8])}else f[5]>0&&F0(f)}const l=s[1].components;if(null!==l)for(let c=0;c<l.length;c++){const h=Qt(l[c],s);er(h)&&h[5]>0&&F0(h)}}function L0(s,o){const l=Qt(o,s),c=l[1];(function m1(s,o){for(let l=o.length;l<s.blueprint.length;l++)o.push(s.blueprint[l])})(c,l),cp(c,l,l[8])}function d_(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function V0(s){for(;s;){s[2]|=64;const o=_d(s);if(Kl(s)&&!o)return s;s=o}return null}function eA(s){!function h_(s){for(let o=0;o<s.components.length;o++){const l=s.components[o],c=md(l),h=c[1];s1(h,c,h.template,l)}}(s[8])}function U0(s,o,l){Ya(0),o(s,l)}const v1=(()=>Promise.resolve(null))();function Nd(s){return s[7]||(s[7]=[])}function B0(s){return s.cleanup||(s.cleanup=[])}function fs(s,o){const l=s[9],c=l?l.get(Gf,null):null;c&&c.handleError(o)}function j0(s,o,l,c,h){for(let f=0;f<l.length;){const m=l[f++],E=l[f++],b=o[m],M=s.data[m];null!==M.setInput?M.setInput(b,h,c,E):b[E]=h}}function Mi(s,o,l){const c=ge(o,s);!function h0(s,o,l){Sn(s)?s.setValue(o,l):o.textContent=l}(s[11],c,l)}function hp(s,o,l){let c=l?s.styles:null,h=l?s.classes:null,f=0;if(null!==o)for(let m=0;m<o.length;m++){const E=o[m];"number"==typeof E?f=E:1==f?h=Fe(h,E):2==f&&(c=Fe(c,E+": "+o[++m]+";"))}l?s.styles=c:s.stylesWithoutHost=c,l?s.classes=h:s.classesWithoutHost=h}const fp=new Vt("INJECTOR",-1);class $0{get(o,l=ad){if(l===ad){const c=new Error(`NullInjectorError: No provider for ${Ce(o)}!`);throw c.name="NullInjectorError",c}return l}}const g_=new Vt("Set Injector scope."),ga={},G0={};let Oo;function Vs(){return void 0===Oo&&(Oo=new $0),Oo}function W0(s,o=null,l=null,c){const h=m_(s,o,l,c);return h._resolveInjectorDefTypes(),h}function m_(s,o=null,l=null,c){return new nA(s,l,o||Vs(),c)}class nA{constructor(o,l,c,h=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];l&&no(l,E=>this.processProvider(E,o,l)),no([o],E=>this.processInjectorType(E,[],f)),this.records.set(fp,yl(void 0,this));const m=this.records.get(g_);this.scope=null!=m?m.value:null,this.source=h||("object"==typeof o?null:Ce(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,l=ad,c=wt.Default){this.assertNotDestroyed();const h=au(this),f=Rr(void 0);try{if(!(c&wt.SkipSelf)){let E=this.records.get(o);if(void 0===E){const b=function Y0(s){return"function"==typeof s||"object"==typeof s&&s instanceof Vt}(o)&&ze(o);E=b&&this.injectableDefInScope(b)?yl(__(o),ga):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(c&wt.Self?Vs():this.parent).get(o,l=c&wt.Optional&&l===ad?null:l)}catch(m){if("NullInjectorError"===m.name){if((m[Dn]=m[Dn]||[]).unshift(Ce(o)),h)throw m;return function wm(s,o,l,c){const h=s[Dn];throw o[Af]&&h.unshift(o[Af]),s.message=function uu(s,o,l,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let h=Ce(o);if(Array.isArray(o))h=o.map(Ce).join(" -> ");else if("object"==typeof o){let f=[];for(let m in o)if(o.hasOwnProperty(m)){let E=o[m];f.push(m+":"+("string"==typeof E?JSON.stringify(E):Ce(E)))}h=`{${f.join(", ")}}`}return`${l}${c?"("+c+")":""}[${h}]: ${s.replace(PI,"\n  ")}`}("\n"+s.message,h,l,c),s.ngTokenPath=h,s[Dn]=null,s}(m,o,"R3InjectorError",this.source)}throw m}finally{Rr(f),au(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,h)=>o.push(Ce(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new $e(205,!1)}processInjectorType(o,l,c){if(!(o=Ie(o)))return!1;let h=En(o);const f=null==h&&o.ngModule||void 0,m=void 0===f?o:f,E=-1!==c.indexOf(m);if(void 0!==f&&(h=En(f)),null==h)return!1;if(null!=h.imports&&!E){let N;c.push(m);try{no(h.imports,V=>{this.processInjectorType(V,l,c)&&(void 0===N&&(N=[]),N.push(V))})}finally{}if(void 0!==N)for(let V=0;V<N.length;V++){const{ngModule:W,providers:X}=N[V];no(X,ye=>this.processProvider(ye,W,X||qe))}}this.injectorDefTypes.add(m);const b=os(m)||(()=>new m);this.records.set(m,yl(b,ga));const M=h.providers;if(null!=M&&!E){const N=o;no(M,V=>this.processProvider(V,N,M))}return void 0!==f&&void 0!==o.providers}processProvider(o,l,c){let h=Ki(o=Ie(o))?o:Ie(o&&o.provide);const f=function ku(s,o,l){return Br(s)?yl(void 0,s.useValue):yl(Ro(s),ga)}(o);if(Ki(o)||!0!==o.multi)this.records.get(h);else{let m=this.records.get(h);m||(m=yl(void 0,ga,!0),m.factory=()=>Un(m.multi),this.records.set(h,m)),h=o,m.multi.push(o)}this.records.set(h,f)}hydrate(o,l){return l.value===ga&&(l.value=G0,l.value=l.factory()),"object"==typeof l.value&&l.value&&function K0(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this.onDestroy.add(l.value),l.value}injectableDefInScope(o){if(!o.providedIn)return!1;const l=Ie(o.providedIn);return"string"==typeof l?"any"===l||l===this.scope:this.injectorDefTypes.has(l)}}function __(s){const o=ze(s),l=null!==o?o.factory:os(s);if(null!==l)return l;if(s instanceof Vt)throw new $e(204,!1);if(s instanceof Function)return function rA(s){const o=s.length;if(o>0)throw function Ns(s,o){const l=[];for(let c=0;c<s;c++)l.push(o);return l}(o,"?"),new $e(204,!1);const l=function _n(s){const o=s&&(s[On]||s[Bn]);if(o){const l=function An(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),o}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new $e(204,!1)}function Ro(s,o,l){let c;if(Ki(s)){const h=Ie(s);return os(h)||__(h)}if(Br(s))c=()=>Ie(s.useValue);else if(function iA(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Un(s.deps||[]));else if(function ma(s){return!(!s||!s.useExisting)}(s))c=()=>Vr(Ie(s.useExisting));else{const h=Ie(s&&(s.useClass||s.provide));if(!function q0(s){return!!s.deps}(s))return os(h)||__(h);c=()=>new h(...Un(s.deps))}return c}function yl(s,o,l=!1){return{factory:s,value:o,multi:l?[]:void 0}}function Br(s){return null!==s&&"object"==typeof s&&ou in s}function Ki(s){return"function"==typeof s}let Us=(()=>{class s{static create(l,c){var h;if(Array.isArray(l))return W0({name:""},c,l,"");{const f=null!==(h=l.name)&&void 0!==h?h:"";return W0({name:f},l.parent,l.providers,f)}}}return s.THROW_IF_NOT_FOUND=ad,s.NULL=new $0,s.\u0275prov=se({token:s,providedIn:"any",factory:()=>Vr(fp)}),s.__NG_ELEMENT_ID__=-1,s})();function _p(s,o){eu(md(s)[1],rn())}function Fu(s){let o=function yp(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const c=[s];for(;o;){let h;if(xr(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new $e(903,"");h=o.\u0275dir}if(h){if(l){c.push(h);const m=s;m.inputs=Rd(s.inputs),m.declaredInputs=Rd(s.declaredInputs),m.outputs=Rd(s.outputs);const E=h.hostBindings;E&&w1(s,E);const b=h.viewQuery,M=h.contentQueries;if(b&&fA(s,b),M&&E1(s,M),K(s.inputs,h.inputs),K(s.declaredInputs,h.declaredInputs),K(s.outputs,h.outputs),xr(h)&&h.data.animation){const N=s.data;N.animation=(N.animation||[]).concat(h.data.animation)}}const f=h.features;if(f)for(let m=0;m<f.length;m++){const E=f[m];E&&E.ngInherit&&E(s),E===Fu&&(l=!1)}}o=Object.getPrototypeOf(o)}!function hA(s){let o=0,l=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=o+=h.hostVars,h.hostAttrs=Jc(h.hostAttrs,l=Jc(l,h.hostAttrs))}}(c)}function Rd(s){return s===sr?{}:s===qe?[]:s}function fA(s,o){const l=s.viewQuery;s.viewQuery=l?(c,h)=>{o(c,h),l(c,h)}:o}function E1(s,o){const l=s.contentQueries;s.contentQueries=l?(c,h,f)=>{o(c,h,f),l(c,h,f)}:o}function w1(s,o){const l=s.hostBindings;s.hostBindings=l?(c,h)=>{o(c,h),l(c,h)}:o}let D_=null;function Lu(){if(!D_){const s=mt.Symbol;if(s&&s.iterator)D_=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<o.length;++l){const c=o[l];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(D_=c)}}}return D_}function kd(s){return!!Vu(s)&&(Array.isArray(s)||!(s instanceof Map)&&Lu()in s)}function Vu(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function br(s,o,l){return!Object.is(s[o],l)&&(s[o]=l,!0)}function A_(s,o,l,c){const h=Ne();return br(h,Xs(),o)&&(nn(),Ls(Nn(),h,s,o,l,c)),A_}function El(s,o,l,c){return br(s,Xs(),l)?o+De(l)+c:Ut}function ju(s,o,l,c,h,f){const E=function vl(s,o,l,c){const h=br(s,o,l);return br(s,o+1,c)||h}(s,function As(){return Ct.lFrame.bindingIndex}(),l,h);return ls(2),E?o+De(l)+c+De(h)+f:Ut}function zu(s,o,l,c,h,f,m,E){const b=Ne(),M=nn(),N=s+20,V=M.firstCreatePass?function Wu(s,o,l,c,h,f,m,E,b){const M=o.consts,N=Pu(o,s,4,m||null,xn(M,E));l_(o,l,N,xn(M,b)),eu(o,N);const V=N.tViews=a_(2,N,c,h,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,M);return null!==o.queries&&(o.queries.template(o,N),V.queries=o.queries.embeddedTView(N)),N}(N,M,b,o,l,c,h,f,m):M.data[N];lr(V,!1);const W=b[11].createComment("");bu(M,b,W,V),ei(W,b),d_(b,b[N]=R0(W,b,W,V)),_o(V)&&Ru(M,b,V),null!=m&&_l(b,V,E)}function bp(s){return function hn(s,o){return s[o]}(function Ka(){return Ct.lFrame.contextLView}(),20+s)}function zd(s,o=wt.Default){const l=Ne();return null===l?Vr(s,o):y(rn(),l,Ie(s),o)}function xp(){throw new Error("invalid")}function F_(s,o,l){const c=Ne();return br(c,Xs(),o)&&xi(nn(),Nn(),c,s,o,c[11],l,!1),F_}function qd(s,o,l,c,h){const m=h?"class":"style";j0(s,l,o.inputs[m],m,c)}function Mp(s,o,l,c){const h=Ne(),f=nn(),m=20+s,E=h[11],b=h[m]=Yf(E,o,function qc(){return Ct.lFrame.currentNamespace}()),M=f.firstCreatePass?function gw(s,o,l,c,h,f,m){const E=o.consts,M=Pu(o,s,2,h,xn(E,f));return l_(o,l,M,xn(E,m)),null!==M.attrs&&hp(M,M.attrs,!1),null!==M.mergedAttrs&&hp(M,M.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,M),M}(m,f,h,0,o,l,c):f.data[m];lr(M,!0);const N=M.mergedAttrs;null!==N&&el(E,b,N);const V=M.classes;null!==V&&wd(E,b,V);const W=M.styles;return null!==W&&Au(E,b,W),64!=(64&M.flags)&&bu(f,h,b,M),0===function Gi(){return Ct.lFrame.elementDepthCount}()&&ei(b,h),function Yo(){Ct.lFrame.elementDepthCount++}(),_o(M)&&(Ru(f,h,M),Ou(f,M,h)),null!==c&&_l(h,M),Mp}function bl(){let s=rn();Hn()?Vc():(s=s.parent,lr(s,!1));const o=s;!function Qo(){Ct.lFrame.elementDepthCount--}();const l=nn();return l.firstCreatePass&&(eu(l,s),ss(s)&&l.queries.elementEnd(s)),null!=o.classesWithoutHost&&function _f(s){return 0!=(16&s.flags)}(o)&&qd(l,o,Ne(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function yf(s){return 0!=(32&s.flags)}(o)&&qd(l,o,Ne(),o.stylesWithoutHost,!1),bl}function L_(s,o,l,c){return Mp(s,o,l,c),bl(),L_}function qu(s,o,l){const c=Ne(),h=nn(),f=s+20,m=h.firstCreatePass?function TA(s,o,l,c,h){const f=o.consts,m=xn(f,c),E=Pu(o,s,8,"ng-container",m);return null!==m&&hp(E,m,!0),l_(o,l,E,xn(f,h)),null!==o.queries&&o.queries.elementStart(o,E),E}(f,h,c,o,l):h.data[f];lr(m,!0);const E=c[f]=c[11].createComment("");return bu(h,c,E,m),ei(E,c),_o(m)&&(Ru(h,c,m),Ou(h,m,c)),null!=l&&_l(c,m),qu}function Np(){let s=rn();const o=nn();return Hn()?Vc():(s=s.parent,lr(s,!1)),o.firstCreatePass&&(eu(o,s),ss(s)&&o.queries.elementEnd(s)),Np}function V_(){return Ne()}function U_(s){return!!s&&"function"==typeof s.then}function IA(s){return!!s&&"function"==typeof s.subscribe}const Pp=IA;function B_(s,o,l,c){const h=Ne(),f=nn(),m=rn();return function H_(s,o,l,c,h,f,m,E){const b=_o(c),N=s.firstCreatePass&&B0(s),V=o[8],W=Nd(o);let X=!0;if(3&c.type||E){const Ke=Me(c,o),it=E?E(Ke):Ke,xe=W.length,yt=E?sn=>E(D(sn[c.index])):c.index;if(Sn(l)){let sn=null;if(!E&&b&&(sn=function DA(s,o,l,c){const h=s.cleanup;if(null!=h)for(let f=0;f<h.length-1;f+=2){const m=h[f];if(m===l&&h[f+1]===c){const E=o[7],b=h[f+2];return E.length>b?E[b]:null}"string"==typeof m&&(f+=2)}return null}(s,o,h,c.index)),null!==sn)(sn.__ngLastListenerFn__||sn).__ngNextListenerFn__=f,sn.__ngLastListenerFn__=f,X=!1;else{f=$_(c,o,V,f,!1);const In=l.listen(it,h,f);W.push(f,In),N&&N.push(h,yt,xe,xe+1)}}else f=$_(c,o,V,f,!0),it.addEventListener(h,f,m),W.push(f),N&&N.push(h,yt,xe,m)}else f=$_(c,o,V,f,!1);const ye=c.outputs;let je;if(X&&null!==ye&&(je=ye[h])){const Ke=je.length;if(Ke)for(let it=0;it<Ke;it+=2){const Ri=o[je[it]][je[it+1]].subscribe(f),Sa=W.length;W.push(f,Ri),N&&N.push(h,c.index,Sa,-(Sa+1))}}}(f,h,h[11],m,s,o,!!l,c),B_}function va(s,o,l,c){try{return!1!==l(c)}catch(h){return fs(s,h),!1}}function $_(s,o,l,c,h){return function f(m){if(m===Function)return c;const E=2&s.flags?Qt(s.index,o):o;0==(32&o[2])&&V0(E);let b=va(o,0,c,m),M=f.__ngNextListenerFn__;for(;M;)b=va(o,0,M,m)&&b,M=M.__ngNextListenerFn__;return h&&!1===b&&(m.preventDefault(),m.returnValue=!1),b}}function G_(s=1){return function ff(s){return(Ct.lFrame.contextLView=function pf(s,o){for(;s>0;)o=o[15],s--;return o}(s,Ct.lFrame.contextLView))[8]}(s)}function W_(s,o,l){return Tl(s,"",o,"",l),W_}function Tl(s,o,l,c,h){const f=Ne(),m=El(f,o,l,c);return m!==Ut&&xi(nn(),Nn(),f,s,m,f[11],h,!1),Tl}function MA(s,o,l,c,h){const f=s[l+1],m=null===o;let E=c?ks(f):Mo(f),b=!1;for(;0!==E&&(!1===b||m);){const N=s[E+1];Cw(s[E],o)&&(b=!0,s[E+1]=c?np(N):Xm(N)),E=c?ks(N):Mo(N)}b&&(s[l+1]=c?Xm(f):np(f))}function Cw(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Cr(s,o)>=0}const Tr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Q_(s){return s.substring(Tr.key,Tr.keyEnd)}function PA(s,o){const l=Tr.textEnd;return l===o?-1:(o=Tr.keyEnd=function RA(s,o,l){for(;o<l&&s.charCodeAt(o)>32;)o++;return o}(s,Tr.key=o,l),Ku(s,o,l))}function Ku(s,o,l){for(;o<l&&s.charCodeAt(o)<=32;)o++;return o}function Z_(s,o,l){return ao(s,o,l,!1),Z_}function Kd(s,o){return ao(s,o,null,!0),Kd}function X_(s){!function Yi(s,o,l,c){const h=nn(),f=ls(2);h.firstUpdatePass&&Aw(h,null,f,c);const m=Ne();if(l!==Ut&&br(m,f,l)){const E=h.data[wr()];if(ry(E,c)&&!Op(h,f)){let b=c?E.classesWithoutHost:E.stylesWithoutHost;null!==b&&(l=Fe(b,l||"")),qd(h,E,m,l,c)}else!function Nw(s,o,l,c,h,f,m,E){h===Ut&&(h=qe);let b=0,M=0,N=0<h.length?h[0]:null,V=0<f.length?f[0]:null;for(;null!==N||null!==V;){const W=b<h.length?h[b+1]:void 0,X=M<f.length?f[M+1]:void 0;let je,ye=null;N===V?(b+=2,M+=2,W!==X&&(ye=V,je=X)):null===V||null!==N&&N<V?(b+=2,ye=N):(M+=2,ye=V,je=X),null!==ye&&ny(s,o,l,c,ye,je,m,E),N=b<h.length?h[b]:null,V=M<f.length?f[M]:null}}(h,E,m,m[11],m[f+1],m[f+1]=function Mw(s,o,l){if(null==l||""===l)return qe;const c=[],h=Ps(l);if(Array.isArray(h))for(let f=0;f<h.length;f++)s(c,h[f],!0);else if("object"==typeof h)for(const f in h)h.hasOwnProperty(f)&&s(c,f,h[f]);else"string"==typeof h&&o(c,h);return c}(s,o,l),c,f)}}(Zn,Bs,s,!0)}function Bs(s,o){for(let l=function bw(s){return function Ea(s){Tr.key=0,Tr.keyEnd=0,Tr.value=0,Tr.valueEnd=0,Tr.textEnd=s.length}(s),PA(s,Ku(s,0,Tr.textEnd))}(o);l>=0;l=PA(o,l))Zn(s,Q_(o),!0)}function ao(s,o,l,c){const h=Ne(),f=nn(),m=ls(2);f.firstUpdatePass&&Aw(f,s,m,c),o!==Ut&&br(h,m,o)&&ny(f,f.data[wr()],h,h[11],s,h[m+1]=function VA(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=Ce(Ps(s)))),s}(o,l),c,m)}function Op(s,o){return o>=s.expandoStartIndex}function Aw(s,o,l,c){const h=s.data;if(null===h[l+1]){const f=h[wr()],m=Op(s,l);ry(f,c)&&null===o&&!m&&(o=!1),o=function FA(s,o,l,c){const h=Hc(s);let f=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(l=Yd(l=ey(null,s,o,l,c),o.attrs,c),f=null);else{const m=o.directiveStylingLast;if(-1===m||s[m]!==h)if(l=ey(h,s,o,l,c),null===f){let b=function Sw(s,o,l){const c=l?o.classBindings:o.styleBindings;if(0!==Mo(c))return s[ks(c)]}(s,o,c);void 0!==b&&Array.isArray(b)&&(b=ey(null,s,o,b[1],c),b=Yd(b,o.attrs,c),function LA(s,o,l,c){s[ks(l?o.classBindings:o.styleBindings)]=c}(s,o,c,b))}else f=function xw(s,o,l){let c;const h=o.directiveEnd;for(let f=1+o.directiveStylingLast;f<h;f++)c=Yd(c,s[f].hostAttrs,l);return Yd(c,o.attrs,l)}(s,o,c)}return void 0!==f&&(c?o.residualClasses=f:o.residualStyles=f),l}(h,f,o,c),function M1(s,o,l,c,h,f){let m=f?o.classBindings:o.styleBindings,E=ks(m),b=Mo(m);s[c]=l;let N,M=!1;if(Array.isArray(l)){const V=l;N=V[1],(null===N||Cr(V,N)>0)&&(M=!0)}else N=l;if(h)if(0!==b){const W=ks(s[E+1]);s[c+1]=Id(W,E),0!==W&&(s[W+1]=tp(s[W+1],c)),s[E+1]=function TD(s,o){return 131071&s|o<<17}(s[E+1],c)}else s[c+1]=Id(E,0),0!==E&&(s[E+1]=tp(s[E+1],c)),E=c;else s[c+1]=Id(b,0),0===E?E=c:s[b+1]=tp(s[b+1],c),b=c;M&&(s[c+1]=Xm(s[c+1])),MA(s,N,c,!0),MA(s,N,c,!1),function N1(s,o,l,c,h){const f=h?s.residualClasses:s.residualStyles;null!=f&&"string"==typeof o&&Cr(f,o)>=0&&(l[c+1]=np(l[c+1]))}(o,N,s,c,f),m=Id(E,b),f?o.classBindings=m:o.styleBindings=m}(h,f,o,l,m,c)}}function ey(s,o,l,c,h){let f=null;const m=l.directiveEnd;let E=l.directiveStylingLast;for(-1===E?E=l.directiveStart:E++;E<m&&(f=o[E],c=Yd(c,f.hostAttrs,h),f!==s);)E++;return null!==s&&(l.directiveStylingLast=E),c}function Yd(s,o,l){const c=l?1:2;let h=-1;if(null!==o)for(let f=0;f<o.length;f++){const m=o[f];"number"==typeof m?h=m:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Zn(s,m,!!l||o[++f]))}return void 0===s?null:s}function ny(s,o,l,c,h,f,m,E){if(!(3&o.type))return;const b=s.data,M=b[E+1];Rp(function xu(s){return 1==(1&s)}(M)?Pw(b,o,l,h,Mo(M),m):void 0)||(Rp(f)||function Jm(s){return 2==(2&s)}(M)&&(f=Pw(b,null,l,h,E,m)),function ED(s,o,l,c,h){const f=Sn(s);if(o)h?f?s.addClass(l,c):l.classList.add(c):f?s.removeClass(l,c):l.classList.remove(c);else{let m=-1===c.indexOf("-")?void 0:Os.DashCase;if(null==h)f?s.removeStyle(l,c,m):l.style.removeProperty(c);else{const E="string"==typeof h&&h.endsWith("!important");E&&(h=h.slice(0,-10),m|=Os.Important),f?s.setStyle(l,c,h,m):l.style.setProperty(c,h,E?"important":"")}}}(c,m,ge(wr(),l),h,f))}function Pw(s,o,l,c,h,f){const m=null===o;let E;for(;h>0;){const b=s[h],M=Array.isArray(b),N=M?b[1]:b,V=null===N;let W=l[h+1];W===Ut&&(W=V?qe:void 0);let X=V?ym(W,c):N===c?W:void 0;if(M&&!Rp(X)&&(X=ym(b,c)),Rp(X)&&(E=X,m))return E;const ye=s[h+1];h=m?ks(ye):Mo(ye)}if(null!==o){let b=f?o.residualClasses:o.residualStyles;null!=b&&(E=ym(b,c))}return E}function Rp(s){return void 0!==s}function ry(s,o){return 0!=(s.flags&(o?16:32))}function iy(s,o=""){const l=Ne(),c=nn(),h=s+20,f=c.firstCreatePass?Pu(c,h,1,o,null):c.data[h],m=l[h]=function Bm(s,o){return Sn(s)?s.createText(o):s.createTextNode(o)}(l[11],o);bu(c,l,m,f),lr(f,!1)}function kp(s){return Qd("",s,""),kp}function Qd(s,o,l){const c=Ne(),h=El(c,s,o,l);return h!==Ut&&Mi(c,wr(),h),Qd}function Qu(s,o,l,c,h){const f=Ne(),m=ju(f,s,o,l,c,h);return m!==Ut&&Mi(f,wr(),m),Qu}function dy(s,o,l){const c=Ne();if(br(c,Xs(),o)){const f=nn(),m=Nn();xi(f,m,c,s,o,function dp(s,o,l){return(null===s||xr(s))&&(l=function F(s){for(;Array.isArray(s);){if("object"==typeof s[1])return s;s=s[0]}return null}(l[o.index])),l[11]}(Hc(f.data),m,c),l,!0)}return dy}const Il=void 0;var KA=["en",[["a","p"],["AM","PM"],Il],[["AM","PM"],Il,Il],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Il,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Il,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Il,"{1} 'at' {0}",Il],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function hy(s){const l=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===c?1:5}];let Zu={};function wa(s){const o=function Dl(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=Kw(o);if(l)return l;const c=o.split("-")[0];if(l=Kw(c),l)return l;if("en"===c)return KA;throw new Error(`Missing locale data for the locale "${s}".`)}function qw(s){return wa(s)[bt.PluralCase]}function Kw(s){return s in Zu||(Zu[s]=mt.ng&&mt.ng.common&&mt.ng.common.locales&&mt.ng.common.locales[s]),Zu[s]}var bt=(()=>((bt=bt||{})[bt.LocaleId=0]="LocaleId",bt[bt.DayPeriodsFormat=1]="DayPeriodsFormat",bt[bt.DayPeriodsStandalone=2]="DayPeriodsStandalone",bt[bt.DaysFormat=3]="DaysFormat",bt[bt.DaysStandalone=4]="DaysStandalone",bt[bt.MonthsFormat=5]="MonthsFormat",bt[bt.MonthsStandalone=6]="MonthsStandalone",bt[bt.Eras=7]="Eras",bt[bt.FirstDayOfWeek=8]="FirstDayOfWeek",bt[bt.WeekendRange=9]="WeekendRange",bt[bt.DateFormat=10]="DateFormat",bt[bt.TimeFormat=11]="TimeFormat",bt[bt.DateTimeFormat=12]="DateTimeFormat",bt[bt.NumberSymbols=13]="NumberSymbols",bt[bt.NumberFormats=14]="NumberFormats",bt[bt.CurrencyCode=15]="CurrencyCode",bt[bt.CurrencySymbol=16]="CurrencySymbol",bt[bt.CurrencyName=17]="CurrencyName",bt[bt.Currencies=18]="Currencies",bt[bt.Directionality=19]="Directionality",bt[bt.PluralCase=20]="PluralCase",bt[bt.ExtraData=21]="ExtraData",bt))();const Bp="en-US";let jp=Bp;function xy(s,o,l,c,h){if(s=Ie(s),Array.isArray(s))for(let f=0;f<s.length;f++)xy(s[f],o,l,c,h);else{const f=nn(),m=Ne();let E=Ki(s)?s:Ie(s.provide),b=Ro(s);const M=rn(),N=1048575&M.providerIndexes,V=M.directiveStart,W=M.providerIndexes>>20;if(Ki(s)||!s.multi){const X=new Xa(b,h,zd),ye=Fo(E,o,h?N:N+W,V);-1===ye?(aa(Co(M,m),f,E),My(f,s,o.length),o.push(E),M.directiveStart++,M.directiveEnd++,h&&(M.providerIndexes+=1048576),l.push(X),m.push(X)):(l[ye]=X,m[ye]=X)}else{const X=Fo(E,o,N+W,V),ye=Fo(E,o,N,N+W),je=X>=0&&l[X],Ke=ye>=0&&l[ye];if(h&&!Ke||!h&&!je){aa(Co(M,m),f,E);const it=function CS(s,o,l,c,h){const f=new Xa(s,l,zd);return f.multi=[],f.index=o,f.componentProviders=0,eh(f,h,c&&!l),f}(h?wS:ES,l.length,h,c,b);!h&&Ke&&(l[ye].providerFactory=it),My(f,s,o.length,0),o.push(E),M.directiveStart++,M.directiveEnd++,h&&(M.providerIndexes+=1048576),l.push(it),m.push(it)}else My(f,s,X>-1?X:ye,eh(l[h?ye:X],b,!h&&c));!h&&c&&Ke&&l[ye].componentProviders++}}}function My(s,o,l,c){const h=Ki(o),f=function z0(s){return!!s.useClass}(o);if(h||f){const b=(f?Ie(o.useClass):o).prototype.ngOnDestroy;if(b){const M=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const N=M.indexOf(l);-1===N?M.push(l,[c,b]):M[N+1].push(c,b)}else M.push(l,b)}}}function eh(s,o,l){return l&&s.componentProviders++,s.multi.push(o)-1}function Fo(s,o,l,c){for(let h=l;h<c;h++)if(o[h]===s)return h;return-1}function ES(s,o,l,c){return Ny(this.multi,[])}function wS(s,o,l,c){const h=this.multi;let f;if(this.providerFactory){const m=this.providerFactory.componentProviders,E=$(l,l[1],this.providerFactory.index,c);f=E.slice(0,m),Ny(h,f);for(let b=m;b<E.length;b++)f.push(E[b])}else f=[],Ny(h,f);return f}function Ny(s,o){for(let l=0;l<s.length;l++)o.push((0,s[l])());return o}function mC(s,o=[]){return l=>{l.providersResolver=(c,h)=>function vS(s,o,l){const c=nn();if(c.firstCreatePass){const h=xr(s);xy(l,c.data,c.blueprint,h,!0),xy(o,c.data,c.blueprint,h,!1)}}(c,h?h(s):s,o)}}class TS{}class IS{resolveComponentFactory(o){throw function Py(s){const o=Error(`No component factory found for ${Ce(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Qp=(()=>{class s{}return s.NULL=new IS,s})();function vC(){return nc(rn(),Ne())}function nc(s,o){return new rc(Me(s,o))}let rc=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=vC,s})();function DS(s){return s instanceof rc?s.nativeElement:s}class EC{}let G1=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function Lo(){const s=Ne(),l=Qt(rn().index,s);return function ic(s){return s[11]}(Fr(l)?l:s)}(),s})(),AS=(()=>{class s{}return s.\u0275prov=se({token:s,providedIn:"root",factory:()=>null}),s})();class Zp{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const wC=new Zp("13.3.11"),Jp={};function Xp(s,o,l,c,h=!1){for(;null!==l;){const f=o[l.index];if(null!==f&&c.push(D(f)),ci(f))for(let E=10;E<f.length;E++){const b=f[E],M=b[1].firstChild;null!==M&&Xp(b[1],b,M,c)}const m=l.type;if(8&m)Xp(s,o,l.child,c);else if(32&m){const E=_u(l,o);let b;for(;b=E();)c.push(b)}else if(16&m){const E=Xf(o,l);if(Array.isArray(E))c.push(...E);else{const b=_d(o[16]);Xp(b[1],b,E,c,!0)}}l=h?l.projectionNext:l.next}return c}class Ml{constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,l=o[1];return Xp(l,o,l.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ci(o)){const l=o[8],c=l?l.indexOf(this):-1;c>-1&&(Zf(o,c),id(l,c))}this._attachedToViewContainer=!1}Eu(this._lView[1],this._lView)}onDestroy(o){VD(this._lView[1],this._lView,null,o)}markForCheck(){V0(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function f_(s,o,l){const c=o[10];c.begin&&c.begin();try{Md(s,o,s.template,l)}catch(h){throw fs(o,h),h}finally{c.end&&c.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $e(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Qf(s,o){Du(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new $e(902,"");this._appRef=o}}class SS extends Ml{constructor(o){super(o),this._view=o}detectChanges(){eA(this._view)}checkNoChanges(){}get context(){return null}}class CC extends Qp{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=Q(o);return new th(l,this.ngModule)}}function bC(s){const o=[];for(let l in s)s.hasOwnProperty(l)&&o.push({propName:s[l],templateName:l});return o}class th extends TS{constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=function oo(s){return s.map(bD).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return bC(this.componentDef.inputs)}get outputs(){return bC(this.componentDef.outputs)}create(o,l,c,h){const f=(h=h||this.ngModule)?function Oy(s,o){return{get:(l,c,h)=>{const f=s.get(l,Jp,h);return f!==Jp||c===Jp?f:o.get(l,c,h)}}}(o,h.injector):o,m=f.get(EC,S),E=f.get(AS,null),b=m.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",N=c?function LD(s,o,l){if(Sn(s))return s.selectRootElement(o,l===Ee.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(b,c,this.componentDef.encapsulation):Yf(m.createRenderer(null,this.componentDef),M,function Nl(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(M)),V=this.componentDef.onPush?576:528,W=function dA(s,o){return{components:[],scheduler:s||dD,clean:v1,playerHandler:o||null,flags:0}}(),X=a_(0,null,null,1,0,null,null,null,null,null),ye=up(null,X,W,V,null,null,m,b,E,f);let je,Ke;Za(ye);try{const it=function I_(s,o,l,c,h,f){const m=l[1];l[20]=s;const b=Pu(m,20,2,"#host",null),M=b.mergedAttrs=o.hostAttrs;null!==M&&(hp(b,M,!0),null!==s&&(el(h,s,M),null!==b.classes&&wd(h,s,b.classes),null!==b.styles&&Au(h,s,b.styles)));const N=c.createRenderer(s,o),V=up(l,o_(o),null,o.onPush?64:16,l[20],b,c,N,f||null,null);return m.firstCreatePass&&(aa(Co(b,l),m,o.type),KD(m,b),QD(b,l.length,1)),d_(l,V),l[20]=V}(N,this.componentDef,ye,m,b);if(N)if(c)el(b,N,["ng-version",wC.full]);else{const{attrs:xe,classes:yt}=function T0(s){const o=[],l=[];let c=1,h=2;for(;c<s.length;){let f=s[c];if("string"==typeof f)2===h?""!==f&&o.push(f,s[++c]):8===h&&l.push(f);else{if(!fi(h))break;h=f}c++}return{attrs:o,classes:l}}(this.componentDef.selectors[0]);xe&&el(b,N,xe),yt&&yt.length>0&&wd(b,N,yt.join(" "))}if(Ke=ln(X,20),void 0!==l){const xe=Ke.projection=[];for(let yt=0;yt<this.ngContentSelectors.length;yt++){const sn=l[yt];xe.push(null!=sn?Array.from(sn):null)}}je=function cA(s,o,l,c,h){const f=l[1],m=function d1(s,o,l){const c=rn();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),O0(s,c,o,pa(s,o,1,null),l));const h=$(o,s,c.directiveStart,c);ei(h,o);const f=Me(c,o);return f&&ei(f,o),h}(f,l,o);if(c.components.push(m),s[8]=m,h&&h.forEach(b=>b(m,o)),o.contentQueries){const b=rn();o.contentQueries(1,m,b.directiveStart)}const E=rn();return!f.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Ss(E.index),$D(l[1],E,0,E.directiveStart,E.directiveEnd,o),zD(o,m)),m}(it,this.componentDef,ye,W,[_p]),cp(X,ye,null)}finally{wo()}return new Ry(this.componentType,je,nc(Ke,ye),ye,Ke)}}class Ry extends class bS{}{constructor(o,l,c,h,f){super(),this.location=c,this._rootLView=h,this._tNode=f,this.instance=l,this.hostView=this.changeDetectorRef=new SS(h),this.componentType=o}get injector(){return new tt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class sc{}class eg{}const Ca=new Map;class Fy extends sc{constructor(o,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new CC(this);const c=Et(o);this._bootstrapComponents=ro(c.bootstrap),this._r3Injector=m_(o,l,[{provide:sc,useValue:this},{provide:Qp,useValue:this.componentFactoryResolver}],Ce(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,l=Us.THROW_IF_NOT_FOUND,c=wt.Default){return o===Us||o===sc||o===fp?this:this._r3Injector.get(o,l,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class nh extends eg{constructor(o){super(),this.moduleType=o,null!==Et(o)&&function xS(s){const o=new Set;!function l(c){const h=Et(c,!0),f=h.id;null!==f&&(function Nr(s,o,l){if(o&&o!==l)throw new Error(`Duplicate module registered for ${s} - ${Ce(o)} vs ${Ce(o.name)}`)}(f,Ca.get(f),c),Ca.set(f,c));const m=ro(h.imports);for(const E of m)o.has(E)||(o.add(E),l(E))}(s)}(o)}create(o){return new Fy(this.moduleType,o)}}function rg(s){return o=>{setTimeout(s,void 0,o)}}const gs=class VS extends T.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,c){var h,f,m;let E=o,b=l||(()=>null),M=c;if(o&&"object"==typeof o){const V=o;E=null===(h=V.next)||void 0===h?void 0:h.bind(V),b=null===(f=V.error)||void 0===f?void 0:f.bind(V),M=null===(m=V.complete)||void 0===m?void 0:m.bind(V)}this.__isAsync&&(b=rg(b),E&&(E=rg(E)),M&&(M=rg(M)));const N=super.subscribe({next:E,error:b,complete:M});return o instanceof _.w0&&o.add(N),N}};function US(){return this._results[Lu()]()}class rh{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Lu(),c=rh.prototype;c[l]||(c[l]=US)}get changes(){return this._changes||(this._changes=new gs)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const c=this;c.dirty=!1;const h=cs(o);(this._changesDetected=!function LE(s,o,l){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],f=o[c];if(l&&(h=l(h),f=l(f)),f!==h)return!1}return!0}(c._results,h,l))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let ih=(()=>{class s{}return s.__NG_ELEMENT_ID__=Gy,s})();const $y=ih,kC=class extends $y{constructor(o,l,c){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=c}createEmbeddedView(o){const l=this._declarationTContainer.tViews,c=up(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(c[19]=f.createEmbeddedView(l)),cp(l,c,o),new Ml(c)}};function Gy(){return ig(rn(),Ne())}function ig(s,o){return 4&s.type?new kC(o,s,nc(s,o)):null}let oc=(()=>{class s{}return s.__NG_ELEMENT_ID__=BS,s})();function BS(){return FC(rn(),Ne())}const jS=oc,sg=class extends jS{constructor(o,l,c){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=c}get element(){return nc(this._hostTNode,this._hostLView)}get injector(){return new tt(this._hostTNode,this._hostLView)}get parentInjector(){const o=rl(this._hostTNode,this._hostLView);if(iu(o)){const l=ia(o,this._hostLView),c=ra(o);return new tt(l[1].data[c+8],l)}return new tt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=Wy(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,l,c){const h=o.createEmbeddedView(l||{});return this.insert(h,c),h}createComponent(o,l,c,h,f){const m=o&&!function bo(s){return"function"==typeof s}(o);let E;if(m)E=l;else{const V=l||{};E=V.index,c=V.injector,h=V.projectableNodes,f=V.ngModuleRef}const b=m?o:new th(Q(o)),M=c||this.parentInjector;if(!f&&null==b.ngModule){const W=(m?M:this.parentInjector).get(sc,null);W&&(f=W)}const N=b.create(M,h,void 0,f);return this.insert(N.hostView,E),N}insert(o,l){const c=o._lView,h=c[1];if(function yn(s){return ci(s[3])}(c)){const N=this.indexOf(o);if(-1!==N)this.detach(N);else{const V=c[3],W=new sg(V,V[6],V[3]);W.detach(W.indexOf(o))}}const f=this._adjustIndex(l),m=this._lContainer;!function vu(s,o,l,c){const h=10+c,f=l.length;c>0&&(l[h-1][4]=o),c<f-10?(o[4]=l[h],VE(l,10+c,o)):(l.push(o),o[4]=null),o[3]=l;const m=o[17];null!==m&&l!==m&&function f0(s,o){const l=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===l?s[9]=[o]:l.push(o)}(m,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=128}(h,c,m,f);const E=Iu(f,m),b=c[11],M=Cu(b,m[7]);return null!==M&&function jm(s,o,l,c,h,f){c[0]=h,c[6]=o,Du(s,c,l,1,h,f)}(h,m[6],b,c,M,E),o.attachToViewContainerRef(),VE(og(m),f,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=Wy(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),c=Zf(this._lContainer,l);c&&(id(og(this._lContainer),l),Eu(c[1],c))}detach(o){const l=this._adjustIndex(o,-1),c=Zf(this._lContainer,l);return c&&null!=id(og(this._lContainer),l)?new Ml(c):null}_adjustIndex(o,l=0){return null==o?this.length+l:o}};function Wy(s){return s[8]}function og(s){return s[8]||(s[8]=[])}function FC(s,o){let l;const c=o[s.index];if(ci(c))l=c;else{let h;if(8&s.type)h=D(c);else{const f=o[11];h=f.createComment("");const m=Me(s,o);Rs(f,Cu(f,m),h,function Wm(s,o){return Sn(s)?s.nextSibling(o):o.nextSibling}(f,m),!1)}o[s.index]=l=R0(c,o,h,s),d_(o,l)}return new sg(l,s,o)}class sh{constructor(o){this.queryList=o,this.matches=null}clone(){return new sh(this.queryList)}setDirty(){this.queryList.setDirty()}}class zy{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const c=null!==o.contentQueries?o.contentQueries[0]:l.length,h=[];for(let f=0;f<c;f++){const m=l.getByIndex(f);h.push(this.queries[m.indexInDeclarationView].clone())}return new zy(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==jC(o,l).matches&&this.queries[l].setDirty()}}class ag{constructor(o,l,c=null){this.predicate=o,this.flags=l,this.read=c}}class qy{constructor(o=[]){this.queries=o}elementStart(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let c=0;c<this.length;c++){const h=null!==l?l.length:0,f=this.getByIndex(c).embeddedTView(o,h);f&&(f.indexInDeclarationView=c,null!==l?l.push(f):l=[f])}return null!==l?new qy(l):null}template(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class LC{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new LC(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==l;)c=c.parent;return l===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const f=c[h];this.matchTNodeWithReadOption(o,l,z1(l,f)),this.matchTNodeWithReadOption(o,l,B(l,o,f,!1,!1))}else c===ih?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,B(l,o,c,!1,!1))}matchTNodeWithReadOption(o,l,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===rc||h===oc||h===ih&&4&l.type)this.addMatch(l.index,-2);else{const f=B(l,o,h,!1,!1);null!==f&&this.addMatch(l.index,f)}else this.addMatch(l.index,c)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function z1(s,o){const l=s.localNames;if(null!==l)for(let c=0;c<l.length;c+=2)if(l[c]===o)return l[c+1];return null}function q1(s,o,l,c){return-1===l?function Ky(s,o){return 11&s.type?nc(s,o):4&s.type?ig(s,o):null}(o,s):-2===l?function K1(s,o,l){return l===rc?nc(o,s):l===ih?ig(o,s):l===oc?FC(o,s):void 0}(s,o,c):$(s,s[1],l,o)}function oh(s,o,l,c){const h=o[19].queries[c];if(null===h.matches){const f=s.data,m=l.matches,E=[];for(let b=0;b<m.length;b+=2){const M=m[b];E.push(M<0?null:q1(o,f[M],m[b+1],l.metadata.read))}h.matches=E}return h.matches}function Yy(s,o,l,c){const h=s.queries.getByIndex(l),f=h.matches;if(null!==f){const m=oh(s,o,h,l);for(let E=0;E<f.length;E+=2){const b=f[E];if(b>0)c.push(m[E/2]);else{const M=f[E+1],N=o[-b];for(let V=10;V<N.length;V++){const W=N[V];W[17]===W[3]&&Yy(W[1],W,M,c)}if(null!==N[9]){const V=N[9];for(let W=0;W<V.length;W++){const X=V[W];Yy(X[1],X,M,c)}}}}}return c}function VC(s){const o=Ne(),l=nn(),c=$c();Ya(c+1);const h=jC(l,c);if(s.dirty&&tn(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const f=h.crossesNgTemplate?Yy(l,o,c,[]):oh(l,o,h,c);s.reset(f,DS),s.notifyOnChanges()}return!0}return!1}function UC(s,o,l,c){const h=nn();if(h.firstCreatePass){const f=rn();(function BC(s,o,l){null===s.queries&&(s.queries=new qy),s.queries.track(new LC(o,l))})(h,new ag(o,l,c),f.index),function zS(s,o){const l=s.contentQueries||(s.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,o)}(h,s),2==(2&l)&&(h.staticContentQueries=!0)}!function Zy(s,o,l){const c=new rh(4==(4&l));VD(s,o,c,c.destroy),null===o[19]&&(o[19]=new zy),o[19].queries.push(new sh(c))}(h,Ne(),l)}function Qy(){return function jr(s,o){return s[19].queries[o].queryList}(Ne(),$c())}function jC(s,o){return s.queries.getByIndex(o)}function lg(s,o){return ig(s,o)}function uc(...s){}const nx=new Vt("Application Initializer");let eb=(()=>{class s{constructor(l){this.appInits=l,this.resolve=uc,this.reject=uc,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const l=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const f=this.appInits[h]();if(U_(f))l.push(f);else if(Pp(f)){const m=new Promise((E,b)=>{f.subscribe({complete:E,error:b})});l.push(m)}}Promise.all(l).then(()=>{c()}).catch(h=>{this.reject(h)}),0===l.length&&c(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(Vr(nx,8))},s.\u0275prov=se({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const rx=new Vt("AppId",{providedIn:"root",factory:function ix(){return`${tb()}${tb()}${tb()}`}});function tb(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const av=new Vt("Platform Initializer"),nb=new Vt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),rb=new Vt("appBootstrapListener");let sx=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=se({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const lv=new Vt("LocaleId",{providedIn:"root",factory:()=>OI(lv,wt.Optional|wt.SkipSelf)||function mg(){return"undefined"!=typeof $localize&&$localize.locale||Bp}()}),ib=new Vt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class ax{constructor(o,l){this.ngModuleFactory=o,this.componentFactories=l}}let lx=(()=>{class s{compileModuleSync(l){return new nh(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const c=this.compileModuleSync(l),f=ro(Et(l).declarations).reduce((m,E)=>{const b=Q(E);return b&&m.push(new th(b)),m},[]);return new ax(c,f)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=se({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const ok=(()=>Promise.resolve(0))();function yg(s){"undefined"==typeof Zone?ok.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class _i{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new gs(!1),this.onMicrotaskEmpty=new gs(!1),this.onStable=new gs(!1),this.onError=new gs(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&l,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function sb(){let s=mt.requestAnimationFrame,o=mt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function dv(s){const o=()=>{!function cv(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(mt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,ch(s),s.isCheckStableRunning=!0,uh(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),ch(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,c,h,f,m,E)=>{try{return vg(s),l.invokeTask(h,f,m,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||s.shouldCoalesceRunChangeDetection)&&o(),Eg(s)}},onInvoke:(l,c,h,f,m,E,b)=>{try{return vg(s),l.invoke(h,f,m,E,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),Eg(s)}},onHasTask:(l,c,h,f)=>{l.hasTask(h,f),c===h&&("microTask"==f.change?(s._hasPendingMicrotasks=f.microTask,ch(s),uh(s)):"macroTask"==f.change&&(s.hasPendingMacrotasks=f.macroTask))},onHandleError:(l,c,h,f)=>(l.handleError(h,f),s.runOutsideAngular(()=>s.onError.emit(f)),!1)})}(h)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!_i.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(_i.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,l,c){return this._inner.run(o,l,c)}runTask(o,l,c,h){const f=this._inner,m=f.scheduleEventTask("NgZoneEvent: "+h,o,uv,uc,uc);try{return f.runTask(m,l,c)}finally{f.cancelTask(m)}}runGuarded(o,l,c){return this._inner.runGuarded(o,l,c)}runOutsideAngular(o){return this._outer.run(o)}}const uv={};function uh(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function ch(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function vg(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Eg(s){s._nesting--,uh(s)}class ak{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new gs,this.onMicrotaskEmpty=new gs,this.onStable=new gs,this.onError=new gs}run(o,l,c){return o.apply(l,c)}runGuarded(o,l,c){return o.apply(l,c)}runOutsideAngular(o){return o()}runTask(o,l,c,h){return o.apply(l,c)}}let ux=(()=>{class s{constructor(l){this._ngZone=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_i.assertNotInAngularZone(),yg(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())yg(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(l)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,c,h){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==f),l(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:l,timeoutId:f,updateCb:h})}whenStable(l,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(l,c,h){return[]}}return s.\u0275fac=function(l){return new(l||s)(Vr(_i))},s.\u0275prov=se({token:s,factory:s.\u0275fac}),s})(),lk=(()=>{class s{constructor(){this._applications=new Map,Ia.addToWindow(this)}registerApplication(l,c){this._applications.set(l,c)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,c=!0){return Ia.findTestabilityInTree(this,l,c)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=se({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();class wg{addToWindow(o){}findTestabilityInTree(o,l,c){return null}}function Cg(s){Ia=s}let Ia=new wg,Da=null;const ob=new Vt("AllowMultipleToken"),dh=new Vt("PlatformOnDestroy");class ck{constructor(o,l){this.name=o,this.token=l}}function ab(s,o,l=[]){const c=`Platform: ${o}`,h=new Vt(c);return(f=[])=>{let m=Vo();if(!m||m.injector.get(ob,!1)){const E=[...l,...f,{provide:h,useValue:!0}];s?s(E):function dk(s){if(Da&&!Da.get(ob,!1))throw new $e(400,"");Da=s;const o=s.get(hh),l=s.get(av,null);l&&l.forEach(c=>c())}(function dx(s=[],o){return Us.create({name:o,providers:[{provide:g_,useValue:"platform"},{provide:dh,useValue:()=>Da=null},...s]})}(E,c))}return function cx(s){const o=Vo();if(!o)throw new $e(401,"");return o}()}}function Vo(){var s;return null!==(s=null==Da?void 0:Da.get(hh))&&void 0!==s?s:null}let hh=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,c){const E=function hk(s,o){let l;return l="noop"===s?new ak:("zone.js"===s?void 0:s)||new _i({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),l}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),b=[{provide:_i,useValue:E}];return E.run(()=>{const M=Us.create({providers:b,parent:this.injector,name:l.moduleType.name}),N=l.create(M),V=N.injector.get(Gf,null);if(!V)throw new $e(402,"");return E.runOutsideAngular(()=>{const W=E.onError.subscribe({next:X=>{V.handleError(X)}});N.onDestroy(()=>{fv(this._modules,N),W.unsubscribe()})}),function hx(s,o,l){try{const c=l();return U_(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(V,E,()=>{const W=N.injector.get(eb);return W.runInitializers(),W.donePromise.then(()=>(function py(s){Wt(s,"Expected localeId to be defined"),"string"==typeof s&&(jp=s.toLowerCase().replace(/_/g,"-"))}(N.injector.get(lv,Bp)||Bp),this._moduleDoBootstrap(N),N))})})}bootstrapModule(l,c=[]){const h=bg({},c);return function Rl(s,o,l){const c=new nh(l);return Promise.resolve(c)}(0,0,l).then(f=>this.bootstrapModuleFactory(f,h))}_moduleDoBootstrap(l){const c=l.injector.get(hv);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!l.instance.ngDoBootstrap)throw new $e(403,"");l.instance.ngDoBootstrap(c)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new $e(404,"");this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const l=this._injector.get(dh,null);null==l||l(),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(Vr(Us))},s.\u0275prov=se({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function bg(s,o){return Array.isArray(o)?o.reduce(bg,s):Object.assign(Object.assign({},s),o)}let hv=(()=>{class s{constructor(l,c,h,f){this._zone=l,this._injector=c,this._exceptionHandler=h,this._initStatus=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new fe.y(b=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{b.next(this._stable),b.complete()})}),E=new fe.y(b=>{let M;this._zone.runOutsideAngular(()=>{M=this._zone.onStable.subscribe(()=>{_i.assertNotInAngularZone(),yg(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,b.next(!0))})})});const N=this._zone.onUnstable.subscribe(()=>{_i.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{b.next(!1)}))});return()=>{M.unsubscribe(),N.unsubscribe()}});this.isStable=(0,me.T)(m,E.pipe((0,k.B)()))}bootstrap(l,c){if(!this._initStatus.done)throw new $e(405,"");let h;h=l instanceof TS?l:this._injector.get(Qp).resolveComponentFactory(l),this.componentTypes.push(h.componentType);const f=function kl(s){return s.isBoundToModule}(h)?void 0:this._injector.get(sc),E=h.create(Us.NULL,[],c||h.selector,f),b=E.location.nativeElement,M=E.injector.get(ux,null),N=M&&E.injector.get(lk);return M&&N&&N.registerApplication(b,M),E.onDestroy(()=>{this.detachView(E.hostView),fv(this.components,E),N&&N.unregisterApplication(b)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new $e(101,"");try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const c=l;this._views.push(c),c.attachToAppRef(this)}detachView(l){const c=l;fv(this._views,c),c.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(rb,[]).concat(this._bootstrapListeners).forEach(h=>h(l))}ngOnDestroy(){this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(l){return new(l||s)(Vr(_i),Vr(Us),Vr(Gf),Vr(eb))},s.\u0275prov=se({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function fv(s,o){const l=s.indexOf(o);l>-1&&s.splice(l,1)}let ub=!0;function fk(){ub=!1}let gk=(()=>{class s{}return s.__NG_ELEMENT_ID__=cb,s})();function cb(s){return function mx(s,o,l){if($o(s)&&!l){const c=Qt(s.index,o);return new Ml(c,c)}return 47&s.type?new Ml(o[16],o):null}(rn(),Ne(),16==(16&s))}class _b{constructor(){}supports(o){return kd(o)}create(o){return new Ex(o)}}const vx=(s,o)=>o;class Ex{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||vx}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,c=this._removalsHead,h=0,f=null;for(;l||c;){const m=!c||l&&l.currentIndex<mv(c,h,f)?l:c,E=mv(m,h,f),b=m.currentIndex;if(m===c)h--,c=c._nextRemoved;else if(l=l._next,null==m.previousIndex)h++;else{f||(f=[]);const M=E-h,N=b-h;if(M!=N){for(let W=0;W<M;W++){const X=W<f.length?f[W]:f[W]=0,ye=X+W;N<=ye&&ye<M&&(f[W]=X+1)}f[m.previousIndex]=N-M}}E!==b&&o(m,E,b)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!kd(o))throw new $e(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,f,m,l=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)f=o[E],m=this._trackByFn(E,f),null!==l&&Object.is(l.trackById,m)?(c&&(l=this._verifyReinsertion(l,f,m,E)),Object.is(l.item,f)||this._addIdentityChange(l,f)):(l=this._mismatch(l,f,m,E),c=!0),l=l._next}else h=0,function gA(s,o){if(Array.isArray(s))for(let l=0;l<s.length;l++)o(s[l]);else{const l=s[Lu()]();let c;for(;!(c=l.next()).done;)o(c.value)}}(o,E=>{m=this._trackByFn(h,E),null!==l&&Object.is(l.trackById,m)?(c&&(l=this._verifyReinsertion(l,E,m,h)),Object.is(l.item,E)||this._addIdentityChange(l,E)):(l=this._mismatch(l,E,m,h),c=!0),l=l._next,h++}),this.length=h;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,c,h){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,f,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,f,h)):o=this._addAfter(new ph(l,c),f,h),o}_verifyReinsertion(o,l,c,h){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?o=this._reinsertAfter(f,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,f=o._nextRemoved;return null===h?this._removalsHead=f:h._nextRemoved=f,null===f?this._removalsTail=h:f._prevRemoved=h,this._insertAfter(o,l,c),this._addToMoves(o,c),o}_moveAfter(o,l,c){return this._unlink(o),this._insertAfter(o,l,c),this._addToMoves(o,c),o}_addAfter(o,l,c){return this._insertAfter(o,l,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,c){const h=null===l?this._itHead:l._next;return o._next=h,o._prev=l,null===h?this._itTail=o:h._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new gh),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,c=o._next;return null===l?this._itHead=c:l._next=c,null===c?this._itTail=l:c._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new gh),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class ph{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class yb{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===l||l<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const l=o._prevDup,c=o._nextDup;return null===l?this._head=c:l._nextDup=c,null===c?this._tail=l:c._prevDup=l,null===this._head}}class gh{constructor(){this.map=new Map}put(o){const l=o.trackById;let c=this.map.get(l);c||(c=new yb,this.map.set(l,c)),c.add(o)}get(o,l){const h=this.map.get(o);return h?h.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function mv(s,o,l){const c=s.previousIndex;if(null===c)return c;let h=0;return l&&c<l.length&&(h=l[c]),c+o+h}class vb{constructor(){}supports(o){return o instanceof Map||Vu(o)}create(){return new wx}}class wx{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||Vu(o)))throw new $e(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(l&&l.key===h)this._maybeAddToChanges(l,c),this._appendAfter=l,l=l._next;else{const f=this._getOrCreateRecordForKey(h,c);l=this._insertBeforeOrAppend(l,f)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let c=l;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const c=o._prev;return l._next=o,l._prev=c,o._prev=l,c&&(c._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,l);const f=h._prev,m=h._next;return f&&(f._next=m),m&&(m._prev=f),h._next=null,h._prev=null,h}const c=new Cx(o);return this._records.set(o,c),c.currentValue=l,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(c=>l(o[c],c))}}class Cx{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Eb(){return new Ag([new _b])}let Ag=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(null!=c){const h=c.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||Eb()),deps:[[s,new ld,new du]]}}find(l){const c=this.factories.find(h=>h.supports(l));if(null!=c)return c;throw new $e(901,"")}}return s.\u0275prov=se({token:s,providedIn:"root",factory:Eb}),s})();function _v(){return new mh([new vb])}let mh=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(c){const h=c.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||_v()),deps:[[s,new ld,new du]]}}find(l){const c=this.factories.find(f=>f.supports(l));if(c)return c;throw new $e(901,"")}}return s.\u0275prov=se({token:s,providedIn:"root",factory:_v}),s})();const Tb=ab(null,"core",[]);let bx=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(Vr(hv))},s.\u0275mod=Vi({type:s}),s.\u0275inj=le({}),s})()},2313:(rt,ve,L)=>{L.d(ve,{H7:()=>ts,b2:()=>Bn,q6:()=>On,se:()=>_e});var T=L(9808),_=L(5e3);class fe extends T.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class me extends fe{static makeCurrent(){(0,T.HT)(new me)}onAndCancel(q,j,Q){return q.addEventListener(j,Q,!1),()=>{q.removeEventListener(j,Q,!1)}}dispatchEvent(q,j){q.dispatchEvent(j)}remove(q){q.parentNode&&q.parentNode.removeChild(q)}createElement(q,j){return(j=j||this.getDefaultDocument()).createElement(q)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(q){return q.nodeType===Node.ELEMENT_NODE}isShadowRoot(q){return q instanceof DocumentFragment}getGlobalEventTarget(q,j){return"window"===j?window:"document"===j?q:"body"===j?q.body:null}getBaseHref(q){const j=function ue(){return k=k||document.querySelector("base"),k?k.getAttribute("href"):null}();return null==j?null:function Ce(ee){K=K||document.createElement("a"),K.setAttribute("href",ee);const q=K.pathname;return"/"===q.charAt(0)?q:`/${q}`}(j)}resetBaseElement(){k=null}getUserAgent(){return window.navigator.userAgent}getCookie(q){return(0,T.Mx)(document.cookie,q)}}let K,k=null;const Fe=new _.OlP("TRANSITION_ID"),ae=[{provide:_.ip1,useFactory:function Te(ee,q,j){return()=>{j.get(_.CZH).donePromise.then(()=>{const Q=(0,T.q)(),we=q.querySelectorAll(`style[ng-transition="${ee}"]`);for(let He=0;He<we.length;He++)Q.remove(we[He])})}},deps:[Fe,T.K0,_.zs3],multi:!0}];class Ie{static init(){(0,_.VLi)(new Ie)}addToWindow(q){_.dqk.getAngularTestability=(Q,we=!0)=>{const He=q.findTestabilityInTree(Q,we);if(null==He)throw new Error("Could not find testability for element.");return He},_.dqk.getAllAngularTestabilities=()=>q.getAllTestabilities(),_.dqk.getAllAngularRootElements=()=>q.getAllRootElements(),_.dqk.frameworkStabilizers||(_.dqk.frameworkStabilizers=[]),_.dqk.frameworkStabilizers.push(Q=>{const we=_.dqk.getAllAngularTestabilities();let He=we.length,Et=!1;const kn=function(Fn){Et=Et||Fn,He--,0==He&&Q(Et)};we.forEach(function(Fn){Fn.whenStable(kn)})})}findTestabilityInTree(q,j,Q){if(null==j)return null;const we=q.getTestability(j);return null!=we?we:Q?(0,T.q)().isShadowRoot(j)?this.findTestabilityInTree(q,j.host,!0):this.findTestabilityInTree(q,j.parentElement,!0):null}}let ht=(()=>{class ee{build(){return new XMLHttpRequest}}return ee.\u0275fac=function(j){return new(j||ee)},ee.\u0275prov=_.Yz7({token:ee,factory:ee.\u0275fac}),ee})();const Ve=new _.OlP("EventManagerPlugins");let $e=(()=>{class ee{constructor(j,Q){this._zone=Q,this._eventNameToPlugin=new Map,j.forEach(we=>we.manager=this),this._plugins=j.slice().reverse()}addEventListener(j,Q,we){return this._findPluginFor(Q).addEventListener(j,Q,we)}addGlobalEventListener(j,Q,we){return this._findPluginFor(Q).addGlobalEventListener(j,Q,we)}getZone(){return this._zone}_findPluginFor(j){const Q=this._eventNameToPlugin.get(j);if(Q)return Q;const we=this._plugins;for(let He=0;He<we.length;He++){const Et=we[He];if(Et.supports(j))return this._eventNameToPlugin.set(j,Et),Et}throw new Error(`No event manager plugin found for event ${j}`)}}return ee.\u0275fac=function(j){return new(j||ee)(_.LFG(Ve),_.LFG(_.R0b))},ee.\u0275prov=_.Yz7({token:ee,factory:ee.\u0275fac}),ee})();class nt{constructor(q){this._doc=q}addGlobalEventListener(q,j,Q){const we=(0,T.q)().getGlobalEventTarget(this._doc,q);if(!we)throw new Error(`Unsupported event target ${we} for event ${j}`);return this.addEventListener(we,j,Q)}}let De=(()=>{class ee{constructor(){this._stylesSet=new Set}addStyles(j){const Q=new Set;j.forEach(we=>{this._stylesSet.has(we)||(this._stylesSet.add(we),Q.add(we))}),this.onStylesAdded(Q)}onStylesAdded(j){}getAllStyles(){return Array.from(this._stylesSet)}}return ee.\u0275fac=function(j){return new(j||ee)},ee.\u0275prov=_.Yz7({token:ee,factory:ee.\u0275fac}),ee})(),st=(()=>{class ee extends De{constructor(j){super(),this._doc=j,this._hostNodes=new Map,this._hostNodes.set(j.head,[])}_addStylesToHost(j,Q,we){j.forEach(He=>{const Et=this._doc.createElement("style");Et.textContent=He,we.push(Q.appendChild(Et))})}addHost(j){const Q=[];this._addStylesToHost(this._stylesSet,j,Q),this._hostNodes.set(j,Q)}removeHost(j){const Q=this._hostNodes.get(j);Q&&Q.forEach(Ot),this._hostNodes.delete(j)}onStylesAdded(j){this._hostNodes.forEach((Q,we)=>{this._addStylesToHost(j,we,Q)})}ngOnDestroy(){this._hostNodes.forEach(j=>j.forEach(Ot))}}return ee.\u0275fac=function(j){return new(j||ee)(_.LFG(T.K0))},ee.\u0275prov=_.Yz7({token:ee,factory:ee.\u0275fac}),ee})();function Ot(ee){(0,T.q)().remove(ee)}const ft={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Pe=/%COMP%/g;function ne(ee,q,j){for(let Q=0;Q<q.length;Q++){let we=q[Q];Array.isArray(we)?ne(ee,we,j):(we=we.replace(Pe,ee),j.push(we))}return j}function ie(ee){return q=>{if("__ngUnwrap__"===q)return ee;!1===ee(q)&&(q.preventDefault(),q.returnValue=!1)}}let _e=(()=>{class ee{constructor(j,Q,we){this.eventManager=j,this.sharedStylesHost=Q,this.appId=we,this.rendererByCompId=new Map,this.defaultRenderer=new oe(j)}createRenderer(j,Q){if(!j||!Q)return this.defaultRenderer;switch(Q.encapsulation){case _.ifc.Emulated:{let we=this.rendererByCompId.get(Q.id);return we||(we=new an(this.eventManager,this.sharedStylesHost,Q,this.appId),this.rendererByCompId.set(Q.id,we)),we.applyToHost(j),we}case 1:case _.ifc.ShadowDom:return new Wt(this.eventManager,this.sharedStylesHost,j,Q);default:if(!this.rendererByCompId.has(Q.id)){const we=ne(Q.id,Q.styles,[]);this.sharedStylesHost.addStyles(we),this.rendererByCompId.set(Q.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return ee.\u0275fac=function(j){return new(j||ee)(_.LFG($e),_.LFG(st),_.LFG(_.AFp))},ee.\u0275prov=_.Yz7({token:ee,factory:ee.\u0275fac}),ee})();class oe{constructor(q){this.eventManager=q,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(q,j){return j?document.createElementNS(ft[j]||j,q):document.createElement(q)}createComment(q){return document.createComment(q)}createText(q){return document.createTextNode(q)}appendChild(q,j){q.appendChild(j)}insertBefore(q,j,Q){q&&q.insertBefore(j,Q)}removeChild(q,j){q&&q.removeChild(j)}selectRootElement(q,j){let Q="string"==typeof q?document.querySelector(q):q;if(!Q)throw new Error(`The selector "${q}" did not match any elements`);return j||(Q.textContent=""),Q}parentNode(q){return q.parentNode}nextSibling(q){return q.nextSibling}setAttribute(q,j,Q,we){if(we){j=we+":"+j;const He=ft[we];He?q.setAttributeNS(He,j,Q):q.setAttribute(j,Q)}else q.setAttribute(j,Q)}removeAttribute(q,j,Q){if(Q){const we=ft[Q];we?q.removeAttributeNS(we,j):q.removeAttribute(`${Q}:${j}`)}else q.removeAttribute(j)}addClass(q,j){q.classList.add(j)}removeClass(q,j){q.classList.remove(j)}setStyle(q,j,Q,we){we&(_.JOm.DashCase|_.JOm.Important)?q.style.setProperty(j,Q,we&_.JOm.Important?"important":""):q.style[j]=Q}removeStyle(q,j,Q){Q&_.JOm.DashCase?q.style.removeProperty(j):q.style[j]=""}setProperty(q,j,Q){q[j]=Q}setValue(q,j){q.nodeValue=j}listen(q,j,Q){return"string"==typeof q?this.eventManager.addGlobalEventListener(q,j,ie(Q)):this.eventManager.addEventListener(q,j,ie(Q))}}class an extends oe{constructor(q,j,Q,we){super(q),this.component=Q;const He=ne(we+"-"+Q.id,Q.styles,[]);j.addStyles(He),this.contentAttr=function Oe(ee){return"_ngcontent-%COMP%".replace(Pe,ee)}(we+"-"+Q.id),this.hostAttr=function Tt(ee){return"_nghost-%COMP%".replace(Pe,ee)}(we+"-"+Q.id)}applyToHost(q){super.setAttribute(q,this.hostAttr,"")}createElement(q,j){const Q=super.createElement(q,j);return super.setAttribute(Q,this.contentAttr,""),Q}}class Wt extends oe{constructor(q,j,Q,we){super(q),this.sharedStylesHost=j,this.hostEl=Q,this.shadowRoot=Q.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const He=ne(we.id,we.styles,[]);for(let Et=0;Et<He.length;Et++){const kn=document.createElement("style");kn.textContent=He[Et],this.shadowRoot.appendChild(kn)}}nodeOrShadowRoot(q){return q===this.hostEl?this.shadowRoot:q}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(q,j){return super.appendChild(this.nodeOrShadowRoot(q),j)}insertBefore(q,j,Q){return super.insertBefore(this.nodeOrShadowRoot(q),j,Q)}removeChild(q,j){return super.removeChild(this.nodeOrShadowRoot(q),j)}parentNode(q){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(q)))}}let Ge=(()=>{class ee extends nt{constructor(j){super(j)}supports(j){return!0}addEventListener(j,Q,we){return j.addEventListener(Q,we,!1),()=>this.removeEventListener(j,Q,we)}removeEventListener(j,Q,we){return j.removeEventListener(Q,we)}}return ee.\u0275fac=function(j){return new(j||ee)(_.LFG(T.K0))},ee.\u0275prov=_.Yz7({token:ee,factory:ee.\u0275fac}),ee})();const zn=["alt","control","meta","shift"],Se={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},se={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Z={alt:ee=>ee.altKey,control:ee=>ee.ctrlKey,meta:ee=>ee.metaKey,shift:ee=>ee.shiftKey};let le=(()=>{class ee extends nt{constructor(j){super(j)}supports(j){return null!=ee.parseEventName(j)}addEventListener(j,Q,we){const He=ee.parseEventName(Q),Et=ee.eventCallback(He.fullKey,we,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,T.q)().onAndCancel(j,He.domEventName,Et))}static parseEventName(j){const Q=j.toLowerCase().split("."),we=Q.shift();if(0===Q.length||"keydown"!==we&&"keyup"!==we)return null;const He=ee._normalizeKey(Q.pop());let Et="";if(zn.forEach(Fn=>{const Ui=Q.indexOf(Fn);Ui>-1&&(Q.splice(Ui,1),Et+=Fn+".")}),Et+=He,0!=Q.length||0===He.length)return null;const kn={};return kn.domEventName=we,kn.fullKey=Et,kn}static getEventFullKey(j){let Q="",we=function ze(ee){let q=ee.key;if(null==q){if(q=ee.keyIdentifier,null==q)return"Unidentified";q.startsWith("U+")&&(q=String.fromCharCode(parseInt(q.substring(2),16)),3===ee.location&&se.hasOwnProperty(q)&&(q=se[q]))}return Se[q]||q}(j);return we=we.toLowerCase()," "===we?we="space":"."===we&&(we="dot"),zn.forEach(He=>{He!=we&&Z[He](j)&&(Q+=He+".")}),Q+=we,Q}static eventCallback(j,Q,we){return He=>{ee.getEventFullKey(He)===j&&we.runGuarded(()=>Q(He))}}static _normalizeKey(j){return"esc"===j?"escape":j}}return ee.\u0275fac=function(j){return new(j||ee)(_.LFG(T.K0))},ee.\u0275prov=_.Yz7({token:ee,factory:ee.\u0275fac}),ee})();const On=(0,_.eFA)(_._c5,"browser",[{provide:_.Lbi,useValue:T.bD},{provide:_.g9A,useValue:function dt(){me.makeCurrent(),Ie.init()},multi:!0},{provide:T.K0,useFactory:function An(){return(0,_.RDi)(document),document},deps:[]}]),Jn=[{provide:_.zSh,useValue:"root"},{provide:_.qLn,useFactory:function _n(){return new _.qLn},deps:[]},{provide:Ve,useClass:Ge,multi:!0,deps:[T.K0,_.R0b,_.Lbi]},{provide:Ve,useClass:le,multi:!0,deps:[T.K0]},{provide:_e,useClass:_e,deps:[$e,st,_.AFp]},{provide:_.FYo,useExisting:_e},{provide:De,useExisting:st},{provide:st,useClass:st,deps:[T.K0]},{provide:_.dDg,useClass:_.dDg,deps:[_.R0b]},{provide:$e,useClass:$e,deps:[Ve,_.R0b]},{provide:T.JF,useClass:ht,deps:[]}];let Bn=(()=>{class ee{constructor(j){if(j)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(j){return{ngModule:ee,providers:[{provide:_.AFp,useValue:j.appId},{provide:Fe,useExisting:_.AFp},ae]}}}return ee.\u0275fac=function(j){return new(j||ee)(_.LFG(ee,12))},ee.\u0275mod=_.oAB({type:ee}),ee.\u0275inj=_.cJS({providers:Jn,imports:[T.ez,_.hGG]}),ee})();"undefined"!=typeof window&&window;let ts=(()=>{class ee{}return ee.\u0275fac=function(j){return new(j||ee)},ee.\u0275prov=_.Yz7({token:ee,factory:function(j){let Q=null;return Q=j?new(j||ee):_.LFG(Vi),Q},providedIn:"root"}),ee})(),Vi=(()=>{class ee extends ts{constructor(j){super(),this._doc=j}sanitize(j,Q){if(null==Q)return null;switch(j){case _.q3G.NONE:return Q;case _.q3G.HTML:return(0,_.qzn)(Q,"HTML")?(0,_.z3N)(Q):(0,_.EiD)(this._doc,String(Q)).toString();case _.q3G.STYLE:return(0,_.qzn)(Q,"Style")?(0,_.z3N)(Q):Q;case _.q3G.SCRIPT:if((0,_.qzn)(Q,"Script"))return(0,_.z3N)(Q);throw new Error("unsafe value used in a script context");case _.q3G.URL:return(0,_.yhl)(Q),(0,_.qzn)(Q,"URL")?(0,_.z3N)(Q):(0,_.mCW)(String(Q));case _.q3G.RESOURCE_URL:if((0,_.qzn)(Q,"ResourceURL"))return(0,_.z3N)(Q);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${j} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(j){return(0,_.JVY)(j)}bypassSecurityTrustStyle(j){return(0,_.L6k)(j)}bypassSecurityTrustScript(j){return(0,_.eBb)(j)}bypassSecurityTrustUrl(j){return(0,_.LAX)(j)}bypassSecurityTrustResourceUrl(j){return(0,_.pB0)(j)}}return ee.\u0275fac=function(j){return new(j||ee)(_.LFG(T.K0))},ee.\u0275prov=_.Yz7({token:ee,factory:function(j){let Q=null;return Q=j?new j:function mo(ee){return new Vi(ee.get(T.K0))}(_.LFG(_.zs3)),Q},providedIn:"root"}),ee})()},2284:(rt,ve,L)=>{L.d(ve,{F0:()=>Qn,rH:()=>ru,yS:()=>eo,Bz:()=>ia,lC:()=>Hi});var T=L(5e3),_=L(7579);class fe extends _.x{constructor(v){super(),this._value=v}get value(){return this.getValue()}_subscribe(v){const y=super._subscribe(v);return!y.closed&&v.next(this._value),y}getValue(){const{hasError:v,thrownError:y,_value:I}=this;if(v)throw y;return this._throwIfClosed(),I}next(v){super.next(this._value=v)}}var me=L(8306),k=L(4742),ue=L(8996),K=L(4671),Ce=L(3268),Fe=L(7669),Te=L(1810),ae=L(5403),Ie=L(9672);function $e(w,v,y){w?(0,Ie.f)(y,w,v):v()}var nt=L(576);function De(w,v){const y=(0,nt.m)(w)?w:()=>w,I=x=>x.error(y());return new me.y(v?x=>v.schedule(I,0,x):I)}const Ot=(0,L(3888).d)(w=>function(){w(this),this.name="EmptyError",this.message="no elements in sequence"});var ft=L(8421);function Pe(w){return new me.y(v=>{(0,ft.Xf)(w()).subscribe(v)})}var J=L(727),pe=L(4482);function We(){return(0,pe.e)((w,v)=>{let y=null;w._refCount++;const I=(0,ae.x)(v,void 0,void 0,void 0,()=>{if(!w||w._refCount<=0||0<--w._refCount)return void(y=null);const x=w._connection,O=y;y=null,x&&(!O||x===O)&&x.unsubscribe(),v.unsubscribe()});w.subscribe(I),I.closed||(y=w.connect())})}class gt extends me.y{constructor(v,y){super(),this.source=v,this.subjectFactory=y,this._subject=null,this._refCount=0,this._connection=null,(0,pe.A)(v)&&(this.lift=v.lift)}_subscribe(v){return this.getSubject().subscribe(v)}getSubject(){const v=this._subject;return(!v||v.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:v}=this;this._subject=this._connection=null,null==v||v.unsubscribe()}connect(){let v=this._connection;if(!v){v=this._connection=new J.w0;const y=this.getSubject();v.add(this.source.subscribe((0,ae.x)(y,void 0,()=>{this._teardown(),y.complete()},I=>{this._teardown(),y.error(I)},()=>this._teardown()))),v.closed&&(this._connection=null,v=J.w0.EMPTY)}return v}refCount(){return We()(this)}}var Oe=L(9646),Tt=L(7272),ne=L(515);function ie(w){return w<=0?()=>ne.E:(0,pe.e)((v,y)=>{let I=0;v.subscribe((0,ae.x)(y,x=>{++I<=w&&(y.next(x),w<=I&&y.complete())}))})}function de(w,v,y,I,x){return(O,B)=>{let $=y,ce=v,Xe=0;O.subscribe((0,ae.x)(B,Rt=>{const tt=Xe++;ce=$?w(ce,Rt,tt):($=!0,Rt),I&&B.next(ce)},x&&(()=>{$&&B.next(ce),B.complete()})))}}function _e(w,v){return(0,pe.e)(de(w,v,arguments.length>=2,!0))}function oe(w){return(0,pe.e)((v,y)=>{let O,I=null,x=!1;I=v.subscribe((0,ae.x)(y,void 0,void 0,B=>{O=(0,ft.Xf)(w(B,oe(w)(v))),I?(I.unsubscribe(),I=null,O.subscribe(y)):x=!0})),x&&(I.unsubscribe(),I=null,O.subscribe(y))})}var Ue=L(9300);function It(w){return w<=0?()=>ne.E:(0,pe.e)((v,y)=>{let I=[];v.subscribe((0,ae.x)(y,x=>{I.push(x),w<I.length&&I.shift()},()=>{for(const x of I)y.next(x);y.complete()},void 0,()=>{I=null}))})}function an(w=Wt){return(0,pe.e)((v,y)=>{let I=!1;v.subscribe((0,ae.x)(y,x=>{I=!0,y.next(x)},()=>I?y.complete():y.error(w())))})}function Wt(){return new Ot}function Ge(w){return(0,pe.e)((v,y)=>{let I=!1;v.subscribe((0,ae.x)(y,x=>{I=!0,y.next(x)},()=>{I||y.next(w),y.complete()}))})}function yr(w,v){const y=arguments.length>=2;return I=>I.pipe(w?(0,Ue.h)((x,O)=>w(x,O,I)):K.y,ie(1),y?Ge(v):an(()=>new Ot))}var se=L(4004),Z=L(3900),le=L(8675),ze=L(4351),dt=L(5577),_n=L(8505),An=L(8189),En=L(9808);class On{constructor(v,y){this.id=v,this.url=y}}class Jn extends On{constructor(v,y,I="imperative",x=null){super(v,y),this.navigationTrigger=I,this.restoredState=x}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Bn extends On{constructor(v,y,I){super(v,y),this.urlAfterRedirects=I}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class es extends On{constructor(v,y,I){super(v,y),this.reason=I}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class wt extends On{constructor(v,y,I){super(v,y),this.error=I}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ui extends On{constructor(v,y,I,x){super(v,y),this.urlAfterRedirects=I,this.state=x}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xn extends On{constructor(v,y,I,x){super(v,y),this.urlAfterRedirects=I,this.state=x}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rr extends On{constructor(v,y,I,x,O){super(v,y),this.urlAfterRedirects=I,this.state=x,this.shouldActivate=O}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class go extends On{constructor(v,y,I,x){super(v,y),this.urlAfterRedirects=I,this.state=x}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ua extends On{constructor(v,y,I,x){super(v,y),this.urlAfterRedirects=I,this.state=x}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class be{constructor(v){this.route=v}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class z{constructor(v){this.route=v}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Y{constructor(v){this.snapshot=v}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ke{constructor(v){this.snapshot=v}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ee{constructor(v){this.snapshot=v}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Re{constructor(v){this.snapshot=v}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Je{constructor(v,y,I){this.routerEvent=v,this.position=y,this.anchor=I}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const at="primary";class Kt{constructor(v){this.params=v||{}}has(v){return Object.prototype.hasOwnProperty.call(this.params,v)}get(v){if(this.has(v)){const y=this.params[v];return Array.isArray(y)?y[0]:y}return null}getAll(v){if(this.has(v)){const y=this.params[v];return Array.isArray(y)?y:[y]}return[]}get keys(){return Object.keys(this.params)}}function mt(w){return new Kt(w)}const dr="ngNavigationCancelingError";function qn(w){const v=Error("NavigationCancelingError: "+w);return v[dr]=!0,v}function qe(w,v,y){const I=y.path.split("/");if(I.length>w.length||"full"===y.pathMatch&&(v.hasChildren()||I.length<w.length))return null;const x={};for(let O=0;O<I.length;O++){const B=I[O],$=w[O];if(B.startsWith(":"))x[B.substring(1)]=$;else if(B!==$.path)return null}return{consumed:w.slice(0,I.length),posParams:x}}function St(w,v){const y=w?Object.keys(w):void 0,I=v?Object.keys(v):void 0;if(!y||!I||y.length!=I.length)return!1;let x;for(let O=0;O<y.length;O++)if(x=y[O],!Ti(w[x],v[x]))return!1;return!0}function Ti(w,v){if(Array.isArray(w)&&Array.isArray(v)){if(w.length!==v.length)return!1;const y=[...w].sort(),I=[...v].sort();return y.every((x,O)=>I[O]===x)}return w===v}function Rn(w){return Array.prototype.concat.apply([],w)}function vr(w){return w.length>0?w[w.length-1]:null}function Yt(w,v){for(const y in w)w.hasOwnProperty(y)&&v(w[y],y)}function jn(w){return(0,T.CqO)(w)?w:(0,T.QGY)(w)?(0,ue.D)(Promise.resolve(w)):(0,Oe.of)(w)}const Ks={exact:function zt(w,v,y){if(!Fn(w.segments,v.segments)||!Q(w.segments,v.segments,y)||w.numberOfChildren!==v.numberOfChildren)return!1;for(const I in v.children)if(!w.children[I]||!zt(w.children[I],v.children[I],y))return!1;return!0},subset:q},ts={exact:function Vi(w,v){return St(w,v)},subset:function ee(w,v){return Object.keys(v).length<=Object.keys(w).length&&Object.keys(v).every(y=>Ti(w[y],v[y]))},ignored:()=>!0};function mo(w,v,y){return Ks[y.paths](w.root,v.root,y.matrixParams)&&ts[y.queryParams](w.queryParams,v.queryParams)&&!("exact"===y.fragment&&w.fragment!==v.fragment)}function q(w,v,y){return j(w,v,v.segments,y)}function j(w,v,y,I){if(w.segments.length>y.length){const x=w.segments.slice(0,y.length);return!(!Fn(x,y)||v.hasChildren()||!Q(x,y,I))}if(w.segments.length===y.length){if(!Fn(w.segments,y)||!Q(w.segments,y,I))return!1;for(const x in v.children)if(!w.children[x]||!q(w.children[x],v.children[x],I))return!1;return!0}{const x=y.slice(0,w.segments.length),O=y.slice(w.segments.length);return!!(Fn(w.segments,x)&&Q(w.segments,x,I)&&w.children[at])&&j(w.children[at],v,O,I)}}function Q(w,v,y){return v.every((I,x)=>ts[y](w[x].parameters,I.parameters))}class we{constructor(v,y,I){this.root=v,this.queryParams=y,this.fragment=I}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=mt(this.queryParams)),this._queryParamMap}toString(){return or.serialize(this)}}class He{constructor(v,y){this.segments=v,this.children=y,this.parent=null,Yt(y,(I,x)=>I.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ns(this)}}class Et{constructor(v,y){this.path=v,this.parameters=y}get parameterMap(){return this._parameterMap||(this._parameterMap=mt(this.parameters)),this._parameterMap}toString(){return Ii(this)}}function Fn(w,v){return w.length===v.length&&w.every((y,I)=>y.path===v[I].path)}class Cs{}class Bi{parse(v){const y=new hr(v);return new we(y.parseRootSegment(),y.parseQueryParams(),y.parseFragment())}serialize(v){const y=`/${ar(v.root,!0)}`,I=function Sr(w){const v=Object.keys(w).map(y=>{const I=w[y];return Array.isArray(I)?I.map(x=>`${Pt(y)}=${Pt(x)}`).join("&"):`${Pt(y)}=${Pt(I)}`}).filter(y=>!!y);return v.length?`?${v.join("&")}`:""}(v.queryParams);return`${y}${I}${"string"==typeof v.fragment?`#${function bn(w){return encodeURI(w)}(v.fragment)}`:""}`}}const or=new Bi;function ns(w){return w.segments.map(v=>Ii(v)).join("/")}function ar(w,v){if(!w.hasChildren())return ns(w);if(v){const y=w.children[at]?ar(w.children[at],!1):"",I=[];return Yt(w.children,(x,O)=>{O!==at&&I.push(`${O}:${ar(x,!1)}`)}),I.length>0?`${y}(${I.join("//")})`:y}{const y=function Ui(w,v){let y=[];return Yt(w.children,(I,x)=>{x===at&&(y=y.concat(v(I,x)))}),Yt(w.children,(I,x)=>{x!==at&&(y=y.concat(v(I,x)))}),y}(w,(I,x)=>x===at?[ar(w.children[at],!1)]:[`${x}:${ar(I,!1)}`]);return 1===Object.keys(w.children).length&&null!=w.children[at]?`${ns(w)}/${y[0]}`:`${ns(w)}/(${y.join("//")})`}}function Ye(w){return encodeURIComponent(w).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Pt(w){return Ye(w).replace(/%3B/gi,";")}function Er(w){return Ye(w).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Kr(w){return decodeURIComponent(w)}function Kn(w){return Kr(w.replace(/\+/g,"%20"))}function Ii(w){return`${Er(w.path)}${function Mn(w){return Object.keys(w).map(v=>`;${Er(v)}=${Er(w[v])}`).join("")}(w.parameters)}`}const rs=/^[^\/()?;=#]+/;function At(w){const v=w.match(rs);return v?v[0]:""}const Ys=/^[^=?&#]+/,Ba=/^[^&#]+/;class hr{constructor(v){this.url=v,this.remaining=v}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new He([],{}):new He([],this.parseChildren())}parseQueryParams(){const v={};if(this.consumeOptional("?"))do{this.parseQueryParam(v)}while(this.consumeOptional("&"));return v}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const v=[];for(this.peekStartsWith("(")||v.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),v.push(this.parseSegment());let y={};this.peekStartsWith("/(")&&(this.capture("/"),y=this.parseParens(!0));let I={};return this.peekStartsWith("(")&&(I=this.parseParens(!1)),(v.length>0||Object.keys(y).length>0)&&(I[at]=new He(v,y)),I}parseSegment(){const v=At(this.remaining);if(""===v&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(v),new Et(Kr(v),this.parseMatrixParams())}parseMatrixParams(){const v={};for(;this.consumeOptional(";");)this.parseParam(v);return v}parseParam(v){const y=At(this.remaining);if(!y)return;this.capture(y);let I="";if(this.consumeOptional("=")){const x=At(this.remaining);x&&(I=x,this.capture(I))}v[Kr(y)]=Kr(I)}parseQueryParam(v){const y=function Qs(w){const v=w.match(Ys);return v?v[0]:""}(this.remaining);if(!y)return;this.capture(y);let I="";if(this.consumeOptional("=")){const B=function is(w){const v=w.match(Ba);return v?v[0]:""}(this.remaining);B&&(I=B,this.capture(I))}const x=Kn(y),O=Kn(I);if(v.hasOwnProperty(x)){let B=v[x];Array.isArray(B)||(B=[B],v[x]=B),B.push(O)}else v[x]=O}parseParens(v){const y={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const I=At(this.remaining),x=this.remaining[I.length];if("/"!==x&&")"!==x&&";"!==x)throw new Error(`Cannot parse url '${this.url}'`);let O;I.indexOf(":")>-1?(O=I.substr(0,I.indexOf(":")),this.capture(O),this.capture(":")):v&&(O=at);const B=this.parseChildren();y[O]=1===Object.keys(B).length?B[at]:new He([],B),this.consumeOptional("//")}return y}peekStartsWith(v){return this.remaining.startsWith(v)}consumeOptional(v){return!!this.peekStartsWith(v)&&(this.remaining=this.remaining.substring(v.length),!0)}capture(v){if(!this.consumeOptional(v))throw new Error(`Expected "${v}".`)}}class bs{constructor(v){this._root=v}get root(){return this._root.value}parent(v){const y=this.pathFromRoot(v);return y.length>1?y[y.length-2]:null}children(v){const y=Ts(v,this._root);return y?y.children.map(I=>I.value):[]}firstChild(v){const y=Ts(v,this._root);return y&&y.children.length>0?y.children[0].value:null}siblings(v){const y=fr(v,this._root);return y.length<2?[]:y[y.length-2].children.map(x=>x.value).filter(x=>x!==v)}pathFromRoot(v){return fr(v,this._root).map(y=>y.value)}}function Ts(w,v){if(w===v.value)return v;for(const y of v.children){const I=Ts(w,y);if(I)return I}return null}function fr(w,v){if(w===v.value)return[v];for(const y of v.children){const I=fr(w,y);if(I.length)return I.unshift(v),I}return[]}class Jt{constructor(v,y){this.value=v,this.children=y}toString(){return`TreeNode(${this.value})`}}function kr(w){const v={};return w&&w.children.forEach(y=>v[y.value.outlet]=y),v}class Ho extends bs{constructor(v,y){super(v),this.snapshot=y,ja(this,v)}toString(){return this.snapshot.toString()}}function Fr(w,v){const y=function ci(w,v){const B=new xr([],{},{},"",{},at,v,null,w.root,-1,{});return new Kl("",new Jt(B,[]))}(w,v),I=new fe([new Et("",{})]),x=new fe({}),O=new fe({}),B=new fe({}),$=new fe(""),ce=new ss(I,x,B,$,O,at,v,y.root);return ce.snapshot=y.root,new Ho(new Jt(ce,[]),y)}class ss{constructor(v,y,I,x,O,B,$,ce){this.url=v,this.params=y,this.queryParams=I,this.fragment=x,this.data=O,this.outlet=B,this.component=$,this._futureSnapshot=ce}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,se.U)(v=>mt(v)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,se.U)(v=>mt(v)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function $o(w,v="emptyOnly"){const y=w.pathFromRoot;let I=0;if("always"!==v)for(I=y.length-1;I>=1;){const x=y[I],O=y[I-1];if(x.routeConfig&&""===x.routeConfig.path)I--;else{if(O.component)break;I--}}return function _o(w){return w.reduce((v,y)=>({params:Object.assign(Object.assign({},v.params),y.params),data:Object.assign(Object.assign({},v.data),y.data),resolve:Object.assign(Object.assign({},v.resolve),y._resolvedData)}),{params:{},data:{},resolve:{}})}(y.slice(I))}class xr{constructor(v,y,I,x,O,B,$,ce,Xe,Rt,tt){this.url=v,this.params=y,this.queryParams=I,this.fragment=x,this.data=O,this.outlet=B,this.component=$,this.routeConfig=ce,this._urlSegment=Xe,this._lastPathIndex=Rt,this._resolve=tt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=mt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=mt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(I=>I.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Kl extends bs{constructor(v,y){super(y),this.url=v,ja(this,y)}toString(){return Pc(this._root)}}function ja(w,v){v.value._routerState=w,v.children.forEach(y=>ja(w,y))}function Pc(w){const v=w.children.length>0?` { ${w.children.map(Pc).join(", ")} } `:"";return`${w.value}${v}`}function Lr(w){if(w.snapshot){const v=w.snapshot,y=w._futureSnapshot;w.snapshot=y,St(v.queryParams,y.queryParams)||w.queryParams.next(y.queryParams),v.fragment!==y.fragment&&w.fragment.next(y.fragment),St(v.params,y.params)||w.params.next(y.params),function wn(w,v){if(w.length!==v.length)return!1;for(let y=0;y<w.length;++y)if(!St(w[y],v[y]))return!1;return!0}(v.url,y.url)||w.url.next(y.url),St(v.data,y.data)||w.data.next(y.data)}else w.snapshot=w._futureSnapshot,w.data.next(w._futureSnapshot.data)}function Yl(w,v){const y=St(w.params,v.params)&&function kn(w,v){return Fn(w,v)&&w.every((y,I)=>St(y.parameters,v[I].parameters))}(w.url,v.url);return y&&!(!w.parent!=!v.parent)&&(!w.parent||Yl(w.parent,v.parent))}function Go(w,v,y){if(y&&w.shouldReuseRoute(v.value,y.value.snapshot)){const I=y.value;I._futureSnapshot=v.value;const x=function nf(w,v,y){return v.children.map(I=>{for(const x of y.children)if(w.shouldReuseRoute(I.value,x.value.snapshot))return Go(w,I,x);return Go(w,I)})}(w,v,y);return new Jt(I,x)}{if(w.shouldAttach(v.value)){const O=w.retrieve(v.value);if(null!==O){const B=O.route;return B.value._futureSnapshot=v.value,B.children=v.children.map($=>Go(w,$)),B}}const I=function rf(w){return new ss(new fe(w.url),new fe(w.params),new fe(w.queryParams),new fe(w.fragment),new fe(w.data),w.outlet,w.component,w)}(v.value),x=v.children.map(O=>Go(w,O));return new Jt(I,x)}}function Ha(w){return"object"==typeof w&&null!=w&&!w.outlets&&!w.segmentPath}function Wo(w){return"object"==typeof w&&null!=w&&w.outlets}function Ql(w,v,y,I,x){let O={};if(I&&Yt(I,($,ce)=>{O[ce]=Array.isArray($)?$.map(Xe=>`${Xe}`):`${$}`}),w===v)return new we(y,O,x);const B=Oc(w,v,y);return new we(B,O,x)}function Oc(w,v,y){const I={};return Yt(w.children,(x,O)=>{I[O]=x===v?y:Oc(x,v,y)}),new He(w.segments,I)}class Rc{constructor(v,y,I){if(this.isAbsolute=v,this.numberOfDoubleDots=y,this.commands=I,v&&I.length>0&&Ha(I[0]))throw new Error("Root segment cannot have matrix parameters");const x=I.find(Wo);if(x&&x!==vr(I))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Zl{constructor(v,y,I){this.segmentGroup=v,this.processChildren=y,this.index=I}}function Is(w,v,y){if(w||(w=new He([],{})),0===w.segments.length&&w.hasChildren())return Ds(w,v,y);const I=function lf(w,v,y){let I=0,x=v;const O={match:!1,pathIndex:0,commandIndex:0};for(;x<w.segments.length;){if(I>=y.length)return O;const B=w.segments[x],$=y[I];if(Wo($))break;const ce=`${$}`,Xe=I<y.length-1?y[I+1]:null;if(x>0&&void 0===ce)break;if(ce&&Xe&&"object"==typeof Xe&&void 0===Xe.outlets){if(!qo(ce,Xe,B))return O;I+=2}else{if(!qo(ce,{},B))return O;I++}x++}return{match:!0,pathIndex:x,commandIndex:I}}(w,v,y),x=y.slice(I.commandIndex);if(I.match&&I.pathIndex<w.segments.length){const O=new He(w.segments.slice(0,I.pathIndex),{});return O.children[at]=new He(w.segments.slice(I.pathIndex),w.children),Ds(O,0,x)}return I.match&&0===x.length?new He(w.segments,{}):I.match&&!w.hasChildren()?os(w,v,y):I.match?Ds(w,0,x):os(w,v,y)}function Ds(w,v,y){if(0===y.length)return new He(w.segments,{});{const I=function $a(w){return Wo(w[0])?w[0].outlets:{[at]:w}}(y),x={};return Yt(I,(O,B)=>{"string"==typeof O&&(O=[O]),null!==O&&(x[B]=Is(w.children[B],v,O))}),Yt(w.children,(O,B)=>{void 0===I[B]&&(x[B]=O)}),new He(w.segments,x)}}function os(w,v,y){const I=w.segments.slice(0,v);let x=0;for(;x<y.length;){const O=y[x];if(Wo(O)){const ce=pr(O.outlets);return new He(I,ce)}if(0===x&&Ha(y[0])){I.push(new Et(w.segments[v].path,Yr(y[0]))),x++;continue}const B=Wo(O)?O.outlets[at]:`${O}`,$=x<y.length-1?y[x+1]:null;B&&$&&Ha($)?(I.push(new Et(B,Yr($))),x+=2):(I.push(new Et(B,{})),x++)}return new He(I,{})}function pr(w){const v={};return Yt(w,(y,I)=>{"string"==typeof y&&(y=[y]),null!==y&&(v[I]=os(new He([],{}),0,y))}),v}function Yr(w){const v={};return Yt(w,(y,I)=>v[I]=`${y}`),v}function qo(w,v,y){return w==y.path&&St(v,y.parameters)}class cf{constructor(v,y,I,x){this.routeReuseStrategy=v,this.futureState=y,this.currState=I,this.forwardEvent=x}activate(v){const y=this.futureState._root,I=this.currState?this.currState._root:null;this.deactivateChildRoutes(y,I,v),Lr(this.futureState.root),this.activateChildRoutes(y,I,v)}deactivateChildRoutes(v,y,I){const x=kr(y);v.children.forEach(O=>{const B=O.value.outlet;this.deactivateRoutes(O,x[B],I),delete x[B]}),Yt(x,(O,B)=>{this.deactivateRouteAndItsChildren(O,I)})}deactivateRoutes(v,y,I){const x=v.value,O=y?y.value:null;if(x===O)if(x.component){const B=I.getContext(x.outlet);B&&this.deactivateChildRoutes(v,y,B.children)}else this.deactivateChildRoutes(v,y,I);else O&&this.deactivateRouteAndItsChildren(y,I)}deactivateRouteAndItsChildren(v,y){v.value.component&&this.routeReuseStrategy.shouldDetach(v.value.snapshot)?this.detachAndStoreRouteSubtree(v,y):this.deactivateRouteAndOutlet(v,y)}detachAndStoreRouteSubtree(v,y){const I=y.getContext(v.value.outlet),x=I&&v.value.component?I.children:y,O=kr(v);for(const B of Object.keys(O))this.deactivateRouteAndItsChildren(O[B],x);if(I&&I.outlet){const B=I.outlet.detach(),$=I.children.onOutletDeactivated();this.routeReuseStrategy.store(v.value.snapshot,{componentRef:B,route:v,contexts:$})}}deactivateRouteAndOutlet(v,y){const I=y.getContext(v.value.outlet),x=I&&v.value.component?I.children:y,O=kr(v);for(const B of Object.keys(O))this.deactivateRouteAndItsChildren(O[B],x);I&&I.outlet&&(I.outlet.deactivate(),I.children.onOutletDeactivated(),I.attachRef=null,I.resolver=null,I.route=null)}activateChildRoutes(v,y,I){const x=kr(y);v.children.forEach(O=>{this.activateRoutes(O,x[O.value.outlet],I),this.forwardEvent(new Re(O.value.snapshot))}),v.children.length&&this.forwardEvent(new ke(v.value.snapshot))}activateRoutes(v,y,I){const x=v.value,O=y?y.value:null;if(Lr(x),x===O)if(x.component){const B=I.getOrCreateContext(x.outlet);this.activateChildRoutes(v,y,B.children)}else this.activateChildRoutes(v,y,I);else if(x.component){const B=I.getOrCreateContext(x.outlet);if(this.routeReuseStrategy.shouldAttach(x.snapshot)){const $=this.routeReuseStrategy.retrieve(x.snapshot);this.routeReuseStrategy.store(x.snapshot,null),B.children.onOutletReAttached($.contexts),B.attachRef=$.componentRef,B.route=$.route.value,B.outlet&&B.outlet.attach($.componentRef,$.route.value),Lr($.route.value),this.activateChildRoutes(v,null,B.children)}else{const $=function ji(w){for(let v=w.parent;v;v=v.parent){const y=v.routeConfig;if(y&&y._loadedConfig)return y._loadedConfig;if(y&&y.component)return null}return null}(x.snapshot),ce=$?$.module.componentFactoryResolver:null;B.attachRef=null,B.route=x,B.resolver=ce,B.outlet&&B.outlet.activateWith(x,ce),this.activateChildRoutes(v,null,B.children)}}else this.activateChildRoutes(v,null,I)}}class yo{constructor(v,y){this.routes=v,this.module=y}}function Mr(w){return"function"==typeof w}function Di(w){return w instanceof we}const Wa=Symbol("INITIAL_VALUE");function Ko(){return(0,Z.w)(w=>function ht(...w){const v=(0,Fe.yG)(w),y=(0,Fe.jO)(w),{args:I,keys:x}=(0,k.D)(w);if(0===I.length)return(0,ue.D)([],v);const O=new me.y(function Ve(w,v,y=K.y){return I=>{$e(v,()=>{const{length:x}=w,O=new Array(x);let B=x,$=x;for(let ce=0;ce<x;ce++)$e(v,()=>{const Xe=(0,ue.D)(w[ce],v);let Rt=!1;Xe.subscribe((0,ae.x)(I,tt=>{O[ce]=tt,Rt||(Rt=!0,$--),$||I.next(y(O.slice()))},()=>{--B||I.complete()}))},I)},I)}}(I,v,x?B=>(0,Te.n)(x,B):K.y));return y?O.pipe((0,Ce.Z)(y)):O}(w.map(v=>v.pipe(ie(1),(0,le.O)(Wa)))).pipe(_e((v,y)=>{let I=!1;return y.reduce((x,O,B)=>x!==Wa?x:(O===Wa&&(I=!0),I||!1!==O&&B!==y.length-1&&!Di(O)?x:O),v)},Wa),(0,Ue.h)(v=>v!==Wa),(0,se.U)(v=>Di(v)?v:!0===v),ie(1)))}class za{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Zs,this.attachRef=null}}class Zs{constructor(){this.contexts=new Map}onChildOutletCreated(v,y){const I=this.getOrCreateContext(v);I.outlet=y,this.contexts.set(v,I)}onChildOutletDestroyed(v){const y=this.getContext(v);y&&(y.outlet=null,y.attachRef=null)}onOutletDeactivated(){const v=this.contexts;return this.contexts=new Map,v}onOutletReAttached(v){this.contexts=v}getOrCreateContext(v){let y=this.getContext(v);return y||(y=new za,this.contexts.set(v,y)),y}getContext(v){return this.contexts.get(v)||null}}let Hi=(()=>{class w{constructor(y,I,x,O,B){this.parentContexts=y,this.location=I,this.resolver=x,this.changeDetector=B,this.activated=null,this._activatedRoute=null,this.activateEvents=new T.vpe,this.deactivateEvents=new T.vpe,this.attachEvents=new T.vpe,this.detachEvents=new T.vpe,this.name=O||at,y.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const y=this.parentContexts.getContext(this.name);y&&y.route&&(y.attachRef?this.attach(y.attachRef,y.route):this.activateWith(y.route,y.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const y=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(y.instance),y}attach(y,I){this.activated=y,this._activatedRoute=I,this.location.insert(y.hostView),this.attachEvents.emit(y.instance)}deactivate(){if(this.activated){const y=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(y)}}activateWith(y,I){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=y;const B=(I=I||this.resolver).resolveComponentFactory(y._futureSnapshot.routeConfig.component),$=this.parentContexts.getOrCreateContext(this.name).children,ce=new Fc(y,$,this.location.injector);this.activated=this.location.createComponent(B,this.location.length,ce),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return w.\u0275fac=function(y){return new(y||w)(T.Y36(Zs),T.Y36(T.s_b),T.Y36(T._Vd),T.$8M("name"),T.Y36(T.sBO))},w.\u0275dir=T.lG2({type:w,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),w})();class Fc{constructor(v,y,I){this.route=v,this.childContexts=y,this.parent=I}get(v,y){return v===ss?this.route:v===Zs?this.childContexts:this.parent.get(v,y)}}let Sn=(()=>{class w{}return w.\u0275fac=function(y){return new(y||w)},w.\u0275cmp=T.Xpm({type:w,selectors:[["ng-component"]],decls:1,vars:0,template:function(y,I){1&y&&T._UZ(0,"router-outlet")},directives:[Hi],encapsulation:2}),w})();function S(w,v=""){for(let y=0;y<w.length;y++){const I=w[y];P(I,D(v,I))}}function P(w,v){w.children&&S(w.children,v)}function D(w,v){return v?w||v.path?w&&!v.path?`${w}/`:!w&&v.path?v.path:`${w}/${v.path}`:"":w}function F(w){const v=w.children&&w.children.map(F),y=v?Object.assign(Object.assign({},w),{children:v}):Object.assign({},w);return!y.component&&(v||y.loadChildren)&&y.outlet&&y.outlet!==at&&(y.component=Sn),y}function G(w){return w.outlet||at}function ge(w,v){const y=w.filter(I=>G(I)===v);return y.push(...w.filter(I=>G(I)!==v)),y}const Me={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ot(w,v,y){var I;if(""===v.path)return"full"===v.pathMatch&&(w.hasChildren()||y.length>0)?Object.assign({},Me):{matched:!0,consumedSegments:[],remainingSegments:y,parameters:{},positionalParamSegments:{}};const O=(v.matcher||qe)(y,w,v);if(!O)return Object.assign({},Me);const B={};Yt(O.posParams,(ce,Xe)=>{B[Xe]=ce.path});const $=O.consumed.length>0?Object.assign(Object.assign({},B),O.consumed[O.consumed.length-1].parameters):B;return{matched:!0,consumedSegments:O.consumed,remainingSegments:y.slice(O.consumed.length),parameters:$,positionalParamSegments:null!==(I=O.posParams)&&void 0!==I?I:{}}}function ln(w,v,y,I,x="corrected"){if(y.length>0&&function tn(w,v,y){return y.some(I=>yn(w,v,I)&&G(I)!==at)}(w,y,I)){const B=new He(v,function Qt(w,v,y,I){const x={};x[at]=I,I._sourceSegment=w,I._segmentIndexShift=v.length;for(const O of y)if(""===O.path&&G(O)!==at){const B=new He([],{});B._sourceSegment=w,B._segmentIndexShift=v.length,x[G(O)]=B}return x}(w,v,I,new He(y,w.children)));return B._sourceSegment=w,B._segmentIndexShift=v.length,{segmentGroup:B,slicedSegments:[]}}if(0===y.length&&function er(w,v,y){return y.some(I=>yn(w,v,I))}(w,y,I)){const B=new He(w.segments,function hn(w,v,y,I,x,O){const B={};for(const $ of I)if(yn(w,y,$)&&!x[G($)]){const ce=new He([],{});ce._sourceSegment=w,ce._segmentIndexShift="legacy"===O?w.segments.length:v.length,B[G($)]=ce}return Object.assign(Object.assign({},x),B)}(w,v,y,I,w.children,x));return B._sourceSegment=w,B._segmentIndexShift=v.length,{segmentGroup:B,slicedSegments:y}}const O=new He(w.segments,w.children);return O._sourceSegment=w,O._segmentIndexShift=v.length,{segmentGroup:O,slicedSegments:y}}function yn(w,v,y){return(!(w.hasChildren()||v.length>0)||"full"!==y.pathMatch)&&""===y.path}function xn(w,v,y,I){return!!(G(w)===I||I!==at&&yn(v,y,w))&&("**"===w.path||ot(v,w,y).matched)}function $i(w,v,y){return 0===v.length&&!w.children[y]}class Zr{constructor(v){this.segmentGroup=v||null}}class Ct{constructor(v){this.urlTree=v}}function di(w){return De(new Zr(w))}function qa(w){return De(new Ct(w))}class Lc{constructor(v,y,I,x,O){this.configLoader=y,this.urlSerializer=I,this.urlTree=x,this.config=O,this.allowRedirects=!0,this.ngModule=v.get(T.h0i)}apply(){const v=ln(this.urlTree.root,[],[],this.config).segmentGroup,y=new He(v.segments,v.children);return this.expandSegmentGroup(this.ngModule,this.config,y,at).pipe((0,se.U)(O=>this.createUrlTree(vo(O),this.urlTree.queryParams,this.urlTree.fragment))).pipe(oe(O=>{if(O instanceof Ct)return this.allowRedirects=!1,this.match(O.urlTree);throw O instanceof Zr?this.noMatchError(O):O}))}match(v){return this.expandSegmentGroup(this.ngModule,this.config,v.root,at).pipe((0,se.U)(x=>this.createUrlTree(vo(x),v.queryParams,v.fragment))).pipe(oe(x=>{throw x instanceof Zr?this.noMatchError(x):x}))}noMatchError(v){return new Error(`Cannot match any routes. URL Segment: '${v.segmentGroup}'`)}createUrlTree(v,y,I){const x=v.segments.length>0?new He([],{[at]:v}):v;return new we(x,y,I)}expandSegmentGroup(v,y,I,x){return 0===I.segments.length&&I.hasChildren()?this.expandChildren(v,y,I).pipe((0,se.U)(O=>new He([],O))):this.expandSegment(v,I,y,I.segments,x,!0)}expandChildren(v,y,I){const x=[];for(const O of Object.keys(I.children))"primary"===O?x.unshift(O):x.push(O);return(0,ue.D)(x).pipe((0,ze.b)(O=>{const B=I.children[O],$=ge(y,O);return this.expandSegmentGroup(v,$,B,O).pipe((0,se.U)(ce=>({segment:ce,outlet:O})))}),_e((O,B)=>(O[B.outlet]=B.segment,O),{}),function zn(w,v){const y=arguments.length>=2;return I=>I.pipe(w?(0,Ue.h)((x,O)=>w(x,O,I)):K.y,It(1),y?Ge(v):an(()=>new Ot))}())}expandSegment(v,y,I,x,O,B){return(0,ue.D)(I).pipe((0,ze.b)($=>this.expandSegmentAgainstRoute(v,y,I,$,x,O,B).pipe(oe(Xe=>{if(Xe instanceof Zr)return(0,Oe.of)(null);throw Xe}))),yr($=>!!$),oe(($,ce)=>{if($ instanceof Ot||"EmptyError"===$.name)return $i(y,x,O)?(0,Oe.of)(new He([],{})):di(y);throw $}))}expandSegmentAgainstRoute(v,y,I,x,O,B,$){return xn(x,y,O,B)?void 0===x.redirectTo?this.matchSegmentAgainstRoute(v,y,x,O,B):$&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(v,y,I,x,O,B):di(y):di(y)}expandSegmentAgainstRouteUsingRedirect(v,y,I,x,O,B){return"**"===x.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(v,I,x,B):this.expandRegularSegmentAgainstRouteUsingRedirect(v,y,I,x,O,B)}expandWildCardWithParamsAgainstRouteUsingRedirect(v,y,I,x){const O=this.applyRedirectCommands([],I.redirectTo,{});return I.redirectTo.startsWith("/")?qa(O):this.lineralizeSegments(I,O).pipe((0,dt.z)(B=>{const $=new He(B,{});return this.expandSegment(v,$,y,B,x,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(v,y,I,x,O,B){const{matched:$,consumedSegments:ce,remainingSegments:Xe,positionalParamSegments:Rt}=ot(y,x,O);if(!$)return di(y);const tt=this.applyRedirectCommands(ce,x.redirectTo,Rt);return x.redirectTo.startsWith("/")?qa(tt):this.lineralizeSegments(x,tt).pipe((0,dt.z)(fn=>this.expandSegment(v,y,I,fn.concat(Xe),B,!1)))}matchSegmentAgainstRoute(v,y,I,x,O){if("**"===I.path)return I.loadChildren?(I._loadedConfig?(0,Oe.of)(I._loadedConfig):this.configLoader.load(v.injector,I)).pipe((0,se.U)(tt=>(I._loadedConfig=tt,new He(x,{})))):(0,Oe.of)(new He(x,{}));const{matched:B,consumedSegments:$,remainingSegments:ce}=ot(y,I,x);return B?this.getChildConfig(v,I,x).pipe((0,dt.z)(Rt=>{const tt=Rt.module,fn=Rt.routes,{segmentGroup:on,slicedSegments:jt}=ln(y,$,ce,fn),Lt=new He(on.segments,on.children);if(0===jt.length&&Lt.hasChildren())return this.expandChildren(tt,fn,Lt).pipe((0,se.U)(il=>new He($,il)));if(0===fn.length&&0===jt.length)return(0,Oe.of)(new He($,{}));const xt=G(I)===O;return this.expandSegment(tt,Lt,fn,jt,xt?at:O,!0).pipe((0,se.U)(un=>new He($.concat(un.segments),un.children)))})):di(y)}getChildConfig(v,y,I){return y.children?(0,Oe.of)(new yo(y.children,v)):y.loadChildren?void 0!==y._loadedConfig?(0,Oe.of)(y._loadedConfig):this.runCanLoadGuards(v.injector,y,I).pipe((0,dt.z)(x=>x?this.configLoader.load(v.injector,y).pipe((0,se.U)(O=>(y._loadedConfig=O,O))):function Yo(w){return De(qn(`Cannot load children because the guard of the route "path: '${w.path}'" returned false`))}(y))):(0,Oe.of)(new yo([],v))}runCanLoadGuards(v,y,I){const x=y.canLoad;if(!x||0===x.length)return(0,Oe.of)(!0);const O=x.map(B=>{const $=v.get(B);let ce;if(function Qr(w){return w&&Mr(w.canLoad)}($))ce=$.canLoad(y,I);else{if(!Mr($))throw new Error("Invalid CanLoad guard");ce=$(y,I)}return jn(ce)});return(0,Oe.of)(O).pipe(Ko(),(0,_n.b)(B=>{if(!Di(B))return;const $=qn(`Redirecting to "${this.urlSerializer.serialize(B)}"`);throw $.url=B,$}),(0,se.U)(B=>!0===B))}lineralizeSegments(v,y){let I=[],x=y.root;for(;;){if(I=I.concat(x.segments),0===x.numberOfChildren)return(0,Oe.of)(I);if(x.numberOfChildren>1||!x.children[at])return De(new Error(`Only absolute redirects can have named outlets. redirectTo: '${v.redirectTo}'`));x=x.children[at]}}applyRedirectCommands(v,y,I){return this.applyRedirectCreatreUrlTree(y,this.urlSerializer.parse(y),v,I)}applyRedirectCreatreUrlTree(v,y,I,x){const O=this.createSegmentGroup(v,y.root,I,x);return new we(O,this.createQueryParams(y.queryParams,this.urlTree.queryParams),y.fragment)}createQueryParams(v,y){const I={};return Yt(v,(x,O)=>{if("string"==typeof x&&x.startsWith(":")){const $=x.substring(1);I[O]=y[$]}else I[O]=x}),I}createSegmentGroup(v,y,I,x){const O=this.createSegments(v,y.segments,I,x);let B={};return Yt(y.children,($,ce)=>{B[ce]=this.createSegmentGroup(v,$,I,x)}),new He(O,B)}createSegments(v,y,I,x){return y.map(O=>O.path.startsWith(":")?this.findPosParam(v,O,x):this.findOrReturn(O,I))}findPosParam(v,y,I){const x=I[y.path.substring(1)];if(!x)throw new Error(`Cannot redirect to '${v}'. Cannot find '${y.path}'.`);return x}findOrReturn(v,y){let I=0;for(const x of y){if(x.path===v.path)return y.splice(I),x;I++}return v}}function vo(w){const v={};for(const I of Object.keys(w.children)){const O=vo(w.children[I]);(O.segments.length>0||O.hasChildren())&&(v[I]=O)}return function df(w){if(1===w.numberOfChildren&&w.children[at]){const v=w.children[at];return new He(w.segments.concat(v.segments),v.children)}return w}(new He(w.segments,v))}class nn{constructor(v){this.path=v,this.route=this.path[this.path.length-1]}}class Zo{constructor(v,y){this.component=v,this.route=y}}function rn(w,v,y){const I=w._root;return Hn(I,v?v._root:null,y,[I.value])}function as(w,v,y){const I=function lr(w){if(!w)return null;for(let v=w.parent;v;v=v.parent){const y=v.routeConfig;if(y&&y._loadedConfig)return y._loadedConfig}return null}(v);return(I?I.module.injector:y).get(w)}function Hn(w,v,y,I,x={canDeactivateChecks:[],canActivateChecks:[]}){const O=kr(v);return w.children.forEach(B=>{(function Vc(w,v,y,I,x={canDeactivateChecks:[],canActivateChecks:[]}){const O=w.value,B=v?v.value:null,$=y?y.getContext(w.value.outlet):null;if(B&&O.routeConfig===B.routeConfig){const ce=function Uc(w,v,y){if("function"==typeof y)return y(w,v);switch(y){case"pathParamsChange":return!Fn(w.url,v.url);case"pathParamsOrQueryParamsChange":return!Fn(w.url,v.url)||!St(w.queryParams,v.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Yl(w,v)||!St(w.queryParams,v.queryParams);default:return!Yl(w,v)}}(B,O,O.routeConfig.runGuardsAndResolvers);ce?x.canActivateChecks.push(new nn(I)):(O.data=B.data,O._resolvedData=B._resolvedData),Hn(w,v,O.component?$?$.children:null:y,I,x),ce&&$&&$.outlet&&$.outlet.isActivated&&x.canDeactivateChecks.push(new Zo($.outlet.component,B))}else B&&Ka(v,$,x),x.canActivateChecks.push(new nn(I)),Hn(w,null,O.component?$?$.children:null:y,I,x)})(B,O[B.value.outlet],y,I.concat([B.value]),x),delete O[B.value.outlet]}),Yt(O,(B,$)=>Ka(B,y.getContext($),x)),x}function Ka(w,v,y){const I=kr(w),x=w.value;Yt(I,(O,B)=>{Ka(O,x.component?v?v.children.getContext(B):null:v,y)}),y.canDeactivateChecks.push(new Zo(x.component&&v&&v.outlet&&v.outlet.isActivated?v.outlet.component:null,x))}class Bc{}function hf(w){return new me.y(v=>v.error(w))}class jc{constructor(v,y,I,x,O,B){this.rootComponentType=v,this.config=y,this.urlTree=I,this.url=x,this.paramsInheritanceStrategy=O,this.relativeLinkResolution=B}recognize(){const v=ln(this.urlTree.root,[],[],this.config.filter(B=>void 0===B.redirectTo),this.relativeLinkResolution).segmentGroup,y=this.processSegmentGroup(this.config,v,at);if(null===y)return null;const I=new xr([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},at,this.rootComponentType,null,this.urlTree.root,-1,{}),x=new Jt(I,y),O=new Kl(this.url,x);return this.inheritParamsAndData(O._root),O}inheritParamsAndData(v){const y=v.value,I=$o(y,this.paramsInheritanceStrategy);y.params=Object.freeze(I.params),y.data=Object.freeze(I.data),v.children.forEach(x=>this.inheritParamsAndData(x))}processSegmentGroup(v,y,I){return 0===y.segments.length&&y.hasChildren()?this.processChildren(v,y):this.processSegment(v,y,y.segments,I)}processChildren(v,y){const I=[];for(const O of Object.keys(y.children)){const B=y.children[O],$=ge(v,O),ce=this.processSegmentGroup($,B,O);if(null===ce)return null;I.push(...ce)}const x=Qa(I);return function Hc(w){w.sort((v,y)=>v.value.outlet===at?-1:y.value.outlet===at?1:v.value.outlet.localeCompare(y.value.outlet))}(x),x}processSegment(v,y,I,x){for(const O of v){const B=this.processSegmentAgainstRoute(O,y,I,x);if(null!==B)return B}return $i(y,I,x)?[]:null}processSegmentAgainstRoute(v,y,I,x){if(v.redirectTo||!xn(v,y,I,x))return null;let O,B=[],$=[];if("**"===v.path){const on=I.length>0?vr(I).parameters:{};O=new xr(I,on,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Gc(v),G(v),v.component,v,Za(y),Eo(y)+I.length,Wc(v))}else{const on=ot(y,v,I);if(!on.matched)return null;B=on.consumedSegments,$=on.remainingSegments,O=new xr(B,on.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Gc(v),G(v),v.component,v,Za(y),Eo(y)+B.length,Wc(v))}const ce=function $c(w){return w.children?w.children:w.loadChildren?w._loadedConfig.routes:[]}(v),{segmentGroup:Xe,slicedSegments:Rt}=ln(y,B,$,ce.filter(on=>void 0===on.redirectTo),this.relativeLinkResolution);if(0===Rt.length&&Xe.hasChildren()){const on=this.processChildren(ce,Xe);return null===on?null:[new Jt(O,on)]}if(0===ce.length&&0===Rt.length)return[new Jt(O,[])];const tt=G(v)===x,fn=this.processSegment(ce,Xe,Rt,tt?at:x);return null===fn?null:[new Jt(O,fn)]}}function Ya(w){const v=w.value.routeConfig;return v&&""===v.path&&void 0===v.redirectTo}function Qa(w){const v=[],y=new Set;for(const I of w){if(!Ya(I)){v.push(I);continue}const x=v.find(O=>I.value.routeConfig===O.value.routeConfig);void 0!==x?(x.children.push(...I.children),y.add(x)):v.push(I)}for(const I of y){const x=Qa(I.children);v.push(new Jt(I.value,x))}return v.filter(I=>!y.has(I))}function Za(w){let v=w;for(;v._sourceSegment;)v=v._sourceSegment;return v}function Eo(w){let v=w,y=v._segmentIndexShift?v._segmentIndexShift:0;for(;v._sourceSegment;)v=v._sourceSegment,y+=v._segmentIndexShift?v._segmentIndexShift:0;return y-1}function Gc(w){return w.data||{}}function Wc(w){return w.resolve||{}}function wr(w){return[...Object.keys(w),...Object.getOwnPropertySymbols(w)]}function Nn(w){return(0,Z.w)(v=>{const y=w(v);return y?(0,ue.D)(y).pipe((0,se.U)(()=>v)):(0,Oe.of)(v)})}class zc extends class mf{shouldDetach(v){return!1}store(v,y){}shouldAttach(v){return!1}retrieve(v){return null}shouldReuseRoute(v,y){return v.routeConfig===y.routeConfig}}{}const Xl=new T.OlP("ROUTES");class qc{constructor(v,y,I,x){this.injector=v,this.compiler=y,this.onLoadStartListener=I,this.onLoadEndListener=x}load(v,y){if(y._loader$)return y._loader$;this.onLoadStartListener&&this.onLoadStartListener(y);const x=this.loadModuleFactory(y.loadChildren).pipe((0,se.U)(O=>{this.onLoadEndListener&&this.onLoadEndListener(y);const B=O.create(v);return new yo(Rn(B.injector.get(Xl,void 0,T.XFs.Self|T.XFs.Optional)).map(F),B)}),oe(O=>{throw y._loader$=void 0,O}));return y._loader$=new gt(x,()=>new _.x).pipe(We()),y._loader$}loadModuleFactory(v){return jn(v()).pipe((0,dt.z)(y=>y instanceof T.YKP?(0,Oe.of)(y):(0,ue.D)(this.compiler.compileModuleAsync(y))))}}class eu{shouldProcessUrl(v){return!0}extract(v){return v}merge(v,y){return v}}function Ja(w){throw w}function tu(w,v,y){return v.parse("/")}function na(w,v){return(0,Oe.of)(null)}const nu={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Yc={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Qn=(()=>{class w{constructor(y,I,x,O,B,$,ce){this.rootComponentType=y,this.urlSerializer=I,this.rootContexts=x,this.location=O,this.config=ce,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new _.x,this.errorHandler=Ja,this.malformedUriErrorHandler=tu,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:na,afterPreactivation:na},this.urlHandlingStrategy=new eu,this.routeReuseStrategy=new zc,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=B.get(T.h0i),this.console=B.get(T.c2e);const tt=B.get(T.R0b);this.isNgZoneEnabled=tt instanceof T.R0b&&T.R0b.isInAngularZone(),this.resetConfig(ce),this.currentUrlTree=function jo(){return new we(new He([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new qc(B,$,fn=>this.triggerEvent(new be(fn)),fn=>this.triggerEvent(new z(fn))),this.routerState=Fr(this.currentUrlTree,this.rootComponentType),this.transitions=new fe({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var y;return null===(y=this.location.getState())||void 0===y?void 0:y.\u0275routerPageId}setupNavigations(y){const I=this.events;return y.pipe((0,Ue.h)(x=>0!==x.id),(0,se.U)(x=>Object.assign(Object.assign({},x),{extractedUrl:this.urlHandlingStrategy.extract(x.rawUrl)})),(0,Z.w)(x=>{let O=!1,B=!1;return(0,Oe.of)(x).pipe((0,_n.b)($=>{this.currentNavigation={id:$.id,initialUrl:$.currentRawUrl,extractedUrl:$.extractedUrl,trigger:$.source,extras:$.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Z.w)($=>{const ce=this.browserUrlTree.toString(),Xe=!this.navigated||$.extractedUrl.toString()!==ce||ce!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Xe)&&this.urlHandlingStrategy.shouldProcessUrl($.rawUrl))return Qc($.source)&&(this.browserUrlTree=$.extractedUrl),(0,Oe.of)($).pipe((0,Z.w)(tt=>{const fn=this.transitions.getValue();return I.next(new Jn(tt.id,this.serializeUrl(tt.extractedUrl),tt.source,tt.restoredState)),fn!==this.transitions.getValue()?ne.E:Promise.resolve(tt)}),function Ne(w,v,y,I){return(0,Z.w)(x=>function Qo(w,v,y,I,x){return new Lc(w,v,y,I,x).apply()}(w,v,y,x.extractedUrl,I).pipe((0,se.U)(O=>Object.assign(Object.assign({},x),{urlAfterRedirects:O}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,_n.b)(tt=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:tt.urlAfterRedirects})}),function ta(w,v,y,I,x){return(0,dt.z)(O=>function gm(w,v,y,I,x="emptyOnly",O="legacy"){try{const B=new jc(w,v,y,I,x,O).recognize();return null===B?hf(new Bc):(0,Oe.of)(B)}catch(B){return hf(B)}}(w,v,O.urlAfterRedirects,y(O.urlAfterRedirects),I,x).pipe((0,se.U)(B=>Object.assign(Object.assign({},O),{targetSnapshot:B}))))}(this.rootComponentType,this.config,tt=>this.serializeUrl(tt),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,_n.b)(tt=>{if("eager"===this.urlUpdateStrategy){if(!tt.extras.skipLocationChange){const on=this.urlHandlingStrategy.merge(tt.urlAfterRedirects,tt.rawUrl);this.setBrowserUrl(on,tt)}this.browserUrlTree=tt.urlAfterRedirects}const fn=new ui(tt.id,this.serializeUrl(tt.extractedUrl),this.serializeUrl(tt.urlAfterRedirects),tt.targetSnapshot);I.next(fn)}));if(Xe&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:fn,extractedUrl:on,source:jt,restoredState:Lt,extras:xt}=$,Jr=new Jn(fn,this.serializeUrl(on),jt,Lt);I.next(Jr);const un=Fr(on,this.rootComponentType).snapshot;return(0,Oe.of)(Object.assign(Object.assign({},$),{targetSnapshot:un,urlAfterRedirects:on,extras:Object.assign(Object.assign({},xt),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=$.rawUrl,$.resolve(null),ne.E}),Nn($=>{const{targetSnapshot:ce,id:Xe,extractedUrl:Rt,rawUrl:tt,extras:{skipLocationChange:fn,replaceUrl:on}}=$;return this.hooks.beforePreactivation(ce,{navigationId:Xe,appliedUrlTree:Rt,rawUrlTree:tt,skipLocationChange:!!fn,replaceUrl:!!on})}),(0,_n.b)($=>{const ce=new Xn($.id,this.serializeUrl($.extractedUrl),this.serializeUrl($.urlAfterRedirects),$.targetSnapshot);this.triggerEvent(ce)}),(0,se.U)($=>Object.assign(Object.assign({},$),{guards:rn($.targetSnapshot,$.currentSnapshot,this.rootContexts)})),function Js(w,v){return(0,dt.z)(y=>{const{targetSnapshot:I,currentSnapshot:x,guards:{canActivateChecks:O,canDeactivateChecks:B}}=y;return 0===B.length&&0===O.length?(0,Oe.of)(Object.assign(Object.assign({},y),{guardsResult:!0})):function hi(w,v,y,I){return(0,ue.D)(w).pipe((0,dt.z)(x=>function gr(w,v,y,I,x){const O=v&&v.routeConfig?v.routeConfig.canDeactivate:null;if(!O||0===O.length)return(0,Oe.of)(!0);const B=O.map($=>{const ce=as($,v,x);let Xe;if(function Tn(w){return w&&Mr(w.canDeactivate)}(ce))Xe=jn(ce.canDeactivate(w,v,y,I));else{if(!Mr(ce))throw new Error("Invalid CanDeactivate guard");Xe=jn(ce(w,v,y,I))}return Xe.pipe(yr())});return(0,Oe.of)(B).pipe(Ko())}(x.component,x.route,y,v,I)),yr(x=>!0!==x,!0))}(B,I,x,w).pipe((0,dt.z)($=>$&&function Ga(w){return"boolean"==typeof w}($)?function Yn(w,v,y,I){return(0,ue.D)(v).pipe((0,ze.b)(x=>(0,Tt.z)(function Xo(w,v){return null!==w&&v&&v(new Y(w)),(0,Oe.of)(!0)}(x.route.parent,I),function As(w,v){return null!==w&&v&&v(new Ee(w)),(0,Oe.of)(!0)}(x.route,I),function ls(w,v,y){const I=v[v.length-1],O=v.slice(0,v.length-1).reverse().map(B=>function Jo(w){const v=w.routeConfig?w.routeConfig.canActivateChild:null;return v&&0!==v.length?{node:w,guards:v}:null}(B)).filter(B=>null!==B).map(B=>Pe(()=>{const $=B.guards.map(ce=>{const Xe=as(ce,B.node,y);let Rt;if(function Jl(w){return w&&Mr(w.canActivateChild)}(Xe))Rt=jn(Xe.canActivateChild(I,w));else{if(!Mr(Xe))throw new Error("Invalid CanActivateChild guard");Rt=jn(Xe(I,w))}return Rt.pipe(yr())});return(0,Oe.of)($).pipe(Ko())}));return(0,Oe.of)(O).pipe(Ko())}(w,x.path,y),function Xs(w,v,y){const I=v.routeConfig?v.routeConfig.canActivate:null;if(!I||0===I.length)return(0,Oe.of)(!0);const x=I.map(O=>Pe(()=>{const B=as(O,v,y);let $;if(function kc(w){return w&&Mr(w.canActivate)}(B))$=jn(B.canActivate(v,w));else{if(!Mr(B))throw new Error("Invalid CanActivate guard");$=jn(B(v,w))}return $.pipe(yr())}));return(0,Oe.of)(x).pipe(Ko())}(w,x.route,y))),yr(x=>!0!==x,!0))}(I,O,w,v):(0,Oe.of)($)),(0,se.U)($=>Object.assign(Object.assign({},y),{guardsResult:$})))})}(this.ngModule.injector,$=>this.triggerEvent($)),(0,_n.b)($=>{if(Di($.guardsResult)){const Xe=qn(`Redirecting to "${this.serializeUrl($.guardsResult)}"`);throw Xe.url=$.guardsResult,Xe}const ce=new Rr($.id,this.serializeUrl($.extractedUrl),this.serializeUrl($.urlAfterRedirects),$.targetSnapshot,!!$.guardsResult);this.triggerEvent(ce)}),(0,Ue.h)($=>!!$.guardsResult||(this.restoreHistory($),this.cancelNavigationTransition($,""),!1)),Nn($=>{if($.guards.canActivateChecks.length)return(0,Oe.of)($).pipe((0,_n.b)(ce=>{const Xe=new go(ce.id,this.serializeUrl(ce.extractedUrl),this.serializeUrl(ce.urlAfterRedirects),ce.targetSnapshot);this.triggerEvent(Xe)}),(0,Z.w)(ce=>{let Xe=!1;return(0,Oe.of)(ce).pipe(function wo(w,v){return(0,dt.z)(y=>{const{targetSnapshot:I,guards:{canActivateChecks:x}}=y;if(!x.length)return(0,Oe.of)(y);let O=0;return(0,ue.D)(x).pipe((0,ze.b)(B=>function ff(w,v,y,I){return function pf(w,v,y,I){const x=wr(w);if(0===x.length)return(0,Oe.of)({});const O={};return(0,ue.D)(x).pipe((0,dt.z)(B=>function Ss(w,v,y,I){const x=as(w,v,I);return jn(x.resolve?x.resolve(v,y):x(v,y))}(w[B],v,y,I).pipe((0,_n.b)($=>{O[B]=$}))),It(1),(0,dt.z)(()=>wr(O).length===x.length?(0,Oe.of)(O):ne.E))}(w._resolve,w,v,I).pipe((0,se.U)(O=>(w._resolvedData=O,w.data=Object.assign(Object.assign({},w.data),$o(w,y).resolve),null)))}(B.route,I,w,v)),(0,_n.b)(()=>O++),It(1),(0,dt.z)(B=>O===x.length?(0,Oe.of)(y):ne.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,_n.b)({next:()=>Xe=!0,complete:()=>{Xe||(this.restoreHistory(ce),this.cancelNavigationTransition(ce,"At least one route resolver didn't emit any value."))}}))}),(0,_n.b)(ce=>{const Xe=new Ua(ce.id,this.serializeUrl(ce.extractedUrl),this.serializeUrl(ce.urlAfterRedirects),ce.targetSnapshot);this.triggerEvent(Xe)}))}),Nn($=>{const{targetSnapshot:ce,id:Xe,extractedUrl:Rt,rawUrl:tt,extras:{skipLocationChange:fn,replaceUrl:on}}=$;return this.hooks.afterPreactivation(ce,{navigationId:Xe,appliedUrlTree:Rt,rawUrlTree:tt,skipLocationChange:!!fn,replaceUrl:!!on})}),(0,se.U)($=>{const ce=function tf(w,v,y){const I=Go(w,v._root,y?y._root:void 0);return new Ho(I,v)}(this.routeReuseStrategy,$.targetSnapshot,$.currentRouterState);return Object.assign(Object.assign({},$),{targetRouterState:ce})}),(0,_n.b)($=>{this.currentUrlTree=$.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge($.urlAfterRedirects,$.rawUrl),this.routerState=$.targetRouterState,"deferred"===this.urlUpdateStrategy&&($.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,$),this.browserUrlTree=$.urlAfterRedirects)}),((w,v,y)=>(0,se.U)(I=>(new cf(v,I.targetRouterState,I.currentRouterState,y).activate(w),I)))(this.rootContexts,this.routeReuseStrategy,$=>this.triggerEvent($)),(0,_n.b)({next(){O=!0},complete(){O=!0}}),function Se(w){return(0,pe.e)((v,y)=>{try{v.subscribe(y)}finally{y.add(w)}})}(()=>{var $;O||B||this.cancelNavigationTransition(x,`Navigation ID ${x.id} is not equal to the current navigation id ${this.navigationId}`),(null===($=this.currentNavigation)||void 0===$?void 0:$.id)===x.id&&(this.currentNavigation=null)}),oe($=>{if(B=!0,function sr(w){return w&&w[dr]}($)){const ce=Di($.url);ce||(this.navigated=!0,this.restoreHistory(x,!0));const Xe=new es(x.id,this.serializeUrl(x.extractedUrl),$.message);I.next(Xe),ce?setTimeout(()=>{const Rt=this.urlHandlingStrategy.merge($.url,this.rawUrlTree),tt={skipLocationChange:x.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Qc(x.source)};this.scheduleNavigation(Rt,"imperative",null,tt,{resolve:x.resolve,reject:x.reject,promise:x.promise})},0):x.resolve(!1)}else{this.restoreHistory(x,!0);const ce=new wt(x.id,this.serializeUrl(x.extractedUrl),$);I.next(ce);try{x.resolve(this.errorHandler($))}catch(Xe){x.reject(Xe)}}return ne.E}))}))}resetRootComponentType(y){this.rootComponentType=y,this.routerState.root.component=this.rootComponentType}setTransition(y){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),y))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(y=>{const I="popstate"===y.type?"popstate":"hashchange";"popstate"===I&&setTimeout(()=>{var x;const O={replaceUrl:!0},B=(null===(x=y.state)||void 0===x?void 0:x.navigationId)?y.state:null;if(B){const ce=Object.assign({},B);delete ce.navigationId,delete ce.\u0275routerPageId,0!==Object.keys(ce).length&&(O.state=ce)}const $=this.parseUrl(y.url);this.scheduleNavigation($,I,B,O)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(y){this.events.next(y)}resetConfig(y){S(y),this.config=y.map(F),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(y,I={}){const{relativeTo:x,queryParams:O,fragment:B,queryParamsHandling:$,preserveFragment:ce}=I,Xe=x||this.routerState.root,Rt=ce?this.currentUrlTree.fragment:B;let tt=null;switch($){case"merge":tt=Object.assign(Object.assign({},this.currentUrlTree.queryParams),O);break;case"preserve":tt=this.currentUrlTree.queryParams;break;default:tt=O||null}return null!==tt&&(tt=this.removeEmptyProps(tt)),function sf(w,v,y,I,x){if(0===y.length)return Ql(v.root,v.root,v.root,I,x);const O=function of(w){if("string"==typeof w[0]&&1===w.length&&"/"===w[0])return new Rc(!0,0,w);let v=0,y=!1;const I=w.reduce((x,O,B)=>{if("object"==typeof O&&null!=O){if(O.outlets){const $={};return Yt(O.outlets,(ce,Xe)=>{$[Xe]="string"==typeof ce?ce.split("/"):ce}),[...x,{outlets:$}]}if(O.segmentPath)return[...x,O.segmentPath]}return"string"!=typeof O?[...x,O]:0===B?(O.split("/").forEach(($,ce)=>{0==ce&&"."===$||(0==ce&&""===$?y=!0:".."===$?v++:""!=$&&x.push($))}),x):[...x,O]},[]);return new Rc(y,v,I)}(y);if(O.toRoot())return Ql(v.root,v.root,new He([],{}),I,x);const B=function af(w,v,y){if(w.isAbsolute)return new Zl(v.root,!0,0);if(-1===y.snapshot._lastPathIndex){const O=y.snapshot._urlSegment;return new Zl(O,O===v.root,0)}const I=Ha(w.commands[0])?0:1;return function zo(w,v,y){let I=w,x=v,O=y;for(;O>x;){if(O-=x,I=I.parent,!I)throw new Error("Invalid number of '../'");x=I.segments.length}return new Zl(I,!1,x-O)}(y.snapshot._urlSegment,y.snapshot._lastPathIndex+I,w.numberOfDoubleDots)}(O,v,w),$=B.processChildren?Ds(B.segmentGroup,B.index,O.commands):Is(B.segmentGroup,B.index,O.commands);return Ql(v.root,B.segmentGroup,$,I,x)}(Xe,this.currentUrlTree,y,tt,null!=Rt?Rt:null)}navigateByUrl(y,I={skipLocationChange:!1}){const x=Di(y)?y:this.parseUrl(y),O=this.urlHandlingStrategy.merge(x,this.rawUrlTree);return this.scheduleNavigation(O,"imperative",null,I)}navigate(y,I={skipLocationChange:!1}){return function Xa(w){for(let v=0;v<w.length;v++){const y=w[v];if(null==y)throw new Error(`The requested path contains ${y} segment at index ${v}`)}}(y),this.navigateByUrl(this.createUrlTree(y,I),I)}serializeUrl(y){return this.urlSerializer.serialize(y)}parseUrl(y){let I;try{I=this.urlSerializer.parse(y)}catch(x){I=this.malformedUriErrorHandler(x,this.urlSerializer,y)}return I}isActive(y,I){let x;if(x=!0===I?Object.assign({},nu):!1===I?Object.assign({},Yc):I,Di(y))return mo(this.currentUrlTree,y,x);const O=this.parseUrl(y);return mo(this.currentUrlTree,O,x)}removeEmptyProps(y){return Object.keys(y).reduce((I,x)=>{const O=y[x];return null!=O&&(I[x]=O),I},{})}processNavigations(){this.navigations.subscribe(y=>{this.navigated=!0,this.lastSuccessfulId=y.id,this.currentPageId=y.targetPageId,this.events.next(new Bn(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,y.resolve(!0)},y=>{this.console.warn(`Unhandled Navigation Error: ${y}`)})}scheduleNavigation(y,I,x,O,B){var $,ce;if(this.disposed)return Promise.resolve(!1);let Xe,Rt,tt;B?(Xe=B.resolve,Rt=B.reject,tt=B.promise):tt=new Promise((jt,Lt)=>{Xe=jt,Rt=Lt});const fn=++this.navigationId;let on;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(x=this.location.getState()),on=x&&x.\u0275routerPageId?x.\u0275routerPageId:O.replaceUrl||O.skipLocationChange?null!==($=this.browserPageId)&&void 0!==$?$:0:(null!==(ce=this.browserPageId)&&void 0!==ce?ce:0)+1):on=0,this.setTransition({id:fn,targetPageId:on,source:I,restoredState:x,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:y,extras:O,resolve:Xe,reject:Rt,promise:tt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),tt.catch(jt=>Promise.reject(jt))}setBrowserUrl(y,I){const x=this.urlSerializer.serialize(y),O=Object.assign(Object.assign({},I.extras.state),this.generateNgRouterState(I.id,I.targetPageId));this.location.isCurrentPathEqualTo(x)||I.extras.replaceUrl?this.location.replaceState(x,"",O):this.location.go(x,"",O)}restoreHistory(y,I=!1){var x,O;if("computed"===this.canceledNavigationResolution){const B=this.currentPageId-y.targetPageId;"popstate"!==y.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(x=this.currentNavigation)||void 0===x?void 0:x.finalUrl)||0===B?this.currentUrlTree===(null===(O=this.currentNavigation)||void 0===O?void 0:O.finalUrl)&&0===B&&(this.resetState(y),this.browserUrlTree=y.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(B)}else"replace"===this.canceledNavigationResolution&&(I&&this.resetState(y),this.resetUrlToCurrentUrlTree())}resetState(y){this.routerState=y.currentRouterState,this.currentUrlTree=y.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,y.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(y,I){const x=new es(y.id,this.serializeUrl(y.extractedUrl),I);this.triggerEvent(x),y.resolve(!1)}generateNgRouterState(y,I){return"computed"===this.canceledNavigationResolution?{navigationId:y,\u0275routerPageId:I}:{navigationId:y}}}return w.\u0275fac=function(y){T.$Z()},w.\u0275prov=T.Yz7({token:w,factory:w.\u0275fac}),w})();function Qc(w){return"imperative"!==w}let ru=(()=>{class w{constructor(y,I,x,O,B){this.router=y,this.route=I,this.tabIndexAttribute=x,this.renderer=O,this.el=B,this.commands=null,this.onChanges=new _.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(y){if(null!=this.tabIndexAttribute)return;const I=this.renderer,x=this.el.nativeElement;null!==y?I.setAttribute(x,"tabindex",y):I.removeAttribute(x,"tabindex")}ngOnChanges(y){this.onChanges.next(this)}set routerLink(y){null!=y?(this.commands=Array.isArray(y)?y:[y],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const y={skipLocationChange:to(this.skipLocationChange),replaceUrl:to(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,y),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:to(this.preserveFragment)})}}return w.\u0275fac=function(y){return new(y||w)(T.Y36(Qn),T.Y36(ss),T.$8M("tabindex"),T.Y36(T.Qsj),T.Y36(T.SBq))},w.\u0275dir=T.lG2({type:w,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(y,I){1&y&&T.NdJ("click",function(){return I.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[T.TTD]}),w})(),eo=(()=>{class w{constructor(y,I,x){this.router=y,this.route=I,this.locationStrategy=x,this.commands=null,this.href=null,this.onChanges=new _.x,this.subscription=y.events.subscribe(O=>{O instanceof Bn&&this.updateTargetUrlAndHref()})}set routerLink(y){this.commands=null!=y?Array.isArray(y)?y:[y]:null}ngOnChanges(y){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(y,I,x,O,B){if(0!==y||I||x||O||B||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const $={skipLocationChange:to(this.skipLocationChange),replaceUrl:to(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,$),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:to(this.preserveFragment)})}}return w.\u0275fac=function(y){return new(y||w)(T.Y36(Qn),T.Y36(ss),T.Y36(En.S$))},w.\u0275dir=T.lG2({type:w,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(y,I){1&y&&T.NdJ("click",function(O){return I.onClick(O.button,O.ctrlKey,O.shiftKey,O.altKey,O.metaKey)}),2&y&&T.uIk("target",I.target)("href",I.href,T.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[T.TTD]}),w})();function to(w){return""===w||!!w}class vf{}class el{preload(v,y){return(0,Oe.of)(null)}}let Zc=(()=>{class w{constructor(y,I,x,O){this.router=y,this.injector=x,this.preloadingStrategy=O,this.loader=new qc(x,I,ce=>y.triggerEvent(new be(ce)),ce=>y.triggerEvent(new z(ce)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Ue.h)(y=>y instanceof Bn),(0,ze.b)(()=>this.preload())).subscribe(()=>{})}preload(){const y=this.injector.get(T.h0i);return this.processRoutes(y,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(y,I){const x=[];for(const O of I)if(O.loadChildren&&!O.canLoad&&O._loadedConfig){const B=O._loadedConfig;x.push(this.processRoutes(B.module,B.routes))}else O.loadChildren&&!O.canLoad?x.push(this.preloadConfig(y,O)):O.children&&x.push(this.processRoutes(y,O.children));return(0,ue.D)(x).pipe((0,An.J)(),(0,se.U)(O=>{}))}preloadConfig(y,I){return this.preloadingStrategy.preload(I,()=>(I._loadedConfig?(0,Oe.of)(I._loadedConfig):this.loader.load(y.injector,I)).pipe((0,dt.z)(O=>(I._loadedConfig=O,this.processRoutes(O.module,O.routes)))))}}return w.\u0275fac=function(y){return new(y||w)(T.LFG(Qn),T.LFG(T.Sil),T.LFG(T.zs3),T.LFG(vf))},w.\u0275prov=T.Yz7({token:w,factory:w.\u0275fac}),w})(),tl=(()=>{class w{constructor(y,I,x={}){this.router=y,this.viewportScroller=I,this.options=x,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},x.scrollPositionRestoration=x.scrollPositionRestoration||"disabled",x.anchorScrolling=x.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(y=>{y instanceof Jn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=y.navigationTrigger,this.restoredId=y.restoredState?y.restoredState.navigationId:0):y instanceof Bn&&(this.lastId=y.id,this.scheduleScrollEvent(y,this.router.parseUrl(y.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(y=>{y instanceof Je&&(y.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(y.position):y.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(y.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(y,I){this.router.triggerEvent(new Je(y,"popstate"===this.lastSource?this.store[this.restoredId]:null,I))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return w.\u0275fac=function(y){T.$Z()},w.\u0275prov=T.Yz7({token:w,factory:w.\u0275fac}),w})();const xs=new T.OlP("ROUTER_CONFIGURATION"),iu=new T.OlP("ROUTER_FORROOT_GUARD"),ra=[En.Ye,{provide:Cs,useClass:Bi},{provide:Qn,useFactory:function nl(w,v,y,I,x,O,B={},$,ce){const Xe=new Qn(null,w,v,y,I,x,Rn(O));return $&&(Xe.urlHandlingStrategy=$),ce&&(Xe.routeReuseStrategy=ce),function oa(w,v){w.errorHandler&&(v.errorHandler=w.errorHandler),w.malformedUriErrorHandler&&(v.malformedUriErrorHandler=w.malformedUriErrorHandler),w.onSameUrlNavigation&&(v.onSameUrlNavigation=w.onSameUrlNavigation),w.paramsInheritanceStrategy&&(v.paramsInheritanceStrategy=w.paramsInheritanceStrategy),w.relativeLinkResolution&&(v.relativeLinkResolution=w.relativeLinkResolution),w.urlUpdateStrategy&&(v.urlUpdateStrategy=w.urlUpdateStrategy),w.canceledNavigationResolution&&(v.canceledNavigationResolution=w.canceledNavigationResolution)}(B,Xe),B.enableTracing&&Xe.events.subscribe(Rt=>{var tt,fn;null===(tt=console.group)||void 0===tt||tt.call(console,`Router Event: ${Rt.constructor.name}`),console.log(Rt.toString()),console.log(Rt),null===(fn=console.groupEnd)||void 0===fn||fn.call(console)}),Xe},deps:[Cs,Zs,En.Ye,T.zs3,T.Sil,Xl,xs,[class Kc{},new T.FiY],[class gf{},new T.FiY]]},Zs,{provide:ss,useFactory:function Ef(w){return w.routerState.root},deps:[Qn]},Zc,el,class OE{preload(v,y){return y().pipe(oe(()=>(0,Oe.of)(null)))}},{provide:xs,useValue:{enableTracing:!1}}];function mm(){return new T.PXZ("Router",Qn)}let ia=(()=>{class w{constructor(y,I){}static forRoot(y,I){return{ngModule:w,providers:[ra,Xc(y),{provide:iu,useFactory:RE,deps:[[Qn,new T.FiY,new T.tp0]]},{provide:xs,useValue:I||{}},{provide:En.S$,useFactory:sa,deps:[En.lw,[new T.tBr(En.mr),new T.FiY],xs]},{provide:tl,useFactory:us,deps:[Qn,En.EM,xs]},{provide:vf,useExisting:I&&I.preloadingStrategy?I.preloadingStrategy:el},{provide:T.PXZ,multi:!0,useFactory:mm},[Co,{provide:T.ip1,multi:!0,useFactory:ed,deps:[Co]},{provide:rl,useFactory:td,deps:[Co]},{provide:T.tb,multi:!0,useExisting:rl}]]}}static forChild(y){return{ngModule:w,providers:[Xc(y)]}}}return w.\u0275fac=function(y){return new(y||w)(T.LFG(iu,8),T.LFG(Qn,8))},w.\u0275mod=T.oAB({type:w}),w.\u0275inj=T.cJS({}),w})();function us(w,v,y){return y.scrollOffset&&v.setOffset(y.scrollOffset),new tl(w,v,y)}function sa(w,v,y={}){return y.useHash?new En.Do(w,v):new En.b0(w,v)}function RE(w){return"guarded"}function Xc(w){return[{provide:T.deG,multi:!0,useValue:w},{provide:Xl,multi:!0,useValue:w}]}let Co=(()=>{class w{constructor(y){this.injector=y,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new _.x}appInitializer(){return this.injector.get(En.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let I=null;const x=new Promise($=>I=$),O=this.injector.get(Qn),B=this.injector.get(xs);return"disabled"===B.initialNavigation?(O.setUpLocationChangeListener(),I(!0)):"enabled"===B.initialNavigation||"enabledBlocking"===B.initialNavigation?(O.hooks.afterPreactivation=()=>this.initNavigation?(0,Oe.of)(null):(this.initNavigation=!0,I(!0),this.resultOfPreactivationDone),O.initialNavigation()):I(!0),x})}bootstrapListener(y){const I=this.injector.get(xs),x=this.injector.get(Zc),O=this.injector.get(tl),B=this.injector.get(Qn),$=this.injector.get(T.z2F);y===$.components[0]&&(("enabledNonBlocking"===I.initialNavigation||void 0===I.initialNavigation)&&B.initialNavigation(),x.setUpPreloading(),O.init(),B.resetRootComponentType($.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return w.\u0275fac=function(y){return new(y||w)(T.LFG(T.zs3))},w.\u0275prov=T.Yz7({token:w,factory:w.\u0275fac}),w})();function ed(w){return w.appInitializer.bind(w)}function td(w){return w.bootstrapListener.bind(w)}const rl=new T.OlP("Router Initializer")},2290:(rt,ve,L)=>{L.d(ve,{Rh:()=>an,_W:()=>oe});var T=L(5e3),_=L(1777),fe=L(7579),me=L(9808),k=L(2313);const ue=["toast-component",""];function K(Se,se){if(1&Se){const Z=T.EpF();T.TgZ(0,"button",5),T.NdJ("click",function(){return T.CHM(Z),T.oxw().remove()}),T.TgZ(1,"span",6),T._uU(2,"\xd7"),T.qZA()()}}function Ce(Se,se){if(1&Se&&(T.ynx(0),T._uU(1),T.BQk()),2&Se){const Z=T.oxw(2);T.xp6(1),T.hij("[",Z.duplicatesCount+1,"]")}}function Fe(Se,se){if(1&Se&&(T.TgZ(0,"div"),T._uU(1),T.YNc(2,Ce,2,1,"ng-container",4),T.qZA()),2&Se){const Z=T.oxw();T.Tol(Z.options.titleClass),T.uIk("aria-label",Z.title),T.xp6(1),T.hij(" ",Z.title," "),T.xp6(1),T.Q6J("ngIf",Z.duplicatesCount)}}function Te(Se,se){if(1&Se&&T._UZ(0,"div",7),2&Se){const Z=T.oxw();T.Tol(Z.options.messageClass),T.Q6J("innerHTML",Z.message,T.oJD)}}function ae(Se,se){if(1&Se&&(T.TgZ(0,"div",8),T._uU(1),T.qZA()),2&Se){const Z=T.oxw();T.Tol(Z.options.messageClass),T.uIk("aria-label",Z.message),T.xp6(1),T.hij(" ",Z.message," ")}}function Ie(Se,se){if(1&Se&&(T.TgZ(0,"div"),T._UZ(1,"div",9),T.qZA()),2&Se){const Z=T.oxw();T.xp6(1),T.Udp("width",Z.width+"%")}}function ht(Se,se){if(1&Se){const Z=T.EpF();T.TgZ(0,"button",5),T.NdJ("click",function(){return T.CHM(Z),T.oxw().remove()}),T.TgZ(1,"span",6),T._uU(2,"\xd7"),T.qZA()()}}function Ve(Se,se){if(1&Se&&(T.ynx(0),T._uU(1),T.BQk()),2&Se){const Z=T.oxw(2);T.xp6(1),T.hij("[",Z.duplicatesCount+1,"]")}}function $e(Se,se){if(1&Se&&(T.TgZ(0,"div"),T._uU(1),T.YNc(2,Ve,2,1,"ng-container",4),T.qZA()),2&Se){const Z=T.oxw();T.Tol(Z.options.titleClass),T.uIk("aria-label",Z.title),T.xp6(1),T.hij(" ",Z.title," "),T.xp6(1),T.Q6J("ngIf",Z.duplicatesCount)}}function nt(Se,se){if(1&Se&&T._UZ(0,"div",7),2&Se){const Z=T.oxw();T.Tol(Z.options.messageClass),T.Q6J("innerHTML",Z.message,T.oJD)}}function De(Se,se){if(1&Se&&(T.TgZ(0,"div",8),T._uU(1),T.qZA()),2&Se){const Z=T.oxw();T.Tol(Z.options.messageClass),T.uIk("aria-label",Z.message),T.xp6(1),T.hij(" ",Z.message," ")}}function st(Se,se){if(1&Se&&(T.TgZ(0,"div"),T._UZ(1,"div",9),T.qZA()),2&Se){const Z=T.oxw();T.xp6(1),T.Udp("width",Z.width+"%")}}class Pe{constructor(se,Z){this.component=se,this.injector=Z}attach(se,Z){return this._attachedHost=se,se.attach(this,Z)}detach(){const se=this._attachedHost;if(se)return this._attachedHost=void 0,se.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(se){this._attachedHost=se}}class pe{constructor(se,Z,le,ze,dt,_n){this.toastId=se,this.config=Z,this.message=le,this.title=ze,this.toastType=dt,this.toastRef=_n,this._onTap=new fe.x,this._onAction=new fe.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(se){this._onAction.next(se)}onAction(){return this._onAction.asObservable()}}const We={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null},gt=new T.OlP("ToastConfig");class Oe{constructor(se){this._overlayRef=se,this.duplicatesCount=0,this._afterClosed=new fe.x,this._activate=new fe.x,this._manualClose=new fe.x,this._resetTimeout=new fe.x,this._countDuplicate=new fe.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(se,Z){se&&this._resetTimeout.next(),Z&&this._countDuplicate.next(++this.duplicatesCount)}}class Tt{constructor(se,Z){this._toastPackage=se,this._parentInjector=Z}get(se,Z,le){return se===pe?this._toastPackage:this._parentInjector.get(se,Z,le)}}class ne extends class J{attach(se,Z){return this._attachedPortal=se,this.attachComponentPortal(se,Z)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(se){this._disposeFn=se}}{constructor(se,Z,le){super(),this._hostDomElement=se,this._componentFactoryResolver=Z,this._appRef=le}attachComponentPortal(se,Z){const le=this._componentFactoryResolver.resolveComponentFactory(se.component);let ze;return ze=le.create(se.injector),this._appRef.attachView(ze.hostView),this.setDisposeFn(()=>{this._appRef.detachView(ze.hostView),ze.destroy()}),Z?this._hostDomElement.insertBefore(this._getComponentRootNode(ze),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(ze)),ze}_getComponentRootNode(se){return se.hostView.rootNodes[0]}}class ie{constructor(se){this._portalHost=se}attach(se,Z=!0){return this._portalHost.attach(se,Z)}detach(){return this._portalHost.detach()}}let de=(()=>{class Se{constructor(Z){this._document=Z}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const Z=this._document.createElement("div");Z.classList.add("overlay-container"),Z.setAttribute("aria-live","polite"),this._document.body.appendChild(Z),this._containerElement=Z}}return Se.\u0275fac=function(Z){return new(Z||Se)(T.LFG(me.K0))},Se.\u0275prov=T.Yz7({token:Se,factory:Se.\u0275fac,providedIn:"root"}),Se})(),_e=(()=>{class Se{constructor(Z,le,ze,dt){this._overlayContainer=Z,this._componentFactoryResolver=le,this._appRef=ze,this._document=dt,this._paneElements=new Map}create(Z,le){return this._createOverlayRef(this.getPaneElement(Z,le))}getPaneElement(Z="",le){return this._paneElements.get(le)||this._paneElements.set(le,{}),this._paneElements.get(le)[Z]||(this._paneElements.get(le)[Z]=this._createPaneElement(Z,le)),this._paneElements.get(le)[Z]}_createPaneElement(Z,le){const ze=this._document.createElement("div");return ze.id="toast-container",ze.classList.add(Z),ze.classList.add("toast-container"),le?le.getContainerElement().appendChild(ze):this._overlayContainer.getContainerElement().appendChild(ze),ze}_createPortalHost(Z){return new ne(Z,this._componentFactoryResolver,this._appRef)}_createOverlayRef(Z){return new ie(this._createPortalHost(Z))}}return Se.\u0275fac=function(Z){return new(Z||Se)(T.LFG(de),T.LFG(T._Vd),T.LFG(T.z2F),T.LFG(me.K0))},Se.\u0275prov=T.Yz7({token:Se,factory:Se.\u0275fac,providedIn:"root"}),Se})(),oe=(()=>{class Se{constructor(Z,le,ze,dt,_n){this.overlay=le,this._injector=ze,this.sanitizer=dt,this.ngZone=_n,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},Z.default),Z.config),Z.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},Z.default.iconClasses),Z.config.iconClasses))}show(Z,le,ze={},dt=""){return this._preBuildNotification(dt,Z,le,this.applyConfig(ze))}success(Z,le,ze={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",Z,le,this.applyConfig(ze))}error(Z,le,ze={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",Z,le,this.applyConfig(ze))}info(Z,le,ze={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",Z,le,this.applyConfig(ze))}warning(Z,le,ze={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",Z,le,this.applyConfig(ze))}clear(Z){for(const le of this.toasts)if(void 0!==Z){if(le.toastId===Z)return void le.toastRef.manualClose()}else le.toastRef.manualClose()}remove(Z){const le=this._findToast(Z);if(!le||(le.activeToast.toastRef.close(),this.toasts.splice(le.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const ze=this.toasts[this.currentlyActive].toastRef;ze.isInactive()||(this.currentlyActive=this.currentlyActive+1,ze.activate())}return!0}findDuplicate(Z="",le="",ze,dt){const{includeTitleDuplicates:_n}=this.toastrConfig;for(const An of this.toasts){const En=_n&&An.title===Z;if((!_n||En)&&An.message===le)return An.toastRef.onDuplicate(ze,dt),An}return null}applyConfig(Z={}){return Object.assign(Object.assign({},this.toastrConfig),Z)}_findToast(Z){for(let le=0;le<this.toasts.length;le++)if(this.toasts[le].toastId===Z)return{index:le,activeToast:this.toasts[le]};return null}_preBuildNotification(Z,le,ze,dt){return dt.onActivateTick?this.ngZone.run(()=>this._buildNotification(Z,le,ze,dt)):this._buildNotification(Z,le,ze,dt)}_buildNotification(Z,le,ze,dt){if(!dt.toastComponent)throw new Error("toastComponent required");const _n=this.findDuplicate(ze,le,this.toastrConfig.resetTimeoutOnDuplicate&&dt.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&ze||le)&&this.toastrConfig.preventDuplicates&&null!==_n)return _n;this.previousToastMessage=le;let An=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(An=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const En=this.overlay.create(dt.positionClass,this.overlayContainer);this.index=this.index+1;let On=le;le&&dt.enableHtml&&(On=this.sanitizer.sanitize(T.q3G.HTML,le));const Jn=new Oe(En),Bn=new pe(this.index,dt,On,ze,Z,Jn),es=new Tt(Bn,this._injector),wt=new Pe(dt.toastComponent,es),ui=En.attach(wt,this.toastrConfig.newestOnTop);Jn.componentInstance=ui.instance;const Xn={toastId:this.index,title:ze||"",message:le||"",toastRef:Jn,onShown:Jn.afterActivate(),onHidden:Jn.afterClosed(),onTap:Bn.onTap(),onAction:Bn.onAction(),portal:ui};return An||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{Xn.toastRef.activate()})),this.toasts.push(Xn),Xn}}return Se.\u0275fac=function(Z){return new(Z||Se)(T.LFG(gt),T.LFG(_e),T.LFG(T.zs3),T.LFG(k.H7),T.LFG(T.R0b))},Se.\u0275prov=T.Yz7({token:Se,factory:Se.\u0275fac,providedIn:"root"}),Se})(),Ue=(()=>{class Se{constructor(Z,le,ze){this.toastrService=Z,this.toastPackage=le,this.ngZone=ze,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=le.message,this.title=le.title,this.options=le.config,this.originalTimeout=le.config.timeOut,this.toastClasses=`${le.toastType} ${le.config.toastClass}`,this.sub=le.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=le.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=le.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=le.toastRef.countDuplicate().subscribe(dt=>{this.duplicatesCount=dt})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const Z=(new Date).getTime();this.width=(this.hideTime-Z)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(Z,le){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(Z),le)):this.timeout=setTimeout(()=>Z(),le)}outsideInterval(Z,le){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(Z),le)):this.intervalId=setInterval(()=>Z(),le)}runInsideAngular(Z){this.ngZone?this.ngZone.run(()=>Z()):Z()}}return Se.\u0275fac=function(Z){return new(Z||Se)(T.Y36(oe),T.Y36(pe),T.Y36(T.R0b))},Se.\u0275cmp=T.Xpm({type:Se,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(Z,le){1&Z&&T.NdJ("click",function(){return le.tapToast()})("mouseenter",function(){return le.stickAround()})("mouseleave",function(){return le.delayedHideToast()}),2&Z&&(T.d8E("@flyInOut",le.state),T.Tol(le.toastClasses),T.Udp("display",le.displayStyle))},attrs:ue,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(Z,le){1&Z&&(T.YNc(0,K,3,0,"button",0),T.YNc(1,Fe,3,5,"div",1),T.YNc(2,Te,1,3,"div",2),T.YNc(3,ae,2,4,"div",3),T.YNc(4,Ie,2,2,"div",4)),2&Z&&(T.Q6J("ngIf",le.options.closeButton),T.xp6(1),T.Q6J("ngIf",le.title),T.xp6(1),T.Q6J("ngIf",le.message&&le.options.enableHtml),T.xp6(1),T.Q6J("ngIf",le.message&&!le.options.enableHtml),T.xp6(1),T.Q6J("ngIf",le.options.progressBar))},directives:[me.O5],encapsulation:2,data:{animation:[(0,_.X$)("flyInOut",[(0,_.SB)("inactive",(0,_.oB)({opacity:0})),(0,_.SB)("active",(0,_.oB)({opacity:1})),(0,_.SB)("removed",(0,_.oB)({opacity:0})),(0,_.eR)("inactive => active",(0,_.jt)("{{ easeTime }}ms {{ easing }}")),(0,_.eR)("active => removed",(0,_.jt)("{{ easeTime }}ms {{ easing }}"))])]}}),Se})();const It=Object.assign(Object.assign({},We),{toastComponent:Ue});let an=(()=>{class Se{static forRoot(Z={}){return{ngModule:Se,providers:[{provide:gt,useValue:{default:It,config:Z}}]}}}return Se.\u0275fac=function(Z){return new(Z||Se)},Se.\u0275mod=T.oAB({type:Se}),Se.\u0275inj=T.cJS({imports:[[me.ez]]}),Se})(),Ge=(()=>{class Se{constructor(Z,le,ze){this.toastrService=Z,this.toastPackage=le,this.appRef=ze,this.width=-1,this.toastClasses="",this.state="inactive",this.message=le.message,this.title=le.title,this.options=le.config,this.originalTimeout=le.config.timeOut,this.toastClasses=`${le.toastType} ${le.config.toastClass}`,this.sub=le.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=le.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=le.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=le.toastRef.countDuplicate().subscribe(dt=>{this.duplicatesCount=dt})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(!0===this.options.disableTimeOut||"timeOut"===this.options.disableTimeOut)&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const Z=(new Date).getTime();this.width=(this.hideTime-Z)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}return Se.\u0275fac=function(Z){return new(Z||Se)(T.Y36(oe),T.Y36(pe),T.Y36(T.z2F))},Se.\u0275cmp=T.Xpm({type:Se,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(Z,le){1&Z&&T.NdJ("click",function(){return le.tapToast()})("mouseenter",function(){return le.stickAround()})("mouseleave",function(){return le.delayedHideToast()}),2&Z&&(T.Tol(le.toastClasses),T.Udp("display",le.displayStyle))},attrs:ue,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(Z,le){1&Z&&(T.YNc(0,ht,3,0,"button",0),T.YNc(1,$e,3,5,"div",1),T.YNc(2,nt,1,3,"div",2),T.YNc(3,De,2,4,"div",3),T.YNc(4,st,2,2,"div",4)),2&Z&&(T.Q6J("ngIf",le.options.closeButton),T.xp6(1),T.Q6J("ngIf",le.title),T.xp6(1),T.Q6J("ngIf",le.message&&le.options.enableHtml),T.xp6(1),T.Q6J("ngIf",le.message&&!le.options.enableHtml),T.xp6(1),T.Q6J("ngIf",le.options.progressBar))},directives:[me.O5],encapsulation:2}),Se})();Object.assign(Object.assign({},We),{toastComponent:Ge})}},rt=>{rt(rt.s=1840)}]);